{
  "version": 3,
  "sources": ["node_modules/obj-case/index.js", "node_modules/segmentio-facade/lib/address.js", "node_modules/inherits/inherits_browser.js", "node_modules/component-type/index.js", "node_modules/@ndhoule/clone/index.js", "node_modules/type-component/index.js", "node_modules/segmentio-facade/lib/utils.js", "node_modules/segmentio-facade/lib/is-enabled.js", "node_modules/@segment/isodate/lib/index.js", "node_modules/new-date/lib/milliseconds.js", "node_modules/new-date/lib/seconds.js", "node_modules/new-date/lib/index.js", "node_modules/@segment/isodate-traverse/lib/index.js", "node_modules/segmentio-facade/lib/facade.js", "node_modules/segmentio-facade/lib/alias.js", "node_modules/is-email/index.js", "node_modules/segmentio-facade/lib/group.js", "node_modules/trim/index.js", "node_modules/segmentio-facade/lib/identify.js", "node_modules/segmentio-facade/lib/track.js", "node_modules/segmentio-facade/lib/page.js", "node_modules/segmentio-facade/lib/screen.js", "node_modules/segmentio-facade/lib/delete.js", "node_modules/segmentio-facade/lib/index.js", "node_modules/component-emitter/index.js", "node_modules/@segment/analytics.js-core/build/middleware.js", "node_modules/component-bind/index.js", "node_modules/bind-all/lib/index.js", "node_modules/@segment/analytics.js-core/build/utils/clone.js", "node_modules/extend/index.js", "node_modules/ms/index.js", "node_modules/debug/src/debug.js", "node_modules/debug/src/browser.js", "node_modules/@segment/cookie/lib/index.js", "node_modules/@ndhoule/drop/index.js", "node_modules/@ndhoule/rest/index.js", "node_modules/@ndhoule/defaults/index.js", "node_modules/component-url/index.js", "node_modules/component-cookie/index.js", "node_modules/@segment/top-domain/lib/index.js", "node_modules/@segment/analytics.js-core/build/cookie.js", "node_modules/json3/lib/json3.js", "node_modules/utf8-encode/index.js", "node_modules/@segment/base64-encode/index.js", "node_modules/has-cors/index.js", "node_modules/jsonp/index.js", "node_modules/@segment/send-json/lib/index.js", "node_modules/@segment/analytics.js-core/build/metrics.js", "node_modules/@ndhoule/keys/index.js", "node_modules/@segment/analytics.js-core/build/utils/each.js", "node_modules/@ndhoule/extend/index.js", "node_modules/@segment/analytics.js-core/build/memory.js", "node_modules/@segment/store/src/store.js", "node_modules/@segment/analytics.js-core/build/store.js", "node_modules/@segment/analytics.js-core/build/entity.js", "node_modules/@segment/analytics.js-core/build/group.js", "node_modules/is/index.js", "node_modules/@segment/is-meta/lib/index.js", "node_modules/next-tick/index.js", "node_modules/@ndhoule/each/index.js", "node_modules/@ndhoule/includes/index.js", "node_modules/@segment/analytics.js-core/build/utils/map.js", "node_modules/uuid/lib/rng-browser.js", "node_modules/uuid/lib/bytesToUuid.js", "node_modules/uuid/v4.js", "node_modules/spark-md5/spark-md5.js", "node_modules/@segment/analytics.js-core/build/normalize.js", "node_modules/component-event/index.js", "node_modules/@segment/canonical/lib/index.js", "node_modules/@segment/analytics.js-core/build/pageDefaults.js", "node_modules/@ndhoule/pick/index.js", "node_modules/@segment/prevent-default/lib/index.js", "node_modules/uuid/v1.js", "node_modules/uuid/index.js", "node_modules/@segment/analytics.js-core/build/user.js", "node_modules/@segment/analytics.js-core/build/analytics.js", "node_modules/@segment/analytics.js-core/build/index.js", "node_modules/component-clone/index.js", "node_modules/@segment/alias/index.js", "node_modules/@segment/convert-dates/lib/index.js", "node_modules/slug-component/index.js", "node_modules/@ndhoule/arity/index.js", "node_modules/@ndhoule/after/index.js", "node_modules/analytics-events/index.js", "node_modules/@ndhoule/every/index.js", "node_modules/@segment/fmt/lib/index.js", "node_modules/@ndhoule/foldl/index.js", "node_modules/script-onload/index.js", "node_modules/load-iframe/index.js", "node_modules/@segment/load-script/index.js", "node_modules/to-no-case/index.js", "node_modules/@segment/analytics.js-integration/lib/protos.js", "node_modules/domify/index.js", "node_modules/@segment/analytics.js-integration/lib/statics.js", "node_modules/@segment/analytics.js-integration/lib/index.js", "node_modules/@segment/analytics.js-integration-customerio/lib/index.js", "node_modules/@segment/to-iso-string/lib/index.js", "node_modules/component-indexof/index.js", "node_modules/@segment/analytics.js-integration-mixpanel/lib/index.js", "node_modules/@ndhoule/values/index.js", "node_modules/@ndhoule/map/index.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/analytics-events/lib/index.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/@segment/analytics.js-integration/node_modules/next-tick/index.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/@segment/analytics.js-integration/lib/protos.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/@segment/analytics.js-integration/lib/statics.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/@segment/analytics.js-integration/lib/index.js", "node_modules/global-queue/index.js", "node_modules/@segment/analytics.js-integration-optimizely/node_modules/next-tick/index.js", "node_modules/@segment/analytics.js-integration-optimizely/lib/index.js", "node_modules/@segment/analytics.js-integration-google-analytics-4/node_modules/analytics-events/lib/index.js", "node_modules/@segment/analytics.js-integration-google-analytics-4/node_modules/@segment/analytics.js-integration/lib/protos.js", "node_modules/@segment/analytics.js-integration-google-analytics-4/node_modules/@segment/analytics.js-integration/lib/statics.js", "node_modules/@segment/analytics.js-integration-google-analytics-4/node_modules/@segment/analytics.js-integration/lib/index.js", "node_modules/reject/index.js", "node_modules/@segment/analytics.js-integration-google-analytics-4/lib/index.js", "node_modules/component-querystring/node_modules/trim/index.js", "node_modules/component-querystring/node_modules/component-type/index.js", "node_modules/component-querystring/index.js", "node_modules/use-https/index.js", "node_modules/@segment/analytics.js-integration-pardot/lib/index.js", "lib/index.js"],
  "sourcesContent": ["\nvar identity = function(_){ return _; };\n\n\n/**\n * Module exports, export\n */\n\nmodule.exports = multiple(find);\nmodule.exports.find = module.exports;\n\n\n/**\n * Export the replacement function, return the modified object\n */\n\nmodule.exports.replace = function (obj, key, val, options) {\n  multiple(replace).call(this, obj, key, val, options);\n  return obj;\n};\n\n\n/**\n * Export the delete function, return the modified object\n */\n\nmodule.exports.del = function (obj, key, options) {\n  multiple(del).call(this, obj, key, null, options);\n  return obj;\n};\n\n\n/**\n * Compose applying the function to a nested key\n */\n\nfunction multiple (fn) {\n  return function (obj, path, val, options) {\n    var normalize = options && isFunction(options.normalizer) ? options.normalizer : defaultNormalize;\n    path = normalize(path);\n\n    var key;\n    var finished = false;\n\n    while (!finished) loop();\n\n    function loop() {\n      for (key in obj) {\n        var normalizedKey = normalize(key);\n        if (0 === path.indexOf(normalizedKey)) {\n          var temp = path.substr(normalizedKey.length);\n          if (temp.charAt(0) === '.' || temp.length === 0) {\n            path = temp.substr(1);\n            var child = obj[key];\n\n            // we're at the end and there is nothing.\n            if (null == child) {\n              finished = true;\n              return;\n            }\n\n            // we're at the end and there is something.\n            if (!path.length) {\n              finished = true;\n              return;\n            }\n\n            // step into child\n            obj = child;\n\n            // but we're done here\n            return;\n          }\n        }\n      }\n\n      key = undefined;\n      // if we found no matching properties\n      // on the current object, there's no match.\n      finished = true;\n    }\n\n    if (!key) return;\n    if (null == obj) return obj;\n\n    // the `obj` and `key` is one above the leaf object and key, so\n    // start object: { a: { 'b.c': 10 } }\n    // end object: { 'b.c': 10 }\n    // end key: 'b.c'\n    // this way, you can do `obj[key]` and get `10`.\n    return fn(obj, key, val);\n  };\n}\n\n\n/**\n * Find an object by its key\n *\n * find({ first_name : 'Calvin' }, 'firstName')\n */\n\nfunction find (obj, key) {\n  if (obj.hasOwnProperty(key)) return obj[key];\n}\n\n\n/**\n * Delete a value for a given key\n *\n * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }\n */\n\nfunction del (obj, key) {\n  if (obj.hasOwnProperty(key)) delete obj[key];\n  return obj;\n}\n\n\n/**\n * Replace an objects existing value with a new one\n *\n * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }\n */\n\nfunction replace (obj, key, val) {\n  if (obj.hasOwnProperty(key)) obj[key] = val;\n  return obj;\n}\n\n/**\n * Normalize a `dot.separated.path`.\n *\n * A.HELL(!*&#(!)O_WOR   LD.bar => ahelloworldbar\n *\n * @param {String} path\n * @return {String}\n */\n\nfunction defaultNormalize(path) {\n  return path.replace(/[^a-zA-Z0-9\\.]+/g, '').toLowerCase();\n}\n\n/**\n * Check if a value is a function.\n *\n * @param {*} val\n * @return {boolean} Returns `true` if `val` is a function, otherwise `false`.\n */\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n", "'use strict';\n\nvar get = require('obj-case');\n\n/**\n * Add address getters to `proto`.\n *\n * @ignore\n * @param {Function} proto\n */\nmodule.exports = function(proto) {\n  proto.zip = trait('postalCode', 'zip');\n  proto.country = trait('country');\n  proto.street = trait('street');\n  proto.state = trait('state');\n  proto.city = trait('city');\n  proto.region = trait('region');\n\n  function trait(a, b) {\n    return function() {\n      var traits = this.traits();\n      var props = this.properties ? this.properties() : {};\n\n      return get(traits, 'address.' + a)\n        || get(traits, a)\n        || (b ? get(traits, 'address.' + b) : null)\n        || (b ? get(traits, b) : null)\n        || get(props, 'address.' + a)\n        || get(props, a)\n        || (b ? get(props, 'address.' + b) : null)\n        || (b ? get(props, b) : null);\n    };\n  }\n};\n", "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n", "/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object Error]': return 'error';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val !== val) return 'nan';\n  if (val && val.nodeType === 1) return 'element';\n\n  if (isBuffer(val)) return 'buffer';\n\n  val = val.valueOf\n    ? val.valueOf()\n    : Object.prototype.valueOf.apply(val);\n\n  return typeof val;\n};\n\n// code borrowed from https://github.com/feross/is-buffer/blob/master/index.js\nfunction isBuffer(obj) {\n  return !!(obj != null &&\n    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n      (obj.constructor &&\n      typeof obj.constructor.isBuffer === 'function' &&\n      obj.constructor.isBuffer(obj))\n    ))\n}\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar type = require('component-type');\n\n/**\n * Deeply clone an object.\n *\n * @param {*} obj Any object.\n */\n\nvar clone = function clone(obj) {\n  var t = type(obj);\n\n  if (t === 'object') {\n    var copy = {};\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        copy[key] = clone(obj[key]);\n      }\n    }\n    return copy;\n  }\n\n  if (t === 'array') {\n    var copy = new Array(obj.length);\n    for (var i = 0, l = obj.length; i < l; i++) {\n      copy[i] = clone(obj[i]);\n    }\n    return copy;\n  }\n\n  if (t === 'regexp') {\n    // from millermedeiros/amd-utils - MIT\n    var flags = '';\n    flags += obj.multiline ? 'm' : '';\n    flags += obj.global ? 'g' : '';\n    flags += obj.ignoreCase ? 'i' : '';\n    return new RegExp(obj.source, flags);\n  }\n\n  if (t === 'date') {\n    return new Date(obj.getTime());\n  }\n\n  // string, number, boolean, etc.\n  return obj;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = clone;\n", "\n/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Function]': return 'function';\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val === Object(val)) return 'object';\n\n  return typeof val;\n};\n", "'use strict';\n\nexports.inherit = require('inherits');\nexports.clone = require('@ndhoule/clone');\nexports.type = require('type-component');\n", "'use strict';\n\n// A few integrations are disabled by default. They must be explicitly enabled\n// by setting options[Provider] = true.\nvar disabled = {\n  Salesforce: true\n};\n\n/**\n * Check whether an integration should be enabled by default.\n *\n * @ignore\n * @param {string} integration\n * @return {boolean}\n */\nmodule.exports = function(integration) {\n  return !disabled[integration];\n};\n", "'use strict';\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n", "\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{13}/;\n\n/**\n * Check whether a string is a millisecond date string.\n *\n * @param {string} string\n * @return {boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a millisecond string to a date.\n *\n * @param {string} millis\n * @return {Date}\n */\nexports.parse = function (millis) {\n  millis = parseInt(millis, 10);\n  return new Date(millis);\n};\n", "\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{10}/;\n\n/**\n * Check whether a string is a second date string.\n *\n * @param {string} string\n * @return {Boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a second string to a date.\n *\n * @param {string} seconds\n * @return {Date}\n */\nexports.parse = function (seconds) {\n  var millis = parseInt(seconds, 10) * 1000;\n  return new Date(millis);\n};\n", "\"use strict\";\n\nvar isodate = require(\"@segment/isodate\");\nvar milliseconds = require(\"./milliseconds\");\nvar seconds = require(\"./seconds\");\n\nvar objProto = Object.prototype;\nvar toStr = objProto.toString;\n\nfunction isDate(value) {\n  return toStr.call(value) === \"[object Date]\";\n}\n\nfunction isNumber(value) {\n  return toStr.call(value) === \"[object Number]\";\n}\n\n/**\n * Returns a new Javascript Date object, allowing a variety of extra input types\n * over the native Date constructor.\n *\n * @param {Date|string|number} val\n */\nmodule.exports = function newDate(val) {\n  if (isDate(val)) return val;\n  if (isNumber(val)) return new Date(toMs(val));\n\n  // date strings\n  if (isodate.is(val)) {\n    return isodate.parse(val);\n  }\n  if (milliseconds.is(val)) {\n    return milliseconds.parse(val);\n  }\n  if (seconds.is(val)) {\n    return seconds.parse(val);\n  }\n\n  // fallback to Date.parse\n  return new Date(val);\n};\n\n/**\n * If the number passed val is seconds from the epoch, turn it into milliseconds.\n * Milliseconds would be greater than 31557600000 (December 31, 1970).\n *\n * @param {number} num\n */\nfunction toMs(num) {\n  if (num < 31557600000) return num * 1000;\n  return num;\n}\n", "'use strict';\n\nvar isodate = require('@segment/isodate');\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n", "'use strict';\n\nvar address = require('./address');\nvar clone = require('./utils').clone;\nvar isEnabled = require('./is-enabled');\nvar newDate = require('new-date');\nvar objCase = require('obj-case');\nvar traverse = require('@segment/isodate-traverse');\nvar type = require('./utils').type;\n\n/**\n * A *Facade* is an object meant for creating convience wrappers around\n * objects. When developing integrations, you probably want to look at its\n * subclasses, such as {@link Track} or {@link Identify}, rather than this\n * general-purpose class.\n *\n * This constructor will initialize a new `Facade` with an `obj` of arguments.\n *\n * If the inputted `obj` doesn't have a `timestamp` property, one will be added\n * with the value `new Date()`. Otherwise, the `timestamp` property will be\n * converted to a Date using the `new-date` package.\n *\n * By default, the inputted object will be defensively copied, and all ISO\n * strings present in the string will be converted into Dates.\n *\n * @param {Object} obj - The object to wrap.\n * @param {Object} opts - Options about what kind of Facade to create.\n * @param {boolean} [opts.clone=true] - Whether to make defensive clones. If enabled,\n * the inputted object will be cloned, and any objects derived from this facade\n * will be cloned before being returned.\n * @param {boolean} [opts.traverse=true] - Whether to perform ISODate-Traverse\n * on the inputted object.\n *\n * @see {@link https://github.com/segmentio/new-date|new-date}\n * @see {@link https://github.com/segmentio/isodate-traverse|isodate-traverse}\n */\nfunction Facade(obj, opts) {\n  opts = opts || {};\n  if (!('clone' in opts)) opts.clone = true;\n  if (opts.clone) obj = clone(obj);\n  if (!('traverse' in opts)) opts.traverse = true;\n  if (!('timestamp' in obj)) obj.timestamp = new Date();\n  else obj.timestamp = newDate(obj.timestamp);\n  if (opts.traverse) traverse(obj);\n  this.opts = opts;\n  this.obj = obj;\n}\n\n/**\n * Get a potentially-nested field in this facade. `field` should be a\n * period-separated sequence of properties.\n *\n * If the first field passed in points to a function (e.g. the `field` passed\n * in is `a.b.c` and this facade's `obj.a` is a function), then that function\n * will be called, and then the deeper fields will be fetched (using obj-case)\n * from what that function returns. If the first field isn't a function, then\n * this function works just like obj-case.\n *\n * Because this function uses obj-case, the camel- or snake-case of the input\n * is irrelevant.\n *\n * @example\n * YourClass.prototype.height = function() {\n *   return this.proxy('getDimensions.height') ||\n *     this.proxy('props.size.side_length');\n * }\n * @param {string} field - A sequence of properties, joined by periods (`.`).\n * @return {*} - A property of the inputted object.\n * @see {@link https://github.com/segmentio/obj-case|obj-case}\n */\nFacade.prototype.proxy = function(field) {\n  var fields = field.split('.');\n  field = fields.shift();\n\n  // Call a function at the beginning to take advantage of facaded fields\n  var obj = this[field] || this.field(field);\n  if (!obj) return obj;\n  if (typeof obj === 'function') obj = obj.call(this) || {};\n  if (fields.length === 0) return this.opts.clone ? transform(obj) : obj;\n\n  obj = objCase(obj, fields.join('.'));\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Directly access a specific `field` from the underlying object. Only\n * \"top-level\" fields will work with this function. \"Nested\" fields *will not\n * work* with this function.\n *\n * @param {string} field\n * @return {*}\n */\nFacade.prototype.field = function(field) {\n  var obj = this.obj[field];\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Utility method to always proxy a particular `field`. In other words, it\n * returns a function that will always return `this.proxy(field)`.\n *\n * @example\n * MyClass.prototype.height = Facade.proxy('options.dimensions.height');\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.proxy = function(field) {\n  return function() {\n    return this.proxy(field);\n  };\n};\n\n/**\n * Utility method to always access a `field`. In other words, it returns a\n * function that will always return `this.field(field)`.\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.field = function(field) {\n  return function() {\n    return this.field(field);\n  };\n};\n\n/**\n * Create a helper function for fetching a \"plural\" thing.\n *\n * The generated method will take the inputted `path` and append an \"s\" to it\n * and calls `this.proxy` with this \"pluralized\" path. If that produces an\n * array, that will be returned. Otherwise, a one-element array containing\n * `this.proxy(path)` will be returned.\n *\n * @example\n * MyClass.prototype.birds = Facade.multi('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.multi = function(path) {\n  return function() {\n    var multi = this.proxy(path + 's');\n    if (type(multi) === 'array') return multi;\n    var one = this.proxy(path);\n    if (one) one = [this.opts.clone ? clone(one) : one];\n    return one || [];\n  };\n};\n\n/**\n * Create a helper function for getting a \"singular\" thing.\n *\n * The generated method will take the inputted path and call\n * `this.proxy(path)`. If a truthy thing is produced, it will be returned.\n * Otherwise, `this.proxy(path + 's')` will be called, and if that produces an\n * array the first element of that array will be returned. Otherwise,\n * `undefined` is returned.\n *\n * @example\n * MyClass.prototype.bird = Facade.one('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.one = function(path) {\n  return function() {\n    var one = this.proxy(path);\n    if (one) return one;\n    var multi = this.proxy(path + 's');\n    if (type(multi) === 'array') return multi[0];\n  };\n};\n\n/**\n * Gets the underlying object this facade wraps around.\n *\n * If this facade has a property `type`, it will be invoked as a function and\n * will be assigned as the property `type` of the outputted object.\n *\n * @return {Object}\n */\nFacade.prototype.json = function() {\n  var ret = this.opts.clone ? clone(this.obj) : this.obj;\n  if (this.type) ret.type = this.type();\n  return ret;\n};\n\n/**\n * Get the options of a call. If an integration is passed, only the options for\n * that integration are included. If the integration is not enabled, then\n * `undefined` is returned.\n *\n * Options are taken from the `options` property of the underlying object,\n * falling back to the object's `context` or simply `{}`.\n *\n * @param {string} integration - The name of the integration to get settings\n * for. Casing does not matter.\n * @return {Object|undefined}\n */\nFacade.prototype.options = function(integration) {\n  var obj = this.obj.options || this.obj.context || {};\n  var options = this.opts.clone ? clone(obj) : obj;\n  if (!integration) return options;\n  if (!this.enabled(integration)) return;\n  var integrations = this.integrations();\n  var value = integrations[integration] || objCase(integrations, integration);\n  if (typeof value !== 'object') value = objCase(this.options(), integration);\n  return typeof value === 'object' ? value : {};\n};\n\n/**\n * An alias for {@link Facade#options}.\n */\nFacade.prototype.context = Facade.prototype.options;\n\n/**\n * Check whether an integration is enabled.\n *\n * Basically, this method checks whether this integration is explicitly\n * enabled. If it isn'texplicitly mentioned, it checks whether it has been\n * enabled at the global level. Some integrations (e.g. Salesforce), cannot\n * enabled by these global event settings.\n *\n * More concretely, the deciding factors here are:\n *\n * 1. If `this.integrations()` has the integration set to `true`, return `true`.\n * 2. If `this.integrations().providers` has the integration set to `true`, return `true`.\n * 3. If integrations are set to default-disabled via global parameters (i.e.\n * `options.providers.all`, `options.all`, or `integrations.all`), then return\n * false.\n * 4. If the integration is one of the special default-deny integrations\n * (currently, only Salesforce), then return false.\n * 5. Else, return true.\n *\n * @param {string} integration\n * @return {boolean}\n */\nFacade.prototype.enabled = function(integration) {\n  var allEnabled = this.proxy('options.providers.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('options.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = this.proxy('integrations.all');\n  if (typeof allEnabled !== 'boolean') allEnabled = true;\n\n  var enabled = allEnabled && isEnabled(integration);\n  var options = this.integrations();\n\n  // If the integration is explicitly enabled or disabled, use that\n  // First, check options.providers for backwards compatibility\n  if (options.providers && options.providers.hasOwnProperty(integration)) {\n    enabled = options.providers[integration];\n  }\n\n  // Next, check for the integration's existence in 'options' to enable it.\n  // If the settings are a boolean, use that, otherwise it should be enabled.\n  if (options.hasOwnProperty(integration)) {\n    var settings = options[integration];\n    if (typeof settings === 'boolean') {\n      enabled = settings;\n    } else {\n      enabled = true;\n    }\n  }\n\n  return !!enabled;\n};\n\n/**\n * Get all `integration` options.\n *\n * @ignore\n * @param {string} integration\n * @return {Object}\n */\nFacade.prototype.integrations = function() {\n  return this.obj.integrations || this.proxy('options.providers') || this.options();\n};\n\n/**\n * Check whether the user is active.\n *\n * @return {boolean}\n */\nFacade.prototype.active = function() {\n  var active = this.proxy('options.active');\n  if (active === null || active === undefined) active = true;\n  return active;\n};\n\n/**\n * Get `sessionId / anonymousId`.\n *\n * @return {*}\n */\nFacade.prototype.anonymousId = function() {\n  return this.field('anonymousId') || this.field('sessionId');\n};\n\n/**\n * An alias for {@link Facade#anonymousId}.\n *\n * @function\n * @return {string}\n */\nFacade.prototype.sessionId = Facade.prototype.anonymousId;\n\n/**\n * Get `groupId` from `context.groupId`.\n *\n * @function\n * @return {string}\n */\nFacade.prototype.groupId = Facade.proxy('options.groupId');\n\n/**\n * Get the call's \"traits\". All event types can pass in traits, though {@link\n * Identify} and {@link Group} override this implementation.\n *\n * Traits are gotten from `options.traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `options.traits` into\n * new keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx`\n * in the traits, and move it to `yyy`. If `xxx` is a method of this facade,\n * it'll be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { options: { traits: { foo: \"bar\" } }, anonymousId: \"xxx\" }\n * var facade = new Facade(obj)\n *\n * facade.traits() // { \"foo\": \"bar\" }\n * facade.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * facade.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nFacade.prototype.traits = function(aliases) {\n  var ret = this.proxy('options.traits') || {};\n  var id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = this[alias] == null ? this.proxy('options.traits.' + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * The library and version of the client used to produce the message.\n *\n * If the library name cannot be determined, it is set to `\"unknown\"`. If the\n * version cannot be determined, it is set to `null`.\n *\n * @return {{name: string, version: string}}\n */\nFacade.prototype.library = function() {\n  var library = this.proxy('options.library');\n  if (!library) return { name: 'unknown', version: null };\n  if (typeof library === 'string') return { name: library, version: null };\n  return library;\n};\n\n/**\n * Return the device information, falling back to an empty object.\n *\n * Interesting values of `type` are `\"ios\"` and `\"android\"`, but other values\n * are possible if the client is doing something unusual with `context.device`.\n *\n * @return {{type: string}}\n */\nFacade.prototype.device = function() {\n  var device = this.proxy('context.device');\n  if (type(device) !== 'object') device = {};\n  var library = this.library().name;\n  if (device.type) return device;\n\n  if (library.indexOf('ios') > -1) device.type = 'ios';\n  if (library.indexOf('android') > -1) device.type = 'android';\n  return device;\n};\n\n/**\n * Get the User-Agent from `context.userAgent`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nFacade.prototype.userAgent = Facade.proxy('context.userAgent');\n\n/**\n * Get the timezone from `context.timezone`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nFacade.prototype.timezone = Facade.proxy('context.timezone');\n\n/**\n * Get the timestamp from `context.timestamp`.\n *\n * @function\n * @return string\n */\nFacade.prototype.timestamp = Facade.field('timestamp');\n\n/**\n * Get the channel from `channel`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nFacade.prototype.channel = Facade.field('channel');\n\n/**\n * Get the IP address from `context.ip`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nFacade.prototype.ip = Facade.proxy('context.ip');\n\n/**\n * Get the user ID from `userId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nFacade.prototype.userId = Facade.field('userId');\n\n/**\n * Get the ZIP/Postal code from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name zip\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\n/**\n * Get the country from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name country\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\n/**\n * Get the street from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name street\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\n/**\n * Get the state from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name state\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\n/**\n * Get the city from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name city\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\n/**\n * Get the region from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name region\n * @function\n * @memberof Facade.prototype\n * @return {string}\n */\n\naddress(Facade.prototype);\n\n/**\n * Return the cloned and traversed object\n *\n * @ignore\n * @param {*} obj\n * @return {*}\n */\nfunction transform(obj) {\n  return clone(obj);\n}\n\nmodule.exports = Facade;\n", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar Facade = require('./facade');\n\n/**\n * Initialize a new `Alias` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.from] - The previous ID of the user.\n * @param {string} [dictionary.to] - The new ID of the user.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Alias(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Alias, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"alias\"`.\n *\n * @return {string}\n */\nAlias.prototype.action = function() {\n  return 'alias';\n};\n\n/**\n * An alias for {@link Alias#action}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.type = Alias.prototype.action;\n\n/**\n * Get the user's previous ID from `previousId` or `from`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.previousId = function() {\n  return this.field('previousId') || this.field('from');\n};\n\n/**\n * An alias for {@link Alias#previousId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.from = Alias.prototype.previousId;\n\n/**\n * Get the user's new ID from `userId` or `to`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.userId = function() {\n  return this.field('userId') || this.field('to');\n};\n\n/**\n * An alias for {@link Alias#userId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.to = Alias.prototype.userId;\n\nmodule.exports = Alias;\n", "\nmodule.exports = function isEmail (string) {\n    return (/.+\\@.+\\..+/).test(string);\n};", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar isEmail = require('is-email');\nvar newDate = require('new-date');\nvar Facade = require('./facade');\n\n/**\n * Initialize a new `Group` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The user to add to the group.\n * @param {string} [dictionary.groupId] - The ID of the group.\n * @param {Object} [dictionary.traits] - The traits of the group.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Group(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Group, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"group\"`.\n *\n * @return {string}\n */\nGroup.prototype.action = function() {\n  return 'group';\n};\n\n/**\n * An alias for {@link Group#action}.\n *\n * @function\n * @return {string}\n */\nGroup.prototype.type = Group.prototype.action;\n\n/**\n * Get the group ID from `groupId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nGroup.prototype.groupId = Facade.field('groupId');\n\n/**\n * Get the time of creation of the group from `traits.createdAt`,\n * `traits.created`, `properties.createdAt`, or `properties.created`.\n *\n * @return {Date}\n */\nGroup.prototype.created = function() {\n  var created = this.proxy('traits.createdAt')\n    || this.proxy('traits.created')\n    || this.proxy('properties.createdAt')\n    || this.proxy('properties.created');\n\n  if (created) return newDate(created);\n};\n\n/**\n * Get the group's email from `traits.email`, falling back to `groupId` only if\n * it looks like a valid email.\n *\n * @return {string}\n */\nGroup.prototype.email = function() {\n  var email = this.proxy('traits.email');\n  if (email) return email;\n  var groupId = this.groupId();\n  if (isEmail(groupId)) return groupId;\n};\n\n/**\n * Get the group's traits. This is identical to how {@link Facade#traits}\n * works, except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `groupId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var group = new Group(obj)\n *\n * group.traits() // { \"foo\": \"bar\" }\n * group.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * group.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nGroup.prototype.traits = function(aliases) {\n  var ret = this.properties();\n  var id = this.groupId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = this[alias] == null ? this.proxy('traits.' + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the group's name from `traits.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nGroup.prototype.name = Facade.proxy('traits.name');\n\n/**\n * Get the group's industry from `traits.industry`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nGroup.prototype.industry = Facade.proxy('traits.industry');\n\n/**\n * Get the group's employee count from `traits.employees`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nGroup.prototype.employees = Facade.proxy('traits.employees');\n\n/**\n * Get the group's properties from `traits` or `properties`, falling back to\n * simply an empty object.\n *\n * @return {Object}\n */\nGroup.prototype.properties = function() {\n  // TODO remove this function\n  return this.field('traits') || this.field('properties') || {};\n};\n\nmodule.exports = Group;\n", "exports = module.exports = trim;\n\nfunction trim(str){\n  if (str.trim) return str.trim();\n  return exports.right(exports.left(str));\n}\n\nexports.left = function(str){\n  if (str.trimLeft) return str.trimLeft();\n\n  return str.replace(/^\\s\\s*/, '');\n};\n\nexports.right = function(str){\n  if (str.trimRight) return str.trimRight();\n\n  var whitespace_pattern = /\\s/,\n      i = str.length;\n  while (whitespace_pattern.test(str.charAt(--i)));\n\n  return str.slice(0, i + 1);\n};\n", "'use strict';\n\nvar Facade = require('./facade');\nvar get = require('obj-case');\nvar inherit = require('./utils').inherit;\nvar isEmail = require('is-email');\nvar newDate = require('new-date');\nvar trim = require('trim');\nvar type = require('./utils').type;\n\n/**\n * Initialize a new `Identify` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The ID of the user.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.traits] - The user's traits.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Identify(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Identify, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"identify\"`.\n *\n * @return {string}\n */\nIdentify.prototype.action = function() {\n  return 'identify';\n};\n\n/**\n * An alias for {@link Identify#action}.\n *\n * @function\n * @return {string}\n */\nIdentify.prototype.type = Identify.prototype.action;\n\n/**\n * Get the user's traits. This is identical to how {@link Facade#traits} works,\n * except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var identify = new Identify(obj)\n *\n * identify.traits() // { \"foo\": \"bar\" }\n * identify.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * identify.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nIdentify.prototype.traits = function(aliases) {\n  var ret = this.field('traits') || {};\n  var id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (var alias in aliases) {\n    var value = this[alias] == null ? this.proxy('traits.' + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    if (alias !== aliases[alias]) delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the user's email from `traits.email`, falling back to `userId` only if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.email = function() {\n  var email = this.proxy('traits.email');\n  if (email) return email;\n\n  var userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the time of creation of the user from `traits.created` or\n * `traits.createdAt`.\n *\n * @return {Date}\n */\nIdentify.prototype.created = function() {\n  var created = this.proxy('traits.created') || this.proxy('traits.createdAt');\n  if (created) return newDate(created);\n};\n\n/**\n * Get the time of creation of the user's company from `traits.company.created`\n * or `traits.company.createdAt`.\n *\n * @return {Date}\n */\nIdentify.prototype.companyCreated = function() {\n  var created = this.proxy('traits.company.created') || this.proxy('traits.company.createdAt');\n\n  if (created) {\n    return newDate(created);\n  }\n};\n\n/**\n * Get the user's company name from `traits.company.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.companyName = function() {\n  return this.proxy('traits.company.name');\n};\n\n/**\n * Get the user's name `traits.name`, falling back to combining {@link\n * Identify#firstName} and {@link Identify#lastName} if possible.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.name = function() {\n  var name = this.proxy('traits.name');\n  if (typeof name === 'string') {\n    return trim(name);\n  }\n\n  var firstName = this.firstName();\n  var lastName = this.lastName();\n  if (firstName && lastName) {\n    return trim(firstName + ' ' + lastName);\n  }\n};\n\n/**\n * Get the user's first name from `traits.firstName`, optionally splitting it\n * out of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.firstName = function() {\n  var firstName = this.proxy('traits.firstName');\n  if (typeof firstName === 'string') {\n    return trim(firstName);\n  }\n\n  var name = this.proxy('traits.name');\n  if (typeof name === 'string') {\n    return trim(name).split(' ')[0];\n  }\n};\n\n/**\n * Get the user's last name from `traits.lastName`, optionally splitting it out\n * of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.lastName = function() {\n  var lastName = this.proxy('traits.lastName');\n  if (typeof lastName === 'string') {\n    return trim(lastName);\n  }\n\n  var name = this.proxy('traits.name');\n  if (typeof name !== 'string') {\n    return;\n  }\n\n  var space = trim(name).indexOf(' ');\n  if (space === -1) {\n    return;\n  }\n\n  return trim(name.substr(space + 1));\n};\n\n/**\n * Get the user's \"unique id\" from `userId`, `traits.username`, or\n * `traits.email`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.uid = function() {\n  return this.userId() || this.username() || this.email();\n};\n\n/**\n * Get the user's description from `traits.description` or `traits.background`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.description = function() {\n  return this.proxy('traits.description') || this.proxy('traits.background');\n};\n\n/**\n * Get the user's age from `traits.age`, falling back to computing it from\n * `traits.birthday` and the current time.\n *\n * @return {number}\n */\nIdentify.prototype.age = function() {\n  var date = this.birthday();\n  var age = get(this.traits(), 'age');\n  if (age != null) return age;\n  if (type(date) !== 'date') return;\n  var now = new Date();\n  return now.getFullYear() - date.getFullYear();\n};\n\n/**\n * Get the URL of the user's avatar from `traits.avatar`, `traits.photoUrl`, or\n * `traits.avatarUrl`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.avatar = function() {\n  var traits = this.traits();\n  return get(traits, 'avatar') || get(traits, 'photoUrl') || get(traits, 'avatarUrl');\n};\n\n/**\n * Get the user's job position from `traits.position` or `traits.jobTitle`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nIdentify.prototype.position = function() {\n  var traits = this.traits();\n  return get(traits, 'position') || get(traits, 'jobTitle');\n};\n\n/**\n * Get the user's username from `traits.username`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nIdentify.prototype.username = Facade.proxy('traits.username');\n\n/**\n * Get the user's website from `traits.website`, or if there are multiple in\n * `traits.websites`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nIdentify.prototype.website = Facade.one('traits.website');\n\n/**\n * Get the user's websites from `traits.websites`, or if there is only one in\n * `traits.website`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\nIdentify.prototype.websites = Facade.multi('traits.website');\n\n/**\n * Get the user's phone number from `traits.phone`, or if there are multiple in\n * `traits.phones`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nIdentify.prototype.phone = Facade.one('traits.phone');\n\n/**\n * Get the user's phone numbers from `traits.phones`, or if there is only one\n * in `traits.phone`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\nIdentify.prototype.phones = Facade.multi('traits.phone');\n\n/**\n * Get the user's address from `traits.address`.\n *\n * This *should* be an object, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {object}\n */\nIdentify.prototype.address = Facade.proxy('traits.address');\n\n/**\n * Get the user's gender from `traits.gender`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nIdentify.prototype.gender = Facade.proxy('traits.gender');\n\n/**\n * Get the user's birthday from `traits.birthday`.\n *\n * This *should* be a Date if `opts.traverse` was enabled (it is by default)\n * when constructing this Identify. Otherwise, it should be a string. But it\n * may be neither if the client isn't adhering to the spec.\n * spec.\n *\n * @function\n * @return {object}\n */\nIdentify.prototype.birthday = Facade.proxy('traits.birthday');\n\nmodule.exports = Identify;\n", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar type = require('./utils').type;\nvar Facade = require('./facade');\nvar Identify = require('./identify');\nvar isEmail = require('is-email');\nvar get = require('obj-case');\n\n/**\n * Initialize a new `Track` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.event] - The name of the event being tracked.\n * @param {string} [dictionary.userId] - The ID of the user being tracked.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.properties] - Properties of the track event.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Track(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Track, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"track\"`.\n *\n * @return {string}\n */\nTrack.prototype.action = function() {\n  return 'track';\n};\n\n/**\n * An alias for {@link Track#action}.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.type = Track.prototype.action;\n\n/**\n * Get the event name from `event`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.event = Facade.field('event');\n\n/**\n * Get the event value, usually the monetary value, from `properties.value`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.value = Facade.proxy('properties.value');\n\n/**\n * Get the event cateogry from `properties.category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.category = Facade.proxy('properties.category');\n\n/**\n * Get the event ID from `properties.id`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.id = Facade.proxy('properties.id');\n\n/**\n * Get the product ID from `properties.productId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.productId = function() {\n  return this.proxy('properties.product_id') || this.proxy('properties.productId');\n};\n\n/**\n * Get the promotion ID from `properties.promotionId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.promotionId = function() {\n  return this.proxy('properties.promotion_id') || this.proxy('properties.promotionId');\n};\n\n/**\n * Get the cart ID from `properties.cartId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.cartId = function() {\n  return this.proxy('properties.cart_id') || this.proxy('properties.cartId');\n};\n\n/**\n * Get the checkout ID from `properties.checkoutId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.checkoutId = function() {\n  return this.proxy('properties.checkout_id') || this.proxy('properties.checkoutId');\n};\n\n/**\n * Get the payment ID from `properties.paymentId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.paymentId = function() {\n  return this.proxy('properties.payment_id') || this.proxy('properties.paymentId');\n};\n\n/**\n * Get the coupon ID from `properties.couponId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.couponId = function() {\n  return this.proxy('properties.coupon_id') || this.proxy('properties.couponId');\n};\n\n/**\n * Get the wishlist ID from `properties.wishlistId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.wishlistId = function() {\n  return this.proxy('properties.wishlist_id') || this.proxy('properties.wishlistId');\n};\n\n/**\n * Get the review ID from `properties.reviewId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.reviewId = function() {\n  return this.proxy('properties.review_id') || this.proxy('properties.reviewId');\n};\n\n/**\n * Get the order ID from `properties.id` or `properties.orderId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.orderId = function() {\n  // doesn't follow above convention since this fallback order was how it used to be\n  return this.proxy('properties.id')\n    || this.proxy('properties.order_id')\n    || this.proxy('properties.orderId');\n};\n\n/**\n * Get the SKU from `properties.sku`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.sku = Facade.proxy('properties.sku');\n\n/**\n * Get the amount of tax for this purchase from `properties.tax`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.tax = Facade.proxy('properties.tax');\n\n/**\n * Get the name of this event from `properties.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.name = Facade.proxy('properties.name');\n\n/**\n * Get the price of this purchase from `properties.price`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.price = Facade.proxy('properties.price');\n\n/**\n * Get the total for this purchase from `properties.total`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.total = Facade.proxy('properties.total');\n\n/**\n * Whether this is a repeat purchase from `properties.repeat`.\n *\n * This *should* be a boolean, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {boolean}\n */\nTrack.prototype.repeat = Facade.proxy('properties.repeat');\n\n/**\n * Get the coupon for this purchase from `properties.coupon`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.coupon = Facade.proxy('properties.coupon');\n\n/**\n * Get the shipping for this purchase from `properties.shipping`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.shipping = Facade.proxy('properties.shipping');\n\n/**\n * Get the discount for this purchase from `properties.discount`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nTrack.prototype.discount = Facade.proxy('properties.discount');\n\n/**\n * Get the shipping method for this purchase from `properties.shippingMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.shippingMethod = function() {\n  return this.proxy('properties.shipping_method') || this.proxy('properties.shippingMethod');\n};\n\n/**\n * Get the payment method for this purchase from `properties.paymentMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.paymentMethod = function() {\n  return this.proxy('properties.payment_method') || this.proxy('properties.paymentMethod');\n};\n\n/**\n * Get a description for this event from `properties.description`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.description = Facade.proxy('properties.description');\n\n/**\n * Get a plan, as in the plan the user is on, for this event from\n * `properties.plan`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nTrack.prototype.plan = Facade.proxy('properties.plan');\n\n/**\n * Get the subtotal for this purchase from `properties.subtotal`.\n *\n * If `properties.subtotal` isn't available, then fall back to computing the\n * total from `properties.total` or `properties.revenue`, and then subtracting\n * tax, shipping, and discounts.\n *\n * If neither subtotal, total, nor revenue are available, then return 0.\n *\n * @return {number}\n */\nTrack.prototype.subtotal = function() {\n  var subtotal = get(this.properties(), 'subtotal');\n  var total = this.total() || this.revenue();\n\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n\n  if (this.total()) {\n    var n = this.tax();\n    if (n) total -= n;\n    n = this.shipping();\n    if (n) total -= n;\n    n = this.discount();\n    if (n) total += n;\n  }\n\n  return total;\n};\n\n/**\n * Get the products for this event from `properties.products` if it's an\n * array, falling back to an empty array.\n *\n * @return {Array}\n */\nTrack.prototype.products = function() {\n  var props = this.properties();\n  var products = get(props, 'products');\n  return type(products) === 'array' ? products : [];\n};\n\n/**\n * Get the quantity for this event from `properties.quantity`, falling back to\n * a quantity of one.\n *\n * @return {number}\n */\nTrack.prototype.quantity = function() {\n  var props = this.obj.properties || {};\n  return props.quantity || 1;\n};\n\n/**\n * Get the currency for this event from `properties.currency`, falling back to\n * \"USD\".\n *\n * @return {string}\n */\nTrack.prototype.currency = function() {\n  var props = this.obj.properties || {};\n  return props.currency || 'USD';\n};\n\n/**\n * Get the referrer for this event from `context.referrer.url`,\n * `context.page.referrer`, or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nTrack.prototype.referrer = function() {\n  // TODO re-examine whether this function is necessary\n  return this.proxy('context.referrer.url')\n    || this.proxy('context.page.referrer')\n    || this.proxy('properties.referrer');\n};\n\n/**\n * Get the query for this event from `options.query`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string|object}\n */\nTrack.prototype.query = Facade.proxy('options.query');\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var track = new Track(obj)\n *\n * track.traits() // { \"foo\": \"bar\" }\n * track.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * track.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nTrack.prototype.properties = function(aliases) {\n  var ret = this.field('properties') || {};\n  aliases = aliases || {};\n\n  for (var alias in aliases) {\n    var value = this[alias] == null ? this.proxy('properties.' + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the username of the user for this event from `traits.username`,\n * `properties.username`, `userId`, or `anonymousId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nTrack.prototype.username = function() {\n  return this.proxy('traits.username')\n    || this.proxy('properties.username')\n    || this.userId()\n    || this.sessionId();\n};\n\n/**\n * Get the email of the user for this event from `trais.email`,\n * `properties.email`, or `options.traits.email`, falling back to `userId` if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nTrack.prototype.email = function() {\n  var email = this.proxy('traits.email')\n    || this.proxy('properties.email')\n    || this.proxy('options.traits.email');\n  if (email) return email;\n\n  var userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the revenue for this event.\n *\n * If this is an \"Order Completed\" event, this will be the `properties.total`\n * falling back to the `properties.revenue`. For all other events, this is\n * simply taken from `properties.revenue`.\n *\n * If there are dollar signs in these properties, they will be removed. The\n * result will be parsed into a number.\n *\n * @return {number}\n */\nTrack.prototype.revenue = function() {\n  var revenue = this.proxy('properties.revenue');\n  var event = this.event();\n  var orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n\n  // it's always revenue, unless it's called during an order completion.\n  if (!revenue && event && event.match(orderCompletedRegExp)) {\n    revenue = this.proxy('properties.total');\n  }\n\n  return currency(revenue);\n};\n\n/**\n * Get the revenue for this event in \"cents\" -- in other words, multiply the\n * {@link Track#revenue} by 100, or return 0 if there isn't a numerical revenue\n * for this event.\n *\n * @return {number}\n */\nTrack.prototype.cents = function() {\n  var revenue = this.revenue();\n  return typeof revenue !== 'number' ? this.value() || 0 : revenue * 100;\n};\n\n/**\n * Convert this event into an {@link Identify} facade.\n *\n * This works by taking this event's underlying object and creating an Identify\n * from it. This event's traits, taken from `options.traits`, will be used as\n * the Identify's traits.\n *\n * @return {Identify}\n */\nTrack.prototype.identify = function() {\n  // TODO: remove me.\n  var json = this.json();\n  json.traits = this.traits();\n  return new Identify(json, this.opts);\n};\n\n/**\n * Get float from currency value.\n *\n * @ignore\n * @param {*} val\n * @return {number}\n */\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === 'number') {\n    return val;\n  }\n  if (typeof val !== 'string') {\n    return;\n  }\n\n  val = val.replace(/\\$/g, '');\n  val = parseFloat(val);\n\n  if (!isNaN(val)) {\n    return val;\n  }\n}\n\nmodule.exports = Track;\n", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar Facade = require('./facade');\nvar Track = require('./track');\nvar isEmail = require('is-email');\n\n/**\n * Initialize a new `Page` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Page(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Page, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"page\"`.\n *\n * @return {string}\n */\nPage.prototype.action = function() {\n  return 'page';\n};\n\n/**\n * An alias for {@link Page#action}.\n *\n * @function\n * @return {string}\n */\nPage.prototype.type = Page.prototype.action;\n\n/**\n * Get the page category from `category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.category = Facade.field('category');\n\n/**\n * Get the page name from `name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.name = Facade.field('name');\n\n/**\n * Get the page title from `properties.title`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.title = Facade.proxy('properties.title');\n\n/**\n * Get the page path from `properties.path`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.path = Facade.proxy('properties.path');\n\n/**\n * Get the page URL from `properties.url`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.url = Facade.proxy('properties.url');\n\n/**\n * Get the HTTP referrer from `context.referrer.url`, `context.page.referrer`,\n * or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.referrer = function() {\n  return this.proxy('context.referrer.url')\n    || this.proxy('context.page.referrer')\n    || this.proxy('properties.referrer');\n};\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`, augmented with the page's `name`\n * and `category`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var page = new Page(obj)\n *\n * page.traits() // { \"foo\": \"bar\" }\n * page.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * page.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nPage.prototype.properties = function(aliases) {\n  var props = this.field('properties') || {};\n  var category = this.category();\n  var name = this.name();\n  aliases = aliases || {};\n\n  if (category) props.category = category;\n  if (name) props.name = name;\n\n  for (var alias in aliases) {\n    var value = this[alias] == null\n      ? this.proxy('properties.' + alias)\n      : this[alias]();\n    if (value == null) continue;\n    props[aliases[alias]] = value;\n    if (alias !== aliases[alias]) delete props[alias];\n  }\n\n  return props;\n};\n\n/**\n * Get the user's email from `context.traits.email` or `properties.email`,\n * falling back to `userId` if it's a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.email = function() {\n  var email = this.proxy('context.traits.email') || this.proxy('properties.email');\n  if (email) return email;\n\n  var userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the page fullName. This is `$category $name` if both are present, and\n * just `name` otherwiser.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nPage.prototype.fullName = function() {\n  var category = this.category();\n  var name = this.name();\n  return name && category\n    ? category + ' ' + name\n    : name;\n};\n\n/**\n * Get an event name from this page call. If `name` is present, this will be\n * `Viewed $name Page`; otherwise, it will be `Loaded a Page`.\n *\n * @param {string} name - The name of this page.\n * @return {string}\n */\nPage.prototype.event = function(name) {\n  return name\n    ? 'Viewed ' + name + ' Page'\n    : 'Loaded a Page';\n};\n\n/**\n * Convert this Page to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Page#event}.\n *\n * @param {string} name\n * @return {Track}\n */\nPage.prototype.track = function(name) {\n  var json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n\nmodule.exports = Page;\n", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar Page = require('./page');\nvar Track = require('./track');\n\n/**\n * Initialize a new `Screen` facade with a `dictionary` of arguments.\n *\n * Note that this class extends {@link Page}, so its methods are available to\n * instances of this class as well.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Page\n */\nfunction Screen(dictionary, opts) {\n  Page.call(this, dictionary, opts);\n}\n\ninherit(Screen, Page);\n\n/**\n * Return the type of facade this is. This will always return `\"screen\"`.\n *\n * @return {string}\n */\nScreen.prototype.action = function() {\n  return 'screen';\n};\n\n/**\n * An alias for {@link Screen#action}.\n *\n * @function\n * @return {string}\n */\nScreen.prototype.type = Screen.prototype.action;\n\n/**\n * Get an event name from this screen call. If `name` is present, this will be\n * `Viewed $name Screen`; otherwise, it will be `Loaded a Screen`.\n *\n * @param {string} name - The name of this screen.\n * @return {string}\n */\nScreen.prototype.event = function(name) {\n  return name ? 'Viewed ' + name + ' Screen' : 'Loaded a Screen';\n};\n\n/**\n * Convert this Screen to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Screen#event}.\n *\n * @param {string} name\n * @return {Track}\n */\nScreen.prototype.track = function(name) {\n  var json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n\nmodule.exports = Screen;\n", "'use strict';\n\nvar inherit = require('./utils').inherit;\nvar Facade = require('./facade');\n\n/**\n * Initialize a new `Delete` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The delete category.\n * @param {string} [dictionary.name] - The delete name.\n * @param {string} [dictionary.properties] - The delete properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nfunction Delete(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Delete, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"delete\"`.\n *\n * @return {string}\n */\nDelete.prototype.type = function() {\n  return 'delete';\n};\n\nmodule.exports = Delete;\n", "'use strict';\n\nvar Facade = require('./facade');\n\nFacade.Alias = require('./alias');\nFacade.Group = require('./group');\nFacade.Identify = require('./identify');\nFacade.Track = require('./track');\nFacade.Page = require('./page');\nFacade.Screen = require('./screen');\nFacade.Delete = require('./delete');\n\nmodule.exports = Facade;\n", "\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n", "'use strict';\nvar Facade = require('segmentio-facade');\nmodule.exports.SourceMiddlewareChain = function SourceMiddlewareChain() {\n    var apply = middlewareChain(this);\n    this.applyMiddlewares = function (facade, integrations, callback) {\n        return apply(function (mw, payload, next) {\n            mw({\n                integrations: integrations,\n                next: next,\n                payload: payload\n            });\n        }, facade, callback);\n    };\n};\nmodule.exports.IntegrationMiddlewareChain = function IntegrationMiddlewareChain() {\n    var apply = middlewareChain(this);\n    this.applyMiddlewares = function (facade, integration, callback) {\n        return apply(function (mw, payload, next) {\n            mw(payload, integration, next);\n        }, facade, callback);\n    };\n};\nmodule.exports.DestinationMiddlewareChain = function DestinationMiddlewareChain() {\n    var apply = middlewareChain(this);\n    this.applyMiddlewares = function (facade, integration, callback) {\n        return apply(function (mw, payload, next) {\n            mw({ payload: payload, integration: integration, next: next });\n        }, facade, callback);\n    };\n};\n// Chain is essentially a linked list of middlewares to run in order.\nfunction middlewareChain(dest) {\n    var middlewares = [];\n    // Return a copy to prevent external mutations.\n    dest.getMiddlewares = function () {\n        return middlewares.slice();\n    };\n    dest.add = function (middleware) {\n        if (typeof middleware !== 'function')\n            throw new Error('attempted to add non-function middleware');\n        // Check for identical object references - bug check.\n        if (middlewares.indexOf(middleware) !== -1)\n            throw new Error('middleware is already registered');\n        middlewares.push(middleware);\n    };\n    // fn is the callback to be run once all middlewares have been applied.\n    return function applyMiddlewares(run, facade, callback) {\n        if (typeof facade !== 'object')\n            throw new Error('applyMiddlewares requires a payload object');\n        if (typeof callback !== 'function')\n            throw new Error('applyMiddlewares requires a function callback');\n        // Attach callback to the end of the chain.\n        var middlewaresToApply = middlewares.slice();\n        middlewaresToApply.push(callback);\n        executeChain(run, facade, middlewaresToApply, 0);\n    };\n}\n// Go over all middlewares until all have been applied.\nfunction executeChain(run, payload, middlewares, index) {\n    // If the facade has been nullified, immediately skip to the final middleware.\n    if (payload === null) {\n        middlewares[middlewares.length - 1](null);\n        return;\n    }\n    // Check if the payload is still a Facade. If not, convert it to one.\n    if (!(payload instanceof Facade)) {\n        payload = new Facade(payload);\n    }\n    var mw = middlewares[index];\n    if (mw) {\n        // If there's another middleware, continue down the chain. Otherwise, call the final function.\n        if (middlewares[index + 1]) {\n            run(mw, payload, function (result) {\n                executeChain(run, result, middlewares, ++index);\n            });\n        }\n        else {\n            mw(payload);\n        }\n    }\n}\nmodule.exports.middlewareChain = middlewareChain;\n", "/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n", "'use strict';\n\nvar bind = require('component-bind');\n\nfunction bindAll(obj) {\n  // eslint-disable-next-line guard-for-in\n  for (var key in obj) {\n    var val = obj[key];\n    if (typeof val === 'function') {\n      obj[key] = bind(obj, obj[key]);\n    }\n  }\n  return obj;\n}\n\nmodule.exports = bindAll;\n", "'use strict';\nvar type = require('component-type');\n/**\n * Deeply clone an object.\n *\n * @param {*} obj Any object.\n *\n * COPYRIGHT: https://github.com/ndhoule/clone/blob/master/LICENSE.md\n * The MIT License (MIT)\n * Copyright (c) 2015 Nathan Houle\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar clone = function clone(obj) {\n    var t = type(obj);\n    var copy;\n    if (t === 'object') {\n        copy = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                copy[key] = clone(obj[key]);\n            }\n        }\n        return copy;\n    }\n    if (t === 'array') {\n        copy = new Array(obj.length);\n        for (var i = 0, l = obj.length; i < l; i++) {\n            copy[i] = clone(obj[i]);\n        }\n        return copy;\n    }\n    if (t === 'regexp') {\n        // from millermedeiros/amd-utils - MIT\n        var flags = '';\n        flags += obj.multiline ? 'm' : '';\n        flags += obj.global ? 'g' : '';\n        flags += obj.ignoreCase ? 'i' : '';\n        return new RegExp(obj.source, flags);\n    }\n    if (t === 'date') {\n        return new Date(obj.getTime());\n    }\n    // string, number, boolean, etc.\n    return obj;\n};\nmodule.exports = clone;\n", "'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n", "/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('cookie');\n\n/**\n * Set or get cookie `name` with `value` and `options` object.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {Mixed}\n * @api public\n */\n\nmodule.exports = function(name, value, options) {\n  switch (arguments.length) {\n    case 3:\n    case 2:\n      return set(name, value, options);\n    case 1:\n      return get(name);\n    default:\n      return all();\n  }\n};\n\n/**\n * Set cookie `name` to `value`.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @api private\n */\n\nfunction set(name, value, options) {\n  options = options || {};\n  var str = encode(name) + '=' + encode(value);\n\n  if (value == null) options.maxage = -1;\n\n  if (options.maxage) {\n    options.expires = new Date(+new Date() + options.maxage);\n  }\n\n  if (options.path) str += '; path=' + options.path;\n  if (options.domain) str += '; domain=' + options.domain;\n  if (options.expires) str += '; expires=' + options.expires.toUTCString();\n  if (options.sameSite) str += '; SameSite=' + options.sameSite;\n  if (options.secure) str += '; secure';\n\n  document.cookie = str;\n}\n\n/**\n * Return all cookies.\n *\n * @return {Object}\n * @api private\n */\n\nfunction all() {\n  var str;\n  try {\n    str = document.cookie;\n  } catch (err) {\n    if (typeof console !== 'undefined' && typeof console.error === 'function') {\n      console.error(err.stack || err);\n    }\n    return {};\n  }\n  return parse(str);\n}\n\n/**\n * Get cookie `name`.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction get(name) {\n  return all()[name];\n}\n\n/**\n * Parse cookie `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parse(str) {\n  var obj = {};\n  var pairs = str.split(/ *; */);\n  var pair;\n  if (pairs[0] == '') return obj; // eslint-disable-line eqeqeq\n  for (var i = 0; i < pairs.length; ++i) {\n    pair = pairs[i].split('=');\n    obj[decode(pair[0])] = decode(pair[1]);\n  }\n  return obj;\n}\n\n/**\n * Encode.\n */\n\nfunction encode(value) {\n  try {\n    return encodeURIComponent(value);\n  } catch (e) {\n    debug('error `encode(%o)` - %o', value, e);\n  }\n}\n\n/**\n * Decode.\n */\n\nfunction decode(value) {\n  try {\n    return decodeURIComponent(value);\n  } catch (e) {\n    debug('error `decode(%o)` - %o', value, e);\n  }\n}\n", "'use strict';\n\nvar max = Math.max;\n\n/**\n * Produce a new array composed of all but the first `n` elements of an input `collection`.\n *\n * @name drop\n * @api public\n * @param {number} count The number of elements to drop.\n * @param {Array} collection The collection to iterate over.\n * @return {Array} A new array containing all but the first element from `collection`.\n * @example\n * drop(0, [1, 2, 3]); // => [1, 2, 3]\n * drop(1, [1, 2, 3]); // => [2, 3]\n * drop(2, [1, 2, 3]); // => [3]\n * drop(3, [1, 2, 3]); // => []\n * drop(4, [1, 2, 3]); // => []\n */\nvar drop = function drop(count, collection) {\n  var length = collection ? collection.length : 0;\n\n  if (!length) {\n    return [];\n  }\n\n  // Preallocating an array *significantly* boosts performance when dealing with\n  // `arguments` objects on v8. For a summary, see:\n  // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n  var toDrop = max(Number(count) || 0, 0);\n  var resultsLength = max(length - toDrop, 0);\n  var results = new Array(resultsLength);\n\n  for (var i = 0; i < resultsLength; i += 1) {\n    results[i] = collection[i + toDrop];\n  }\n\n  return results;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = drop;\n", "'use strict';\n\nvar max = Math.max;\n\n/**\n * Produce a new array by passing each value in the input `collection` through a transformative\n * `iterator` function. The `iterator` function is passed three arguments:\n * `(value, index, collection)`.\n *\n * @name rest\n * @api public\n * @param {Array} collection The collection to iterate over.\n * @return {Array} A new array containing all but the first element from `collection`.\n * @example\n * rest([1, 2, 3]); // => [2, 3]\n */\nvar rest = function rest(collection) {\n  if (collection == null || !collection.length) {\n    return [];\n  }\n\n  // Preallocating an array *significantly* boosts performance when dealing with\n  // `arguments` objects on v8. For a summary, see:\n  // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n  var results = new Array(max(collection.length - 2, 0));\n\n  for (var i = 1; i < collection.length; i += 1) {\n    results[i - 1] = collection[i];\n  }\n\n  return results;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = rest;\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar drop = require('@ndhoule/drop');\nvar rest = require('@ndhoule/rest');\n\nvar has = Object.prototype.hasOwnProperty;\nvar objToString = Object.prototype.toString;\n\n/**\n * Returns `true` if a value is an object, otherwise `false`.\n *\n * @name isObject\n * @api private\n * @param {*} val The value to test.\n * @return {boolean}\n */\n// TODO: Move to a library\nvar isObject = function isObject(value) {\n  return Boolean(value) && typeof value === 'object';\n};\n\n/**\n * Returns `true` if a value is a plain object, otherwise `false`.\n *\n * @name isPlainObject\n * @api private\n * @param {*} val The value to test.\n * @return {boolean}\n */\n// TODO: Move to a library\nvar isPlainObject = function isPlainObject(value) {\n  return Boolean(value) && objToString.call(value) === '[object Object]';\n};\n\n/**\n * Assigns a key-value pair to a target object when the value assigned is owned,\n * and where target[key] is undefined.\n *\n * @name shallowCombiner\n * @api private\n * @param {Object} target\n * @param {Object} source\n * @param {*} value\n * @param {string} key\n */\nvar shallowCombiner = function shallowCombiner(target, source, value, key) {\n  if (has.call(source, key) && target[key] === undefined) {\n    target[key] = value;\n  }\n  return source;\n};\n\n/**\n * Assigns a key-value pair to a target object when the value assigned is owned,\n * and where target[key] is undefined; also merges objects recursively.\n *\n * @name deepCombiner\n * @api private\n * @param {Object} target\n * @param {Object} source\n * @param {*} value\n * @param {string} key\n * @return {Object}\n */\nvar deepCombiner = function(target, source, value, key) {\n  if (has.call(source, key)) {\n    if (isPlainObject(target[key]) && isPlainObject(value)) {\n        target[key] = defaultsDeep(target[key], value);\n    } else if (target[key] === undefined) {\n        target[key] = value;\n    }\n  }\n\n  return source;\n};\n\n/**\n * TODO: Document\n *\n * @name defaultsWith\n * @api private\n * @param {Function} combiner\n * @param {Object} target\n * @param {...Object} sources\n * @return {Object} Return the input `target`.\n */\nvar defaultsWith = function(combiner, target /*, ...sources */) {\n  if (!isObject(target)) {\n    return target;\n  }\n\n  combiner = combiner || shallowCombiner;\n  var sources = drop(2, arguments);\n\n  for (var i = 0; i < sources.length; i += 1) {\n    for (var key in sources[i]) {\n      combiner(target, sources[i], sources[i][key], key);\n    }\n  }\n\n  return target;\n};\n\n/**\n * Copies owned, enumerable properties from a source object(s) to a target\n * object when the value of that property on the source object is `undefined`.\n * Recurses on objects.\n *\n * @name defaultsDeep\n * @api public\n * @param {Object} target\n * @param {...Object} sources\n * @return {Object} The input `target`.\n */\nvar defaultsDeep = function defaultsDeep(target /*, sources */) {\n  // TODO: Replace with `partial` call?\n  return defaultsWith.apply(null, [deepCombiner, target].concat(rest(arguments)));\n};\n\n/**\n * Copies owned, enumerable properties from a source object(s) to a target\n * object when the value of that property on the source object is `undefined`.\n *\n * @name defaults\n * @api public\n * @param {Object} target\n * @param {...Object} sources\n * @return {Object}\n * @example\n * var a = { a: 1 };\n * var b = { a: 2, b: 2 };\n *\n * defaults(a, b);\n * console.log(a); //=> { a: 1, b: 2 }\n */\nvar defaults = function(target /*, ...sources */) {\n  // TODO: Replace with `partial` call?\n  return defaultsWith.apply(null, [null, target].concat(rest(arguments)));\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = defaults;\nmodule.exports.deep = defaultsDeep;\n", "\n/**\n * Parse the given `url`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(url){\n  var a = document.createElement('a');\n  a.href = url;\n  return {\n    href: a.href,\n    host: a.host || location.host,\n    port: ('0' === a.port || '' === a.port) ? port(a.protocol) : a.port,\n    hash: a.hash,\n    hostname: a.hostname || location.hostname,\n    pathname: a.pathname.charAt(0) != '/' ? '/' + a.pathname : a.pathname,\n    protocol: !a.protocol || ':' == a.protocol ? location.protocol : a.protocol,\n    search: a.search,\n    query: a.search.slice(1)\n  };\n};\n\n/**\n * Check if `url` is absolute.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isAbsolute = function(url){\n  return 0 == url.indexOf('//') || !!~url.indexOf('://');\n};\n\n/**\n * Check if `url` is relative.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isRelative = function(url){\n  return !exports.isAbsolute(url);\n};\n\n/**\n * Check if `url` is cross domain.\n *\n * @param {String} url\n * @return {Boolean}\n * @api public\n */\n\nexports.isCrossDomain = function(url){\n  url = exports.parse(url);\n  var location = exports.parse(window.location.href);\n  return url.hostname !== location.hostname\n    || url.port !== location.port\n    || url.protocol !== location.protocol;\n};\n\n/**\n * Return default port for `protocol`.\n *\n * @param  {String} protocol\n * @return {String}\n * @api private\n */\nfunction port (protocol){\n  switch (protocol) {\n    case 'http:':\n      return 80;\n    case 'https:':\n      return 443;\n    default:\n      return location.port;\n  }\n}\n", "\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('cookie');\n\n/**\n * Set or get cookie `name` with `value` and `options` object.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {Mixed}\n * @api public\n */\n\nmodule.exports = function(name, value, options){\n  switch (arguments.length) {\n    case 3:\n    case 2:\n      return set(name, value, options);\n    case 1:\n      return get(name);\n    default:\n      return all();\n  }\n};\n\n/**\n * Set cookie `name` to `value`.\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @api private\n */\n\nfunction set(name, value, options) {\n  options = options || {};\n  var str = encode(name) + '=' + encode(value);\n\n  if (null == value) options.maxage = -1;\n\n  if (options.maxage) {\n    options.expires = new Date(+new Date + options.maxage);\n  }\n\n  if (options.path) str += '; path=' + options.path;\n  if (options.domain) str += '; domain=' + options.domain;\n  if (options.expires) str += '; expires=' + options.expires.toUTCString();\n  if (options.secure) str += '; secure';\n\n  document.cookie = str;\n}\n\n/**\n * Return all cookies.\n *\n * @return {Object}\n * @api private\n */\n\nfunction all() {\n  var str;\n  try {\n    str = document.cookie;\n  } catch (err) {\n    if (typeof console !== 'undefined' && typeof console.error === 'function') {\n      console.error(err.stack || err);\n    }\n    return {};\n  }\n  return parse(str);\n}\n\n/**\n * Get cookie `name`.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction get(name) {\n  return all()[name];\n}\n\n/**\n * Parse cookie `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parse(str) {\n  var obj = {};\n  var pairs = str.split(/ *; */);\n  var pair;\n  if ('' == pairs[0]) return obj;\n  for (var i = 0; i < pairs.length; ++i) {\n    pair = pairs[i].split('=');\n    obj[decode(pair[0])] = decode(pair[1]);\n  }\n  return obj;\n}\n\n/**\n * Encode.\n */\n\nfunction encode(value){\n  try {\n    return encodeURIComponent(value);\n  } catch (e) {\n    debug('error `encode(%o)` - %o', value, e)\n  }\n}\n\n/**\n * Decode.\n */\n\nfunction decode(value) {\n  try {\n    return decodeURIComponent(value);\n  } catch (e) {\n    debug('error `decode(%o)` - %o', value, e)\n  }\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar parse = require('component-url').parse;\nvar cookie = require('component-cookie');\n\n/**\n * Get the top domain.\n *\n * The function constructs the levels of domain and attempts to set a global\n * cookie on each one when it succeeds it returns the top level domain.\n *\n * The method returns an empty string when the hostname is an ip or `localhost`.\n *\n * Example levels:\n *\n *      domain.levels('http://www.google.co.uk');\n *      // => [\"co.uk\", \"google.co.uk\", \"www.google.co.uk\"]\n *\n * Example:\n *\n *      domain('http://localhost:3000/baz');\n *      // => ''\n *      domain('http://dev:3000/baz');\n *      // => ''\n *      domain('http://127.0.0.1:3000/baz');\n *      // => ''\n *      domain('http://segment.io/baz');\n *      // => 'segment.io'\n *\n * @param {string} url\n * @return {string}\n * @api public\n */\nfunction domain(url) {\n  var cookie = exports.cookie;\n  var levels = exports.levels(url);\n\n  // Lookup the real top level one.\n  for (var i = 0; i < levels.length; ++i) {\n    var cname = '__tld__';\n    var domain = levels[i];\n    var opts = { domain: '.' + domain };\n\n    cookie(cname, 1, opts);\n    if (cookie(cname)) {\n      cookie(cname, null, opts);\n      return domain;\n    }\n  }\n\n  return '';\n}\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\ndomain.levels = function(url) {\n  var host = parse(url).hostname;\n  var parts = host.split('.');\n  var last = parts[parts.length - 1];\n  var levels = [];\n\n  // Ip address.\n  if (parts.length === 4 && last === parseInt(last, 10)) {\n    return levels;\n  }\n\n  // Localhost.\n  if (parts.length <= 1) {\n    return levels;\n  }\n\n  // Create levels.\n  for (var i = parts.length - 2; i >= 0; --i) {\n    levels.push(parts.slice(i).join('.'));\n  }\n\n  return levels;\n};\n\n/**\n * Expose cookie on domain.\n */\ndomain.cookie = cookie;\n\n/*\n * Exports.\n */\n\nexports = module.exports = domain;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Module dependencies.\n */\nvar bindAll = require('bind-all');\nvar clone = require('./utils/clone');\nvar cookie = require('@segment/cookie');\nvar debug = require('debug')('analytics.js:cookie');\nvar defaults = require('@ndhoule/defaults');\nvar topDomain = require('@segment/top-domain');\n/**\n * Initialize a new `Cookie` with `options`.\n *\n * @param {Object} options\n */\nfunction Cookie(options) {\n    this.options(options);\n}\n/**\n * Get or set the cookie options.\n */\nCookie.prototype.options = function (options) {\n    if (arguments.length === 0)\n        return this._options;\n    options = options || {};\n    var domain = '.' + topDomain(window.location.href);\n    if (domain === '.')\n        domain = null;\n    this._options = defaults(options, {\n        // default to a year\n        maxage: 31536000000,\n        path: '/',\n        domain: domain,\n        sameSite: 'Lax'\n    });\n    // http://curl.haxx.se/rfc/cookie_spec.html\n    // https://publicsuffix.org/list/effective_tld_names.dat\n    //\n    // try setting a dummy cookie with the options\n    // if the cookie isn't set, it probably means\n    // that the domain is on the public suffix list\n    // like myapp.herokuapp.com or localhost / ip.\n    this.set('ajs:test', true);\n    if (!this.get('ajs:test')) {\n        debug('fallback to domain=null');\n        this._options.domain = null;\n    }\n    this.remove('ajs:test');\n};\n/**\n * Set a `key` and `value` in our cookie.\n */\nCookie.prototype.set = function (key, value) {\n    try {\n        value = window.JSON.stringify(value);\n        cookie(key, value === 'null' ? null : value, clone(this._options));\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\n/**\n * Get a value from our cookie by `key`.\n */\nCookie.prototype.get = function (key) {\n    try {\n        var value = cookie(key);\n        value = value ? window.JSON.parse(value) : null;\n        return value;\n    }\n    catch (e) {\n        return null;\n    }\n};\n/**\n * Remove a value from our cookie by `key`.\n */\nCookie.prototype.remove = function (key) {\n    try {\n        cookie(key, null, clone(this._options));\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\n/**\n * Expose the cookie singleton.\n */\nmodule.exports = bindAll(new Cookie());\n/**\n * Expose the `Cookie` constructor.\n */\nmodule.exports.Cookie = Cookie;\n", "/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root.Object());\n    exports || (exports = root.Object());\n\n    // Native constructor aliases.\n    var Number = context.Number || root.Number,\n        String = context.String || root.String,\n        Object = context.Object || root.Object,\n        Date = context.Date || root.Date,\n        SyntaxError = context.SyntaxError || root.SyntaxError,\n        TypeError = context.TypeError || root.TypeError,\n        Math = context.Math || root.Math,\n        nativeJSON = context.JSON || root.JSON;\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty = objectProto.hasOwnProperty,\n        undefined;\n\n    // Internal: Contains `try...catch` logic used by other functions.\n    // This prevents other functions from being deoptimized.\n    function attempt(func, errorFunc) {\n      try {\n        func();\n      } catch (exception) {\n        if (errorFunc) {\n          errorFunc();\n        }\n      }\n    }\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    attempt(function () {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    });\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] != null) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"date-serialization\") && has(\"json-parse\");\n      } else if (name == \"date-serialization\") {\n        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.\n        isSupported = has(\"json-stringify\") && isExtended;\n        if (isSupported) {\n          var stringify = exports.stringify;\n          attempt(function () {\n            isSupported =\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          });\n        }\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\";\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            attempt(function () {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undefined &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undefined) === undefined &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undefined &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undefined]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undefined, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\";\n            }, function () {\n              stringifySupported = false;\n            });\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse, parseSupported;\n          if (typeof parse == \"function\") {\n            attempt(function () {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  attempt(function () {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  });\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    });\n                  }\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    });\n                  }\n                }\n              }\n            }, function () {\n              parseSupported = false;\n            });\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n    has[\"bug-string-char-index\"] = has[\"date-serialization\"] = has[\"json\"] = has[\"json-stringify\"] = has[\"json-parse\"] = null;\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      var forOwn = function (object, callback) {\n        var size = 0, Properties, dontEnums, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        dontEnums = new Properties();\n        for (property in dontEnums) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(dontEnums, property)) {\n            size++;\n          }\n        }\n        Properties = dontEnums = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          dontEnums = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forOwn = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = dontEnums.length; property = dontEnums[--length];) {\n              if (hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forOwn = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forOwn(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\") && !has(\"date-serialization\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Serializes a date object.\n        var serializeDate = function (value) {\n          var getData, year, month, date, time, hours, minutes, seconds, milliseconds;\n          // Define additional utility methods if the `Date` methods are buggy.\n          if (!isExtended) {\n            var floor = Math.floor;\n            // A mapping between the months of the year and the number of days between\n            // January 1st and the first of the respective month.\n            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n            // Internal: Calculates the number of days between the Unix epoch and the\n            // first day of the given month.\n            var getDay = function (year, month) {\n              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n            };\n            getData = function (value) {\n              // Manually compute the year, month, date, hours, minutes,\n              // seconds, and milliseconds if the `getUTC*` methods are\n              // buggy. Adapted from @Yaffle's `date-shim` project.\n              date = floor(value / 864e5);\n              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n              date = 1 + date - getDay(year, month);\n              // The `time` value specifies the time within the day (see ES\n              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n              // to compute `A modulo B`, as the `%` operator does not\n              // correspond to the `modulo` operation for negative numbers.\n              time = (value % 864e5 + 864e5) % 864e5;\n              // The hours, minutes, seconds, and milliseconds are obtained by\n              // decomposing the time within the day. See section 15.9.1.10.\n              hours = floor(time / 36e5) % 24;\n              minutes = floor(time / 6e4) % 60;\n              seconds = floor(time / 1e3) % 60;\n              milliseconds = time % 1e3;\n            };\n          } else {\n            getData = function (value) {\n              year = value.getUTCFullYear();\n              month = value.getUTCMonth();\n              date = value.getUTCDate();\n              hours = value.getUTCHours();\n              minutes = value.getUTCMinutes();\n              seconds = value.getUTCSeconds();\n              milliseconds = value.getUTCMilliseconds();\n            };\n          }\n          serializeDate = function (value) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              getData(value);\n              // Serialize extended years correctly.\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n              \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n              // Months, dates, hours, minutes, and seconds should have two\n              // digits; milliseconds should have three.\n              \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n              // Milliseconds are optional in ES 5.0, but required in 5.1.\n              \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              year = month = date = hours = minutes = seconds = milliseconds = null;\n            } else {\n              value = null;\n            }\n            return value;\n          };\n          return serializeDate(value);\n        };\n\n        // For environments with `JSON.stringify` but buggy date serialization,\n        // we override the native `Date#toJSON` implementation with a\n        // spec-compliant one.\n        if (has(\"json-stringify\") && !has(\"date-serialization\")) {\n          // Internal: the `Date#toJSON` implementation used to override the native one.\n          function dateToJSON (key) {\n            return serializeDate(this);\n          }\n\n          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n          var nativeStringify = exports.stringify;\n          exports.stringify = function (source, filter, width) {\n            var nativeToJSON = Date.prototype.toJSON;\n            Date.prototype.toJSON = dateToJSON;\n            var result = nativeStringify(source, filter, width);\n            Date.prototype.toJSON = nativeToJSON;\n            return result;\n          }\n        } else {\n          // Internal: Double-quotes a string `value`, replacing all ASCII control\n          // characters (characters with code unit values between 0 and 31) with\n          // their escaped equivalents. This is an implementation of the\n          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n          var unicodePrefix = \"\\\\u00\";\n          var escapeChar = function (character) {\n            var charCode = character.charCodeAt(0), escaped = Escapes[charCode];\n            if (escaped) {\n              return escaped;\n            }\n            return unicodePrefix + toPaddedString(2, charCode.toString(16));\n          };\n          var reEscape = /[\\x00-\\x1f\\x22\\x5c]/g;\n          var quote = function (value) {\n            reEscape.lastIndex = 0;\n            return '\"' +\n              (\n                reEscape.test(value)\n                  ? value.replace(reEscape, escapeChar)\n                  : value\n              ) +\n              '\"';\n          };\n\n          // Internal: Recursively serializes an object. Implements the\n          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n          var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n            var value, type, className, results, element, index, length, prefix, result;\n            attempt(function () {\n              // Necessary for host object support.\n              value = object[property];\n            });\n            if (typeof value == \"object\" && value) {\n              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {\n                value = serializeDate(value);\n              } else if (typeof value.toJSON == \"function\") {\n                value = value.toJSON(property);\n              }\n            }\n            if (callback) {\n              // If a replacement function was provided, call it to obtain the value\n              // for serialization.\n              value = callback.call(object, property, value);\n            }\n            // Exit early if value is `undefined` or `null`.\n            if (value == undefined) {\n              return value === undefined ? value : \"null\";\n            }\n            type = typeof value;\n            // Only call `getClass` if the value is an object.\n            if (type == \"object\") {\n              className = getClass.call(value);\n            }\n            switch (className || type) {\n              case \"boolean\":\n              case booleanClass:\n                // Booleans are represented literally.\n                return \"\" + value;\n              case \"number\":\n              case numberClass:\n                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n                // `\"null\"`.\n                return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n              case \"string\":\n              case stringClass:\n                // Strings are double-quoted and escaped.\n                return quote(\"\" + value);\n            }\n            // Recursively serialize objects and arrays.\n            if (typeof value == \"object\") {\n              // Check for cyclic structures. This is a linear search; performance\n              // is inversely proportional to the number of unique nested objects.\n              for (length = stack.length; length--;) {\n                if (stack[length] === value) {\n                  // Cyclic structures cannot be serialized by `JSON.stringify`.\n                  throw TypeError();\n                }\n              }\n              // Add the object to the stack of traversed objects.\n              stack.push(value);\n              results = [];\n              // Save the current indentation level and indent one additional level.\n              prefix = indentation;\n              indentation += whitespace;\n              if (className == arrayClass) {\n                // Recursively serialize array elements.\n                for (index = 0, length = value.length; index < length; index++) {\n                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                  results.push(element === undefined ? \"null\" : element);\n                }\n                result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n              } else {\n                // Recursively serialize object members. Members are selected from\n                // either a user-specified list of property names, or the object\n                // itself.\n                forOwn(properties || value, function (property) {\n                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                  if (element !== undefined) {\n                    // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                    // is not the empty string, let `member` {quote(property) + \":\"}\n                    // be the concatenation of `member` and the `space` character.\"\n                    // The \"`space` character\" refers to the literal space\n                    // character, not the `space` {width} argument provided to\n                    // `JSON.stringify`.\n                    results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                  }\n                });\n                result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n              }\n              // Remove the object from the traversed object stack.\n              stack.pop();\n              return result;\n            }\n          };\n\n          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n          exports.stringify = function (source, filter, width) {\n            var whitespace, callback, properties, className;\n            if (objectTypes[typeof filter] && filter) {\n              className = getClass.call(filter);\n              if (className == functionClass) {\n                callback = filter;\n              } else if (className == arrayClass) {\n                // Convert the property names array into a makeshift set.\n                properties = {};\n                for (var index = 0, length = filter.length, value; index < length;) {\n                  value = filter[index++];\n                  className = getClass.call(value);\n                  if (className == \"[object String]\" || className == \"[object Number]\") {\n                    properties[value] = 1;\n                  }\n                }\n              }\n            }\n            if (width) {\n              className = getClass.call(width);\n              if (className == numberClass) {\n                // Convert the `width` to an integer and create a string containing\n                // `width` number of space characters.\n                if ((width -= width % 1) > 0) {\n                  if (width > 10) {\n                    width = 10;\n                  }\n                  for (whitespace = \"\"; whitespace.length < width;) {\n                    whitespace += \" \";\n                  }\n                }\n              } else if (className == stringClass) {\n                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n              }\n            }\n            // Opera <= 7.54u2 discards the values associated with empty string keys\n            // (`\"\"`) only if they are used directly within an object member list\n            // (e.g., `!(\"\" in { \"\": 1})`).\n            return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n          };\n        }\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                var temp = source.slice(Index, Index + 4);\n                if (temp == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (temp == \"fals\" && source.charCodeAt(Index + 4 ) == 101) {\n                  Index += 5;\n                  return false;\n                } else if (temp == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;;) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;;) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undefined) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forOwn` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(getClass, forOwn, value, length, callback);\n              }\n            } else {\n              forOwn(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports.runInContext = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root.JSON3,\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root.JSON3 = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root.JSON3 = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n", "module.exports = encode;\n\nfunction encode(string) {\n    string = string.replace(/\\r\\n/g, \"\\n\");\n    var utftext = \"\";\n\n    for (var n = 0; n < string.length; n++) {\n\n        var c = string.charCodeAt(n);\n\n        if (c < 128) {\n            utftext += String.fromCharCode(c);\n        }\n        else if ((c > 127) && (c < 2048)) {\n            utftext += String.fromCharCode((c >> 6) | 192);\n            utftext += String.fromCharCode((c & 63) | 128);\n        }\n        else {\n            utftext += String.fromCharCode((c >> 12) | 224);\n            utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n            utftext += String.fromCharCode((c & 63) | 128);\n        }\n\n    }\n\n    return utftext;\n}", "var utf8Encode = require('utf8-encode');\nvar keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nmodule.exports = encode;\nfunction encode(input) {\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n\n    input = utf8Encode(input);\n\n    while (i < input.length) {\n\n        chr1 = input.charCodeAt(i++);\n        chr2 = input.charCodeAt(i++);\n        chr3 = input.charCodeAt(i++);\n\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n            enc4 = 64;\n        }\n\n        output = output +\n            keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n            keyStr.charAt(enc3) + keyStr.charAt(enc4);\n\n    }\n\n    return output;\n}", "\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n", "/**\n * Module dependencies\n */\n\nvar debug = require('debug')('jsonp');\n\n/**\n * Module exports.\n */\n\nmodule.exports = jsonp;\n\n/**\n * Callback index.\n */\n\nvar count = 0;\n\n/**\n * Noop function.\n */\n\nfunction noop(){}\n\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\nfunction jsonp(url, opts, fn){\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n  if (!opts) opts = {};\n\n  var prefix = opts.prefix || '__jp';\n\n  // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n  var id = opts.name || (prefix + (count++));\n\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n\n  if (timeout) {\n    timer = setTimeout(function(){\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup(){\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel(){\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function(data){\n    debug('jsonp got', data);\n    cleanup();\n    if (fn) fn(null, data);\n  };\n\n  // add qs component\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n\n  debug('jsonp req \"%s\"', url);\n\n  // create script\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n\n  return cancel;\n}\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar JSON = require('json3');\nvar base64encode = require('@segment/base64-encode');\nvar cors = require('has-cors');\nvar jsonp = require('jsonp');\n\n/*\n * Exports.\n */\n\nexports = module.exports = cors ? json : base64;\n\n/**\n * Expose `callback`\n */\n\nexports.callback = 'callback';\n\n/**\n * Expose `prefix`\n */\n\nexports.prefix = 'data';\n\n/**\n * Expose `json`.\n */\n\nexports.json = json;\n\n/**\n * Expose `base64`.\n */\n\nexports.base64 = base64;\n\n/**\n * Expose `type`\n */\n\nexports.type = cors ? 'xhr' : 'jsonp';\n\n/**\n * Send the given `obj` to `url` with `fn(err, req)`.\n *\n * @param {String} url\n * @param {Object} obj\n * @param {Object} headers\n * @param {Function} fn\n * @api private\n */\n\nfunction json(url, obj, headers, fn) {\n  if (arguments.length === 3) fn = headers, headers = {};\n\n  var req = new XMLHttpRequest;\n  req.onerror = fn;\n  req.onreadystatechange = done;\n  req.open('POST', url, true);\n\n  // TODO: Remove this eslint disable\n  // eslint-disable-next-line guard-for-in\n  for (var k in headers) {\n    req.setRequestHeader(k, headers[k]);\n  }\n  req.send(JSON.stringify(obj));\n\n  function done() {\n    if (req.readyState === 4) {\n      return fn(null, req);\n    }\n  }\n}\n\n/**\n * Send the given `obj` to `url` with `fn(err, req)`.\n *\n * @param {String} url\n * @param {Object} obj\n * @param {Function} fn\n * @api private\n */\n\nfunction base64(url, obj, _, fn) {\n  if (arguments.length === 3) fn = _;\n\n  var prefix = exports.prefix;\n  var data = encode(obj);\n  url += '?' + prefix + '=' + data;\n  jsonp(url, { param: exports.callback }, function(err, obj) {\n    if (err) return fn(err);\n    fn(null, {\n      url: url,\n      body: obj\n    });\n  });\n}\n\n/**\n * Encodes `obj`.\n *\n * @param {Object} obj\n */\n\nfunction encode(obj) {\n  var str = '';\n  str = JSON.stringify(obj);\n  str = base64encode(str);\n  str = str.replace(/\\+/g, '-').replace(/\\//g, '_');\n  return encodeURIComponent(str);\n}\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bindAll = require('bind-all');\nvar send = require('@segment/send-json');\nvar debug = require('debug')('analytics.js:metrics');\nfunction Metrics(options) {\n    this.options(options);\n}\n/**\n * Set the metrics options.\n */\nMetrics.prototype.options = function (options) {\n    options = options || {};\n    this.host = options.host || 'api.segment.io/v1';\n    this.sampleRate = options.sampleRate || 0; // disable metrics by default.\n    this.flushTimer = options.flushTimer || 30 * 1000 /* 30s */;\n    this.maxQueueSize = options.maxQueueSize || 20;\n    this.queue = [];\n    if (this.sampleRate > 0) {\n        var self = this;\n        setInterval(function () {\n            self._flush();\n        }, this.flushTimer);\n    }\n};\n/**\n * Increments the counter identified by name and tags by one.\n */\nMetrics.prototype.increment = function (metric, tags) {\n    if (Math.random() > this.sampleRate) {\n        return;\n    }\n    if (this.queue.length >= this.maxQueueSize) {\n        return;\n    }\n    this.queue.push({ type: 'Counter', metric: metric, value: 1, tags: tags });\n    // Trigger a flush if this is an error metric.\n    if (metric.indexOf('error') > 0) {\n        this._flush();\n    }\n};\n/**\n * Flush all queued metrics.\n */\nMetrics.prototype._flush = function () {\n    var self = this;\n    if (self.queue.length <= 0) {\n        return;\n    }\n    var payload = { series: this.queue };\n    var headers = { 'Content-Type': 'text/plain' };\n    self.queue = [];\n    // This endpoint does not support jsonp, so only proceed if the browser\n    // supports xhr.\n    if (send.type !== 'xhr')\n        return;\n    send('https://' + this.host + '/m', payload, headers, function (err, res) {\n        debug('sent %O, received %O', payload, [err, res]);\n    });\n};\n/**\n * Expose the metrics singleton.\n */\nmodule.exports = bindAll(new Metrics());\n/**\n * Expose the `Metrics` constructor.\n */\nmodule.exports.Metrics = Metrics;\n", "'use strict';\n\nvar hop = Object.prototype.hasOwnProperty;\nvar strCharAt = String.prototype.charAt;\nvar toStr = Object.prototype.toString;\n\n/**\n * Returns the character at a given index.\n *\n * @param {string} str\n * @param {number} index\n * @return {string|undefined}\n */\n// TODO: Move to a library\nvar charAt = function(str, index) {\n  return strCharAt.call(str, index);\n};\n\n/**\n * hasOwnProperty, wrapped as a function.\n *\n * @name has\n * @api private\n * @param {*} context\n * @param {string|number} prop\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar has = function has(context, prop) {\n  return hop.call(context, prop);\n};\n\n/**\n * Returns true if a value is a string, otherwise false.\n *\n * @name isString\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n\n// TODO: Move to a library\nvar isString = function isString(val) {\n  return toStr.call(val) === '[object String]';\n};\n\n/**\n * Returns true if a value is array-like, otherwise false. Array-like means a\n * value is not null, undefined, or a function, and has a numeric `length`\n * property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to a library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (typeof val !== 'function' && typeof val.length === 'number');\n};\n\n\n/**\n * indexKeys\n *\n * @name indexKeys\n * @api private\n * @param {} target\n * @param {Function} pred\n * @return {Array}\n */\nvar indexKeys = function indexKeys(target, pred) {\n  pred = pred || has;\n\n  var results = [];\n\n  for (var i = 0, len = target.length; i < len; i += 1) {\n    if (pred(target, i)) {\n      results.push(String(i));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Returns an array of an object's owned keys.\n *\n * @name objectKeys\n * @api private\n * @param {*} target\n * @param {Function} pred Predicate function used to include/exclude values from\n * the resulting array.\n * @return {Array}\n */\nvar objectKeys = function objectKeys(target, pred) {\n  pred = pred || has;\n\n  var results = [];\n\n  for (var key in target) {\n    if (pred(target, key)) {\n      results.push(String(key));\n    }\n  }\n\n  return results;\n};\n\n/**\n * Creates an array composed of all keys on the input object. Ignores any non-enumerable properties.\n * More permissive than the native `Object.keys` function (non-objects will not throw errors).\n *\n * @name keys\n * @api public\n * @category Object\n * @param {Object} source The value to retrieve keys from.\n * @return {Array} An array containing all the input `source`'s keys.\n * @example\n * keys({ likes: 'avocado', hates: 'pineapple' });\n * //=> ['likes', 'pineapple'];\n *\n * // Ignores non-enumerable properties\n * var hasHiddenKey = { name: 'Tim' };\n * Object.defineProperty(hasHiddenKey, 'hidden', {\n *   value: 'i am not enumerable!',\n *   enumerable: false\n * })\n * keys(hasHiddenKey);\n * //=> ['name'];\n *\n * // Works on arrays\n * keys(['a', 'b', 'c']);\n * //=> ['0', '1', '2']\n *\n * // Skips unpopulated indices in sparse arrays\n * var arr = [1];\n * arr[4] = 4;\n * keys(arr);\n * //=> ['0', '4']\n */\nvar keys = function keys(source) {\n  if (source == null) {\n    return [];\n  }\n\n  // IE6-8 compatibility (string)\n  if (isString(source)) {\n    return indexKeys(source, charAt);\n  }\n\n  // IE6-8 compatibility (arguments)\n  if (isArrayLike(source)) {\n    return indexKeys(source, has);\n  }\n\n  return objectKeys(source);\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = keys;\n", "'use strict';\n/*\n * The MIT License (MIT)\n * Copyright (c) 2015 Nathan Houle\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/*\n * Module dependencies.\n */\nvar keys = require('@ndhoule/keys');\nvar objToString = Object.prototype.toString;\n/**\n * Tests if a value is a number.\n *\n * @name isNumber\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if `val` is a number, otherwise `false`.\n */\nvar isNumber = function isNumber(val) {\n    var type = typeof val;\n    return (type === 'number' ||\n        (type === 'object' && objToString.call(val) === '[object Number]'));\n};\n/**\n * Tests if a value is an array.\n *\n * @name isArray\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if the value is an array, otherwise `false`.\n */\nvar isArray = typeof Array.isArray === 'function'\n    ? Array.isArray\n    : function isArray(val) {\n        return objToString.call(val) === '[object Array]';\n    };\n/**\n * Tests if a value is array-like. Array-like means the value is not a function and has a numeric\n * `.length` property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\nvar isArrayLike = function isArrayLike(val) {\n    return (val != null &&\n        (isArray(val) || (val !== 'function' && isNumber(val.length))));\n};\n/**\n * Internal implementation of `each`. Works on arrays and array-like data structures.\n *\n * @name arrayEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array} array The array(-like) structure to iterate over.\n * @return {undefined}\n */\nvar arrayEach = function arrayEach(iterator, array) {\n    for (var i = 0; i < array.length; i += 1) {\n        // Break iteration early if `iterator` returns `false`\n        if (iterator(array[i], i, array) === false) {\n            break;\n        }\n    }\n};\n/**\n * Internal implementation of `each`. Works on objects.\n *\n * @name baseEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Object} object The object to iterate over.\n * @return {undefined}\n */\nvar baseEach = function baseEach(iterator, object) {\n    var ks = keys(object);\n    for (var i = 0; i < ks.length; i += 1) {\n        // Break iteration early if `iterator` returns `false`\n        if (iterator(object[ks[i]], ks[i], object) === false) {\n            break;\n        }\n    }\n};\n/**\n * Iterate over an input collection, invoking an `iterator` function for each element in the\n * collection and passing to it three arguments: `(value, index, collection)`. The `iterator`\n * function can end iteration early by returning `false`.\n *\n * @name each\n * @api public\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array|Object|string} collection The collection to iterate over.\n * @return {undefined} Because `each` is run only for side effects, always returns `undefined`.\n * @example\n * var log = console.log.bind(console);\n *\n * each(log, ['a', 'b', 'c']);\n * //-> 'a', 0, ['a', 'b', 'c']\n * //-> 'b', 1, ['a', 'b', 'c']\n * //-> 'c', 2, ['a', 'b', 'c']\n * //=> undefined\n *\n * each(log, 'tim');\n * //-> 't', 2, 'tim'\n * //-> 'i', 1, 'tim'\n * //-> 'm', 0, 'tim'\n * //=> undefined\n *\n * // Note: Iteration order not guaranteed across environments\n * each(log, { name: 'tim', occupation: 'enchanter' });\n * //-> 'tim', 'name', { name: 'tim', occupation: 'enchanter' }\n * //-> 'enchanter', 'occupation', { name: 'tim', occupation: 'enchanter' }\n * //=> undefined\n */\nvar each = function each(iterator, collection) {\n    return (isArrayLike(collection) ? arrayEach : baseEach).call(this, iterator, collection);\n};\n/*\n * Exports.\n */\nmodule.exports = each;\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Copy the properties of one or more `objects` onto a destination object. Input objects are iterated over\n * in left-to-right order, so duplicate properties on later objects will overwrite those from\n * erevious ones. Only enumerable and own properties of the input objects are copied onto the\n * resulting object.\n *\n * @name extend\n * @api public\n * @category Object\n * @param {Object} dest The destination object.\n * @param {...Object} sources The source objects.\n * @return {Object} `dest`, extended with the properties of all `sources`.\n * @example\n * var a = { a: 'a' };\n * var b = { b: 'b' };\n * var c = { c: 'c' };\n *\n * extend(a, b, c);\n * //=> { a: 'a', b: 'b', c: 'c' };\n */\nvar extend = function extend(dest /*, sources */) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  for (var i = 0; i < sources.length; i += 1) {\n    for (var key in sources[i]) {\n      if (has.call(sources[i], key)) {\n        dest[key] = sources[i][key];\n      }\n    }\n  }\n\n  return dest;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = extend;\n", "'use strict';\n/*\n * Module Dependencies.\n */\nvar bindAll = require('bind-all');\nvar clone = require('./utils/clone');\n/**\n * HOP.\n */\nvar has = Object.prototype.hasOwnProperty;\n/**\n * Expose `Memory`\n */\nmodule.exports = bindAll(new Memory());\n/**\n * Initialize `Memory` store\n */\nfunction Memory() {\n    this.store = {};\n}\n/**\n * Set a `key` and `value`.\n */\nMemory.prototype.set = function (key, value) {\n    this.store[key] = clone(value);\n    return true;\n};\n/**\n * Get a `key`.\n */\nMemory.prototype.get = function (key) {\n    if (!has.call(this.store, key))\n        return;\n    return clone(this.store[key]);\n};\n/**\n * Remove a `key`.\n */\nMemory.prototype.remove = function (key) {\n    delete this.store[key];\n    return true;\n};\n", "\"use strict\"\n\nvar JSON = require('json3');\n\nmodule.exports = (function() {\n\t// Store.js\n\tvar store = {},\n\t\twin = (typeof window != 'undefined' ? window : global),\n\t\tdoc = win.document,\n\t\tlocalStorageName = 'localStorage',\n\t\tscriptTag = 'script',\n\t\tstorage\n\n\tstore.disabled = false\n\tstore.version = '1.3.20'\n\tstore.set = function(key, value) {}\n\tstore.get = function(key, defaultVal) {}\n\tstore.has = function(key) { return store.get(key) !== undefined }\n\tstore.remove = function(key) {}\n\tstore.clear = function() {}\n\tstore.transact = function(key, defaultVal, transactionFn) {\n\t\tif (transactionFn == null) {\n\t\t\ttransactionFn = defaultVal\n\t\t\tdefaultVal = null\n\t\t}\n\t\tif (defaultVal == null) {\n\t\t\tdefaultVal = {}\n\t\t}\n\t\tvar val = store.get(key, defaultVal)\n\t\ttransactionFn(val)\n\t\tstore.set(key, val)\n\t}\n\tstore.getAll = function() {\n\t\tvar ret = {}\n\t\tstore.forEach(function(key, val) {\n\t\t\tret[key] = val\n\t\t})\n\t\treturn ret\n\t}\n\tstore.forEach = function() {}\n\tstore.serialize = function(value) {\n\t\treturn JSON.stringify(value)\n\t}\n\tstore.deserialize = function(value) {\n\t\tif (typeof value != 'string') { return undefined }\n\t\ttry { return JSON.parse(value) }\n\t\tcatch(e) { return value || undefined }\n\t}\n\n\t// Functions to encapsulate questionable FireFox 3.6.13 behavior\n\t// when about.config::dom.storage.enabled === false\n\t// See https://github.com/marcuswestin/store.js/issues#issue/13\n\tfunction isLocalStorageNameSupported() {\n\t\ttry { return (localStorageName in win && win[localStorageName]) }\n\t\tcatch(err) { return false }\n\t}\n\n\tif (isLocalStorageNameSupported()) {\n\t\tstorage = win[localStorageName]\n\t\tstore.set = function(key, val) {\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setItem(key, store.serialize(val))\n\t\t\treturn val\n\t\t}\n\t\tstore.get = function(key, defaultVal) {\n\t\t\tvar val = store.deserialize(storage.getItem(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t}\n\t\tstore.remove = function(key) { storage.removeItem(key) }\n\t\tstore.clear = function() { storage.clear() }\n\t\tstore.forEach = function(callback) {\n\t\t\tfor (var i=0; i<storage.length; i++) {\n\t\t\t\tvar key = storage.key(i)\n\t\t\t\tcallback(key, store.get(key))\n\t\t\t}\n\t\t}\n\t} else if (doc && doc.documentElement.addBehavior) {\n\t\tvar storageOwner,\n\t\t\tstorageContainer\n\t\t// Since #userData storage applies only to specific paths, we need to\n\t\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t\t// as a pretty safe option, since all browsers already make a request to\n\t\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t\t// since the iframe access rules appear to allow direct access and\n\t\t// manipulation of the document element, even for a 404 page.  This\n\t\t// document can be used instead of the current document (which would\n\t\t// have been limited to the current path) to perform #userData storage.\n\t\ttry {\n\t\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\t\tstorageContainer.open()\n\t\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\t\tstorageContainer.close()\n\t\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\t\tstorage = storageOwner.createElement('div')\n\t\t} catch(e) {\n\t\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t\t// security settings or otherwse), fall back to per-path storage\n\t\t\tstorage = doc.createElement('div')\n\t\t\tstorageOwner = doc.body\n\t\t}\n\t\tvar withIEStorage = function(storeFunction) {\n\t\t\treturn function() {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0)\n\t\t\t\targs.unshift(storage)\n\t\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\t\t\tstorageOwner.appendChild(storage)\n\t\t\t\tstorage.addBehavior('#default#userData')\n\t\t\t\tstorage.load(localStorageName)\n\t\t\t\tvar result = storeFunction.apply(store, args)\n\t\t\t\tstorageOwner.removeChild(storage)\n\t\t\t\treturn result\n\t\t\t}\n\t\t}\n\n\t\t// In IE7, keys cannot start with a digit or contain certain chars.\n\t\t// See https://github.com/marcuswestin/store.js/issues/40\n\t\t// See https://github.com/marcuswestin/store.js/issues/83\n\t\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\n\t\tvar ieKeyFix = function(key) {\n\t\t\treturn key.replace(/^d/, '___$&').replace(forbiddenCharsRegex, '___')\n\t\t}\n\t\tstore.set = withIEStorage(function(storage, key, val) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setAttribute(key, store.serialize(val))\n\t\t\tstorage.save(localStorageName)\n\t\t\treturn val\n\t\t})\n\t\tstore.get = withIEStorage(function(storage, key, defaultVal) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tvar val = store.deserialize(storage.getAttribute(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t})\n\t\tstore.remove = withIEStorage(function(storage, key) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tstorage.removeAttribute(key)\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.clear = withIEStorage(function(storage) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tstorage.load(localStorageName)\n\t\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\t\tstorage.removeAttribute(attributes[i].name)\n\t\t\t}\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.forEach = withIEStorage(function(storage, callback) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {\n\t\t\t\tcallback(attr.name, store.deserialize(storage.getAttribute(attr.name)))\n\t\t\t}\n\t\t})\n\t}\n\n\ttry {\n\t\tvar testKey = '__storejs__'\n\t\tstore.set(testKey, testKey)\n\t\tif (store.get(testKey) != testKey) { store.disabled = true }\n\t\tstore.remove(testKey)\n\t} catch(e) {\n\t\tstore.disabled = true\n\t}\n\tstore.enabled = !store.disabled\n\t\n\treturn store\n}())\n", "'use strict';\n/*\n * Module dependencies.\n */\nvar bindAll = require('bind-all');\nvar defaults = require('@ndhoule/defaults');\nvar store = require('@segment/store');\n/**\n * Initialize a new `Store` with `options`.\n *\n * @param {Object} options\n */\nfunction Store(options) {\n    this.options(options);\n}\n/**\n * Set the `options` for the store.\n */\nStore.prototype.options = function (options) {\n    if (arguments.length === 0)\n        return this._options;\n    options = options || {};\n    defaults(options, { enabled: true });\n    this.enabled = options.enabled && store.enabled;\n    this._options = options;\n};\n/**\n * Set a `key` and `value` in local storage.\n */\nStore.prototype.set = function (key, value) {\n    if (!this.enabled)\n        return false;\n    return store.set(key, value);\n};\n/**\n * Get a value from local storage by `key`.\n */\nStore.prototype.get = function (key) {\n    if (!this.enabled)\n        return null;\n    return store.get(key);\n};\n/**\n * Remove a value from local storage by `key`.\n */\nStore.prototype.remove = function (key) {\n    if (!this.enabled)\n        return false;\n    return store.remove(key);\n};\n/**\n * Expose the store singleton.\n */\nmodule.exports = bindAll(new Store());\n/**\n * Expose the `Store` constructor.\n */\nmodule.exports.Store = Store;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies.\n */\nvar clone = require('./utils/clone');\nvar cookie = require('./cookie');\nvar debug = require('debug')('analytics:entity');\nvar defaults = require('@ndhoule/defaults');\nvar extend = require('@ndhoule/extend');\nvar memory = require('./memory');\nvar store = require('./store');\nvar isodateTraverse = require('@segment/isodate-traverse');\n/**\n * Expose `Entity`\n */\nmodule.exports = Entity;\n/**\n * Initialize new `Entity` with `options`.\n */\nfunction Entity(options) {\n    this.options(options);\n    this.initialize();\n}\n/**\n * Initialize picks the storage.\n *\n * Checks to see if cookies can be set\n * otherwise fallsback to localStorage.\n */\nEntity.prototype.initialize = function () {\n    cookie.set('ajs:cookies', true);\n    // cookies are enabled.\n    if (cookie.get('ajs:cookies')) {\n        cookie.remove('ajs:cookies');\n        this._storage = cookie;\n        return;\n    }\n    // localStorage is enabled.\n    if (store.enabled) {\n        this._storage = store;\n        return;\n    }\n    // fallback to memory storage.\n    debug('warning using memory store both cookies and localStorage are disabled');\n    this._storage = memory;\n};\n/**\n * Get the storage.\n */\nEntity.prototype.storage = function () {\n    return this._storage;\n};\n/**\n * Get or set storage `options`.\n */\nEntity.prototype.options = function (options) {\n    if (arguments.length === 0)\n        return this._options;\n    this._options = defaults(options || {}, this.defaults || {});\n};\n/**\n * Get or set the entity's `id`.\n */\nEntity.prototype.id = function (id) {\n    switch (arguments.length) {\n        case 0:\n            return this._getId();\n        case 1:\n            return this._setId(id);\n        default:\n        // No default case\n    }\n};\n/**\n * Get the entity's id.\n */\nEntity.prototype._getId = function () {\n    if (!this._options.persist) {\n        return this._id === undefined ? null : this._id;\n    }\n    // Check cookies.\n    var cookieId = this._getIdFromCookie();\n    if (cookieId) {\n        return cookieId;\n    }\n    // Check localStorage.\n    var lsId = this._getIdFromLocalStorage();\n    if (lsId) {\n        // Copy the id to cookies so we can read it directly from cookies next time.\n        this._setIdInCookies(lsId);\n        return lsId;\n    }\n    return null;\n};\n/**\n * Get the entity's id from cookies.\n */\n// FIXME `options.cookie` is an optional field, so `this._options.cookie.key`\n// can thrown an exception.\nEntity.prototype._getIdFromCookie = function () {\n    return this.storage().get(this._options.cookie.key);\n};\n/**\n * Get the entity's id from cookies.\n */\nEntity.prototype._getIdFromLocalStorage = function () {\n    if (!this._options.localStorageFallbackDisabled) {\n        return store.get(this._options.cookie.key);\n    }\n    return null;\n};\n/**\n * Set the entity's `id`.\n */\nEntity.prototype._setId = function (id) {\n    if (this._options.persist) {\n        this._setIdInCookies(id);\n        this._setIdInLocalStorage(id);\n    }\n    else {\n        this._id = id;\n    }\n};\n/**\n * Set the entity's `id` in cookies.\n */\nEntity.prototype._setIdInCookies = function (id) {\n    this.storage().set(this._options.cookie.key, id);\n};\n/**\n * Set the entity's `id` in local storage.\n */\nEntity.prototype._setIdInLocalStorage = function (id) {\n    if (!this._options.localStorageFallbackDisabled) {\n        store.set(this._options.cookie.key, id);\n    }\n};\n/**\n * Get or set the entity's `traits`.\n *\n * BACKWARDS COMPATIBILITY: aliased to `properties`\n */\nEntity.prototype.properties = Entity.prototype.traits = function (traits) {\n    switch (arguments.length) {\n        case 0:\n            return this._getTraits();\n        case 1:\n            return this._setTraits(traits);\n        default:\n        // No default case\n    }\n};\n/**\n * Get the entity's traits. Always convert ISO date strings into real dates,\n * since they aren't parsed back from local storage.\n */\nEntity.prototype._getTraits = function () {\n    var ret = this._options.persist\n        ? store.get(this._options.localStorage.key)\n        : this._traits;\n    return ret ? isodateTraverse(clone(ret)) : {};\n};\n/**\n * Set the entity's `traits`.\n */\nEntity.prototype._setTraits = function (traits) {\n    traits = traits || {};\n    if (this._options.persist) {\n        store.set(this._options.localStorage.key, traits);\n    }\n    else {\n        this._traits = traits;\n    }\n};\n/**\n * Identify the entity with an `id` and `traits`. If we it's the same entity,\n * extend the existing `traits` instead of overwriting.\n */\nEntity.prototype.identify = function (id, traits) {\n    traits = traits || {};\n    var current = this.id();\n    if (current === null || current === id)\n        traits = extend(this.traits(), traits);\n    if (id)\n        this.id(id);\n    this.debug('identify %o, %o', id, traits);\n    this.traits(traits);\n    this.save();\n};\n/**\n * Save the entity to local storage and the cookie.\n */\nEntity.prototype.save = function () {\n    if (!this._options.persist)\n        return false;\n    this._setId(this.id());\n    this._setTraits(this.traits());\n    return true;\n};\n/**\n * Log the entity out, reseting `id` and `traits` to defaults.\n */\nEntity.prototype.logout = function () {\n    this.id(null);\n    this.traits({});\n    this.storage().remove(this._options.cookie.key);\n    store.remove(this._options.cookie.key);\n    store.remove(this._options.localStorage.key);\n};\n/**\n * Reset all entity state, logging out and returning options to defaults.\n */\nEntity.prototype.reset = function () {\n    this.logout();\n    this.options({});\n};\n/**\n * Load saved entity `id` or `traits` from storage.\n */\nEntity.prototype.load = function () {\n    this.id(this.id());\n    this.traits(this.traits());\n};\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies.\n */\nvar Entity = require('./entity');\nvar bindAll = require('bind-all');\nvar debug = require('debug')('analytics:group');\nvar inherit = require('inherits');\n/**\n * Group defaults\n */\nGroup.defaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_group_id'\n    },\n    localStorage: {\n        key: 'ajs_group_properties'\n    }\n};\n/**\n * Initialize a new `Group` with `options`.\n */\nfunction Group(options) {\n    this.defaults = Group.defaults;\n    this.debug = debug;\n    Entity.call(this, options);\n}\n/**\n * Inherit `Entity`\n */\ninherit(Group, Entity);\n/**\n * Expose the group singleton.\n */\nmodule.exports = bindAll(new Group());\n/**\n * Expose the `Group` constructor.\n */\nmodule.exports.Group = Group;\n", "/* globals window, HTMLElement */\n\n'use strict';\n\n/**!\n * is\n * the definitive JavaScript type testing library\n *\n * @copyright 2013-2014 Enrico Marino / Jordan Harband\n * @license MIT\n */\n\nvar objProto = Object.prototype;\nvar owns = objProto.hasOwnProperty;\nvar toStr = objProto.toString;\nvar symbolValueOf;\nif (typeof Symbol === 'function') {\n  symbolValueOf = Symbol.prototype.valueOf;\n}\nvar bigIntValueOf;\nif (typeof BigInt === 'function') {\n  bigIntValueOf = BigInt.prototype.valueOf;\n}\nvar isActualNaN = function (value) {\n  return value !== value;\n};\nvar NON_HOST_TYPES = {\n  'boolean': 1,\n  number: 1,\n  string: 1,\n  undefined: 1\n};\n\nvar base64Regex = /^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;\nvar hexRegex = /^[A-Fa-f0-9]+$/;\n\n/**\n * Expose `is`\n */\n\nvar is = {};\n\n/**\n * Test general.\n */\n\n/**\n * is.type\n * Test if `value` is a type of `type`.\n *\n * @param {*} value value to test\n * @param {String} type type\n * @return {Boolean} true if `value` is a type of `type`, false otherwise\n * @api public\n */\n\nis.a = is.type = function (value, type) {\n  return typeof value === type;\n};\n\n/**\n * is.defined\n * Test if `value` is defined.\n *\n * @param {*} value value to test\n * @return {Boolean} true if 'value' is defined, false otherwise\n * @api public\n */\n\nis.defined = function (value) {\n  return typeof value !== 'undefined';\n};\n\n/**\n * is.empty\n * Test if `value` is empty.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is empty, false otherwise\n * @api public\n */\n\nis.empty = function (value) {\n  var type = toStr.call(value);\n  var key;\n\n  if (type === '[object Array]' || type === '[object Arguments]' || type === '[object String]') {\n    return value.length === 0;\n  }\n\n  if (type === '[object Object]') {\n    for (key in value) {\n      if (owns.call(value, key)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  return !value;\n};\n\n/**\n * is.equal\n * Test if `value` is equal to `other`.\n *\n * @param {*} value value to test\n * @param {*} other value to compare with\n * @return {Boolean} true if `value` is equal to `other`, false otherwise\n */\n\nis.equal = function equal(value, other) {\n  if (value === other) {\n    return true;\n  }\n\n  var type = toStr.call(value);\n  var key;\n\n  if (type !== toStr.call(other)) {\n    return false;\n  }\n\n  if (type === '[object Object]') {\n    for (key in value) {\n      if (!is.equal(value[key], other[key]) || !(key in other)) {\n        return false;\n      }\n    }\n    for (key in other) {\n      if (!is.equal(value[key], other[key]) || !(key in value)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  if (type === '[object Array]') {\n    key = value.length;\n    if (key !== other.length) {\n      return false;\n    }\n    while (key--) {\n      if (!is.equal(value[key], other[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  if (type === '[object Function]') {\n    return value.prototype === other.prototype;\n  }\n\n  if (type === '[object Date]') {\n    return value.getTime() === other.getTime();\n  }\n\n  return false;\n};\n\n/**\n * is.hosted\n * Test if `value` is hosted by `host`.\n *\n * @param {*} value to test\n * @param {*} host host to test with\n * @return {Boolean} true if `value` is hosted by `host`, false otherwise\n * @api public\n */\n\nis.hosted = function (value, host) {\n  var type = typeof host[value];\n  return type === 'object' ? !!host[value] : !NON_HOST_TYPES[type];\n};\n\n/**\n * is.instance\n * Test if `value` is an instance of `constructor`.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an instance of `constructor`\n * @api public\n */\n\nis.instance = is['instanceof'] = function (value, constructor) {\n  return value instanceof constructor;\n};\n\n/**\n * is.nil / is.null\n * Test if `value` is null.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is null, false otherwise\n * @api public\n */\n\nis.nil = is['null'] = function (value) {\n  return value === null;\n};\n\n/**\n * is.undef / is.undefined\n * Test if `value` is undefined.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is undefined, false otherwise\n * @api public\n */\n\nis.undef = is.undefined = function (value) {\n  return typeof value === 'undefined';\n};\n\n/**\n * Test arguments.\n */\n\n/**\n * is.args\n * Test if `value` is an arguments object.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an arguments object, false otherwise\n * @api public\n */\n\nis.args = is.arguments = function (value) {\n  var isStandardArguments = toStr.call(value) === '[object Arguments]';\n  var isOldArguments = !is.array(value) && is.arraylike(value) && is.object(value) && is.fn(value.callee);\n  return isStandardArguments || isOldArguments;\n};\n\n/**\n * Test array.\n */\n\n/**\n * is.array\n * Test if 'value' is an array.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an array, false otherwise\n * @api public\n */\n\nis.array = Array.isArray || function (value) {\n  return toStr.call(value) === '[object Array]';\n};\n\n/**\n * is.arguments.empty\n * Test if `value` is an empty arguments object.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an empty arguments object, false otherwise\n * @api public\n */\nis.args.empty = function (value) {\n  return is.args(value) && value.length === 0;\n};\n\n/**\n * is.array.empty\n * Test if `value` is an empty array.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an empty array, false otherwise\n * @api public\n */\nis.array.empty = function (value) {\n  return is.array(value) && value.length === 0;\n};\n\n/**\n * is.arraylike\n * Test if `value` is an arraylike object.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an arguments object, false otherwise\n * @api public\n */\n\nis.arraylike = function (value) {\n  return !!value && !is.bool(value)\n    && owns.call(value, 'length')\n    && isFinite(value.length)\n    && is.number(value.length)\n    && value.length >= 0;\n};\n\n/**\n * Test boolean.\n */\n\n/**\n * is.bool\n * Test if `value` is a boolean.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a boolean, false otherwise\n * @api public\n */\n\nis.bool = is['boolean'] = function (value) {\n  return toStr.call(value) === '[object Boolean]';\n};\n\n/**\n * is.false\n * Test if `value` is false.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is false, false otherwise\n * @api public\n */\n\nis['false'] = function (value) {\n  return is.bool(value) && Boolean(Number(value)) === false;\n};\n\n/**\n * is.true\n * Test if `value` is true.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is true, false otherwise\n * @api public\n */\n\nis['true'] = function (value) {\n  return is.bool(value) && Boolean(Number(value)) === true;\n};\n\n/**\n * Test date.\n */\n\n/**\n * is.date\n * Test if `value` is a date.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a date, false otherwise\n * @api public\n */\n\nis.date = function (value) {\n  return toStr.call(value) === '[object Date]';\n};\n\n/**\n * is.date.valid\n * Test if `value` is a valid date.\n *\n * @param {*} value value to test\n * @returns {Boolean} true if `value` is a valid date, false otherwise\n */\nis.date.valid = function (value) {\n  return is.date(value) && !isNaN(Number(value));\n};\n\n/**\n * Test element.\n */\n\n/**\n * is.element\n * Test if `value` is an html element.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an HTML Element, false otherwise\n * @api public\n */\n\nis.element = function (value) {\n  return value !== undefined\n    && typeof HTMLElement !== 'undefined'\n    && value instanceof HTMLElement\n    && value.nodeType === 1;\n};\n\n/**\n * Test error.\n */\n\n/**\n * is.error\n * Test if `value` is an error object.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an error object, false otherwise\n * @api public\n */\n\nis.error = function (value) {\n  return toStr.call(value) === '[object Error]';\n};\n\n/**\n * Test function.\n */\n\n/**\n * is.fn / is.function (deprecated)\n * Test if `value` is a function.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a function, false otherwise\n * @api public\n */\n\nis.fn = is['function'] = function (value) {\n  var isAlert = typeof window !== 'undefined' && value === window.alert;\n  if (isAlert) {\n    return true;\n  }\n  var str = toStr.call(value);\n  return str === '[object Function]' || str === '[object GeneratorFunction]' || str === '[object AsyncFunction]';\n};\n\n/**\n * Test number.\n */\n\n/**\n * is.number\n * Test if `value` is a number.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a number, false otherwise\n * @api public\n */\n\nis.number = function (value) {\n  return toStr.call(value) === '[object Number]';\n};\n\n/**\n * is.infinite\n * Test if `value` is positive or negative infinity.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is positive or negative Infinity, false otherwise\n * @api public\n */\nis.infinite = function (value) {\n  return value === Infinity || value === -Infinity;\n};\n\n/**\n * is.decimal\n * Test if `value` is a decimal number.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a decimal number, false otherwise\n * @api public\n */\n\nis.decimal = function (value) {\n  return is.number(value) && !isActualNaN(value) && !is.infinite(value) && value % 1 !== 0;\n};\n\n/**\n * is.divisibleBy\n * Test if `value` is divisible by `n`.\n *\n * @param {Number} value value to test\n * @param {Number} n dividend\n * @return {Boolean} true if `value` is divisible by `n`, false otherwise\n * @api public\n */\n\nis.divisibleBy = function (value, n) {\n  var isDividendInfinite = is.infinite(value);\n  var isDivisorInfinite = is.infinite(n);\n  var isNonZeroNumber = is.number(value) && !isActualNaN(value) && is.number(n) && !isActualNaN(n) && n !== 0;\n  return isDividendInfinite || isDivisorInfinite || (isNonZeroNumber && value % n === 0);\n};\n\n/**\n * is.integer\n * Test if `value` is an integer.\n *\n * @param value to test\n * @return {Boolean} true if `value` is an integer, false otherwise\n * @api public\n */\n\nis.integer = is['int'] = function (value) {\n  return is.number(value) && !isActualNaN(value) && value % 1 === 0;\n};\n\n/**\n * is.maximum\n * Test if `value` is greater than 'others' values.\n *\n * @param {Number} value value to test\n * @param {Array} others values to compare with\n * @return {Boolean} true if `value` is greater than `others` values\n * @api public\n */\n\nis.maximum = function (value, others) {\n  if (isActualNaN(value)) {\n    throw new TypeError('NaN is not a valid value');\n  } else if (!is.arraylike(others)) {\n    throw new TypeError('second argument must be array-like');\n  }\n  var len = others.length;\n\n  while (--len >= 0) {\n    if (value < others[len]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * is.minimum\n * Test if `value` is less than `others` values.\n *\n * @param {Number} value value to test\n * @param {Array} others values to compare with\n * @return {Boolean} true if `value` is less than `others` values\n * @api public\n */\n\nis.minimum = function (value, others) {\n  if (isActualNaN(value)) {\n    throw new TypeError('NaN is not a valid value');\n  } else if (!is.arraylike(others)) {\n    throw new TypeError('second argument must be array-like');\n  }\n  var len = others.length;\n\n  while (--len >= 0) {\n    if (value > others[len]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * is.nan\n * Test if `value` is not a number.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is not a number, false otherwise\n * @api public\n */\n\nis.nan = function (value) {\n  return !is.number(value) || value !== value;\n};\n\n/**\n * is.even\n * Test if `value` is an even number.\n *\n * @param {Number} value value to test\n * @return {Boolean} true if `value` is an even number, false otherwise\n * @api public\n */\n\nis.even = function (value) {\n  return is.infinite(value) || (is.number(value) && value === value && value % 2 === 0);\n};\n\n/**\n * is.odd\n * Test if `value` is an odd number.\n *\n * @param {Number} value value to test\n * @return {Boolean} true if `value` is an odd number, false otherwise\n * @api public\n */\n\nis.odd = function (value) {\n  return is.infinite(value) || (is.number(value) && value === value && value % 2 !== 0);\n};\n\n/**\n * is.ge\n * Test if `value` is greater than or equal to `other`.\n *\n * @param {Number} value value to test\n * @param {Number} other value to compare with\n * @return {Boolean}\n * @api public\n */\n\nis.ge = function (value, other) {\n  if (isActualNaN(value) || isActualNaN(other)) {\n    throw new TypeError('NaN is not a valid value');\n  }\n  return !is.infinite(value) && !is.infinite(other) && value >= other;\n};\n\n/**\n * is.gt\n * Test if `value` is greater than `other`.\n *\n * @param {Number} value value to test\n * @param {Number} other value to compare with\n * @return {Boolean}\n * @api public\n */\n\nis.gt = function (value, other) {\n  if (isActualNaN(value) || isActualNaN(other)) {\n    throw new TypeError('NaN is not a valid value');\n  }\n  return !is.infinite(value) && !is.infinite(other) && value > other;\n};\n\n/**\n * is.le\n * Test if `value` is less than or equal to `other`.\n *\n * @param {Number} value value to test\n * @param {Number} other value to compare with\n * @return {Boolean} if 'value' is less than or equal to 'other'\n * @api public\n */\n\nis.le = function (value, other) {\n  if (isActualNaN(value) || isActualNaN(other)) {\n    throw new TypeError('NaN is not a valid value');\n  }\n  return !is.infinite(value) && !is.infinite(other) && value <= other;\n};\n\n/**\n * is.lt\n * Test if `value` is less than `other`.\n *\n * @param {Number} value value to test\n * @param {Number} other value to compare with\n * @return {Boolean} if `value` is less than `other`\n * @api public\n */\n\nis.lt = function (value, other) {\n  if (isActualNaN(value) || isActualNaN(other)) {\n    throw new TypeError('NaN is not a valid value');\n  }\n  return !is.infinite(value) && !is.infinite(other) && value < other;\n};\n\n/**\n * is.within\n * Test if `value` is within `start` and `finish`.\n *\n * @param {Number} value value to test\n * @param {Number} start lower bound\n * @param {Number} finish upper bound\n * @return {Boolean} true if 'value' is is within 'start' and 'finish'\n * @api public\n */\nis.within = function (value, start, finish) {\n  if (isActualNaN(value) || isActualNaN(start) || isActualNaN(finish)) {\n    throw new TypeError('NaN is not a valid value');\n  } else if (!is.number(value) || !is.number(start) || !is.number(finish)) {\n    throw new TypeError('all arguments must be numbers');\n  }\n  var isAnyInfinite = is.infinite(value) || is.infinite(start) || is.infinite(finish);\n  return isAnyInfinite || (value >= start && value <= finish);\n};\n\n/**\n * Test object.\n */\n\n/**\n * is.object\n * Test if `value` is an object.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is an object, false otherwise\n * @api public\n */\nis.object = function (value) {\n  return toStr.call(value) === '[object Object]';\n};\n\n/**\n * is.primitive\n * Test if `value` is a primitive.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a primitive, false otherwise\n * @api public\n */\nis.primitive = function isPrimitive(value) {\n  if (!value) {\n    return true;\n  }\n  if (typeof value === 'object' || is.object(value) || is.fn(value) || is.array(value)) {\n    return false;\n  }\n  return true;\n};\n\n/**\n * is.hash\n * Test if `value` is a hash - a plain object literal.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a hash, false otherwise\n * @api public\n */\n\nis.hash = function (value) {\n  return is.object(value) && value.constructor === Object && !value.nodeType && !value.setInterval;\n};\n\n/**\n * Test regexp.\n */\n\n/**\n * is.regexp\n * Test if `value` is a regular expression.\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a regexp, false otherwise\n * @api public\n */\n\nis.regexp = function (value) {\n  return toStr.call(value) === '[object RegExp]';\n};\n\n/**\n * Test string.\n */\n\n/**\n * is.string\n * Test if `value` is a string.\n *\n * @param {*} value value to test\n * @return {Boolean} true if 'value' is a string, false otherwise\n * @api public\n */\n\nis.string = function (value) {\n  return toStr.call(value) === '[object String]';\n};\n\n/**\n * Test base64 string.\n */\n\n/**\n * is.base64\n * Test if `value` is a valid base64 encoded string.\n *\n * @param {*} value value to test\n * @return {Boolean} true if 'value' is a base64 encoded string, false otherwise\n * @api public\n */\n\nis.base64 = function (value) {\n  return is.string(value) && (!value.length || base64Regex.test(value));\n};\n\n/**\n * Test base64 string.\n */\n\n/**\n * is.hex\n * Test if `value` is a valid hex encoded string.\n *\n * @param {*} value value to test\n * @return {Boolean} true if 'value' is a hex encoded string, false otherwise\n * @api public\n */\n\nis.hex = function (value) {\n  return is.string(value) && (!value.length || hexRegex.test(value));\n};\n\n/**\n * is.symbol\n * Test if `value` is an ES6 Symbol\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a Symbol, false otherise\n * @api public\n */\n\nis.symbol = function (value) {\n  return typeof Symbol === 'function' && toStr.call(value) === '[object Symbol]' && typeof symbolValueOf.call(value) === 'symbol';\n};\n\n/**\n * is.bigint\n * Test if `value` is an ES-proposed BigInt\n *\n * @param {*} value value to test\n * @return {Boolean} true if `value` is a BigInt, false otherise\n * @api public\n */\n\nis.bigint = function (value) {\n  // eslint-disable-next-line valid-typeof\n  return typeof BigInt === 'function' && toStr.call(value) === '[object BigInt]' && typeof bigIntValueOf.call(value) === 'bigint';\n};\n\nmodule.exports = is;\n", "'use strict';\n\nfunction isMeta(e) {\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) {\n    return true;\n  }\n\n  // Logic that handles checks for the middle mouse button, based\n  // on [jQuery](https://github.com/jquery/jquery/blob/master/src/event.js#L466).\n  var which = e.which;\n  var button = e.button;\n  if (!which && button !== undefined) {\n    // eslint-disable-next-line no-bitwise, no-extra-parens\n    return (!button & 1) && (!button & 2) && (button & 4);\n  } else if (which === 2) {\n    return true;\n  }\n\n  return false;\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = isMeta;\n", "'use strict';\n\nvar callable, byObserver;\n\ncallable = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\nbyObserver = function (Observer) {\n\tvar node = document.createTextNode(''), queue, i = 0;\n\tnew Observer(function () {\n\t\tvar data;\n\t\tif (!queue) return;\n\t\tdata = queue;\n\t\tqueue = null;\n\t\tif (typeof data === 'function') {\n\t\t\tdata();\n\t\t\treturn;\n\t\t}\n\t\tdata.forEach(function (fn) { fn(); });\n\t}).observe(node, { characterData: true });\n\treturn function (fn) {\n\t\tcallable(fn);\n\t\tif (queue) {\n\t\t\tif (typeof queue === 'function') queue = [queue, fn];\n\t\t\telse queue.push(fn);\n\t\t\treturn;\n\t\t}\n\t\tqueue = fn;\n\t\tnode.data = (i = ++i % 2);\n\t};\n};\n\nmodule.exports = (function () {\n\t// Node.js\n\tif ((typeof process !== 'undefined') && process &&\n\t\t\t(typeof process.nextTick === 'function')) {\n\t\treturn process.nextTick;\n\t}\n\n\t// MutationObserver=\n\tif ((typeof document === 'object') && document) {\n\t\tif (typeof MutationObserver === 'function') {\n\t\t\treturn byObserver(MutationObserver);\n\t\t}\n\t\tif (typeof WebKitMutationObserver === 'function') {\n\t\t\treturn byObserver(WebKitMutationObserver);\n\t\t}\n\t}\n\n\t// W3C Draft\n\t// http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\tif (typeof setImmediate === 'function') {\n\t\treturn function (cb) { setImmediate(callable(cb)); };\n\t}\n\n\t// Wide available standard\n\tif (typeof setTimeout === 'function') {\n\t\treturn function (cb) { setTimeout(callable(cb), 0); };\n\t}\n\n\treturn null;\n}());\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar keys = require('@ndhoule/keys');\n\nvar objToString = Object.prototype.toString;\n\n/**\n * Tests if a value is a number.\n *\n * @name isNumber\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if `val` is a number, otherwise `false`.\n */\n// TODO: Move to library\nvar isNumber = function isNumber(val) {\n  var type = typeof val;\n  return type === 'number' || (type === 'object' && objToString.call(val) === '[object Number]');\n};\n\n/**\n * Tests if a value is an array.\n *\n * @name isArray\n * @api private\n * @param {*} val The value to test.\n * @return {boolean} Returns `true` if the value is an array, otherwise `false`.\n */\n// TODO: Move to library\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function isArray(val) {\n  return objToString.call(val) === '[object Array]';\n};\n\n/**\n * Tests if a value is array-like. Array-like means the value is not a function and has a numeric\n * `.length` property.\n *\n * @name isArrayLike\n * @api private\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to library\nvar isArrayLike = function isArrayLike(val) {\n  return val != null && (isArray(val) || (val !== 'function' && isNumber(val.length)));\n};\n\n/**\n * Internal implementation of `each`. Works on arrays and array-like data structures.\n *\n * @name arrayEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array} array The array(-like) structure to iterate over.\n * @return {undefined}\n */\nvar arrayEach = function arrayEach(iterator, array) {\n  for (var i = 0; i < array.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(array[i], i, array) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Internal implementation of `each`. Works on objects.\n *\n * @name baseEach\n * @api private\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Object} object The object to iterate over.\n * @return {undefined}\n */\nvar baseEach = function baseEach(iterator, object) {\n  var ks = keys(object);\n\n  for (var i = 0; i < ks.length; i += 1) {\n    // Break iteration early if `iterator` returns `false`\n    if (iterator(object[ks[i]], ks[i], object) === false) {\n      break;\n    }\n  }\n};\n\n/**\n * Iterate over an input collection, invoking an `iterator` function for each element in the\n * collection and passing to it three arguments: `(value, index, collection)`. The `iterator`\n * function can end iteration early by returning `false`.\n *\n * @name each\n * @api public\n * @param {Function(value, key, collection)} iterator The function to invoke per iteration.\n * @param {Array|Object|string} collection The collection to iterate over.\n * @return {undefined} Because `each` is run only for side effects, always returns `undefined`.\n * @example\n * var log = console.log.bind(console);\n *\n * each(log, ['a', 'b', 'c']);\n * //-> 'a', 0, ['a', 'b', 'c']\n * //-> 'b', 1, ['a', 'b', 'c']\n * //-> 'c', 2, ['a', 'b', 'c']\n * //=> undefined\n *\n * each(log, 'tim');\n * //-> 't', 2, 'tim'\n * //-> 'i', 1, 'tim'\n * //-> 'm', 0, 'tim'\n * //=> undefined\n *\n * // Note: Iteration order not guaranteed across environments\n * each(log, { name: 'tim', occupation: 'enchanter' });\n * //-> 'tim', 'name', { name: 'tim', occupation: 'enchanter' }\n * //-> 'enchanter', 'occupation', { name: 'tim', occupation: 'enchanter' }\n * //=> undefined\n */\nvar each = function each(iterator, collection) {\n  return (isArrayLike(collection) ? arrayEach : baseEach).call(this, iterator, collection);\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = each;\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar each = require('@ndhoule/each');\n\nvar strIndexOf = String.prototype.indexOf;\n\n/**\n * Object.is/sameValueZero polyfill.\n *\n * @api private\n * @param {*} value1\n * @param {*} value2\n * @return {boolean}\n */\n// TODO: Move to library\nvar sameValueZero = function sameValueZero(value1, value2) {\n  // Normal values and check for 0 / -0\n  if (value1 === value2) {\n    return value1 !== 0 || 1 / value1 === 1 / value2;\n  }\n  // NaN\n  return value1 !== value1 && value2 !== value2;\n};\n\n/**\n * Searches a given `collection` for a value, returning true if the collection\n * contains the value and false otherwise. Can search strings, arrays, and\n * objects.\n *\n * @name includes\n * @api public\n * @param {*} searchElement The element to search for.\n * @param {Object|Array|string} collection The collection to search.\n * @return {boolean}\n * @example\n * includes(2, [1, 2, 3]);\n * //=> true\n *\n * includes(4, [1, 2, 3]);\n * //=> false\n *\n * includes(2, { a: 1, b: 2, c: 3 });\n * //=> true\n *\n * includes('a', { a: 1, b: 2, c: 3 });\n * //=> false\n *\n * includes('abc', 'xyzabc opq');\n * //=> true\n *\n * includes('nope', 'xyzabc opq');\n * //=> false\n */\nvar includes = function includes(searchElement, collection) {\n  var found = false;\n\n  // Delegate to String.prototype.indexOf when `collection` is a string\n  if (typeof collection === 'string') {\n    return strIndexOf.call(collection, searchElement) !== -1;\n  }\n\n  // Iterate through enumerable/own array elements and object properties.\n  each(function(value) {\n    if (sameValueZero(value, searchElement)) {\n      found = true;\n      // Exit iteration early when found\n      return false;\n    }\n  }, collection);\n\n  return found;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = includes;\n", "'use strict';\n/*\n * The MIT License (MIT)\n * Copyright (c) 2015 Nathan Houle\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/*\n * Module dependencies.\n */\nvar each = require('./each');\n/**\n * Produce a new array by passing each value in the input `collection` through a transformative\n * `iterator` function. The `iterator` function is passed three arguments:\n * `(value, index, collection)`.\n *\n * @name map\n * @api public\n * @param {Function} iterator The transformer function to invoke per iteration.\n * @param {Array} collection The collection to iterate over.\n * @return {Array} A new array containing the results of each `iterator` invocation.\n * @example\n * var square = function(x) { return x * x; };\n *\n * map(square, [1, 2, 3]);\n * //=> [1, 4, 9]\n */\nvar map = function map(iterator, collection) {\n    if (typeof iterator !== 'function') {\n        throw new TypeError('Expected a function but received a ' + typeof iterator);\n    }\n    var result = [];\n    each(function (val, i, collection) {\n        result.push(iterator(val, i, collection));\n    }, collection);\n    return result;\n};\n/*\n * Exports.\n */\nmodule.exports = map;\n", "// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n", "/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n", "var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n", "(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function ff(a, b, c, d, x, s, t) {\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    }\n\n    function gg(a, b, c, d, x, s, t) {\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    }\n\n    function hh(a, b, c, d, x, s, t) {\n        return cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n\n    function ii(a, b, c, d, x, s, t) {\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a = ff(a, b, c, d, k[0], 7, -680876936);\n        d = ff(d, a, b, c, k[1], 12, -389564586);\n        c = ff(c, d, a, b, k[2], 17, 606105819);\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\n        a = ff(a, b, c, d, k[4], 7, -176418897);\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\n        b = ff(b, c, d, a, k[7], 22, -45705983);\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\n        c = ff(c, d, a, b, k[10], 17, -42063);\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\n        d = ff(d, a, b, c, k[13], 12, -40341101);\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n        a = gg(a, b, c, d, k[1], 5, -165796510);\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\n        c = gg(c, d, a, b, k[11], 14, 643717713);\n        b = gg(b, c, d, a, k[0], 20, -373897302);\n        a = gg(a, b, c, d, k[5], 5, -701558691);\n        d = gg(d, a, b, c, k[10], 9, 38016083);\n        c = gg(c, d, a, b, k[15], 14, -660478335);\n        b = gg(b, c, d, a, k[4], 20, -405537848);\n        a = gg(a, b, c, d, k[9], 5, 568446438);\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\n        c = gg(c, d, a, b, k[3], 14, -187363961);\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\n        d = gg(d, a, b, c, k[2], 9, -51403784);\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n        a = hh(a, b, c, d, k[5], 4, -378558);\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\n        b = hh(b, c, d, a, k[14], 23, -35309556);\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\n        c = hh(c, d, a, b, k[7], 16, -155497632);\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\n        a = hh(a, b, c, d, k[13], 4, 681279174);\n        d = hh(d, a, b, c, k[0], 11, -358537222);\n        c = hh(c, d, a, b, k[3], 16, -722521979);\n        b = hh(b, c, d, a, k[6], 23, 76029189);\n        a = hh(a, b, c, d, k[9], 4, -640364487);\n        d = hh(d, a, b, c, k[12], 11, -421815835);\n        c = hh(c, d, a, b, k[15], 16, 530742520);\n        b = hh(b, c, d, a, k[2], 23, -995338651);\n\n        a = ii(a, b, c, d, k[0], 6, -198630844);\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\n        b = ii(b, c, d, a, k[5], 21, -57434055);\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\n        c = ii(c, d, a, b, k[10], 15, -1051523);\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\n        d = ii(d, a, b, c, k[15], 10, -30611744);\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\n        a = ii(a, b, c, d, k[4], 6, -145523070);\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\n        c = ii(c, d, a, b, k[2], 15, 718787259);\n        b = ii(b, c, d, a, k[9], 21, -343485551);\n\n        x[0] = add32(a, x[0]);\n        x[1] = add32(b, x[1]);\n        x[2] = add32(c, x[2]);\n        x[3] = add32(d, x[3]);\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Module Dependencies.\n */\nvar debug = require('debug')('analytics.js:normalize');\nvar defaults = require('@ndhoule/defaults');\nvar each = require('./utils/each');\nvar includes = require('@ndhoule/includes');\nvar map = require('./utils/map');\nvar type = require('component-type');\nvar uuid = require('uuid/v4');\nvar md5 = require('spark-md5').hash;\n/**\n * HOP.\n */\nvar has = Object.prototype.hasOwnProperty;\n/**\n * Expose `normalize`\n */\nmodule.exports = normalize;\n/**\n * Toplevel properties.\n */\nvar toplevel = ['integrations', 'anonymousId', 'timestamp', 'context'];\nfunction normalize(msg, list) {\n    var lower = map(function (s) {\n        return s.toLowerCase();\n    }, list);\n    var opts = msg.options || {};\n    var integrations = opts.integrations || {};\n    var providers = opts.providers || {};\n    var context = opts.context || {};\n    var ret = {};\n    debug('<-', msg);\n    // integrations.\n    each(function (value, key) {\n        if (!integration(key))\n            return;\n        if (!has.call(integrations, key))\n            integrations[key] = value;\n        delete opts[key];\n    }, opts);\n    // providers.\n    delete opts.providers;\n    each(function (value, key) {\n        if (!integration(key))\n            return;\n        if (type(integrations[key]) === 'object')\n            return;\n        if (has.call(integrations, key) && typeof providers[key] === 'boolean')\n            return;\n        integrations[key] = value;\n    }, providers);\n    // move all toplevel options to msg\n    // and the rest to context.\n    each(function (_value, key) {\n        if (includes(key, toplevel)) {\n            ret[key] = opts[key];\n        }\n        else {\n            context[key] = opts[key];\n        }\n    }, opts);\n    // generate and attach a messageId to msg\n    msg.messageId = 'ajs-' + md5(window.JSON.stringify(msg) + uuid());\n    // cleanup\n    delete msg.options;\n    ret.integrations = integrations;\n    ret.context = context;\n    ret = defaults(ret, msg);\n    debug('->', ret);\n    return ret;\n    function integration(name) {\n        return !!(includes(name, list) ||\n            name.toLowerCase() === 'all' ||\n            includes(name.toLowerCase(), lower));\n    }\n}\n", "var bind = window.addEventListener ? 'addEventListener' : 'attachEvent',\n    unbind = window.removeEventListener ? 'removeEventListener' : 'detachEvent',\n    prefix = bind !== 'addEventListener' ? 'on' : '';\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.bind = function(el, type, fn, capture){\n  el[bind](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  el[unbind](prefix + type, fn, capture || false);\n  return fn;\n};", "'use strict';\n\n/**\n * Get the current page's canonical URL.\n *\n * @return {string|undefined}\n */\nfunction canonical() {\n  var tags = document.getElementsByTagName('link');\n  // eslint-disable-next-line no-cond-assign\n  for (var i = 0, tag; tag = tags[i]; i++) {\n    if (tag.getAttribute('rel') === 'canonical') {\n      return tag.getAttribute('href');\n    }\n  }\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = canonical;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies.\n */\nvar canonical = require('@segment/canonical');\nvar includes = require('@ndhoule/includes');\nvar url = require('component-url');\n/**\n * Return a default `options.context.page` object.\n *\n * https://segment.com/docs/spec/page/#properties\n */\nfunction pageDefaults() {\n    return {\n        path: canonicalPath(),\n        referrer: document.referrer,\n        search: location.search,\n        title: document.title,\n        url: canonicalUrl(location.search)\n    };\n}\n/**\n * Return the canonical path for the page.\n */\nfunction canonicalPath() {\n    var canon = canonical();\n    if (!canon)\n        return window.location.pathname;\n    var parsed = url.parse(canon);\n    return parsed.pathname;\n}\n/**\n * Return the canonical URL for the page concat the given `search`\n * and strip the hash.\n */\nfunction canonicalUrl(search) {\n    var canon = canonical();\n    if (canon)\n        return includes('?', canon) ? canon : canon + search;\n    var url = window.location.href;\n    var i = url.indexOf('#');\n    return i === -1 ? url : url.slice(0, i);\n}\n/*\n * Exports.\n */\nmodule.exports = pageDefaults;\n", "'use strict';\n\nvar objToString = Object.prototype.toString;\n\n// TODO: Move to lib\nvar existy = function(val) {\n  return val != null;\n};\n\n// TODO: Move to lib\nvar isArray = function(val) {\n  return objToString.call(val) === '[object Array]';\n};\n\n// TODO: Move to lib\nvar isString = function(val) {\n   return typeof val === 'string' || objToString.call(val) === '[object String]';\n};\n\n// TODO: Move to lib\nvar isObject = function(val) {\n  return val != null && typeof val === 'object';\n};\n\n/**\n * Returns a copy of the new `object` containing only the specified properties.\n *\n * @name pick\n * @api public\n * @param {string|string[]} props The property or properties to keep.\n * @param {Object} object The object to iterate over.\n * @return {Object} A new object containing only the specified properties from `object`.\n * @example\n * var person = { name: 'Tim', occupation: 'enchanter', fears: 'rabbits' };\n *\n * pick('name', person);\n * //=> { name: 'Tim' }\n *\n * pick(['name', 'fears'], person);\n * //=> { name: 'Tim', fears: 'rabbits' }\n */\nvar pick = function pick(props, object) {\n  if (!existy(object) || !isObject(object)) {\n    return {};\n  }\n\n  if (isString(props)) {\n    props = [props];\n  }\n\n  if (!isArray(props)) {\n    props = [];\n  }\n\n  var result = {};\n\n  for (var i = 0; i < props.length; i += 1) {\n    if (isString(props[i]) && props[i] in object) {\n      result[props[i]] = object[props[i]];\n    }\n  }\n\n  return result;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = pick;\n", "'use strict';\n\n/**\n * Prevent default on a given event.\n *\n * @param {Event} e\n * @example\n * anchor.onclick = prevent;\n * anchor.onclick = function(e){\n *   if (something) return prevent(e);\n * };\n */\n\nfunction preventDefault(e) {\n  e = e || window.event;\n  return e.preventDefault ? e.preventDefault() : e.returnValue = false;\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = preventDefault;\n", "var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n", "var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Entity = require('./entity');\nvar bindAll = require('bind-all');\nvar cookie = require('./cookie');\nvar debug = require('debug')('analytics:user');\nvar inherit = require('inherits');\nvar rawCookie = require('@segment/cookie');\nvar uuid = require('uuid');\nvar localStorage = require('./store');\nUser.defaults = {\n    persist: true,\n    cookie: {\n        key: 'ajs_user_id',\n        oldKey: 'ajs_user'\n    },\n    localStorage: {\n        key: 'ajs_user_traits'\n    }\n};\n/**\n * Initialize a new `User` with `options`.\n */\nfunction User(options) {\n    this.defaults = User.defaults;\n    this.debug = debug;\n    Entity.call(this, options);\n}\n/**\n * Inherit `Entity`\n */\ninherit(User, Entity);\n/**\n * Set/get the user id.\n *\n * When the user id changes, the method will reset his anonymousId to a new one.\n *\n * @example\n * // didn't change because the user didn't have previous id.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * assert.equal(anonymousId, user.anonymousId());\n *\n * // didn't change because the user id changed to null.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * user.id(null);\n * assert.equal(anonymousId, user.anonymousId());\n *\n * // change because the user had previous id.\n * anonymousId = user.anonymousId();\n * user.id('foo');\n * user.id('baz'); // triggers change\n * user.id('baz'); // no change\n * assert.notEqual(anonymousId, user.anonymousId());\n */\nUser.prototype.id = function (id) {\n    var prev = this._getId();\n    var ret = Entity.prototype.id.apply(this, arguments);\n    if (prev == null)\n        return ret;\n    // FIXME: We're relying on coercion here (1 == \"1\"), but our API treats these\n    // two values differently. Figure out what will break if we remove this and\n    // change to strict equality\n    /* eslint-disable eqeqeq */\n    if (prev != id && id)\n        this.anonymousId(null);\n    /* eslint-enable eqeqeq */\n    return ret;\n};\n/**\n * Set / get / remove anonymousId.\n *\n * @param {String} anonymousId\n * @return {String|User}\n */\nUser.prototype.anonymousId = function (anonymousId) {\n    var store = this.storage();\n    // set / remove\n    if (arguments.length) {\n        store.set('ajs_anonymous_id', anonymousId);\n        this._setAnonymousIdInLocalStorage(anonymousId);\n        return this;\n    }\n    // new\n    anonymousId = store.get('ajs_anonymous_id');\n    if (anonymousId) {\n        // value exists in cookie, copy it to localStorage\n        this._setAnonymousIdInLocalStorage(anonymousId);\n        // refresh cookie to extend expiry\n        store.set('ajs_anonymous_id', anonymousId);\n        return anonymousId;\n    }\n    if (!this._options.localStorageFallbackDisabled) {\n        // if anonymousId doesn't exist in cookies, check localStorage\n        anonymousId = localStorage.get('ajs_anonymous_id');\n        if (anonymousId) {\n            // Write to cookies if available in localStorage but not cookies\n            store.set('ajs_anonymous_id', anonymousId);\n            return anonymousId;\n        }\n    }\n    // old - it is not stringified so we use the raw cookie.\n    anonymousId = rawCookie('_sio');\n    if (anonymousId) {\n        anonymousId = anonymousId.split('----')[0];\n        store.set('ajs_anonymous_id', anonymousId);\n        this._setAnonymousIdInLocalStorage(anonymousId);\n        store.remove('_sio');\n        return anonymousId;\n    }\n    // empty\n    anonymousId = uuid.v4();\n    store.set('ajs_anonymous_id', anonymousId);\n    this._setAnonymousIdInLocalStorage(anonymousId);\n    return store.get('ajs_anonymous_id');\n};\n/**\n * Set the user's `anonymousid` in local storage.\n */\nUser.prototype._setAnonymousIdInLocalStorage = function (id) {\n    if (!this._options.localStorageFallbackDisabled) {\n        localStorage.set('ajs_anonymous_id', id);\n    }\n};\n/**\n * Remove anonymous id on logout too.\n */\nUser.prototype.logout = function () {\n    Entity.prototype.logout.call(this);\n    this.anonymousId(null);\n};\n/**\n * Load saved user `id` or `traits` from storage.\n */\nUser.prototype.load = function () {\n    if (this._loadOldCookie())\n        return;\n    Entity.prototype.load.call(this);\n};\n/**\n * BACKWARDS COMPATIBILITY: Load the old user from the cookie.\n *\n * @api private\n */\nUser.prototype._loadOldCookie = function () {\n    var user = cookie.get(this._options.cookie.oldKey);\n    if (!user)\n        return false;\n    this.id(user.id);\n    this.traits(user.traits);\n    cookie.remove(this._options.cookie.oldKey);\n    return true;\n};\n/**\n * Expose the user singleton.\n */\nmodule.exports = bindAll(new User());\n/**\n * Expose the `User` constructor.\n */\nmodule.exports.User = User;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _analytics = global.analytics;\n/*\n * Module dependencies.\n */\nvar Alias = require('segmentio-facade').Alias;\nvar Emitter = require('component-emitter');\nvar Facade = require('segmentio-facade');\nvar Group = require('segmentio-facade').Group;\nvar Identify = require('segmentio-facade').Identify;\nvar SourceMiddlewareChain = require('./middleware').SourceMiddlewareChain;\nvar IntegrationMiddlewareChain = require('./middleware')\n    .IntegrationMiddlewareChain;\nvar DestinationMiddlewareChain = require('./middleware')\n    .DestinationMiddlewareChain;\nvar Page = require('segmentio-facade').Page;\nvar Track = require('segmentio-facade').Track;\nvar bindAll = require('bind-all');\nvar clone = require('./utils/clone');\nvar extend = require('extend');\nvar cookie = require('./cookie');\nvar metrics = require('./metrics');\nvar debug = require('debug');\nvar defaults = require('@ndhoule/defaults');\nvar each = require('./utils/each');\nvar group = require('./group');\nvar is = require('is');\nvar isMeta = require('@segment/is-meta');\nvar keys = require('@ndhoule/keys');\nvar memory = require('./memory');\nvar nextTick = require('next-tick');\nvar normalize = require('./normalize');\nvar on = require('component-event').bind;\nvar pageDefaults = require('./pageDefaults');\nvar pick = require('@ndhoule/pick');\nvar prevent = require('@segment/prevent-default');\nvar url = require('component-url');\nvar store = require('./store');\nvar user = require('./user');\nvar type = require('component-type');\n/**\n * Initialize a new `Analytics` instance.\n */\nfunction Analytics() {\n    this._options({});\n    this.Integrations = {};\n    this._sourceMiddlewares = new SourceMiddlewareChain();\n    this._integrationMiddlewares = new IntegrationMiddlewareChain();\n    this._destinationMiddlewares = {};\n    this._integrations = {};\n    this._readied = false;\n    this._timeout = 300;\n    // XXX: BACKWARDS COMPATIBILITY\n    this._user = user;\n    this.log = debug('analytics.js');\n    bindAll(this);\n    var self = this;\n    this.on('initialize', function (settings, options) {\n        if (options.initialPageview)\n            self.page();\n        self._parseQuery(window.location.search);\n    });\n}\n/**\n * Mix in event emitter.\n */\nEmitter(Analytics.prototype);\n/**\n * Use a `plugin`.\n */\nAnalytics.prototype.use = function (plugin) {\n    plugin(this);\n    return this;\n};\n/**\n * Define a new `Integration`.\n */\nAnalytics.prototype.addIntegration = function (Integration) {\n    var name = Integration.prototype.name;\n    if (!name)\n        throw new TypeError('attempted to add an invalid integration');\n    this.Integrations[name] = Integration;\n    return this;\n};\n/**\n * Define a new `SourceMiddleware`\n */\nAnalytics.prototype.addSourceMiddleware = function (middleware) {\n    this._sourceMiddlewares.add(middleware);\n    return this;\n};\n/**\n * Define a new `IntegrationMiddleware`\n * @deprecated\n */\nAnalytics.prototype.addIntegrationMiddleware = function (middleware) {\n    this._integrationMiddlewares.add(middleware);\n    return this;\n};\n/**\n * Define a new `DestinationMiddleware`\n * Destination Middleware is chained after integration middleware\n */\nAnalytics.prototype.addDestinationMiddleware = function (integrationName, middlewares) {\n    var self = this;\n    middlewares.forEach(function (middleware) {\n        if (!self._destinationMiddlewares[integrationName]) {\n            self._destinationMiddlewares[integrationName] = new DestinationMiddlewareChain();\n        }\n        self._destinationMiddlewares[integrationName].add(middleware);\n    });\n    return self;\n};\n/**\n * Initialize with the given integration `settings` and `options`.\n *\n * Aliased to `init` for convenience.\n */\nAnalytics.prototype.init = Analytics.prototype.initialize = function (settings, options) {\n    settings = settings || {};\n    options = options || {};\n    this._options(options);\n    this._readied = false;\n    // clean unknown integrations from settings\n    var self = this;\n    each(function (_opts, name) {\n        var Integration = self.Integrations[name];\n        if (!Integration)\n            delete settings[name];\n    }, settings);\n    // add integrations\n    each(function (opts, name) {\n        // Don't load disabled integrations\n        if (options.integrations) {\n            if (options.integrations[name] === false ||\n                (options.integrations.All === false && !options.integrations[name])) {\n                return;\n            }\n        }\n        var Integration = self.Integrations[name];\n        var clonedOpts = {};\n        extend(true, clonedOpts, opts); // deep clone opts\n        var integration = new Integration(clonedOpts);\n        self.log('initialize %o - %o', name, opts);\n        self.add(integration);\n    }, settings);\n    var integrations = this._integrations;\n    // load user now that options are set\n    user.load();\n    group.load();\n    // make ready callback\n    var readyCallCount = 0;\n    var integrationCount = keys(integrations).length;\n    var ready = function () {\n        readyCallCount++;\n        if (readyCallCount >= integrationCount) {\n            self._readied = true;\n            self.emit('ready');\n        }\n    };\n    // init if no integrations\n    if (integrationCount <= 0) {\n        ready();\n    }\n    // initialize integrations, passing ready\n    // create a list of any integrations that did not initialize - this will be passed with all events for replay support:\n    this.failedInitializations = [];\n    var initialPageSkipped = false;\n    each(function (integration) {\n        if (options.initialPageview &&\n            integration.options.initialPageview === false) {\n            // We've assumed one initial pageview, so make sure we don't count the first page call.\n            var page = integration.page;\n            integration.page = function () {\n                if (initialPageSkipped) {\n                    return page.apply(this, arguments);\n                }\n                initialPageSkipped = true;\n                return;\n            };\n        }\n        integration.analytics = self;\n        integration.once('ready', ready);\n        try {\n            metrics.increment('analytics_js.integration.invoke', {\n                method: 'initialize',\n                integration_name: integration.name\n            });\n            integration.initialize();\n        }\n        catch (e) {\n            var integrationName = integration.name;\n            metrics.increment('analytics_js.integration.invoke.error', {\n                method: 'initialize',\n                integration_name: integration.name\n            });\n            self.failedInitializations.push(integrationName);\n            self.log('Error initializing %s integration: %o', integrationName, e);\n            // Mark integration as ready to prevent blocking of anyone listening to analytics.ready()\n            integration.ready();\n        }\n    }, integrations);\n    // backwards compat with angular plugin and used for init logic checks\n    this.initialized = true;\n    this.emit('initialize', settings, options);\n    return this;\n};\n/**\n * Set the user's `id`.\n */\nAnalytics.prototype.setAnonymousId = function (id) {\n    this.user().anonymousId(id);\n    return this;\n};\n/**\n * Add an integration.\n */\nAnalytics.prototype.add = function (integration) {\n    this._integrations[integration.name] = integration;\n    return this;\n};\n/**\n * Identify a user by optional `id` and `traits`.\n *\n * @param {string} [id=user.id()] User ID.\n * @param {Object} [traits=null] User traits.\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics}\n */\nAnalytics.prototype.identify = function (id, traits, options, fn) {\n    // Argument reshuffling.\n    /* eslint-disable no-unused-expressions, no-sequences */\n    if (is.fn(options))\n        (fn = options), (options = null);\n    if (is.fn(traits))\n        (fn = traits), (options = null), (traits = null);\n    if (is.object(id))\n        (options = traits), (traits = id), (id = user.id());\n    /* eslint-enable no-unused-expressions, no-sequences */\n    // clone traits before we manipulate so we don't do anything uncouth, and take\n    // from `user` so that we carryover anonymous traits\n    user.identify(id, traits);\n    var msg = this.normalize({\n        options: options,\n        traits: user.traits(),\n        userId: user.id()\n    });\n    // Add the initialize integrations so the server-side ones can be disabled too\n    if (this.options.integrations) {\n        defaults(msg.integrations, this.options.integrations);\n    }\n    this._invoke('identify', new Identify(msg));\n    // emit\n    this.emit('identify', id, traits, options);\n    this._callback(fn);\n    return this;\n};\n/**\n * Return the current user.\n *\n * @return {Object}\n */\nAnalytics.prototype.user = function () {\n    return user;\n};\n/**\n * Identify a group by optional `id` and `traits`. Or, if no arguments are\n * supplied, return the current group.\n *\n * @param {string} [id=group.id()] Group ID.\n * @param {Object} [traits=null] Group traits.\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics|Object}\n */\nAnalytics.prototype.group = function (id, traits, options, fn) {\n    /* eslint-disable no-unused-expressions, no-sequences */\n    if (!arguments.length)\n        return group;\n    if (is.fn(options))\n        (fn = options), (options = null);\n    if (is.fn(traits))\n        (fn = traits), (options = null), (traits = null);\n    if (is.object(id))\n        (options = traits), (traits = id), (id = group.id());\n    /* eslint-enable no-unused-expressions, no-sequences */\n    // grab from group again to make sure we're taking from the source\n    group.identify(id, traits);\n    var msg = this.normalize({\n        options: options,\n        traits: group.traits(),\n        groupId: group.id()\n    });\n    // Add the initialize integrations so the server-side ones can be disabled too\n    if (this.options.integrations) {\n        defaults(msg.integrations, this.options.integrations);\n    }\n    this._invoke('group', new Group(msg));\n    this.emit('group', id, traits, options);\n    this._callback(fn);\n    return this;\n};\n/**\n * Track an `event` that a user has triggered with optional `properties`.\n *\n * @param {string} event\n * @param {Object} [properties=null]\n * @param {Object} [options=null]\n * @param {Function} [fn]\n * @return {Analytics}\n */\nAnalytics.prototype.track = function (event, properties, options, fn) {\n    // Argument reshuffling.\n    /* eslint-disable no-unused-expressions, no-sequences */\n    if (is.fn(options))\n        (fn = options), (options = null);\n    if (is.fn(properties))\n        (fn = properties), (options = null), (properties = null);\n    /* eslint-enable no-unused-expressions, no-sequences */\n    // figure out if the event is archived.\n    var plan = this.options.plan || {};\n    var events = plan.track || {};\n    var planIntegrationOptions = {};\n    // normalize\n    var msg = this.normalize({\n        properties: properties,\n        options: options,\n        event: event\n    });\n    // plan.\n    plan = events[event];\n    if (plan) {\n        this.log('plan %o - %o', event, plan);\n        if (plan.enabled === false) {\n            // Disabled events should always be sent to Segment.\n            planIntegrationOptions = { All: false, 'Segment.io': true };\n        }\n        else {\n            planIntegrationOptions = plan.integrations || {};\n        }\n    }\n    else {\n        var defaultPlan = events.__default || { enabled: true };\n        if (!defaultPlan.enabled) {\n            // Disabled events should always be sent to Segment.\n            planIntegrationOptions = { All: false, 'Segment.io': true };\n        }\n    }\n    // Add the initialize integrations so the server-side ones can be disabled too\n    defaults(msg.integrations, this._mergeInitializeAndPlanIntegrations(planIntegrationOptions));\n    this._invoke('track', new Track(msg));\n    this.emit('track', event, properties, options);\n    this._callback(fn);\n    return this;\n};\n/**\n * Helper method to track an outbound link that would normally navigate away\n * from the page before the analytics calls were sent.\n *\n * BACKWARDS COMPATIBILITY: aliased to `trackClick`.\n *\n * @param {Element|Array} links\n * @param {string|Function} event\n * @param {Object|Function} properties (optional)\n * @return {Analytics}\n */\nAnalytics.prototype.trackClick = Analytics.prototype.trackLink = function (links, event, properties) {\n    if (!links)\n        return this;\n    // always arrays, handles jquery\n    if (type(links) === 'element')\n        links = [links];\n    var self = this;\n    each(function (el) {\n        if (type(el) !== 'element') {\n            throw new TypeError('Must pass HTMLElement to `analytics.trackLink`.');\n        }\n        on(el, 'click', function (e) {\n            var ev = is.fn(event) ? event(el) : event;\n            var props = is.fn(properties) ? properties(el) : properties;\n            var href = el.getAttribute('href') ||\n                el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n                el.getAttribute('xlink:href');\n            self.track(ev, props);\n            if (href && el.target !== '_blank' && !isMeta(e)) {\n                prevent(e);\n                self._callback(function () {\n                    window.location.href = href;\n                });\n            }\n        });\n    }, links);\n    return this;\n};\n/**\n * Helper method to track an outbound form that would normally navigate away\n * from the page before the analytics calls were sent.\n *\n * BACKWARDS COMPATIBILITY: aliased to `trackSubmit`.\n *\n * @param {Element|Array} forms\n * @param {string|Function} event\n * @param {Object|Function} properties (optional)\n * @return {Analytics}\n */\nAnalytics.prototype.trackSubmit = Analytics.prototype.trackForm = function (forms, event, properties) {\n    if (!forms)\n        return this;\n    // always arrays, handles jquery\n    if (type(forms) === 'element')\n        forms = [forms];\n    var self = this;\n    each(function (el) {\n        if (type(el) !== 'element')\n            throw new TypeError('Must pass HTMLElement to `analytics.trackForm`.');\n        function handler(e) {\n            prevent(e);\n            var ev = is.fn(event) ? event(el) : event;\n            var props = is.fn(properties) ? properties(el) : properties;\n            self.track(ev, props);\n            self._callback(function () {\n                el.submit();\n            });\n        }\n        // Support the events happening through jQuery or Zepto instead of through\n        // the normal DOM API, because `el.submit` doesn't bubble up events...\n        var $ = window.jQuery || window.Zepto;\n        if ($) {\n            $(el).submit(handler);\n        }\n        else {\n            on(el, 'submit', handler);\n        }\n    }, forms);\n    return this;\n};\n/**\n * Trigger a pageview, labeling the current page with an optional `category`,\n * `name` and `properties`.\n *\n * @param {string} [category]\n * @param {string} [name]\n * @param {Object|string} [properties] (or path)\n * @param {Object} [options]\n * @param {Function} [fn]\n * @return {Analytics}\n */\nAnalytics.prototype.page = function (category, name, properties, options, fn) {\n    // Argument reshuffling.\n    /* eslint-disable no-unused-expressions, no-sequences */\n    if (is.fn(options))\n        (fn = options), (options = null);\n    if (is.fn(properties))\n        (fn = properties), (options = properties = null);\n    if (is.fn(name))\n        (fn = name), (options = properties = name = null);\n    if (type(category) === 'object')\n        (options = name), (properties = category), (name = category = null);\n    if (type(name) === 'object')\n        (options = properties), (properties = name), (name = null);\n    if (type(category) === 'string' && type(name) !== 'string')\n        (name = category), (category = null);\n    /* eslint-enable no-unused-expressions, no-sequences */\n    properties = clone(properties) || {};\n    if (name)\n        properties.name = name;\n    if (category)\n        properties.category = category;\n    // Ensure properties has baseline spec properties.\n    // TODO: Eventually move these entirely to `options.context.page`\n    var defs = pageDefaults();\n    defaults(properties, defs);\n    // Mirror user overrides to `options.context.page` (but exclude custom properties)\n    // (Any page defaults get applied in `this.normalize` for consistency.)\n    // Weird, yeah--moving special props to `context.page` will fix this in the long term.\n    var overrides = pick(keys(defs), properties);\n    if (!is.empty(overrides)) {\n        options = options || {};\n        options.context = options.context || {};\n        options.context.page = overrides;\n    }\n    var msg = this.normalize({\n        properties: properties,\n        category: category,\n        options: options,\n        name: name\n    });\n    // Add the initialize integrations so the server-side ones can be disabled too\n    if (this.options.integrations) {\n        defaults(msg.integrations, this.options.integrations);\n    }\n    this._invoke('page', new Page(msg));\n    this.emit('page', category, name, properties, options);\n    this._callback(fn);\n    return this;\n};\n/**\n * FIXME: BACKWARDS COMPATIBILITY: convert an old `pageview` to a `page` call.\n * @api private\n */\nAnalytics.prototype.pageview = function (url) {\n    var properties = {};\n    if (url)\n        properties.path = url;\n    this.page(properties);\n    return this;\n};\n/**\n * Merge two previously unassociated user identities.\n *\n * @param {string} to\n * @param {string} from (optional)\n * @param {Object} options (optional)\n * @param {Function} fn (optional)\n * @return {Analytics}\n */\nAnalytics.prototype.alias = function (to, from, options, fn) {\n    // Argument reshuffling.\n    /* eslint-disable no-unused-expressions, no-sequences */\n    if (is.fn(options))\n        (fn = options), (options = null);\n    if (is.fn(from))\n        (fn = from), (options = null), (from = null);\n    if (is.object(from))\n        (options = from), (from = null);\n    /* eslint-enable no-unused-expressions, no-sequences */\n    var msg = this.normalize({\n        options: options,\n        previousId: from,\n        userId: to\n    });\n    // Add the initialize integrations so the server-side ones can be disabled too\n    if (this.options.integrations) {\n        defaults(msg.integrations, this.options.integrations);\n    }\n    this._invoke('alias', new Alias(msg));\n    this.emit('alias', to, from, options);\n    this._callback(fn);\n    return this;\n};\n/**\n * Register a `fn` to be fired when all the analytics services are ready.\n */\nAnalytics.prototype.ready = function (fn) {\n    if (is.fn(fn)) {\n        if (this._readied) {\n            nextTick(fn);\n        }\n        else {\n            this.once('ready', fn);\n        }\n    }\n    return this;\n};\n/**\n * Set the `timeout` (in milliseconds) used for callbacks.\n */\nAnalytics.prototype.timeout = function (timeout) {\n    this._timeout = timeout;\n};\n/**\n * Enable or disable debug.\n */\nAnalytics.prototype.debug = function (str) {\n    if (!arguments.length || str) {\n        debug.enable('analytics:' + (str || '*'));\n    }\n    else {\n        debug.disable();\n    }\n};\n/**\n * Apply options.\n * @api private\n */\nAnalytics.prototype._options = function (options) {\n    options = options || {};\n    this.options = options;\n    cookie.options(options.cookie);\n    metrics.options(options.metrics);\n    store.options(options.localStorage);\n    user.options(options.user);\n    group.options(options.group);\n    return this;\n};\n/**\n * Callback a `fn` after our defined timeout period.\n * @api private\n */\nAnalytics.prototype._callback = function (fn) {\n    if (is.fn(fn)) {\n        this._timeout ? setTimeout(fn, this._timeout) : nextTick(fn);\n    }\n    return this;\n};\n/**\n * Call `method` with `facade` on all enabled integrations.\n *\n * @param {string} method\n * @param {Facade} facade\n * @return {Analytics}\n * @api private\n */\nAnalytics.prototype._invoke = function (method, facade) {\n    var self = this;\n    try {\n        this._sourceMiddlewares.applyMiddlewares(extend(true, new Facade({}), facade), this._integrations, function (result) {\n            // A nullified payload should not be sent.\n            if (result === null) {\n                self.log('Payload with method \"%s\" was null and dropped by source a middleware.', method);\n                return;\n            }\n            // Check if the payload is still a Facade. If not, convert it to one.\n            if (!(result instanceof Facade)) {\n                result = new Facade(result);\n            }\n            self.emit('invoke', result);\n            metrics.increment('analytics_js.invoke', {\n                method: method\n            });\n            applyIntegrationMiddlewares(result);\n        });\n    }\n    catch (e) {\n        metrics.increment('analytics_js.invoke.error', {\n            method: method\n        });\n        self.log('Error invoking .%s method of %s integration: %o', method, name, e);\n    }\n    return this;\n    function applyIntegrationMiddlewares(facade) {\n        var failedInitializations = self.failedInitializations || [];\n        each(function (integration, name) {\n            var facadeCopy = extend(true, new Facade({}), facade);\n            if (!facadeCopy.enabled(name))\n                return;\n            // Check if an integration failed to initialize.\n            // If so, do not process the message as the integration is in an unstable state.\n            if (failedInitializations.indexOf(name) >= 0) {\n                self.log('Skipping invocation of .%s method of %s integration. Integration failed to initialize properly.', method, name);\n            }\n            else {\n                try {\n                    // Apply any integration middlewares that exist, then invoke the integration with the result.\n                    self._integrationMiddlewares.applyMiddlewares(facadeCopy, integration.name, function (result) {\n                        // A nullified payload should not be sent to an integration.\n                        if (result === null) {\n                            self.log('Payload to integration \"%s\" was null and dropped by a middleware.', name);\n                            return;\n                        }\n                        // Check if the payload is still a Facade. If not, convert it to one.\n                        if (!(result instanceof Facade)) {\n                            result = new Facade(result);\n                        }\n                        // apply destination middlewares\n                        // Apply any integration middlewares that exist, then invoke the integration with the result.\n                        if (self._destinationMiddlewares[integration.name]) {\n                            self._destinationMiddlewares[integration.name].applyMiddlewares(facadeCopy, integration.name, function (result) {\n                                // A nullified payload should not be sent to an integration.\n                                if (result === null) {\n                                    self.log('Payload to destination \"%s\" was null and dropped by a middleware.', name);\n                                    return;\n                                }\n                                // Check if the payload is still a Facade. If not, convert it to one.\n                                if (!(result instanceof Facade)) {\n                                    result = new Facade(result);\n                                }\n                                metrics.increment('analytics_js.integration.invoke', {\n                                    method: method,\n                                    integration_name: integration.name\n                                });\n                                integration.invoke.call(integration, method, result);\n                            });\n                        }\n                        else {\n                            metrics.increment('analytics_js.integration.invoke', {\n                                method: method,\n                                integration_name: integration.name\n                            });\n                            integration.invoke.call(integration, method, result);\n                        }\n                    });\n                }\n                catch (e) {\n                    metrics.increment('analytics_js.integration.invoke.error', {\n                        method: method,\n                        integration_name: integration.name\n                    });\n                    self.log('Error invoking .%s method of %s integration: %o', method, name, e);\n                }\n            }\n        }, self._integrations);\n    }\n};\n/**\n * Push `args`.\n *\n * @param {Array} args\n * @api private\n */\nAnalytics.prototype.push = function (args) {\n    var method = args.shift();\n    if (!this[method])\n        return;\n    this[method].apply(this, args);\n};\n/**\n * Reset group and user traits and id's.\n *\n * @api public\n */\nAnalytics.prototype.reset = function () {\n    this.user().logout();\n    this.group().logout();\n};\n/**\n * Parse the query string for callable methods.\n *\n * @api private\n */\nAnalytics.prototype._parseQuery = function (query) {\n    // Parse querystring to an object\n    var parsed = url.parse(query);\n    var q = parsed.query.split('&').reduce(function (acc, str) {\n        var _a = str.split('='), k = _a[0], v = _a[1];\n        acc[k] = decodeURI(v).replace('+', ' ');\n        return acc;\n    }, {});\n    // Create traits and properties objects, populate from querysting params\n    var traits = pickPrefix('ajs_trait_', q);\n    var props = pickPrefix('ajs_prop_', q);\n    // Trigger based on callable parameters in the URL\n    if (q.ajs_uid)\n        this.identify(q.ajs_uid, traits);\n    if (q.ajs_event)\n        this.track(q.ajs_event, props);\n    if (q.ajs_aid)\n        user.anonymousId(q.ajs_aid);\n    return this;\n    /**\n     * Create a shallow copy of an input object containing only the properties\n     * whose keys are specified by a prefix, stripped of that prefix\n     *\n     * @return {Object}\n     * @api private\n     */\n    function pickPrefix(prefix, object) {\n        var length = prefix.length;\n        var sub;\n        return Object.keys(object).reduce(function (acc, key) {\n            if (key.substr(0, length) === prefix) {\n                sub = key.substr(length);\n                acc[sub] = object[key];\n            }\n            return acc;\n        }, {});\n    }\n};\n/**\n * Normalize the given `msg`.\n */\nAnalytics.prototype.normalize = function (msg) {\n    msg = normalize(msg, keys(this._integrations));\n    if (msg.anonymousId)\n        user.anonymousId(msg.anonymousId);\n    msg.anonymousId = user.anonymousId();\n    // Ensure all outgoing requests include page data in their contexts.\n    msg.context.page = defaults(msg.context.page || {}, pageDefaults());\n    return msg;\n};\n/**\n * Merges the tracking plan and initialization integration options.\n *\n * @param  {Object} planIntegrations Tracking plan integrations.\n * @return {Object}                  The merged integrations.\n */\nAnalytics.prototype._mergeInitializeAndPlanIntegrations = function (planIntegrations) {\n    // Do nothing if there are no initialization integrations\n    if (!this.options.integrations) {\n        return planIntegrations;\n    }\n    // Clone the initialization integrations\n    var integrations = extend({}, this.options.integrations);\n    var integrationName;\n    // Allow the tracking plan to disable integrations that were explicitly\n    // enabled on initialization\n    if (planIntegrations.All === false) {\n        integrations = { All: false };\n    }\n    for (integrationName in planIntegrations) {\n        if (planIntegrations.hasOwnProperty(integrationName)) {\n            // Don't allow the tracking plan to re-enable disabled integrations\n            if (this.options.integrations[integrationName] !== false) {\n                integrations[integrationName] = planIntegrations[integrationName];\n            }\n        }\n    }\n    return integrations;\n};\n/**\n * No conflict support.\n */\nAnalytics.prototype.noConflict = function () {\n    window.analytics = _analytics;\n    return this;\n};\n/*\n * Exports.\n */\nmodule.exports = Analytics;\nmodule.exports.cookie = cookie;\nmodule.exports.memory = memory;\nmodule.exports.store = store;\nmodule.exports.metrics = metrics;\n", "'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Analytics.js\n *\n * (C) 2013-2016 Segment.io Inc.\n */\nvar Analytics = require('./analytics');\n// Create a new `analytics` singleton.\nvar analytics = new Analytics();\n// Expose `require`.\n// TODO(ndhoule): Look into deprecating, we no longer need to expose it in tests\nanalytics.require = require;\n// Expose package version.\nanalytics.VERSION = require('../package.json').version;\n/*\n * Exports.\n */\nmodule.exports = analytics;\n", "/**\n * Module dependencies.\n */\n\nvar type;\ntry {\n  type = require('component-type');\n} catch (_) {\n  type = require('type');\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = clone;\n\n/**\n * Clones objects.\n *\n * @param {Mixed} any object\n * @api public\n */\n\nfunction clone(obj){\n  switch (type(obj)) {\n    case 'object':\n      var copy = {};\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          copy[key] = clone(obj[key]);\n        }\n      }\n      return copy;\n\n    case 'array':\n      var copy = new Array(obj.length);\n      for (var i = 0, l = obj.length; i < l; i++) {\n        copy[i] = clone(obj[i]);\n      }\n      return copy;\n\n    case 'regexp':\n      // from millermedeiros/amd-utils - MIT\n      var flags = '';\n      flags += obj.multiline ? 'm' : '';\n      flags += obj.global ? 'g' : '';\n      flags += obj.ignoreCase ? 'i' : '';\n      return new RegExp(obj.source, flags);\n\n    case 'date':\n      return new Date(obj.getTime());\n\n    default: // string, number, boolean, \u2026\n      return obj;\n  }\n}\n", "\nvar type = require('component-type');\nvar clone = require('component-clone');\n\n\n/**\n * Expose `alias`.\n */\n\nmodule.exports = alias;\n\n\n/**\n * Alias an `object`.\n *\n * @param {Object} obj\n * @param {Mixed} method\n */\n\nfunction alias (obj, method) {\n  switch (type(method)) {\n    case 'object': return aliasByDictionary(clone(obj), method);\n    case 'function': return aliasByFunction(clone(obj), method);\n  }\n}\n\n\n/**\n * Convert the keys in an `obj` using a dictionary of `aliases`.\n *\n * @param {Object} obj\n * @param {Object} aliases\n */\n\nfunction aliasByDictionary (obj, aliases) {\n  for (var key in aliases) {\n    if (undefined === obj[key]) continue;\n    obj[aliases[key]] = obj[key];\n    delete obj[key];\n  }\n  return obj;\n}\n\n\n/**\n * Convert the keys in an `obj` using a `convert` function.\n *\n * @param {Object} obj\n * @param {Function} convert\n */\n\nfunction aliasByFunction (obj, convert) {\n  // have to create another object so that ie8 won't infinite loop on keys\n  var output = {};\n  for (var key in obj) output[convert(key)] = obj[key];\n  return output;\n}\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar clone = require('@ndhoule/clone');\nvar each = require('@ndhoule/each');\nvar type = require('component-type');\n\n/**\n * Recursively convert an `obj`'s dates to new values.\n *\n * @param {Object} obj\n * @param {Function} convert\n * @return {Object}\n */\nfunction convertDates(obj, convert) {\n  obj = clone(obj);\n  each(function(val, key) {\n    if (type(val) === 'date') {\n      obj[key] = convert(val);\n    }\n    if (type(val) === 'object' || type(val) === 'array') {\n      obj[key] = convertDates(val, convert);\n    }\n  }, obj);\n  return obj;\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = convertDates;\n", "\n/**\n * Generate a slug from the given `str`.\n *\n * example:\n *\n *        generate('foo bar');\n *        // > foo-bar\n *\n * @param {String} str\n * @param {Object} options\n * @config {String|RegExp} [replace] characters to replace, defaulted to `/[^a-z0-9]/g`\n * @config {String} [separator] separator to insert, defaulted to `-`\n * @return {String}\n */\n\nmodule.exports = function (str, options) {\n  options || (options = {});\n  return str.toLowerCase()\n    .replace(options.replace || /[^a-z0-9]/g, ' ')\n    .replace(/^ +| +$/g, '')\n    .replace(/ +/g, options.separator || '-')\n};\n", "'use strict';\n\nvar objToString = Object.prototype.toString;\n\n/**\n * Determine if a value is a function.\n *\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to lib\nvar isFunction = function(val) {\n  return typeof val === 'function';\n};\n\n/**\n * Determine if a value is a number.\n *\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to lib\nvar isNumber = function(val) {\n  var type = typeof val;\n  return type === 'number' || (type === 'object' && objToString.call(val) === '[object Number]');\n};\n\n /**\n  * Creates an array of generic, numbered argument names.\n  *\n  * @name createParams\n  * @api private\n  * @param {number} n\n  * @return {Array}\n  * @example\n  * argNames(2);\n  * //=> ['arg1', 'arg2']\n  */\nvar createParams = function createParams(n) {\n  var args = [];\n\n  for (var i = 1; i <= n; i += 1) {\n    args.push('arg' + i);\n  }\n\n  return args;\n};\n\n /**\n  * Dynamically construct a wrapper function of `n` arity that.\n  *\n  * If at all possible, prefer a function from the arity wrapper cache above to\n  * avoid allocating a new function at runtime.\n  *\n  * @name createArityWrapper\n  * @api private\n  * @param {number} n\n  * @return {Function(Function)}\n  */\nvar createArityWrapper = function createArityWrapper(n) {\n  var paramNames = createParams(n).join(', ');\n  var wrapperBody = ''.concat(\n    '  return function(', paramNames, ') {\\n',\n    '    return func.apply(this, arguments);\\n',\n    '  };'\n  );\n\n  /* eslint-disable no-new-func */\n  return new Function('func', wrapperBody);\n  /* eslint-enable no-new-func */\n};\n\n// Cache common arity wrappers to avoid constructing them at runtime\nvar arityWrapperCache = [\n  /* eslint-disable no-unused-vars */\n  function(fn) {\n    return function() {\n      return fn.apply(this, arguments);\n    };\n  },\n\n  function(fn) {\n    return function(arg1) {\n      return fn.apply(this, arguments);\n    };\n  },\n\n  function(fn) {\n    return function(arg1, arg2) {\n      return fn.apply(this, arguments);\n    };\n  },\n\n  function(fn) {\n    return function(arg1, arg2, arg3) {\n      return fn.apply(this, arguments);\n    };\n  },\n\n  function(fn) {\n    return function(arg1, arg2, arg3, arg4) {\n      return fn.apply(this, arguments);\n    };\n  },\n\n  function(fn) {\n    return function(arg1, arg2, arg3, arg4, arg5) {\n      return fn.apply(this, arguments);\n    };\n  }\n  /* eslint-enable no-unused-vars */\n];\n\n/**\n * Takes a function and an [arity](https://en.wikipedia.org/wiki/Arity) `n`, and returns a new\n * function that expects `n` arguments.\n *\n * @name arity\n * @api public\n * @category Function\n * @see {@link curry}\n * @param {Number} n The desired arity of the returned function.\n * @param {Function} fn The function to wrap.\n * @return {Function} A function of n arity, wrapping `fn`.\n * @example\n * var add = function(a, b) {\n *   return a + b;\n * };\n *\n * // Check the number of arguments this function expects by accessing `.length`:\n * add.length;\n * //=> 2\n *\n * var unaryAdd = arity(1, add);\n * unaryAdd.length;\n * //=> 1\n */\nvar arity = function arity(n, func) {\n  if (!isFunction(func)) {\n    throw new TypeError('Expected a function but got ' + typeof func);\n  }\n\n  n = Math.max(isNumber(n) ? n : 0, 0);\n\n  if (!arityWrapperCache[n]) {\n    arityWrapperCache[n] = createArityWrapper(n);\n  }\n\n  return arityWrapperCache[n](func);\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = arity;\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar arity = require('@ndhoule/arity');\n\nvar objToString = Object.prototype.toString;\n\n/**\n * Determine if a value is a function.\n *\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to lib\nvar isFunction = function(val) {\n  return typeof val === 'function';\n};\n\n/**\n * Determine if a value is a number.\n *\n * @param {*} val\n * @return {boolean}\n */\n// TODO: Move to lib\nvar isNumber = function(val) {\n  var type = typeof val;\n  return type === 'number' || (type === 'object' && objToString.call(val) === '[object Number]');\n};\n\n/**\n * Wrap a function `fn` in a function that will invoke `fn` when invoked `n` or\n * more times.\n *\n * @name after\n * @api public\n * @category Function\n * @param {Number} n The number of\n * @param {Function} fn The function to wrap.\n * @return {Function} A function that will call `fn` after `n` or more\n * invocations.\n * @example\n */\nvar after = function after(n, fn) {\n  if (!isNumber(n)) {\n    throw new TypeError('Expected a number but received ' + typeof n);\n  }\n\n  if (!isFunction(fn)) {\n    throw new TypeError('Expected a function but received ' + typeof fn);\n  }\n\n  var callCount = 0;\n\n  return arity(fn.length, function() {\n    callCount += 1;\n\n    if (callCount < n) {\n      return;\n    }\n\n    return fn.apply(this, arguments);\n  });\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = after;\n", "\nmodule.exports = {\n  // Promotions\n  promotionViewed: /^[ _]?promotion[ _]?viewed?[ _]?$/i,\n  viewedPromotion: /^[ _]?viewed[ _]?promotion?[ _]?$/i,\n  promotionClicked: /^[ _]?promotion[ _]?clicked?[ _]?$/i,\n  clickedPromotion: /^[ _]?clicked[ _]?promotion?[ _]?$/i,\n  // Browsing\n  productsSearched: /^[ _]?products[ _]?searched[ _]?$/i,\n  productListViewed: /^[ _]?product[ _]?list[ _]?viewed[ _]?$/i,\n  productListFiltered: /^[ _]?product[ _]?list[ _]?filtered[ _]?$/i,\n  viewedProductCategory: /^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,\n  viewedProductDetails: /^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,\n  // Core Ordering\n  productClicked: /^[ _]?product[ _]?clicked[ _]?$/i,\n  clickedProduct: /^[ _]?clicked[ _]?product[ _]?$/i,\n  productViewed: /^[ _]?product[ _]?viewed[ _]?$/i,\n  viewedProduct: /^[ _]?viewed[ _]?product[ _]?$/i,\n  productAdded: /^[ _]?product[ _]?added[ _]?$/i,\n  addedProduct: /^[ _]?added[ _]?product[ _]?$/i,\n  productRemoved: /^[ _]?product[ _]?removed[ _]?$/i,\n  removedProduct: /^[ _]?removed[ _]?product[ _]?$/i,\n  cartViewed: /^[ _]?cart[ _]?viewed[ _]?$/i,\n  orderStarted: /^[ _]?order[ _]?started[ _]?$/i,\n  startedOrder: /^[ _]?started[ _]?order[ _]?$/i,\n  orderUpdated: /^[ _]?order[ _]?updated[ _]?$/i,\n  updatedOrder: /^[ _]?updated[ _]?order[ _]?$/i,\n  orderCompleted: /^[ _]?order[ _]?completed[ _]?$/i,\n  completedOrder: /^[ _]?completed[ _]?order[ _]?$/i,\n  orderRefunded: /^[ _]?order[ _]?refunded[ _]?$/i,\n  refundedOrder: /^[ _]?refunded[ _]?order[ _]?$/i,\n  orderCancelled: /^[ _]?order[ _]?cancelled[ _]?$/i,\n  paymentInfoAdded: /^[ _]?payment[ _]?info[ _]?added[ _]?$/i,\n  checkoutStarted: /^[ _]?checkout[ _]?started[ _]?$/i,\n  checkoutStepViewed: /^[ _]?checkout[ _]?step[ _]?viewed[ _]?$/i,\n  viewedCheckoutStep: /^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,\n  checkoutStepCompleted: /^[ _]?checkout[ _]?step[ _]?completed[ _]?$/i,\n  completedCheckoutStep: /^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i,\n  // Coupons\n  couponEntered: /^[ _]?coupon[ _]?entered[ _]?$/i,\n  couponApplied: /^[ _]?coupon[ _]?applied[ _]?$/i,\n  couponDenied: /^[ _]?coupon[ _]?denied[ _]?$/i,\n  couponRemoved: /^[ _]?coupon[ _]?removed[ _]?$/i,\n  // Wishlisting\n  productAddedToWishlist: /^[ _]?product[ _]?added[ _]?to[ _]?wishlist[ _]?$/i,\n  wishlistProductRemoved: /^[ _]?wishlist[ _]?product[ _]?removed[ _]?$/i,\n  wishlistProductAddedToCart: /^[ _]?wishlist[ _]?product[ _]?added[ _]?to[ _]?cart[ _]?$/i,\n  // Sharing\n  productShared: /^[ _]?product[ _]?shared[ _]?$/i,\n  cartShared: /^[ _]?cart[ _]?shared[ _]?$/i,\n  // Reviewing\n  productRemoved: /^[ _]?product[ _]?removed[ _]?$/i,\n  // App Lifecycle\n  applicationInstalled: /^[ _]?application[ _]?installed[ _]?$/i,\n  applicationUpdated: /^[ _]?application[ _]?updated[ _]?$/i,\n  applicationOpened: /^[ _]?application[ _]?opened[ _]?$/i,\n  applicationBackgrounded: /^[ _]?application[ _]?backgrounded[ _]?$/i,\n  applicationUninstalled: /^[ _]?application[ _]?uninstalled[ _]?$/i,\n  // App Campaign and Referral Events\n  installAttributed: /^[ _]?install[ _]?attributed[ _]?$/i,\n  deepLinkOpened: /^[ _]?deep[ _]?link[ _]?opened[ _]?$/i,\n  pushNotificationReceived: /^[ _]?push[ _]?notification[ _]?received[ _]?$/i,\n  pushNotificationTapped: /^[ _]?push[ _]?notification[ _]?received[ _]?$/i,\n  pushNotificationBounced: /^[ _]?push[ _]?notification[ _]?bounced[ _]?$/i\n};\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar each = require('@ndhoule/each');\n\n/**\n * Check if a predicate function returns `true` for all values in a `collection`.\n * Checks owned, enumerable values and exits early when `predicate` returns\n * `false`.\n *\n * @name every\n * @param {Function} predicate The function used to test values.\n * @param {Array|Object|string} collection The collection to search.\n * @return {boolean} True if all values passes the predicate test, otherwise false.\n * @example\n * var isEven = function(num) { return num % 2 === 0; };\n *\n * every(isEven, []); // => true\n * every(isEven, [1, 2]); // => false\n * every(isEven, [2, 4, 6]); // => true\n */\nvar every = function every(predicate, collection) {\n  if (typeof predicate !== 'function') {\n    throw new TypeError('`predicate` must be a function but was a ' + typeof predicate);\n  }\n\n  var result = true;\n\n  each(function(val, key, collection) {\n    result = !!predicate(val, key, collection);\n\n    // Exit early\n    if (!result) {\n      return false;\n    }\n  }, collection);\n\n  return result;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = every;\n", "'use strict';\n\n// Stringifier\nvar toString = global.JSON && typeof JSON.stringify === 'function' ? JSON.stringify : String;\n\n/**\n * Format the given `str`.\n *\n * @param {string} str\n * @param {...*} [args]\n * @return {string}\n */\nfunction fmt(str) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  var j = 0;\n\n  return str.replace(/%([a-z])/gi, function(match, f) {\n    return fmt[f] ? fmt[f](args[j++]) : match + f;\n  });\n}\n\n// Formatters\nfmt.o = toString;\nfmt.s = String;\nfmt.d = parseInt;\n\n/*\n * Exports.\n */\n\nmodule.exports = fmt;\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar each = require('@ndhoule/each');\n\n/**\n * Reduces all the values in a collection down into a single value. Does so by iterating through the\n * collection from left to right, repeatedly calling an `iterator` function and passing to it four\n * arguments: `(accumulator, value, index, collection)`.\n *\n * Returns the final return value of the `iterator` function.\n *\n * @name foldl\n * @api public\n * @param {Function} iterator The function to invoke per iteration.\n * @param {*} accumulator The initial accumulator value, passed to the first invocation of `iterator`.\n * @param {Array|Object} collection The collection to iterate over.\n * @return {*} The return value of the final call to `iterator`.\n * @example\n * foldl(function(total, n) {\n *   return total + n;\n * }, 0, [1, 2, 3]);\n * //=> 6\n *\n * var phonebook = { bob: '555-111-2345', tim: '655-222-6789', sheila: '655-333-1298' };\n *\n * foldl(function(results, phoneNumber) {\n *  if (phoneNumber[0] === '6') {\n *    return results.concat(phoneNumber);\n *  }\n *  return results;\n * }, [], phonebook);\n * // => ['655-222-6789', '655-333-1298']\n */\nvar foldl = function foldl(iterator, accumulator, collection) {\n  if (typeof iterator !== 'function') {\n    throw new TypeError('Expected a function but received a ' + typeof iterator);\n  }\n\n  each(function(val, i, collection) {\n    accumulator = iterator(accumulator, val, i, collection);\n  }, collection);\n\n  return accumulator;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = foldl;\n", "\n// https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n\n/**\n * Invoke `fn(err)` when the given `el` script loads.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function(el, fn){\n  return el.addEventListener\n    ? add(el, fn)\n    : attach(el, fn);\n};\n\n/**\n * Add event listener to `el`, `fn()`.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction add(el, fn){\n  el.addEventListener('load', function(_, e){ fn(null, e); }, false);\n  el.addEventListener('error', function(e){\n    var err = new Error('script error \"' + el.src + '\"');\n    err.event = e;\n    fn(err);\n  }, false);\n}\n\n/**\n * Attach event.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction attach(el, fn){\n  el.attachEvent('onreadystatechange', function(e){\n    if (!/complete|loaded/.test(el.readyState)) return;\n    fn(null, e);\n  });\n  el.attachEvent('onerror', function(e){\n    var err = new Error('failed to load the script \"' + el.src + '\"');\n    err.event = e || window.event;\n    fn(err);\n  });\n}\n", "/**\n * Module dependencies.\n */\n\nvar is = require('is');\nvar onload = require('script-onload');\nvar tick = require('next-tick');\n\n/**\n * Expose `loadScript`.\n *\n * @param {Object} options\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function loadIframe(options, fn){\n  if (!options) throw new Error('Cant load nothing...');\n\n  // Allow for the simplest case, just passing a `src` string.\n  if (is.string(options)) options = { src : options };\n\n  var https = document.location.protocol === 'https:' ||\n              document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = https ? 'https:' + options.src : 'http:' + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) options.src = options.https;\n  else if (!https && options.http) options.src = options.http;\n\n  // Make the `<iframe>` element and insert it before the first iframe on the\n  // page, which is guaranteed to exist since this Javaiframe is running.\n  var iframe = document.createElement('iframe');\n  iframe.src = options.src;\n  iframe.width = options.width || 1;\n  iframe.height = options.height || 1;\n  iframe.style.display = 'none';\n\n  // If we have a fn, attach event handlers, even in IE. Based off of\n  // the Third-Party Javascript script loading example:\n  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n  if (is.fn(fn)) {\n    onload(iframe, fn);\n  }\n\n  tick(function(){\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(iframe, firstScript);\n  });\n\n  // Return the iframe element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return iframe;\n};\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar onload = require('script-onload');\nvar tick = require('next-tick');\nvar type = require('component-type');\n\n/**\n * Loads a script asynchronously.\n *\n * @param {Object} options\n * @param {Function} cb\n */\nfunction loadScript(options, cb) {\n  if (!options) {\n    throw new Error('Can\\'t load nothing...');\n  }\n\n  // Allow for the simplest case, just passing a `src` string.\n  if (type(options) === 'string') {\n    options = { src : options };\n  }\n\n  var https = document.location.protocol === 'https:' || document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = (https ? 'https:' : 'http:') + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) {\n    options.src = options.https;\n  } else if (!https && options.http) {\n    options.src = options.http;\n  }\n\n  // Make the `<script>` element and insert it before the first script on the\n  // page, which is guaranteed to exist since this Javascript is running.\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = options.src;\n\n  // If we have a cb, attach event handlers. Does not work on < IE9 because\n  // older browser versions don't register element.onerror\n  if (type(cb) === 'function') {\n    onload(script, cb);\n  }\n\n  tick(function() {\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(script, firstScript);\n  });\n\n  // Return the script element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return script;\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = loadScript;\n", "\n/**\n * Expose `toNoCase`.\n */\n\nmodule.exports = toNoCase;\n\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/;\nvar hasSeparator = /[\\W_]/;\n\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase (string) {\n  if (hasSpace.test(string)) return string.toLowerCase();\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase();\n  return uncamelize(string).toLowerCase();\n}\n\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g;\n\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate (string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : '';\n  });\n}\n\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g;\n\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize (string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ');\n  });\n}", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar after = require('@ndhoule/after');\nvar each = require('@ndhoule/each');\nvar events = require('analytics-events');\nvar every = require('@ndhoule/every');\nvar fmt = require('@segment/fmt');\nvar foldl = require('@ndhoule/foldl');\nvar is = require('is');\nvar loadIframe = require('load-iframe');\nvar loadScript = require('@segment/load-script');\nvar nextTick = require('next-tick');\nvar normalize = require('to-no-case');\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * No operation.\n */\n\nvar noop = function noop() {};\n\n/**\n * Window defaults.\n */\n\nvar onerror = window.onerror;\nvar onload = null;\n\n/**\n * Mixin emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Initialize.\n */\n\nexports.initialize = function() {\n  var ready = this.ready;\n  nextTick(ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nexports.loaded = function() {\n  return false;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\n/* eslint-disable no-unused-vars */\nexports.page = function(page) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\n/* eslint-disable no-unused-vars */\nexports.track = function(track) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Get values from items in `options` that are mapped to `key`.\n * `options` is an integration setting which is a collection\n * of type 'map', 'array', or 'mixed'\n *\n * Use cases include mapping events to pixelIds (map), sending generic\n * conversion pixels only for specific events (array), or configuring dynamic\n * mappings of event properties to query string parameters based on event (mixed)\n *\n * @api public\n * @param {Object|Object[]|String[]} options An object, array of objects, or\n * array of strings pulled from settings.mapping.\n * @param {string} key The name of the item in options whose metadata\n * we're looking for.\n * @return {Array} An array of settings that match the input `key` name.\n * @example\n *\n * // 'Map'\n * var events = { my_event: 'a4991b88' };\n * .map(events, 'My Event');\n * // => [\"a4991b88\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Array'\n * * var events = ['Completed Order', 'My Event'];\n * .map(events, 'My Event');\n * // => [\"My Event\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Mixed'\n * var events = [{ key: 'my event', value: '9b5eb1fa' }];\n * .map(events, 'my_event');\n * // => [\"9b5eb1fa\"]\n * .map(events, 'whatever');\n * // => []\n */\n\nexports.map = function(options, key) {\n  var normalizedComparator = normalize(key);\n  var mappingType = getMappingType(options);\n\n  if (mappingType === 'unknown') {\n    return [];\n  }\n\n  return foldl(function(matchingValues, val, key) {\n    var compare;\n    var result;\n\n    if (mappingType === 'map') {\n      compare = key;\n      result = val;\n    }\n\n    if (mappingType === 'array') {\n      compare = val;\n      result = val;\n    }\n\n    if (mappingType === 'mixed') {\n      compare = val.key;\n      result = val.value;\n    }\n\n    if (normalize(compare) === normalizedComparator) {\n      matchingValues.push(result);\n    }\n\n    return matchingValues;\n  }, [], options);\n};\n\n/**\n * Invoke a `method` that may or may not exist on the prototype with `args`,\n * queueing or not depending on whether the integration is \"ready\". Don't\n * trust the method call, since it contains integration party code.\n *\n * @api private\n * @param {string} method\n * @param {...*} args\n */\n\nexports.invoke = function(method) {\n  if (!this[method]) return;\n  var args = Array.prototype.slice.call(arguments, 1);\n  if (!this._ready) return this.queue(method, args);\n\n  this.debug('%s with %o', method, args);\n  return this[method].apply(this, args);\n};\n\n/**\n * Queue a `method` with `args`. If the integration assumes an initial\n * pageview, then let the first call to `page` pass through.\n *\n * @api private\n * @param {string} method\n * @param {Array} args\n */\n\nexports.queue = function(method, args) {\n  if (method === 'page' && this._assumesPageview && !this._initialized) {\n    return this.page.apply(this, args);\n  }\n\n  this._queue.push({ method: method, args: args });\n};\n\n/**\n * Flush the internal queue.\n *\n * @api private\n */\n\nexports.flush = function() {\n  this._ready = true;\n  var self = this;\n\n  each(function(call) {\n    self[call.method].apply(self, call.args);\n  }, this._queue);\n\n  // Empty the queue.\n  this._queue.length = 0;\n};\n\n/**\n * Reset the integration, removing its global variables.\n *\n * @api private\n */\n\nexports.reset = function() {\n  for (var i = 0; i < this.globals.length; i++) {\n    window[this.globals[i]] = undefined;\n  }\n\n  window.onerror = onerror;\n  window.onload = onload;\n};\n\n/**\n * Load a tag by `name`.\n *\n * @param {string} name The name of the tag.\n * @param {Object} locals Locals used to populate the tag's template variables\n * (e.g. `userId` in '<img src=\"https://whatever.com/{{ userId }}\">').\n * @param {Function} [callback=noop] A callback, invoked when the tag finishes\n * loading.\n */\n\nexports.load = function(name, locals, callback) {\n  // Argument shuffling\n  if (typeof name === 'function') { callback = name; locals = null; name = null; }\n  if (name && typeof name === 'object') { callback = locals; locals = name; name = null; }\n  if (typeof locals === 'function') { callback = locals; locals = null; }\n\n  // Default arguments\n  name = name || 'library';\n  locals = locals || {};\n\n  locals = this.locals(locals);\n  var template = this.templates[name];\n  if (!template) throw new Error(fmt('template \"%s\" not defined.', name));\n  var attrs = render(template, locals);\n  callback = callback || noop;\n  var self = this;\n  var el;\n\n  switch (template.type) {\n  case 'img':\n    attrs.width = 1;\n    attrs.height = 1;\n    el = loadImage(attrs, callback);\n    break;\n  case 'script':\n    el = loadScript(attrs, function(err) {\n      if (!err) return callback();\n      self.debug('error loading \"%s\" error=\"%s\"', self.name, err);\n    });\n      // TODO: hack until refactoring load-script\n    delete attrs.src;\n    each(function(val, key) {\n      el.setAttribute(key, val);\n    }, attrs);\n    break;\n  case 'iframe':\n    el = loadIframe(attrs, callback);\n    break;\n  default:\n      // No default case\n  }\n\n  return el;\n};\n\n/**\n * Locals for tag templates.\n *\n * By default it includes a cache buster and all of the options.\n *\n * @param {Object} [locals]\n * @return {Object}\n */\n\nexports.locals = function(locals) {\n  locals = locals || {};\n  var cache = Math.floor(new Date().getTime() / 3600000);\n  if (!locals.hasOwnProperty('cache')) locals.cache = cache;\n  each(function(val, key) {\n    if (!locals.hasOwnProperty(key)) locals[key] = val;\n  }, this.options);\n  return locals;\n};\n\n/**\n * Simple way to emit ready.\n *\n * @api public\n */\n\nexports.ready = function() {\n  this.emit('ready');\n};\n\n/**\n * Wrap the initialize method in an exists check, so we don't have to do it for\n * every single integration.\n *\n * @api private\n */\n\nexports._wrapInitialize = function() {\n  var initialize = this.initialize;\n  this.initialize = function() {\n    this.debug('initialize');\n    this._initialized = true;\n    var ret = initialize.apply(this, arguments);\n    this.emit('initialize');\n    return ret;\n  };\n\n  if (this._assumesPageview) this.initialize = after(2, this.initialize);\n};\n\n/**\n * Wrap the page method to call `initialize` instead if the integration assumes\n * a pageview.\n *\n * @api private\n */\n\nexports._wrapPage = function() {\n  var page = this.page;\n  this.page = function() {\n    if (this._assumesPageview && !this._initialized) {\n      return this.initialize.apply(this, arguments);\n    }\n\n    return page.apply(this, arguments);\n  };\n};\n\n/**\n * Wrap the track method to call other ecommerce methods if available depending\n * on the `track.event()`.\n *\n * @api private\n */\n\nexports._wrapTrack = function() {\n  var t = this.track;\n  this.track = function(track) {\n    var event = track.event();\n    var called;\n    var ret;\n\n    for (var method in events) {\n      if (has.call(events, method)) {\n        var regexp = events[method];\n        if (!this[method]) continue;\n        if (!regexp.test(event)) continue;\n        ret = this[method].apply(this, arguments);\n        called = true;\n        break;\n      }\n    }\n\n    if (!called) ret = t.apply(this, arguments);\n    return ret;\n  };\n};\n\n/**\n * Determine the type of the option passed to `#map`\n *\n * @api private\n * @param {Object|Object[]} mapping\n * @return {String} mappingType\n */\n\nfunction getMappingType(mapping) {\n  if (is.array(mapping)) {\n    return every(isMixed, mapping) ? 'mixed' : 'array';\n  }\n  if (is.object(mapping)) return 'map';\n  return 'unknown';\n}\n\n/**\n * Determine if item in mapping array is a valid \"mixed\" type value\n *\n * Must be an object with properties \"key\" (of type string)\n * and \"value\" (of any type)\n *\n * @api private\n * @param {*} item\n * @return {Boolean}\n */\n\nfunction isMixed(item) {\n  if (!is.object(item)) return false;\n  if (!is.string(item.key)) return false;\n  if (!has.call(item, 'value')) return false;\n  return true;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Object} attrs\n * @param {Function} fn\n * @return {Image}\n */\n\nfunction loadImage(attrs, fn) {\n  fn = fn || function() {};\n  var img = new Image();\n  img.onerror = error(fn, 'failed to load pixel', img);\n  img.onload = function() { fn(); };\n  img.src = attrs.src;\n  img.width = 1;\n  img.height = 1;\n  return img;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Function} fn\n * @param {string} message\n * @param {Element} img\n * @return {Function}\n */\n\nfunction error(fn, message, img) {\n  return function(e) {\n    e = e || window.event;\n    var err = new Error(message);\n    err.event = e;\n    err.source = img;\n    fn(err);\n  };\n}\n\n/**\n * Render template + locals into an `attrs` object.\n *\n * @api private\n * @param {Object} template\n * @param {Object} locals\n * @return {Object}\n */\n\nfunction render(template, locals) {\n  return foldl(function(attrs, val, key) {\n    attrs[key] = val.replace(/\\{\\{\\ *(\\w+)\\ *\\}\\}/g, function(_, $1) {\n      return locals[$1];\n    });\n    return attrs;\n  }, {}, template.attrs);\n}\n", "\n/**\n * Expose `parse`.\n */\n\nmodule.exports = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([\\w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^\\s+|\\s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = Object.prototype.hasOwnProperty.call(map, tag) ? map[tag] : map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar domify = require('domify');\nvar each = require('@ndhoule/each');\nvar includes = require('@ndhoule/includes');\n\n/**\n * Mix in emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Add a new option to the integration by `key` with default `value`.\n *\n * @api public\n * @param {string} key\n * @param {*} value\n * @return {Integration}\n */\n\nexports.option = function(key, value) {\n  this.prototype.defaults[key] = value;\n  return this;\n};\n\n/**\n * Add a new mapping option.\n *\n * This will create a method `name` that will return a mapping for you to use.\n *\n * @api public\n * @param {string} name\n * @return {Integration}\n * @example\n * Integration('My Integration')\n *   .mapping('events');\n *\n * new MyIntegration().track('My Event');\n *\n * .track = function(track){\n *   var events = this.events(track.event());\n *   each(send, events);\n *  };\n */\n\nexports.mapping = function(name) {\n  this.option(name, []);\n  this.prototype[name] = function(key) {\n    return this.map(this.options[name], key);\n  };\n  return this;\n};\n\n/**\n * Register a new global variable `key` owned by the integration, which will be\n * used to test whether the integration is already on the page.\n *\n * @api public\n * @param {string} key\n * @return {Integration}\n */\n\nexports.global = function(key) {\n  this.prototype.globals.push(key);\n  return this;\n};\n\n/**\n * Mark the integration as assuming an initial pageview, so to defer loading\n * the script until the first `page` call, noop the first `initialize`.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.assumesPageview = function() {\n  this.prototype._assumesPageview = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `load` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnLoad = function() {\n  this.prototype._readyOnLoad = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `initialize` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnInitialize = function() {\n  this.prototype._readyOnInitialize = true;\n  return this;\n};\n\n/**\n * Define a tag to be loaded.\n *\n * @api public\n * @param {string} [name='library'] A nicename for the tag, commonly used in\n * #load. Helpful when the integration has multiple tags and you need a way to\n * specify which of the tags you want to load at a given time.\n * @param {String} str DOM tag as string or URL.\n * @return {Integration}\n */\n\nexports.tag = function(name, tag) {\n  if (tag == null) {\n    tag = name;\n    name = 'library';\n  }\n  this.prototype.templates[name] = objectify(tag);\n  return this;\n};\n\n/**\n * Given a string, give back DOM attributes.\n *\n * Do it in a way where the browser doesn't load images or iframes. It turns\n * out domify will load images/iframes because whenever you construct those\n * DOM elements, the browser immediately loads them.\n *\n * @api private\n * @param {string} str\n * @return {Object}\n */\n\nfunction objectify(str) {\n  // replace `src` with `data-src` to prevent image loading\n  str = str.replace(' src=\"', ' data-src=\"');\n\n  var el = domify(str);\n  var attrs = {};\n\n  each(function(attr) {\n    // then replace it back\n    var name = attr.name === 'data-src' ? 'src' : attr.name;\n    if (!includes(attr.name + '=', str)) return;\n    attrs[name] = attr.value;\n  }, el.attributes);\n\n  return {\n    type: el.tagName.toLowerCase(),\n    attrs: attrs\n  };\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('component-bind');\nvar clone = require('@ndhoule/clone');\nvar debug = require('debug');\nvar defaults = require('@ndhoule/defaults');\nvar extend = require('@ndhoule/extend');\nvar slug = require('slug-component');\nvar protos = require('./protos');\nvar statics = require('./statics');\n\n/**\n * Create a new `Integration` constructor.\n *\n * @constructs Integration\n * @param {string} name\n * @return {Function} Integration\n */\n\nfunction createIntegration(name) {\n  /**\n   * Initialize a new `Integration`.\n   *\n   * @class\n   * @param {Object} options\n   */\n\n  function Integration(options) {\n    if (options && options.addIntegration) {\n      // plugin\n      return options.addIntegration(Integration);\n    }\n    this.debug = debug('analytics:integration:' + slug(name));\n    this.options = defaults(clone(options) || {}, this.defaults);\n    this._queue = [];\n    this.once('ready', bind(this, this.flush));\n\n    Integration.emit('construct', this);\n    this.ready = bind(this, this.ready);\n    this._wrapInitialize();\n    this._wrapPage();\n    this._wrapTrack();\n  }\n\n  Integration.prototype.defaults = {};\n  Integration.prototype.globals = [];\n  Integration.prototype.templates = {};\n  Integration.prototype.name = name;\n  extend(Integration, statics);\n  extend(Integration.prototype, protos);\n\n  return Integration;\n}\n\n/**\n * Exports.\n */\n\nmodule.exports = createIntegration;\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Identify = require('segmentio-facade').Identify;\nvar alias = require('@segment/alias');\nvar convertDates = require('@segment/convert-dates');\nvar integration = require('@segment/analytics.js-integration');\n\nvar MAX_YEAR_SUPPORTED_AS_UNIX = 1970;\n/**\n * Expose `Customerio` integration.\n */\n\nvar Customerio = (module.exports = integration('Customer.io')\n  .global('_cio')\n  .option('siteId', '')\n  .option('datacenter', '')\n  .tag(\n    'eu-tag',\n    '<script id=\"cio-tracker\" src=\"https://assets.customer.io/assets/track-eu.js\" data-site-id=\"{{ siteId }}\">'\n  )\n  .tag(\n    'global-tag',\n    '<script id=\"cio-tracker\" src=\"https://assets.customer.io/assets/track.js\" data-site-id=\"{{ siteId }}\">'\n  ));\n\n/**\n * Initialize.\n *\n * http://customer.io/docs/api/javascript.html\n *\n * @api public\n */\n\nCustomerio.prototype.initialize = function() {\n  window._cio = window._cio || [];\n  /* eslint-disable */\n  (function(){var a,b,c; a = function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0))); }; }; b = ['identify', 'track']; for (c = 0; c < b.length; c++) {window._cio[b[c]] = a(b[c]); } })();\n  /* eslint-enable */\n\n  if (this.options.datacenter === 'eu' && this.templates['eu-tag']) {\n    this.load('eu-tag', this.ready)\n  } else {\n    this.load('global-tag', this.ready);\n  }\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nCustomerio.prototype.loaded = function() {\n  return !!(window._cio && window._cio.push !== Array.prototype.push);\n};\n\n/**\n * Page.\n *\n * https://learn.customer.io/api/#apipageview_event\n *\n * @api public\n * @param {Page} page\n */\n\nCustomerio.prototype.page = function(page) {\n  var name = page.name() || page.url();\n  window._cio.page(name, page.properties());\n};\n\n/**\n * Identify.\n *\n * http://customer.io/docs/api/javascript.html#section-Identify_customers\n *\n * @api public\n * @param {Identify} identify\n */\n\nCustomerio.prototype.identify = function(identify) {\n  if (!identify.userId()) return this.debug('user id required');\n  var traits = identify.traits({ createdAt: 'created' });\n  traits = alias(traits, { created: 'created_at' });\n  traits = convertDates(traits, convertDate);\n  window._cio.identify(traits);\n};\n\n/**\n * Group.\n *\n * @api public\n * @param {Group} group\n */\n\nCustomerio.prototype.group = function(group) {\n  var traits = group.traits();\n  var user = this.analytics.user();\n\n  traits = alias(traits, function(trait) {\n    return 'Group ' + trait;\n  });\n\n  this.identify(\n    new Identify({\n      userId: user.id(),\n      traits: traits\n    })\n  );\n};\n\n/**\n * Track.\n *\n * http://customer.io/docs/api/javascript.html#section-Track_a_custom_event\n *\n * @api public\n * @param {Track} track\n */\n\nCustomerio.prototype.track = function(track) {\n  var properties = track.properties();\n  properties = convertDates(properties, convertDate);\n  window._cio.track(track.event(), properties);\n};\n\n/**\n * Convert a date to the format Customer.io supports.\n *\n * @api private\n * @param {Date} date\n * @return {number}\n */\n\nfunction convertDate(date) {\n  if (date.getFullYear() < MAX_YEAR_SUPPORTED_AS_UNIX) {\n    return date.toISOString();\n  }\n  return Math.floor(date.getTime() / 1000);\n}\n", "'use strict';\n\n/**\n * Pad a `number` with a ten's place zero.\n *\n * @param {number} number\n * @return {string}\n */\nfunction pad(number) {\n  var n = number.toString();\n  return n.length === 1 ? '0' + n : n;\n}\n\n/**\n * Turn a `date` into an ISO string.\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString\n *\n * @param {Date} date\n * @return {string}\n */\nfunction toISOString(date) {\n  return date.getUTCFullYear()\n    + '-' + pad(date.getUTCMonth() + 1)\n    + '-' + pad(date.getUTCDate())\n    + 'T' + pad(date.getUTCHours())\n    + ':' + pad(date.getUTCMinutes())\n    + ':' + pad(date.getUTCSeconds())\n    + '.' + String((date.getUTCMilliseconds()/1000).toFixed(3)).slice(2, 5)\n    + 'Z';\n}\n\n/*\n * Exports.\n */\n\nmodule.exports = toISOString;\n", "module.exports = function(arr, obj){\n  if (arr.indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar alias = require('@segment/alias');\nvar dates = require('@segment/convert-dates');\nvar del = require('obj-case').del;\nvar includes = require('@ndhoule/includes');\nvar integration = require('@segment/analytics.js-integration');\nvar iso = require('@segment/to-iso-string');\nvar pick = require('@ndhoule/pick');\nvar is = require('is');\nvar indexOf = require('component-indexof');\n\n/**\n * Expose `Mixpanel` integration.\n */\n\nvar Mixpanel = (module.exports = integration('Mixpanel')\n  .global('mixpanel')\n  .option('eventIncrements', [])\n  .option('propIncrements', [])\n  .option('peopleProperties', [])\n  .option('superProperties', [])\n  .option('cookieName', '')\n  .option('crossSubdomainCookie', false)\n  .option('secureCookie', false)\n  .option('persistence', 'cookie')\n  .option('nameTag', true)\n  .option('pageview', false)\n  .option('people', false)\n  .option('token', '')\n  .option('setAllTraitsByDefault', true)\n  .option('consolidatedPageCalls', true)\n  .option('trackAllPages', false)\n  .option('trackNamedPages', false)\n  .option('trackCategorizedPages', false)\n  .option('groupIdentifierTraits', [])\n  .option('sourceName', '')\n  .option('enableEuropeanUnionEndpoint', false)\n  .tag('<script src=\"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\">'));\n\n/**\n * Options aliases.\n */\n\nvar optionsAliases = {\n  cookieName: 'cookie_name',\n  crossSubdomainCookie: 'cross_subdomain_cookie',\n  secureCookie: 'secure_cookie'\n};\n\n/**\n * Initialize.\n *\n * https://mixpanel.com/help/reference/javascript#installing\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.init\n *\n * @api public\n */\n\nMixpanel.prototype.initialize = function() {\n  /* eslint-disable */\n  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+\"=([^&]*)\")))?l[1]:null};g&&c(g,\"state\")&&(i=JSON.parse(decodeURIComponent(c(g,\"state\"))),\"mpeditor\"===i.action&&(b.sessionStorage.setItem(\"_mpcehash\",g),history.replaceState(i.desiredHash||\"\",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(\".\");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,\n0)))}}var d=a;\"undefined\"!==typeof f?d=a[f]=[]:f=\"mixpanel\";d.people=d.people||[];d.toString=function(b){var a=\"mixpanel\";\"mixpanel\"!==f&&(a+=\".\"+f);b||(a+=\" (stub)\");return a};d.people.toString=function(){return d.toString(1)+\".people (stub)\"};k=\"disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user\".split(\" \");\nfor(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;}})(document,window.mixpanel||[]);\n  /* eslint-enable */\n  this.options.eventIncrements = lowercase(this.options.eventIncrements);\n  this.options.propIncrements = lowercase(this.options.propIncrements);\n  var options = alias(this.options, optionsAliases);\n  if (this.options.enableEuropeanUnionEndpoint) {\n    // https://developer.mixpanel.com/docs/implement-mixpanel#section-implementing-mixpanel-in-the-european-union-eu\n    options.api_host = 'https://api-eu.mixpanel.com';\n  }\n  // tag ajs requests with Segment by request from Mixpanel team for better mutual debugging\n  options.loaded = function(mixpanel) {\n    mixpanel.register({ mp_lib: 'Segment: web' });\n  };\n  window.mixpanel.init(options.token, options);\n  this.load(this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nMixpanel.prototype.loaded = function() {\n  return !!(window.mixpanel && window.mixpanel.config);\n};\n\n/**\n * Page.\n *\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.track_pageview\n *\n * @api public\n * @param {Page} page\n */\n\nMixpanel.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.name();\n  var opts = this.options;\n\n  // consolidated Page Calls\n  if (opts.consolidatedPageCalls) {\n    this.track(page.track());\n    return;\n  }\n\n  // all pages\n  if (opts.trackAllPages) {\n    this.track(page.track());\n    return;\n  }\n\n  // categorized pages\n  if (opts.trackCategorizedPages && category) {\n    // If this option is checked and name was also passed, used the full name which includes both category & name\n    if (name) {\n      this.track(page.track(page.fullName()));\n      return;\n    }\n    this.track(page.track(category));\n    return;\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * Trait aliases.\n */\n\nvar traitAliases = {\n  created: '$created',\n  email: '$email',\n  firstName: '$first_name',\n  lastName: '$last_name',\n  lastSeen: '$last_seen',\n  name: '$name',\n  username: '$username',\n  phone: '$phone'\n};\n\n/**\n * Identify.\n *\n * https://mixpanel.com/help/reference/javascript#super-properties\n * https://mixpanel.com/help/reference/javascript#user-identity\n * https://mixpanel.com/help/reference/javascript#storing-user-profiles\n *\n * @api public\n * @param {Identify} identify\n */\n\nMixpanel.prototype.identify = function(identify) {\n  var username = identify.username();\n  var email = identify.email();\n  var id = identify.userId();\n  var setAllTraitsByDefault = this.options.setAllTraitsByDefault;\n  var people = this.options.people;\n  var peopleProperties = extendTraits(this.options.peopleProperties);\n  var superProperties = this.options.superProperties;\n\n  // id\n  if (id) window.mixpanel.identify(id);\n\n  // name tag\n  var nametag = email || username || id;\n  if (nametag) window.mixpanel.name_tag(nametag);\n\n  var traits = identify.traits(traitAliases);\n  if (traits.$created) del(traits, 'createdAt');\n  traits = dates(traits, iso);\n\n  // determine which traits to union to existing properties and which to set as new properties\n  var traitsToUnion = {};\n  var traitsToSet = {};\n  for (var key in traits) {\n    if (!traits.hasOwnProperty(key)) continue;\n\n    var trait = traits[key];\n    if (Array.isArray(trait) && trait.length > 0) {\n      traitsToUnion[key] = trait;\n      // since mixpanel doesn't offer a union method for super properties we have to do it manually by retrieving the existing list super property\n      // from mixpanel and manually unioning to it ourselves\n      var existingTrait = window.mixpanel.get_property(key);\n      if (existingTrait && Array.isArray(existingTrait)) {\n        traits[key] = unionArrays(existingTrait, trait);\n      }\n    } else {\n      traitsToSet[key] = trait;\n    }\n  }\n\n  if (setAllTraitsByDefault) {\n    window.mixpanel.register(traits);\n    if (people) {\n      window.mixpanel.people.set(traitsToSet);\n      window.mixpanel.people.union(traitsToUnion);\n    }\n  } else {\n    // explicitly set select traits as people and super properties\n    var mappedSuperProps = mapTraits(superProperties);\n    var superProps = pick(mappedSuperProps || [], traits);\n    if (!is.empty(superProps)) window.mixpanel.register(superProps);\n    if (people) {\n      var mappedPeopleProps = mapTraits(peopleProperties);\n      var peoplePropsToSet = pick(mappedPeopleProps || [], traitsToSet);\n      var peoplePropsToUnion = pick(mappedPeopleProps || [], traitsToUnion);\n      if (!is.empty(peoplePropsToSet))\n        window.mixpanel.people.set(peoplePropsToSet);\n      if (!is.empty(peoplePropsToUnion))\n        window.mixpanel.people.union(peoplePropsToUnion);\n    }\n  }\n};\n\n/**\n * Track.\n *\n * https://mixpanel.com/help/reference/javascript#sending-events\n * https://mixpanel.com/help/reference/javascript#tracking-revenue\n *\n * @api public\n * @param {Track} track\n */\n\nMixpanel.prototype.track = function(track) {\n  var eventIncrements = this.options.eventIncrements || this.options.increments; // TODO: remove settings.increments check, it's only here as we cutover from increments to eventIncrements\n  var propIncrements = this.options.propIncrements;\n  var eventLowercase = track.event().toLowerCase();\n  var people = this.options.people;\n  var props = track.properties();\n  var revenue = track.revenue();\n  // Don't map traits, clients should use identify instead.\n  var superProps = pick(this.options.superProperties, props);\n  var sourceName = this.options.sourceName;\n\n  if (sourceName) props.segment_source_name = sourceName;\n\n  // delete mixpanel's reserved properties, so they don't conflict\n  delete props.distinct_id;\n  delete props.ip;\n  delete props.mp_name_tag;\n  delete props.mp_note;\n  delete props.token;\n\n  props = dates(props, iso);\n  invertObjectArrays(props);\n\n  // Mixpanel People operations\n  if (people) {\n    // increment event count\n    if (includes(eventLowercase, eventIncrements)) {\n      window.mixpanel.people.increment(track.event());\n      window.mixpanel.people.set('Last ' + track.event(), new Date());\n    }\n    // increment property counts\n    for (var key in props) {\n      if (!Object.prototype.hasOwnProperty.call(props, key)) {\n        continue;\n      }\n      var prop = props[key];\n      if (includes(key.toLowerCase(), propIncrements)) {\n        window.mixpanel.people.increment(key, prop);\n      }\n    }\n    // track revenue\n    if (revenue) {\n      window.mixpanel.people.track_charge(revenue);\n    }\n  }\n\n  // track the event\n  var query;\n  if (props.link_query) {\n    query = props.link_query; // DOM query\n    delete props.link_query;\n    window.mixpanel.track_links(query, track.event(), props);\n  } else if (props.form_query) {\n    // DOM query\n    query = props.form_query;\n    delete props.form_query;\n    window.mixpanel.track_forms(query, track.event(), props);\n  } else {\n    window.mixpanel.track(track.event(), props);\n  }\n\n  // register super properties if present in context.mixpanel.superProperties\n  if (!is.empty(superProps)) {\n    window.mixpanel.register(superProps);\n  }\n};\n\n/**\n * Alias.\n *\n * https://mixpanel.com/help/reference/javascript#user-identity\n * https://mixpanel.com/help/reference/javascript-full-api-reference#mixpanel.alias\n *\n * @api public\n * @param {Alias} alias\n */\n\nMixpanel.prototype.alias = function(alias) {\n  var mp = window.mixpanel;\n  var to = alias.to();\n  if (mp.get_distinct_id && mp.get_distinct_id() === to) return;\n  // HACK: internal mixpanel API to ensure we don't overwrite\n  if (mp.get_property && mp.get_property('$people_distinct_id') === to) return;\n  // although undocumented, mixpanel takes an optional original id\n  mp.alias(to, alias.from());\n};\n\n/**\n *\n * @param {Group} group\n */\n\nMixpanel.prototype.group = function(group) {\n  var groupIdentifierTraits = this.options.groupIdentifierTraits;\n  var groupId = group.groupId();\n  var userId = this.analytics.user().id();\n  var traits = group.properties();\n  if (!groupId || !userId || !groupIdentifierTraits.length) {\n    return;\n  }\n\n  if (traits && Object.keys(traits).length) {\n    for (var ind = 0; ind < groupIdentifierTraits.length; ind++) {\n      window.mixpanel\n        .get_group(groupIdentifierTraits[ind], groupId)\n        .set_once(traits);\n    }\n  }\n  for (var i = 0; i < groupIdentifierTraits.length; i++) {\n    window.mixpanel.set_group(groupIdentifierTraits[i], [groupId]);\n  }\n};\n\n/**\n * Lowercase the given `arr`.\n *\n * @api private\n * @param {Array} arr\n * @return {Array}\n */\n\nfunction lowercase(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < arr.length; ++i) {\n    ret[i] = String(arr[i]).toLowerCase();\n  }\n\n  return ret;\n}\n\n/**\n * Map Special traits in the given `arr`.\n * From the TraitAliases for Mixpanel's special props\n *\n * @api private\n * @param {Array} arr\n * @return {Array}\n */\n\nfunction mapTraits(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < arr.length; ++i) {\n    if (traitAliases.hasOwnProperty(arr[i])) {\n      ret.push(traitAliases[arr[i]]);\n    } else {\n      ret.push(arr[i]);\n    }\n  }\n\n  return ret;\n}\n\n/**\n * extend Mixpanel's special trait keys in the given `arr`.\n *\n * @api private\n * @param {Array} arr\n * @return {Array}\n */\n\nfunction extendTraits(arr) {\n  var keys = [];\n\n  for (var key in traitAliases) {\n    if (traitAliases.hasOwnProperty(key)) {\n      keys.push(key);\n    }\n  }\n\n  for (var i = 0; i < keys.length; ++i) {\n    if (indexOf(arr, keys[i]) < 0) {\n      arr.push(keys[i]);\n    }\n  }\n\n  return arr;\n}\n\n/**\n * Since Mixpanel doesn't support lists of objects, invert each list of objects to a set of lists of object properties.\n * Treats list transformation atomically, e.g. will only transform if EVERY item in list is an object\n *\n * @api private\n * @param {Object} props\n * @example\n * input: {products: [{sku: 32, revenue: 99}, {sku:2, revenue: 103}]}\n * output: {products_skus: [32, 2], products_revenues: [99, 103]}\n */\n\nfunction invertObjectArrays(props) {\n  var properties = props;\n  for (var propName in properties) {  // eslint-disable-line\n    var propValue = properties[propName];\n    if (!properties.hasOwnProperty(propName) || !Array.isArray(propValue)) {\n      continue;\n    }\n\n    var invertedArrays = invertObjectArray(propName, propValue);\n    if (Object.keys(invertedArrays).length !== 0) {\n      // make sure obj isn't empty\n      mergeArraysIntoObj(properties, invertedArrays);\n      delete properties[propName];\n    }\n  }\n}\n\n// Example:\n// input: 'products', [{sku: 32, revenue: 99}, {sku:2, revenue: 103}]\n// output: {products_skus: [32, 2], products_revenues: [99, 103]}\nfunction invertObjectArray(propName, arr) {\n  var invertedArrays = {};\n\n  // invert object lists and collect into invertedLists\n  for (var i = 0; i < arr.length; i++) {\n    var elem = arr[i];\n\n    // abort operation if non-object encountered in array\n    if (typeof elem !== 'object') {\n      return {};\n    }\n    for (var key in elem) {\n      if (!elem.hasOwnProperty(key)) {\n        continue;\n      }\n      var attrKey = propName + '_' + key + 's'; // e.g. products_skus\n\n      // append to list if it exists or create new one if not\n      if (attrKey in invertedArrays) {\n        invertedArrays[attrKey].push(elem[key]);\n      } else {\n        invertedArrays[attrKey] = [elem[key]];\n      }\n    }\n  }\n  return invertedArrays;\n}\n\nfunction mergeArraysIntoObj(destination, source) {\n  var d = destination;\n  for (var arrayName in source) {\n    if (source.hasOwnProperty(arrayName)) {\n      var arr = source[arrayName];\n      d[arrayName] = arrayName in d ? d[arrayName].concat(arr) : arr;\n    }\n  }\n}\n\n/**\n * Return union of two arrays\n * Pulled from https://stackoverflow.com/a/3629861\n *\n * @param {Array} x\n * @param {Array} y\n * @return {Array} res\n * @api private\n */\n\nfunction unionArrays(x, y) {\n  var obj = {};\n  // store items of each array as keys/values of obj, implicitly overwriting duplicates\n  var i;\n  for (i = 0; i < x.length; i++) {\n    obj[x[i]] = x[i];\n  }\n  for (i = 0; i < y.length; i++) {\n    obj[y[i]] = y[i];\n  }\n  return Object.keys(obj);\n}\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar keys = require('@ndhoule/keys');\n\n/**\n * Returns an array containing all enumerable values from a `source` object.\n *\n * @name values\n * @api public\n * @category Object\n * @param {Object} source The object to retrieve values from.\n * @return {Array} An array of all the `source` object's values.\n * @example\n * values({ a: 1, b: 2, c: 3 });\n * //=> [1, 2, 3]\n */\nvar values = function values(source) {\n  var ks = keys(source);\n  var results = new Array(ks.length);\n\n  for (var i = 0; i < ks.length; i += 1) {\n    results[i] = source[ks[i]];\n  }\n\n  return results;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = values;\n", "'use strict';\n\n/*\n * Module dependencies.\n */\n\nvar each = require('@ndhoule/each');\n\n/**\n * Produce a new array by passing each value in the input `collection` through a transformative\n * `iterator` function. The `iterator` function is passed three arguments:\n * `(value, index, collection)`.\n *\n * @name map\n * @api public\n * @param {Function} iterator The transformer function to invoke per iteration.\n * @param {Array} collection The collection to iterate over.\n * @return {Array} A new array containing the results of each `iterator` invocation.\n * @example\n * var square = function(x) { return x * x; };\n *\n * map(square, [1, 2, 3]);\n * //=> [1, 4, 9]\n */\nvar map = function map(iterator, collection) {\n  if (typeof iterator !== 'function') {\n    throw new TypeError('Expected a function but received a ' + typeof iterator);\n  }\n\n  var result = [];\n\n  each(function(val, i, collection) {\n    result.push(iterator(val, i, collection));\n  }, collection);\n\n  return result;\n};\n\n/*\n * Exports.\n */\n\nmodule.exports = map;\n", "'use strict';\n\n/**\n * Module Dependencies\n */\n\nvar map = require('@ndhoule/map');\nvar foldl = require('@ndhoule/foldl');\n\nvar eventMap = {\n  // Videos\n  videoPlaybackStarted: [{\n    object: 'video playback',\n    action: 'started'\n  }],\n  videoPlaybackPaused: [{\n    object: 'video playback',\n    action: 'paused'\n  }],\n  videoPlaybackInterrupted: [{\n    object: 'video playback',\n    action: 'interrupted'\n  }],\n  videoPlaybackResumed: [{\n    object: 'video playback',\n    action: 'resumed'\n  }],\n  videoPlaybackCompleted: [{\n    object: 'video playback',\n    action: 'completed'\n  }],\n  videoPlaybackExited: [{\n    object: 'video playback',\n    action: 'exited'\n  }],\n  videoPlaybackBufferStarted: [{\n    object: 'video playback buffer',\n    action: 'started'\n  }],\n  videoPlaybackBufferCompleted: [{\n    object: 'video playback buffer',\n    action: 'completed'\n  }],\n  videoPlaybackSeekStarted: [{\n    object: 'video playback seek',\n    action: 'started'\n  }],\n  videoPlaybackSeekCompleted: [{\n    object: 'video playback seek',\n    action: 'completed'\n  }],\n  videoContentStarted: [{\n    object: 'video content',\n    action: 'started'\n  }],\n  videoContentPlaying: [{\n    object: 'video content',\n    action: 'playing'\n  }],\n  videoContentCompleted: [{\n    object: 'video content',\n    action: 'completed'\n  }],\n  videoAdStarted: [{\n    object: 'video ad',\n    action: 'started'\n  }],\n  videoAdPlaying: [{\n    object: 'video ad',\n    action: 'playing'\n  }],\n  videoAdCompleted: [{\n    object: 'video ad',\n    action: 'completed'\n  }],\n  videoAdClicked: [{\n    object: 'video ad',\n    action: 'clicked'\n  }],\n  videoAdSkipped: [{\n    object: 'video ad',\n    action: 'skipped'\n  }],\n\n  // Promotions\n  promotionViewed: [{\n    object: 'promotion',\n    action: 'viewed'\n  }],\n  promotionClicked: [{\n    object: 'promotion',\n    action: 'clicked'\n  }],\n\n  // Browsing\n  productsSearched: [{\n    object: 'products',\n    action: 'searched'\n  }],\n  productListViewed: [{\n    object: 'product list',\n    action: 'viewed'\n  }, {\n    object: 'product category',\n    action: 'viewed'\n  }],\n  productListFiltered: [{\n    object: 'product list',\n    action: 'filtered'\n  }],\n\n  // Core Ordering\n  productClicked: [{\n    object: 'product',\n    action: 'clicked'\n  }],\n  productViewed: [{\n    object: 'product',\n    action: 'viewed'\n  }],\n  productAdded: [{\n    object: 'product',\n    action: 'added'\n  }],\n  productRemoved: [{\n    object: 'product',\n    action: 'removed'\n  }],\n  cartViewed: [{\n    object: 'cart',\n    action: 'viewed'\n  }],\n  orderUpdated: [{\n    object: 'order',\n    action: 'updated'\n  }],\n  orderCompleted: [{\n    object: 'order',\n    action: 'completed'\n  }],\n  orderRefunded: [{\n    object: 'order',\n    action: 'refunded'\n  }],\n  orderCancelled: [{\n    object: 'order',\n    action: 'cancelled'\n  }],\n  paymentInfoEntered: [{\n    object: 'payment info',\n    action: 'entered'\n  }],\n  checkoutStarted: [{\n    object: 'checkout',\n    action: 'started'\n  }],\n  checkoutStepViewed: [{\n    object: 'checkout step',\n    action: 'viewed'\n  }],\n  checkoutStepCompleted: [{\n    object: 'checkout step',\n    action: 'completed'\n  }],\n\n  // Coupons\n  couponEntered: [{\n    object: 'coupon',\n    action: 'entered'\n  }],\n  couponApplied: [{\n    object: 'coupon',\n    action: 'applied'\n  }],\n  couponDenied: [{\n    object: 'coupon',\n    action: 'denied'\n  }],\n  couponRemoved: [{\n    object: 'coupon',\n    action: 'removed'\n  }],\n\n  // Wishlisting\n  productAddedToWishlist: [{\n    object: 'product',\n    action: 'added to wishlist'\n  }],\n  productRemovedFromWishlist: [{\n    object: 'product',\n    action: 'removed from wishlist'\n  }],\n  productAddedFromWishlistToCart: [{\n    object: 'product',\n    action: 'added to cart from wishlist'\n  }, {\n    object: 'product',\n    action: 'added from wishlist to cart'\n  }],\n  wishlistProductAddedToCart: [{\n    object: 'wishlist product',\n    action: 'added to cart'\n  }],\n\n  // Sharing\n  productShared: [{\n    object: 'product',\n    action: 'shared'\n  }],\n  cartShared: [{\n    object: 'cart',\n    action: 'shared'\n  }],\n\n  // Reviewing\n  productReviewed: [{\n    object: 'product',\n    action: 'reviewed'\n  }],\n\n  // App Lifecycle\n  applicationInstalled: [{\n    object: 'application',\n    action: 'installed'\n  }],\n  applicationUpdated: [{\n    object: 'application',\n    action: 'updated'\n  }],\n  applicationOpened: [{\n    object: 'application',\n    action: 'opened'\n  }],\n  applicationBackgrounded: [{\n    object: 'application',\n    action: 'backgrounded'\n  }],\n  applicationUninstalled: [{\n    object: 'application',\n    action: 'uninstalled'\n  }],\n  applicationCrashed: [{\n    object: 'application',\n    action: 'crashed'\n  }],\n\n  // App Campaign and Referral Events\n  installAttributed: [{\n    object: 'install',\n    action: 'attributed'\n  }],\n  deepLinkOpened: [{\n    object: 'deep link',\n    action: 'opened'\n  }],\n  deepLinkClicked: [{\n    object: 'deep link',\n    action: 'clicked'\n  }],\n  pushNotificationReceived: [{\n    object: 'push notification',\n    action: 'received'\n  }],\n  pushNotificationTapped: [{\n    object: 'push notification',\n    action: 'tapped'\n  }],\n  pushNotificationBounced: [{\n    object: 'push notification',\n    action: 'bounced'\n  }],\n\n  // Email\n  emailBounced: [{\n    object: 'email',\n    action: 'bounced'\n  }],\n  emailDelivered: [{\n    object: 'email',\n    action: 'delivered'\n  }],\n  emailLinkClicked: [{\n    object: 'email link',\n    action: 'clicked'\n  }],\n  emailMarkedAsSpam: [{\n    object: 'email',\n    action: 'marked as spam'\n  }],\n  emailOpened: [{\n    object: 'email',\n    action: 'opened'\n  }],\n  unsubscribed: [{\n    object: '',\n    action: 'unsubscribed'\n  }],\n\n  // Live Chat\n  liveChatConversationEnded: [{\n    object: 'live chat conversation',\n    action: 'ended'\n  }],\n  liveChatConversationStarted: [{\n    object: 'live chat conversation',\n    action: 'started'\n  }],\n  liveChatMessageReceived: [{\n    object: 'live chat message',\n    action: 'received'\n  }],\n  liveChatMessageSent: [{\n    object: 'live chat message',\n    action: 'sent'\n  }]\n};\n\n/**\n * Export the event map\n *\n * For each method\n *   - For each of its object:action alias pairs\n *     - For each permutation of that pair\n *       - Create a regex string\n *   - Join them and assign it to its respective method value\n *\n *  [{\n *    object: 'product list',\n *    action: 'viewed'\n *  },{\n *    object: 'product category',\n *    action: 'viewed'\n *  }] => /\n *    ^[ _]?product[ _]?list[ _]?viewed[ _]?\n *   |^[ _]?viewed[ _]?product[ _]?list[ _]?\n *   |^[ _]?product[ _]?category[ _]?viewed[ _]?\n *   |^[ _]?viewed[ _]?product[ _]?category[ _]?\n *   $/i\n *\n *  todo(cs/wj/nh): memoization strategy / build step?\n */\n\nmodule.exports = foldl(function transform(ret, pairs, method) {\n  var values = map(function(pair) {\n    return map(function(permutation) {\n      var flattened = [].concat.apply([], map(function(words) {\n        return words.split(' ');\n      }, permutation));\n      return '^[ _]?' + flattened.join('[ _]?') + '[ _]?';\n    }, [\n      [pair.action, pair.object],\n      [pair.object, pair.action]\n    ]).join('|');\n  }, pairs);\n  var conjoined = values.join('|') + '$';\n  ret[method] = new RegExp(conjoined, 'i');\n  return ret;\n}, {}, eventMap);\n", "'use strict';\n\nvar callable, byObserver;\n\ncallable = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\nbyObserver = function (Observer) {\n\tvar node = document.createTextNode(''), queue, i = 0;\n\tnew Observer(function () {\n\t\tvar data;\n\t\tif (!queue) return;\n\t\tdata = queue;\n\t\tqueue = null;\n\t\tif (typeof data === 'function') {\n\t\t\tdata();\n\t\t\treturn;\n\t\t}\n\t\tdata.forEach(function (fn) { fn(); });\n\t}).observe(node, { characterData: true });\n\treturn function (fn) {\n\t\tcallable(fn);\n\t\tif (queue) {\n\t\t\tif (typeof queue === 'function') queue = [queue, fn];\n\t\t\telse queue.push(fn);\n\t\t\treturn;\n\t\t}\n\t\tqueue = fn;\n\t\tnode.data = (i = ++i % 2);\n\t};\n};\n\nmodule.exports = (function () {\n\t// Node.js\n\tif ((typeof process !== 'undefined') && process &&\n\t\t\t(typeof process.nextTick === 'function')) {\n\t\treturn process.nextTick;\n\t}\n\n\t// MutationObserver=\n\tif ((typeof document === 'object') && document) {\n\t\tif (typeof MutationObserver === 'function') {\n\t\t\treturn byObserver(MutationObserver);\n\t\t}\n\t\tif (typeof WebKitMutationObserver === 'function') {\n\t\t\treturn byObserver(WebKitMutationObserver);\n\t\t}\n\t}\n\n\t// W3C Draft\n\t// http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\tif (typeof setImmediate === 'function') {\n\t\treturn function (cb) { setImmediate(callable(cb)); };\n\t}\n\n\t// Wide available standard\n\tif (typeof setTimeout === 'function') {\n\t\treturn function (cb) { setTimeout(callable(cb), 0); };\n\t}\n\n\treturn null;\n}());\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar each = require('@ndhoule/each');\nvar events = require('analytics-events');\nvar every = require('@ndhoule/every');\nvar fmt = require('@segment/fmt');\nvar foldl = require('@ndhoule/foldl');\nvar is = require('is');\nvar loadIframe = require('load-iframe');\nvar loadScript = require('@segment/load-script');\nvar nextTick = require('next-tick');\nvar normalize = require('to-no-case');\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * No operation.\n */\n\nvar noop = function noop() {};\n\n/**\n * Window defaults.\n */\n\nvar onerror = window.onerror;\nvar onload = null;\n\n/**\n * Mixin emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Initialize.\n */\n\nexports.initialize = function() {\n  var ready = this.ready;\n  nextTick(ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nexports.loaded = function() {\n  return false;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\n/* eslint-disable no-unused-vars */\nexports.page = function(page) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\n/* eslint-disable no-unused-vars */\nexports.track = function(track) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Get values from items in `options` that are mapped to `key`.\n * `options` is an integration setting which is a collection\n * of type 'map', 'array', or 'mixed'\n *\n * Use cases include mapping events to pixelIds (map), sending generic\n * conversion pixels only for specific events (array), or configuring dynamic\n * mappings of event properties to query string parameters based on event (mixed)\n *\n * @api public\n * @param {Object|Object[]|String[]} options An object, array of objects, or\n * array of strings pulled from settings.mapping.\n * @param {string} key The name of the item in options whose metadata\n * we're looking for.\n * @return {Array} An array of settings that match the input `key` name.\n * @example\n *\n * // 'Map'\n * var events = { my_event: 'a4991b88' };\n * .map(events, 'My Event');\n * // => [\"a4991b88\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Array'\n * * var events = ['Completed Order', 'My Event'];\n * .map(events, 'My Event');\n * // => [\"My Event\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Mixed'\n * var events = [{ key: 'my event', value: '9b5eb1fa' }];\n * .map(events, 'my_event');\n * // => [\"9b5eb1fa\"]\n * .map(events, 'whatever');\n * // => []\n */\n\nexports.map = function(options, key) {\n  var normalizedComparator = normalize(key);\n  var mappingType = getMappingType(options);\n\n  if (mappingType === 'unknown') {\n    return [];\n  }\n\n  return foldl(function(matchingValues, val, key) {\n    var compare;\n    var result;\n\n    if (mappingType === 'map') {\n      compare = key;\n      result = val;\n    }\n\n    if (mappingType === 'array') {\n      compare = val;\n      result = val;\n    }\n\n    if (mappingType === 'mixed') {\n      compare = val.key;\n      result = val.value;\n    }\n\n    if (normalize(compare) === normalizedComparator) {\n      matchingValues.push(result);\n    }\n\n    return matchingValues;\n  }, [], options);\n};\n\n/**\n * Invoke a `method` that may or may not exist on the prototype with `args`,\n * queueing or not depending on whether the integration is \"ready\". Don't\n * trust the method call, since it contains integration party code.\n *\n * @api private\n * @param {string} method\n * @param {...*} args\n */\n\nexports.invoke = function(method) {\n  if (!this[method]) return;\n  var args = Array.prototype.slice.call(arguments, 1);\n  if (!this._ready) return this.queue(method, args);\n\n  this.debug('%s with %o', method, args);\n  return this[method].apply(this, args);\n};\n\n/**\n * Queue a `method` with `args`.\n *\n * @api private\n * @param {string} method\n * @param {Array} args\n */\n\nexports.queue = function(method, args) {\n  this._queue.push({ method: method, args: args });\n};\n\n/**\n * Flush the internal queue.\n *\n * @api private\n */\n\nexports.flush = function() {\n  this._ready = true;\n  var self = this;\n\n  each(function(call) {\n    self[call.method].apply(self, call.args);\n  }, this._queue);\n\n  // Empty the queue.\n  this._queue.length = 0;\n};\n\n/**\n * Reset the integration, removing its global variables.\n *\n * @api private\n */\n\nexports.reset = function() {\n  for (var i = 0; i < this.globals.length; i++) {\n    window[this.globals[i]] = undefined;\n  }\n\n  window.onerror = onerror;\n  window.onload = onload;\n};\n\n/**\n * Load a tag by `name`.\n *\n * @param {string} name The name of the tag.\n * @param {Object} locals Locals used to populate the tag's template variables\n * (e.g. `userId` in '<img src=\"https://whatever.com/{{ userId }}\">').\n * @param {Function} [callback=noop] A callback, invoked when the tag finishes\n * loading.\n */\n\nexports.load = function(name, locals, callback) {\n  // Argument shuffling\n  if (typeof name === 'function') { callback = name; locals = null; name = null; }\n  if (name && typeof name === 'object') { callback = locals; locals = name; name = null; }\n  if (typeof locals === 'function') { callback = locals; locals = null; }\n\n  // Default arguments\n  name = name || 'library';\n  locals = locals || {};\n\n  locals = this.locals(locals);\n  var template = this.templates[name];\n  if (!template) throw new Error(fmt('template \"%s\" not defined.', name));\n  var attrs = render(template, locals);\n  callback = callback || noop;\n  var self = this;\n  var el;\n\n  switch (template.type) {\n  case 'img':\n    attrs.width = 1;\n    attrs.height = 1;\n    el = loadImage(attrs, callback);\n    break;\n  case 'script':\n    el = loadScript(attrs, function(err) {\n      if (!err) return callback();\n      self.debug('error loading \"%s\" error=\"%s\"', self.name, err);\n    });\n      // TODO: hack until refactoring load-script\n    delete attrs.src;\n    each(function(val, key) {\n      el.setAttribute(key, val);\n    }, attrs);\n    break;\n  case 'iframe':\n    el = loadIframe(attrs, callback);\n    break;\n  default:\n      // No default case\n  }\n\n  return el;\n};\n\n/**\n * Locals for tag templates.\n *\n * By default it includes a cache buster and all of the options.\n *\n * @param {Object} [locals]\n * @return {Object}\n */\n\nexports.locals = function(locals) {\n  locals = locals || {};\n  var cache = Math.floor(new Date().getTime() / 3600000);\n  if (!locals.hasOwnProperty('cache')) locals.cache = cache;\n  each(function(val, key) {\n    if (!locals.hasOwnProperty(key)) locals[key] = val;\n  }, this.options);\n  return locals;\n};\n\n/**\n * Simple way to emit ready.\n *\n * @api public\n */\n\nexports.ready = function() {\n  this.emit('ready');\n};\n\n/**\n * Wrap the initialize method in an exists check, so we don't have to do it for\n * every single integration.\n *\n * @api private\n */\n\nexports._wrapInitialize = function() {\n  var initialize = this.initialize;\n  this.initialize = function() {\n    this.debug('initialize');\n    this._initialized = true;\n    var ret = initialize.apply(this, arguments);\n    this.emit('initialize');\n    return ret;\n  };\n};\n\n/**\n * Wrap the page method to call to noop the first page call if the integration assumes\n * a pageview.\n *\n * @api private\n */\n\nexports._wrapPage = function() {\n  var page = this.page;\n  var initialPageSkipped = false;\n  this.page = function() {\n    if (this._assumesPageview && !initialPageSkipped) {\n      initialPageSkipped = true;\n      return;\n    }\n    return page.apply(this, arguments);\n  };\n};\n\n/**\n * Wrap the track method to call other ecommerce methods if available depending\n * on the `track.event()`.\n *\n * @api private\n */\n\nexports._wrapTrack = function() {\n  var t = this.track;\n  this.track = function(track) {\n    var event = track.event();\n    var called;\n    var ret;\n\n    for (var method in events) {\n      if (has.call(events, method)) {\n        var regexp = events[method];\n        if (!this[method]) continue;\n        if (!regexp.test(event)) continue;\n        ret = this[method].apply(this, arguments);\n        called = true;\n        break;\n      }\n    }\n\n    if (!called) ret = t.apply(this, arguments);\n    return ret;\n  };\n};\n\n/**\n * Determine the type of the option passed to `#map`\n *\n * @api private\n * @param {Object|Object[]} mapping\n * @return {String} mappingType\n */\n\nfunction getMappingType(mapping) {\n  if (is.array(mapping)) {\n    return every(isMixed, mapping) ? 'mixed' : 'array';\n  }\n  if (is.object(mapping)) return 'map';\n  return 'unknown';\n}\n\n/**\n * Determine if item in mapping array is a valid \"mixed\" type value\n *\n * Must be an object with properties \"key\" (of type string)\n * and \"value\" (of any type)\n *\n * @api private\n * @param {*} item\n * @return {Boolean}\n */\n\nfunction isMixed(item) {\n  if (!is.object(item)) return false;\n  if (!is.string(item.key)) return false;\n  if (!has.call(item, 'value')) return false;\n  return true;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Object} attrs\n * @param {Function} fn\n * @return {Image}\n */\n\nfunction loadImage(attrs, fn) {\n  fn = fn || function() {};\n  var img = new Image();\n  img.onerror = error(fn, 'failed to load pixel', img);\n  img.onload = function() { fn(); };\n  img.src = attrs.src;\n  img.width = 1;\n  img.height = 1;\n  return img;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Function} fn\n * @param {string} message\n * @param {Element} img\n * @return {Function}\n */\n\nfunction error(fn, message, img) {\n  return function(e) {\n    e = e || window.event;\n    var err = new Error(message);\n    err.event = e;\n    err.source = img;\n    fn(err);\n  };\n}\n\n/**\n * Render template + locals into an `attrs` object.\n *\n * @api private\n * @param {Object} template\n * @param {Object} locals\n * @return {Object}\n */\n\nfunction render(template, locals) {\n  return foldl(function(attrs, val, key) {\n    attrs[key] = val.replace(/\\{\\{\\ *(\\w+)\\ *\\}\\}/g, function(_, $1) {\n      return locals[$1];\n    });\n    return attrs;\n  }, {}, template.attrs);\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar domify = require('domify');\nvar each = require('@ndhoule/each');\nvar includes = require('@ndhoule/includes');\n\n/**\n * Mix in emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Add a new option to the integration by `key` with default `value`.\n *\n * @api public\n * @param {string} key\n * @param {*} value\n * @return {Integration}\n */\n\nexports.option = function(key, value) {\n  this.prototype.defaults[key] = value;\n  return this;\n};\n\n/**\n * Add a new mapping option.\n *\n * This will create a method `name` that will return a mapping for you to use.\n *\n * @api public\n * @param {string} name\n * @return {Integration}\n * @example\n * Integration('My Integration')\n *   .mapping('events');\n *\n * new MyIntegration().track('My Event');\n *\n * .track = function(track){\n *   var events = this.events(track.event());\n *   each(send, events);\n *  };\n */\n\nexports.mapping = function(name) {\n  this.option(name, []);\n  this.prototype[name] = function(key) {\n    return this.map(this.options[name], key);\n  };\n  return this;\n};\n\n/**\n * Register a new global variable `key` owned by the integration, which will be\n * used to test whether the integration is already on the page.\n *\n * @api public\n * @param {string} key\n * @return {Integration}\n */\n\nexports.global = function(key) {\n  this.prototype.globals.push(key);\n  return this;\n};\n\n/**\n * Mark the integration as assuming an initial pageview, so to defer the first page call, keep track of\n * whether we already nooped the first page call.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.assumesPageview = function() {\n  this.prototype._assumesPageview = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `load` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnLoad = function() {\n  this.prototype._readyOnLoad = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `initialize` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnInitialize = function() {\n  this.prototype._readyOnInitialize = true;\n  return this;\n};\n\n/**\n * Define a tag to be loaded.\n *\n * @api public\n * @param {string} [name='library'] A nicename for the tag, commonly used in\n * #load. Helpful when the integration has multiple tags and you need a way to\n * specify which of the tags you want to load at a given time.\n * @param {String} str DOM tag as string or URL.\n * @return {Integration}\n */\n\nexports.tag = function(name, tag) {\n  if (tag == null) {\n    tag = name;\n    name = 'library';\n  }\n  this.prototype.templates[name] = objectify(tag);\n  return this;\n};\n\n/**\n * Given a string, give back DOM attributes.\n *\n * Do it in a way where the browser doesn't load images or iframes. It turns\n * out domify will load images/iframes because whenever you construct those\n * DOM elements, the browser immediately loads them.\n *\n * @api private\n * @param {string} str\n * @return {Object}\n */\n\nfunction objectify(str) {\n  // replace `src` with `data-src` to prevent image loading\n  str = str.replace(' src=\"', ' data-src=\"');\n\n  var el = domify(str);\n  var attrs = {};\n\n  each(function(attr) {\n    // then replace it back\n    var name = attr.name === 'data-src' ? 'src' : attr.name;\n    if (!includes(attr.name + '=', str)) return;\n    attrs[name] = attr.value;\n  }, el.attributes);\n\n  return {\n    type: el.tagName.toLowerCase(),\n    attrs: attrs\n  };\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('component-bind');\nvar debug = require('debug');\nvar defaults = require('@ndhoule/defaults');\nvar extend = require('extend');\nvar slug = require('slug-component');\nvar protos = require('./protos');\nvar statics = require('./statics');\n\n/**\n * Create a new `Integration` constructor.\n *\n * @constructs Integration\n * @param {string} name\n * @return {Function} Integration\n */\n\nfunction createIntegration(name) {\n  /**\n   * Initialize a new `Integration`.\n   *\n   * @class\n   * @param {Object} options\n   */\n\n  function Integration(options) {\n    if (options && options.addIntegration) {\n      // plugin\n      return options.addIntegration(Integration);\n    }\n    this.debug = debug('analytics:integration:' + slug(name));\n    var clonedOpts = {};\n    extend(true, clonedOpts, options); // deep clone options\n    this.options = defaults(clonedOpts || {}, this.defaults);\n    this._queue = [];\n    this.once('ready', bind(this, this.flush));\n\n    Integration.emit('construct', this);\n    this.ready = bind(this, this.ready);\n    this._wrapInitialize();\n    this._wrapPage();\n    this._wrapTrack();\n  }\n\n  Integration.prototype.defaults = {};\n  Integration.prototype.globals = [];\n  Integration.prototype.templates = {};\n  Integration.prototype.name = name;\n  extend(Integration, statics);\n  extend(Integration.prototype, protos);\n\n  return Integration;\n}\n\n/**\n * Exports.\n */\n\nmodule.exports = createIntegration;\n", "\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug');\n\n/**\n * Expose `generate`.\n */\n\nmodule.exports = generate;\n\n/**\n * Generate a global queue pushing method with `name`.\n *\n * @param {String} name\n * @param {Object} options\n *   @property {Boolean} wrap\n * @return {Function}\n */\n\nfunction generate (name, options) {\n  var log = debug('global-queue:' + name);\n  options = options || {};\n\n  return function (args) {\n    args = [].slice.call(arguments);\n    window[name] || (window[name] = []);\n    log('%o', args);\n    options.wrap === false\n      ? window[name].push.apply(window[name], args)\n      : window[name].push(args);\n  };\n}\n", "'use strict';\n\nvar ensureCallable = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\nvar byObserver = function (Observer) {\n\tvar node = document.createTextNode(''), queue, currentQueue, i = 0;\n\tnew Observer(function () {\n\t\tvar callback;\n\t\tif (!queue) {\n\t\t\tif (!currentQueue) return;\n\t\t\tqueue = currentQueue;\n\t\t} else if (currentQueue) {\n\t\t\tqueue = currentQueue.concat(queue);\n\t\t}\n\t\tcurrentQueue = queue;\n\t\tqueue = null;\n\t\tif (typeof currentQueue === 'function') {\n\t\t\tcallback = currentQueue;\n\t\t\tcurrentQueue = null;\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tnode.data = (i = ++i % 2); // Invoke other batch, to handle leftover callbacks in case of crash\n\t\twhile (currentQueue) {\n\t\t\tcallback = currentQueue.shift();\n\t\t\tif (!currentQueue.length) currentQueue = null;\n\t\t\tcallback();\n\t\t}\n\t}).observe(node, { characterData: true });\n\treturn function (fn) {\n\t\tensureCallable(fn);\n\t\tif (queue) {\n\t\t\tif (typeof queue === 'function') queue = [queue, fn];\n\t\t\telse queue.push(fn);\n\t\t\treturn;\n\t\t}\n\t\tqueue = fn;\n\t\tnode.data = (i = ++i % 2);\n\t};\n};\n\nmodule.exports = (function () {\n\t// Node.js\n\tif ((typeof process === 'object') && process && (typeof process.nextTick === 'function')) {\n\t\treturn process.nextTick;\n\t}\n\n\t// queueMicrotask\n\tif (typeof queueMicrotask === \"function\") {\n\t\treturn function (cb) { queueMicrotask(ensureCallable(cb)); };\n\t}\n\n\t// MutationObserver\n\tif ((typeof document === 'object') && document) {\n\t\tif (typeof MutationObserver === 'function') return byObserver(MutationObserver);\n\t\tif (typeof WebKitMutationObserver === 'function') return byObserver(WebKitMutationObserver);\n\t}\n\n\t// W3C Draft\n\t// http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\tif (typeof setImmediate === 'function') {\n\t\treturn function (cb) { setImmediate(ensureCallable(cb)); };\n\t}\n\n\t// Wide available standard\n\tif ((typeof setTimeout === 'function') || (typeof setTimeout === 'object')) {\n\t\treturn function (cb) { setTimeout(ensureCallable(cb), 0); };\n\t}\n\n\treturn null;\n}());\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar keys = require('@ndhoule/keys');\nvar values = require('@ndhoule/values');\nvar foldl = require('@ndhoule/foldl');\nvar each = require('@ndhoule/each');\nvar integration = require('@segment/analytics.js-integration');\nvar push = require('global-queue')('optimizely', { wrap: false });\nvar tick = require('next-tick');\n\n/**\n * Expose `Optimizely` integration.\n */\n\nvar Optimizely = (module.exports = integration('Optimizely')\n  .option('trackCategorizedPages', true)\n  .option('trackNamedPages', true)\n  .option('variations', false) // send data via `.identify()`\n  .option('listen', true) // send data via `.track()`\n  .option('nonInteraction', false)\n  .option('sendRevenueOnlyForOrderCompleted', true)\n  .option('customExperimentProperties', {})\n  .option('customCampaignProperties', {}));\n\n/**\n * The name and version for this integration.\n */\n\nvar optimizelyContext = {\n  name: 'optimizely',\n  version: '2.0.0'\n};\n\n/**\n * Initialize.\n *\n * https://www.optimizely.com/docs/api#function-calls\n * https://jsfiddle.net/ushmw723/ <- includes optimizely snippets for capturing campaign and experiment data\n *\n * @api public\n */\n\nOptimizely.prototype.initialize = function() {\n  var self = this;\n  // Flag source of integration (requested by Optimizely)\n  push({\n    type: 'integration',\n    OAuthClientId: '5360906403'\n  });\n  // Initialize listeners for both Classic and New Optimizely\n  // crazying binding because that's just how javascript works\n  // We're caling this on the next tick to be safe so we don't hold up\n  // initializing the integration even though the function below is designed to be async,\n  // just want to be extra safe\n  tick(function() {\n    Optimizely.initOptimizelyIntegration({\n      referrerOverride: self.setEffectiveReferrer.bind(self),\n      sendExperimentData: self.sendClassicDataToSegment.bind(self),\n      sendCampaignData: self.sendNewDataToSegment.bind(self)\n    });\n  });\n\n  this.ready();\n};\n\n/**\n * Track. The Optimizely X Web event API accepts a single payload object.\n *        It works with Classic Optimizely as well.\n *\n * Optimizely X:  https://developers.optimizely.com/x/solutions/javascript/reference/index.html#function_setevent\n *\n * The new-style X API is forward compatible from Optimizely Classic to Optimizely X.\n *   - Classic will correctly consume the tags object to identify the revenue\n *   - In bundled mode, it will be forwarded along to the X API with the entire payload\n *\n * If the Optimizely X Fullstack JavaScript SDK is being used we should pass along\n * the event to it. Any properties in the track object will be passed along as event tags.\n * If the userId is not passed into the options object of the track call, we'll\n * attempt to use the userId of the track event, which is set using the analytics.identify call.\n *\n * https://developers.optimizely.com/x/solutions/sdks/reference/?language=javascript#tracking\n *\n * @api public\n * @param {Track} track\n */\n\nOptimizely.prototype.track = function(track) {\n  var opts = this.options;\n  var eventProperties = track.properties();\n\n  // Optimizely expects revenue only passed through Order Completed events\n  if (eventProperties.revenue && opts.sendRevenueOnlyForOrderCompleted) {\n    if (track.event() === 'Order Completed') {\n      eventProperties.revenue = Math.round(eventProperties.revenue * 100);\n    } else if (track.event() !== 'Order Completed') {\n      delete eventProperties.revenue;\n    }\n    // This is legacy Segment-Optimizely behavior,\n    // which passes revenue whenever it is present\n  } else if (\n    opts.sendRevenueOnlyForOrderCompleted === false &&\n    eventProperties.revenue\n  ) {\n    eventProperties.revenue = Math.round(eventProperties.revenue * 100);\n  }\n\n  // Use the new-style API (which is compatible with Classic and X)\n  var eventName = track.event().replace(/:/g, '_'); // can't have colons so replacing with underscores\n  var payload = {\n    type: 'event',\n    eventName: eventName,\n    tags: eventProperties\n  };\n\n  push(payload);\n\n  var optimizelyClientInstance = window.optimizelyClientInstance;\n  if (optimizelyClientInstance && optimizelyClientInstance.track) {\n    var optimizelyOptions = track.options('Optimizely');\n    var userId =\n      optimizelyOptions.userId || track.userId() || this.analytics.user().id();\n    var attributes =\n      optimizelyOptions.attributes ||\n      track.traits() ||\n      this.analytics.user().traits();\n    if (userId) {\n      optimizelyClientInstance.track(\n        eventName,\n        userId,\n        attributes,\n        payload.tags\n      );\n    }\n  }\n};\n\n/**\n * Page.\n *\n * https://www.optimizely.com/docs/api#track-event\n *\n * @api public\n * @param {Page} page\n */\n\nOptimizely.prototype.page = function(page) {\n  var category = page.category();\n  var name = page.fullName();\n  var opts = this.options;\n\n  // categorized pages\n  if (category && opts.trackCategorizedPages) {\n    this.track(page.track(category));\n  }\n\n  // named pages\n  if (name && opts.trackNamedPages) {\n    this.track(page.track(name));\n  }\n};\n\n/**\n * sendClassicDataToSegment (Optimizely Classic)\n *\n * This function is executed for each experiment created in Classic Optimizely that is running on the page.\n * This function will also be executed for any experiments activated at a later stage since initOptimizelyIntegration\n * attached listeners on the page\n *\n * @api private\n * @param {Object} experimentState: contains all information regarding experiments\n * @param {Object} experimentState.experiment: the experiment running on the page\n * @param {String} experimentState.experiment.name: name of the experiment\n * @param {String} experimentState.experiment.id: ID of the experiment\n * @param {String} experimentState.experiment.referrer: available if effective referrer if experiment is a redirect\n * @param {Array} experimentState.variations: the variations the current user on page is seeing\n * @param {String} experimentState.variations[].name: the name of the variation\n * @param {String} experimentState.variations[].id: the ID of the variation\n * @param {Object} experimentState.sections: the sections for the experiment (only defined for multivariate experiments) keyed by sectionId\n * @param {String} experimentState.sections[sectionId].name: the name of section\n * @param {Array} experimentState.sections[sectionId].variation_ids: the IDs of the variations in the section\n *\n */\n\nOptimizely.prototype.sendClassicDataToSegment = function(experimentState) {\n  var experiment = experimentState.experiment;\n  var variations = experimentState.variations;\n  var sections = experimentState.sections;\n  var context = { integration: optimizelyContext }; // backward compatibility\n\n  // Reformatting this data structure into hash map so concatenating variation ids and names is easier later\n  var variationsMap = foldl(\n    function(results, variation) {\n      var res = results;\n      res[variation.id] = variation.name;\n      return res;\n    },\n    {},\n    variations\n  );\n\n  // Sorting for consistency across browsers\n  var variationIds = keys(variationsMap).sort();\n  var variationNames = values(variationsMap).sort();\n\n  // Send data via `.track()`\n  if (this.options.listen) {\n    var props = {\n      experimentId: experiment.id,\n      experimentName: experiment.name,\n      variationId: variationIds.join(), // eg. '123' or '123,455'\n      variationName: variationNames.join(', ') // eg. 'Variation X' or 'Variation 1, Variation 2'\n    };\n\n    // If this was a redirect experiment and the effective referrer is different from document.referrer,\n    // this value is made available. So if a customer came in via google.com/ad -> tb12.com -> redirect experiment -> Belichickgoat.com\n    // `experiment.referrer` would be google.com/ad here NOT `tb12.com`.\n    if (experiment.referrer) {\n      props.referrer = experiment.referrer;\n      context.page = { referrer: experiment.referrer };\n    }\n\n    // When there is a multivariate experiment\n    if (sections) {\n      // Since `sections` include all the possible sections on the page, we need to find the names of the sections\n      // if any of its variations were used. Experiments could display variations from multiple sections.\n      // The global optimizely data object does not expose a mapping between which section(s) were involved within an experiment.\n      // So we will build our own mapping to quickly get the section name(s) and id(s) for any displayed variation.\n      var activeSections = {};\n      var variationIdsToSectionsMap = foldl(\n        function(results, section, sectionId) {\n          var res = results;\n          each(function(variationId) {\n            res[variationId] = { id: sectionId, name: section.name };\n          }, section.variation_ids);\n          return res;\n        },\n        {},\n        sections\n      );\n      for (var j = 0; j < variationIds.length; j++) {\n        var activeVariation = variationIds[j];\n        var activeSection = variationIdsToSectionsMap[activeVariation];\n        if (activeSection)\n          activeSections[activeSection.id] = activeSection.name;\n      }\n\n      // Sorting for consistency across browsers\n      props.sectionId = keys(activeSections)\n        .sort()\n        .join(); // Not adding space for backward compat/consistency reasons since all IDs we've never had spaces\n      props.sectionName = values(activeSections)\n        .sort()\n        .join(', ');\n    }\n\n    // For Google's nonInteraction flag\n    if (this.options.nonInteraction) props.nonInteraction = 1;\n\n    // If customExperimentProperties is provided overide the props with it.\n    // If valid customExperimentProperties present it will override existing props.\n    var customExperimentProperties = this.options.customExperimentProperties;\n    var customPropsKeys = Object.keys(customExperimentProperties);\n    var data = window.optimizely && window.optimizely.data;\n\n    if (data && customPropsKeys.length) {\n      for (var index = 0; index < customPropsKeys.length; index++) {\n        var segmentProp = customPropsKeys[index];\n        var optimizelyProp = customExperimentProperties[segmentProp];\n        if (typeof data[optimizelyProp] !== 'undefined') {\n          props[segmentProp] = data[optimizelyProp];\n        }\n      }\n    }\n\n    // Send to Segment\n    this.analytics.track('Experiment Viewed', props, context);\n  }\n\n  // Send data via `.identify()` (not recommended!)\n  // TODO: deprecate this feature\n  if (this.options.variations) {\n    // Note: The only \"breaking\" behavior is that now there will be an `.identify()` call per active experiment\n    // Legacy behavior was that we would look up all active experiments on the page after init and send one `.identify()` call\n    // with all experiment/variation data as traits.\n    // New behavior will call `.identify()` per active experiment with isolated experiment/variation data for that single experiment\n    // However, since traits are cached, subsequent experiments that trigger `.identify()` calls will likely contain previous experiment data\n    var traits = {};\n    traits['Experiment: ' + experiment.name] = variationNames.join(', '); // eg. 'Variation X' or 'Variation 1, Variation 2'\n\n    // Send to Segment\n    this.analytics.identify(traits);\n  }\n};\n\n/**\n * sendNewDataToSegment (Optimizely X)\n *\n * This function is called for each experiment created in New Optimizely that are running on the page.\n * New Optimizely added a dimension called \"Campaigns\" that encapsulate over the Experiments. So a campaign can have multiple experiments.\n * Multivariate experiments are no longer supported in New Optimizely.\n * This function will also be executed for any experiments activated at a later stage since initOptimizelyIntegration\n * attached listeners on the page\n *\n * @api private\n * @param {Object} campaignState: contains all information regarding experiments and campaign\n * @param {String} campaignState.id: the ID of the campaign\n * @param {String} campaignState.campaignName: the name of the campaign\n * @param {Array} campaignState.audiences: \"Audiences\" the visitor is considered part of related to this campaign\n * @param {String} campaignState.audiences[].id: the id of the Audience\n * @param {String} campaignState.audiences[].name: the name of the Audience\n * @param {Object} campaignState.experiment: the experiment the visitor is seeing\n * @param {String} campaignState.experiment.id: the id of the experiment\n * @param {String} campaignState.experiment.name: the name of the experiment\n * @param {String} campaignState.experiment.referrer: the effective referrer of the experiment (only defined for redirect)\n * @param {Object} campaignState.variation: the variation the visitor is seeing\n * @param {String} campaignState.variation.id: the id of the variation\n * @param {String} campaignState.variation.name: the name of the variation\n * @param {String} campaignState.isInCampaignHoldback: whether the visitor is in the Campaign holdback\n */\n\nOptimizely.prototype.sendNewDataToSegment = function(campaignState) {\n  var experiment = campaignState.experiment;\n  var variation = campaignState.variation;\n  var context = { integration: optimizelyContext }; // backward compatibility\n\n  // Reformatting this data structure into hash map so concatenating variation ids and names is easier later\n  var audiencesMap = foldl(\n    function(results, audience) {\n      var res = results;\n      res[audience.id] = audience.name;\n      return res;\n    },\n    {},\n    campaignState.audiences\n  );\n\n  // Sorting for consistency across browsers\n  var audienceIds = keys(audiencesMap)\n    .sort()\n    .join(); // Not adding space for backward compat/consistency reasons since all IDs we've never had spaces\n  var audienceNames = values(audiencesMap)\n    .sort()\n    .join(', ');\n\n  // Send data via `.track()`\n  if (this.options.listen) {\n    var props = {\n      campaignName: campaignState.campaignName,\n      campaignId: campaignState.id,\n      experimentId: experiment.id,\n      experimentName: experiment.name,\n      variationName: variation.name,\n      variationId: variation.id,\n      audienceId: audienceIds, // eg. '7527562222,7527111138'\n      audienceName: audienceNames, // eg. 'Peaky Blinders, Trust Tree'\n      isInCampaignHoldback: campaignState.isInCampaignHoldback\n    };\n\n    // If this was a redirect experiment and the effective referrer is different from document.referrer,\n    // this value is made available. So if a customer came in via google.com/ad -> tb12.com -> redirect experiment -> Belichickgoat.com\n    // `experiment.referrer` would be google.com/ad here NOT `tb12.com`.\n    if (experiment.referrer) {\n      props.referrer = experiment.referrer;\n      context.page = { referrer: experiment.referrer };\n    }\n\n    // For Google's nonInteraction flag\n    if (this.options.nonInteraction) props.nonInteraction = 1;\n\n    // If customCampaignProperties is provided overide the props with it.\n    // If valid customCampaignProperties present it will override existing props.\n    var customCampaignProperties = this.options.customCampaignProperties;\n    var customPropsKeys = Object.keys(customCampaignProperties);\n    var data = window.optimizely && window.optimizely.newMockData;\n    if (data && customPropsKeys.length) {\n      for (var index = 0; index < customPropsKeys.length; index++) {\n        var segmentProp = customPropsKeys[index];\n        var optimizelyProp = customCampaignProperties[segmentProp];\n        if (typeof data[optimizelyProp] !== 'undefined') {\n          props[segmentProp] = data[optimizelyProp];\n        }\n      }\n    }\n\n    // Send to Segment\n    this.analytics.track('Experiment Viewed', props, context);\n  }\n\n  // Send data via `.identify()` (not recommended!)\n  // TODO: deprecate this feature\n  if (this.options.variations) {\n    // Legacy: We never sent any experiment Id or variation Id\n    // Note: The only \"breaking\" behavior is that now there will be an `.identify()` per active experiment\n    // Legacy behavior was that we would look up all active experiments on the page after init and send one `.identify()` call\n    // with all experiment/variation data as traits.\n    // New behavior will call `.identify()` per active experiment with isolated experiment/variation data for that single experiment\n    var traits = {};\n    traits['Experiment: ' + experiment.name] = variation.name;\n\n    // Send to Segment\n    this.analytics.identify(traits);\n  }\n};\n\n/**\n * setEffectiveReferrer\n *\n * This function is called when a redirect experiment changed the effective referrer value where it is different from the `document.referrer`.\n * This is a documented caveat for any mutual customers that are using redirect experiments.\n * We will set this global variable that Segment customers can lookup and pass down in their initial `.page()` call inside\n * their Segment snippet.\n *\n * @apr private\n * @param {string} referrer\n */\n\nOptimizely.prototype.setEffectiveReferrer = function(referrer) {\n  if (referrer) {\n    window.optimizelyEffectiveReferrer = referrer;\n    return referrer;\n  }\n};\n\n/**\n * initOptimizelyIntegration(handlers)\n *\n * This function was provided by Optimizely's Engineering team. The function below once initialized can detect which version of\n * Optimizely a customer is using and call the appropriate callback functions when an experiment runs on the page.\n * Instead of Segment looking up the experiment data, we can now just bind Segment APIs to their experiment listener/handlers!\n *\n * @api private\n * @param {Object} handlers\n * @param {Function} referrerOverride: called if the effective refferer value differs from the current `document.referrer` due to a\n * invocation of a redirect experiment on the page\n * @param {Function} sendExperimentData: called for every running experiment on the page (Classic)\n * @param {Function} sendCampaignData: called for every running campaign on the page (New)\n */\n\nOptimizely.initOptimizelyIntegration = function(handlers) {\n  /**\n   * `initClassicOptimizelyIntegration` fetches all the experiment data from the classic Optimizely client\n   * and calls the functions provided in the arguments with the data that needs to\n   * be used for sending information. It is recommended to leave this function as is\n   * and to create your own implementation of the functions referrerOverride and\n   * sendExperimentData.\n   *\n   * @param {Function} referrerOverride - This function is called if the effective referrer value differs from\n   *   the current document.referrer value. The only argument provided is the effective referrer value.\n   * @param {Function} sendExperimentData - This function is called for every running experiment on the page.\n   *   The function is called with all the relevant ids and names.\n   */\n  var initClassicOptimizelyIntegration = function(\n    referrerOverride,\n    sendExperimentData\n  ) {\n    var data = window.optimizely && window.optimizely.data;\n    var state = data && data.state;\n    if (state) {\n      var activeExperiments = state.activeExperiments;\n      if (state.redirectExperiment) {\n        var redirectExperimentId = state.redirectExperiment.experimentId;\n        var index = -1;\n        for (var i = 0; i < state.activeExperiments.length; i++) {\n          if (state.activeExperiments[i] === redirectExperimentId) {\n            index = i;\n            break;\n          }\n        }\n        if (index === -1) {\n          activeExperiments.push(redirectExperimentId);\n        }\n        referrerOverride(state.redirectExperiment.referrer);\n      }\n\n      for (var k = 0; k < activeExperiments.length; k++) {\n        var currentExperimentId = activeExperiments[k];\n        var activeExperimentState = {\n          experiment: {\n            id: currentExperimentId,\n            name: data.experiments[currentExperimentId].name\n          },\n          variations: [],\n          /** Segment added code */\n          // we need to send sectionName for multivariate experiments\n          sections: data.sections\n          /**/\n        };\n\n        /** Segment added code */\n        // for backward compatability since we send referrer with the experiment properties\n        if (\n          state.redirectExperiment &&\n          currentExperimentId === state.redirectExperiment.experimentId &&\n          state.redirectExperiment.referrer\n        ) {\n          activeExperimentState.experiment.referrer =\n            state.redirectExperiment.referrer;\n        }\n        /**/\n\n        var variationIds =\n          state.variationIdsMap[activeExperimentState.experiment.id];\n        for (var j = 0; j < variationIds.length; j++) {\n          var id = variationIds[j];\n          var name = data.variations[id].name;\n          activeExperimentState.variations.push({\n            id: id,\n            name: name\n          });\n        }\n        sendExperimentData(activeExperimentState);\n      }\n    }\n  };\n\n  /**\n   * This function fetches all the campaign data from the new Optimizely client\n   * and calls the functions provided in the arguments with the data that needs to\n   * be used for sending information. It is recommended to leave this function as is\n   * and to create your own implementation of the functions referrerOverride and\n   * sendCampaignData.\n   *\n   * @param {Function} referrerOverride - This function is called if the effective referrer value differs from\n   *   the current document.referrer value. The only argument provided is the effective referrer value.\n   * @param {Function} sendCampaignData - This function is called for every running campaign on the page.\n   *   The function is called with the campaignState for the activated campaign\n   */\n  var initNewOptimizelyIntegration = function(\n    referrerOverride,\n    sendCampaignData\n  ) {\n    var newActiveCampaign = function(id, referrer) {\n      var state = window.optimizely.get && window.optimizely.get('state');\n      if (state) {\n        var activeCampaigns = state.getCampaignStates({\n          isActive: true\n        });\n        var campaignState = activeCampaigns[id];\n        // Segment added code: in case this is a redirect experiment\n        if (referrer) campaignState.experiment.referrer = referrer;\n        sendCampaignData(campaignState);\n      }\n    };\n\n    var checkReferrer = function() {\n      var state = window.optimizely.get && window.optimizely.get('state');\n      if (state) {\n        var referrer =\n          state.getRedirectInfo() && state.getRedirectInfo().referrer;\n\n        if (referrer) {\n          referrerOverride(referrer);\n          return referrer; // Segment added code: so I can pass this referrer value in cb\n        }\n      }\n    };\n\n    /**\n     * At any moment, a new campaign can be activated (manual or conditional activation).\n     * This function registers a listener that listens to newly activated campaigns and\n     * handles them.\n     */\n    var registerFutureActiveCampaigns = function() {\n      window.optimizely = window.optimizely || [];\n      window.optimizely.push({\n        type: 'addListener',\n        filter: {\n          type: 'lifecycle',\n          name: 'campaignDecided'\n        },\n        handler: function(event) {\n          var id = event.data.campaign.id;\n          newActiveCampaign(id);\n        }\n      });\n    };\n\n    /**\n     * If this code is running after Optimizely on the page, there might already be\n     * some campaigns active. This function makes sure all those campaigns are\n     * handled.\n     */\n    var registerCurrentlyActiveCampaigns = function() {\n      window.optimizely = window.optimizely || [];\n      var state = window.optimizely.get && window.optimizely.get('state');\n      if (state) {\n        var referrer = checkReferrer();\n        var activeCampaigns = state.getCampaignStates({\n          isActive: true\n        });\n        for (var id in activeCampaigns) {\n          if ({}.hasOwnProperty.call(activeCampaigns, id)) {\n            // Segment modified code: need to pass down referrer in the cb for backward compat reasons\n            if (referrer) {\n              newActiveCampaign(id, referrer);\n            } else {\n              newActiveCampaign(id);\n            }\n          }\n        }\n      } else {\n        window.optimizely.push({\n          type: 'addListener',\n          filter: {\n            type: 'lifecycle',\n            name: 'initialized'\n          },\n          handler: function() {\n            checkReferrer();\n          }\n        });\n      }\n    };\n    registerCurrentlyActiveCampaigns();\n    registerFutureActiveCampaigns();\n  };\n\n  initClassicOptimizelyIntegration(\n    handlers.referrerOverride,\n    handlers.sendExperimentData\n  );\n  initNewOptimizelyIntegration(\n    handlers.referrerOverride,\n    handlers.sendCampaignData\n  );\n};\n", "'use strict';\n\n/**\n * Module Dependencies\n */\n\nvar map = require('@ndhoule/map');\nvar foldl = require('@ndhoule/foldl');\n\nvar eventMap = {\n  // Videos\n  videoPlaybackStarted: [{\n    object: 'video playback',\n    action: 'started'\n  }],\n  videoPlaybackPaused: [{\n    object: 'video playback',\n    action: 'paused'\n  }],\n  videoPlaybackInterrupted: [{\n    object: 'video playback',\n    action: 'interrupted'\n  }],\n  videoPlaybackResumed: [{\n    object: 'video playback',\n    action: 'resumed'\n  }],\n  videoPlaybackCompleted: [{\n    object: 'video playback',\n    action: 'completed'\n  }],\n  videoPlaybackExited: [{\n    object: 'video playback',\n    action: 'exited'\n  }],\n  videoPlaybackBufferStarted: [{\n    object: 'video playback buffer',\n    action: 'started'\n  }],\n  videoPlaybackBufferCompleted: [{\n    object: 'video playback buffer',\n    action: 'completed'\n  }],\n  videoPlaybackSeekStarted: [{\n    object: 'video playback seek',\n    action: 'started'\n  }],\n  videoPlaybackSeekCompleted: [{\n    object: 'video playback seek',\n    action: 'completed'\n  }],\n  videoContentStarted: [{\n    object: 'video content',\n    action: 'started'\n  }],\n  videoContentPlaying: [{\n    object: 'video content',\n    action: 'playing'\n  }],\n  videoContentCompleted: [{\n    object: 'video content',\n    action: 'completed'\n  }],\n  videoAdStarted: [{\n    object: 'video ad',\n    action: 'started'\n  }],\n  videoAdPlaying: [{\n    object: 'video ad',\n    action: 'playing'\n  }],\n  videoAdCompleted: [{\n    object: 'video ad',\n    action: 'completed'\n  }],\n  videoAdClicked: [{\n    object: 'video ad',\n    action: 'clicked'\n  }],\n  videoAdSkipped: [{\n    object: 'video ad',\n    action: 'skipped'\n  }],\n\n  // Promotions\n  promotionViewed: [{\n    object: 'promotion',\n    action: 'viewed'\n  }],\n  promotionClicked: [{\n    object: 'promotion',\n    action: 'clicked'\n  }],\n\n  // Browsing\n  productsSearched: [{\n    object: 'products',\n    action: 'searched'\n  }],\n  productListViewed: [{\n    object: 'product list',\n    action: 'viewed'\n  }, {\n    object: 'product category',\n    action: 'viewed'\n  }],\n  productListFiltered: [{\n    object: 'product list',\n    action: 'filtered'\n  }],\n\n  // Core Ordering\n  productClicked: [{\n    object: 'product',\n    action: 'clicked'\n  }],\n  productViewed: [{\n    object: 'product',\n    action: 'viewed'\n  }],\n  productAdded: [{\n    object: 'product',\n    action: 'added'\n  }],\n  productRemoved: [{\n    object: 'product',\n    action: 'removed'\n  }],\n  cartViewed: [{\n    object: 'cart',\n    action: 'viewed'\n  }],\n  orderUpdated: [{\n    object: 'order',\n    action: 'updated'\n  }],\n  orderCompleted: [{\n    object: 'order',\n    action: 'completed'\n  }],\n  orderRefunded: [{\n    object: 'order',\n    action: 'refunded'\n  }],\n  orderCancelled: [{\n    object: 'order',\n    action: 'cancelled'\n  }],\n  paymentInfoEntered: [{\n    object: 'payment info',\n    action: 'entered'\n  }],\n  checkoutStarted: [{\n    object: 'checkout',\n    action: 'started'\n  }],\n  checkoutStepViewed: [{\n    object: 'checkout step',\n    action: 'viewed'\n  }],\n  checkoutStepCompleted: [{\n    object: 'checkout step',\n    action: 'completed'\n  }],\n\n  // Coupons\n  couponEntered: [{\n    object: 'coupon',\n    action: 'entered'\n  }],\n  couponApplied: [{\n    object: 'coupon',\n    action: 'applied'\n  }],\n  couponDenied: [{\n    object: 'coupon',\n    action: 'denied'\n  }],\n  couponRemoved: [{\n    object: 'coupon',\n    action: 'removed'\n  }],\n\n  // Wishlisting\n  productAddedToWishlist: [{\n    object: 'product',\n    action: 'added to wishlist'\n  }],\n  productRemovedFromWishlist: [{\n    object: 'product',\n    action: 'removed from wishlist'\n  }],\n  productAddedFromWishlistToCart: [{\n    object: 'product',\n    action: 'added to cart from wishlist'\n  }, {\n    object: 'product',\n    action: 'added from wishlist to cart'\n  }],\n  wishlistProductAddedToCart: [{\n    object: 'wishlist product',\n    action: 'added to cart'\n  }],\n\n  // Sharing\n  productShared: [{\n    object: 'product',\n    action: 'shared'\n  }],\n  cartShared: [{\n    object: 'cart',\n    action: 'shared'\n  }],\n\n  // Reviewing\n  productReviewed: [{\n    object: 'product',\n    action: 'reviewed'\n  }],\n\n  // App Lifecycle\n  applicationInstalled: [{\n    object: 'application',\n    action: 'installed'\n  }],\n  applicationUpdated: [{\n    object: 'application',\n    action: 'updated'\n  }],\n  applicationOpened: [{\n    object: 'application',\n    action: 'opened'\n  }],\n  applicationBackgrounded: [{\n    object: 'application',\n    action: 'backgrounded'\n  }],\n  applicationUninstalled: [{\n    object: 'application',\n    action: 'uninstalled'\n  }],\n  applicationCrashed: [{\n    object: 'application',\n    action: 'crashed'\n  }],\n\n  // App Campaign and Referral Events\n  installAttributed: [{\n    object: 'install',\n    action: 'attributed'\n  }],\n  deepLinkOpened: [{\n    object: 'deep link',\n    action: 'opened'\n  }],\n  deepLinkClicked: [{\n    object: 'deep link',\n    action: 'clicked'\n  }],\n  pushNotificationReceived: [{\n    object: 'push notification',\n    action: 'received'\n  }],\n  pushNotificationTapped: [{\n    object: 'push notification',\n    action: 'tapped'\n  }],\n  pushNotificationBounced: [{\n    object: 'push notification',\n    action: 'bounced'\n  }],\n\n  // Email\n  emailBounced: [{\n    object: 'email',\n    action: 'bounced'\n  }],\n  emailDelivered: [{\n    object: 'email',\n    action: 'delivered'\n  }],\n  emailLinkClicked: [{\n    object: 'email link',\n    action: 'clicked'\n  }],\n  emailMarkedAsSpam: [{\n    object: 'email',\n    action: 'marked as spam'\n  }],\n  emailOpened: [{\n    object: 'email',\n    action: 'opened'\n  }],\n  unsubscribed: [{\n    object: '',\n    action: 'unsubscribed'\n  }],\n\n  // Live Chat\n  liveChatConversationEnded: [{\n    object: 'live chat conversation',\n    action: 'ended'\n  }],\n  liveChatConversationStarted: [{\n    object: 'live chat conversation',\n    action: 'started'\n  }],\n  liveChatMessageReceived: [{\n    object: 'live chat message',\n    action: 'received'\n  }],\n  liveChatMessageSent: [{\n    object: 'live chat message',\n    action: 'sent'\n  }]\n};\n\n/**\n * Export the event map\n *\n * For each method\n *   - For each of its object:action alias pairs\n *     - For each permutation of that pair\n *       - Create a regex string\n *   - Join them and assign it to its respective method value\n *\n *  [{\n *    object: 'product list',\n *    action: 'viewed'\n *  },{\n *    object: 'product category',\n *    action: 'viewed'\n *  }] => /\n *    ^[ _]?product[ _]?list[ _]?viewed[ _]?\n *   |^[ _]?viewed[ _]?product[ _]?list[ _]?\n *   |^[ _]?product[ _]?category[ _]?viewed[ _]?\n *   |^[ _]?viewed[ _]?product[ _]?category[ _]?\n *   $/i\n *\n *  todo(cs/wj/nh): memoization strategy / build step?\n */\n\nmodule.exports = foldl(function transform(ret, pairs, method) {\n  var values = map(function(pair) {\n    return map(function(permutation) {\n      var flattened = [].concat.apply([], map(function(words) {\n        return words.split(' ');\n      }, permutation));\n      return '^[ _]?' + flattened.join('[ _]?') + '[ _]?';\n    }, [\n      [pair.action, pair.object],\n      [pair.object, pair.action]\n    ]).join('|');\n  }, pairs);\n  var conjoined = values.join('|') + '$';\n  ret[method] = new RegExp(conjoined, 'i');\n  return ret;\n}, {}, eventMap);\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar each = require('@ndhoule/each');\nvar events = require('analytics-events');\nvar every = require('@ndhoule/every');\nvar fmt = require('@segment/fmt');\nvar foldl = require('@ndhoule/foldl');\nvar is = require('is');\nvar loadIframe = require('load-iframe');\nvar loadScript = require('@segment/load-script');\nvar nextTick = require('next-tick');\nvar normalize = require('to-no-case');\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * No operation.\n */\n\nvar noop = function noop() {};\n\n/**\n * Window defaults.\n */\n\nvar onerror = window.onerror;\nvar onload = null;\n\n/**\n * Mixin emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Initialize.\n */\n\nexports.initialize = function() {\n  var ready = this.ready;\n  nextTick(ready);\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\n\nexports.loaded = function() {\n  return false;\n};\n\n/**\n * Page.\n *\n * @api public\n * @param {Page} page\n */\n\n/* eslint-disable no-unused-vars */\nexports.page = function(page) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Track.\n *\n * @api public\n * @param {Track} track\n */\n\n/* eslint-disable no-unused-vars */\nexports.track = function(track) {};\n/* eslint-enable no-unused-vars */\n\n/**\n * Get values from items in `options` that are mapped to `key`.\n * `options` is an integration setting which is a collection\n * of type 'map', 'array', or 'mixed'\n *\n * Use cases include mapping events to pixelIds (map), sending generic\n * conversion pixels only for specific events (array), or configuring dynamic\n * mappings of event properties to query string parameters based on event (mixed)\n *\n * @api public\n * @param {Object|Object[]|String[]} options An object, array of objects, or\n * array of strings pulled from settings.mapping.\n * @param {string} key The name of the item in options whose metadata\n * we're looking for.\n * @return {Array} An array of settings that match the input `key` name.\n * @example\n *\n * // 'Map'\n * var events = { my_event: 'a4991b88' };\n * .map(events, 'My Event');\n * // => [\"a4991b88\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Array'\n * * var events = ['Completed Order', 'My Event'];\n * .map(events, 'My Event');\n * // => [\"My Event\"]\n * .map(events, 'whatever');\n * // => []\n *\n * // 'Mixed'\n * var events = [{ key: 'my event', value: '9b5eb1fa' }];\n * .map(events, 'my_event');\n * // => [\"9b5eb1fa\"]\n * .map(events, 'whatever');\n * // => []\n */\n\nexports.map = function(options, key) {\n  var normalizedComparator = normalize(key);\n  var mappingType = getMappingType(options);\n\n  if (mappingType === 'unknown') {\n    return [];\n  }\n\n  return foldl(function(matchingValues, val, key) {\n    var compare;\n    var result;\n\n    if (mappingType === 'map') {\n      compare = key;\n      result = val;\n    }\n\n    if (mappingType === 'array') {\n      compare = val;\n      result = val;\n    }\n\n    if (mappingType === 'mixed') {\n      compare = val.key;\n      result = val.value;\n    }\n\n    if (normalize(compare) === normalizedComparator) {\n      matchingValues.push(result);\n    }\n\n    return matchingValues;\n  }, [], options);\n};\n\n/**\n * Invoke a `method` that may or may not exist on the prototype with `args`,\n * queueing or not depending on whether the integration is \"ready\". Don't\n * trust the method call, since it contains integration party code.\n *\n * @api private\n * @param {string} method\n * @param {...*} args\n */\n\nexports.invoke = function(method) {\n  if (!this[method]) return;\n  var args = Array.prototype.slice.call(arguments, 1);\n  if (!this._ready) return this.queue(method, args);\n\n  this.debug('%s with %o', method, args);\n  return this[method].apply(this, args);\n};\n\n/**\n * Queue a `method` with `args`.\n *\n * @api private\n * @param {string} method\n * @param {Array} args\n */\n\nexports.queue = function(method, args) {\n  this._queue.push({ method: method, args: args });\n};\n\n/**\n * Flush the internal queue.\n *\n * @api private\n */\n\nexports.flush = function() {\n  this._ready = true;\n  var self = this;\n\n  each(function(call) {\n    self[call.method].apply(self, call.args);\n  }, this._queue);\n\n  // Empty the queue.\n  this._queue.length = 0;\n};\n\n/**\n * Reset the integration, removing its global variables.\n *\n * @api private\n */\n\nexports.reset = function() {\n  for (var i = 0; i < this.globals.length; i++) {\n    window[this.globals[i]] = undefined;\n  }\n\n  window.onerror = onerror;\n  window.onload = onload;\n};\n\n/**\n * Load a tag by `name`.\n *\n * @param {string} name The name of the tag.\n * @param {Object} locals Locals used to populate the tag's template variables\n * (e.g. `userId` in '<img src=\"https://whatever.com/{{ userId }}\">').\n * @param {Function} [callback=noop] A callback, invoked when the tag finishes\n * loading.\n */\n\nexports.load = function(name, locals, callback) {\n  // Argument shuffling\n  if (typeof name === 'function') { callback = name; locals = null; name = null; }\n  if (name && typeof name === 'object') { callback = locals; locals = name; name = null; }\n  if (typeof locals === 'function') { callback = locals; locals = null; }\n\n  // Default arguments\n  name = name || 'library';\n  locals = locals || {};\n\n  locals = this.locals(locals);\n  var template = this.templates[name];\n  if (!template) throw new Error(fmt('template \"%s\" not defined.', name));\n  var attrs = render(template, locals);\n  callback = callback || noop;\n  var self = this;\n  var el;\n\n  switch (template.type) {\n  case 'img':\n    attrs.width = 1;\n    attrs.height = 1;\n    el = loadImage(attrs, callback);\n    break;\n  case 'script':\n    el = loadScript(attrs, function(err) {\n      if (!err) return callback();\n      self.debug('error loading \"%s\" error=\"%s\"', self.name, err);\n    });\n      // TODO: hack until refactoring load-script\n    delete attrs.src;\n    each(function(val, key) {\n      el.setAttribute(key, val);\n    }, attrs);\n    break;\n  case 'iframe':\n    el = loadIframe(attrs, callback);\n    break;\n  default:\n      // No default case\n  }\n\n  return el;\n};\n\n/**\n * Locals for tag templates.\n *\n * By default it includes a cache buster and all of the options.\n *\n * @param {Object} [locals]\n * @return {Object}\n */\n\nexports.locals = function(locals) {\n  locals = locals || {};\n  var cache = Math.floor(new Date().getTime() / 3600000);\n  if (!locals.hasOwnProperty('cache')) locals.cache = cache;\n  each(function(val, key) {\n    if (!locals.hasOwnProperty(key)) locals[key] = val;\n  }, this.options);\n  return locals;\n};\n\n/**\n * Simple way to emit ready.\n *\n * @api public\n */\n\nexports.ready = function() {\n  this.emit('ready');\n};\n\n/**\n * Wrap the initialize method in an exists check, so we don't have to do it for\n * every single integration.\n *\n * @api private\n */\n\nexports._wrapInitialize = function() {\n  var initialize = this.initialize;\n  this.initialize = function() {\n    this.debug('initialize');\n    this._initialized = true;\n    var ret = initialize.apply(this, arguments);\n    this.emit('initialize');\n    return ret;\n  };\n};\n\n/**\n * Wrap the page method to call to noop the first page call if the integration assumes\n * a pageview.\n *\n * @api private\n */\n\nexports._wrapPage = function() {\n  var page = this.page;\n  var initialPageSkipped = false;\n  this.page = function() {\n    if (this._assumesPageview && !initialPageSkipped) {\n      initialPageSkipped = true;\n      return;\n    }\n    return page.apply(this, arguments);\n  };\n};\n\n/**\n * Wrap the track method to call other ecommerce methods if available depending\n * on the `track.event()`.\n *\n * @api private\n */\n\nexports._wrapTrack = function() {\n  var t = this.track;\n  this.track = function(track) {\n    var event = track.event();\n    var called;\n    var ret;\n\n    for (var method in events) {\n      if (has.call(events, method)) {\n        var regexp = events[method];\n        if (!this[method]) continue;\n        if (!regexp.test(event)) continue;\n        ret = this[method].apply(this, arguments);\n        called = true;\n        break;\n      }\n    }\n\n    if (!called) ret = t.apply(this, arguments);\n    return ret;\n  };\n};\n\n/**\n * Determine the type of the option passed to `#map`\n *\n * @api private\n * @param {Object|Object[]} mapping\n * @return {String} mappingType\n */\n\nfunction getMappingType(mapping) {\n  if (is.array(mapping)) {\n    return every(isMixed, mapping) ? 'mixed' : 'array';\n  }\n  if (is.object(mapping)) return 'map';\n  return 'unknown';\n}\n\n/**\n * Determine if item in mapping array is a valid \"mixed\" type value\n *\n * Must be an object with properties \"key\" (of type string)\n * and \"value\" (of any type)\n *\n * @api private\n * @param {*} item\n * @return {Boolean}\n */\n\nfunction isMixed(item) {\n  if (!is.object(item)) return false;\n  if (!is.string(item.key)) return false;\n  if (!has.call(item, 'value')) return false;\n  return true;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Object} attrs\n * @param {Function} fn\n * @return {Image}\n */\n\nfunction loadImage(attrs, fn) {\n  fn = fn || function() {};\n  var img = new Image();\n  img.onerror = error(fn, 'failed to load pixel', img);\n  img.onload = function() { fn(); };\n  img.src = attrs.src;\n  img.width = 1;\n  img.height = 1;\n  return img;\n}\n\n/**\n * TODO: Document me\n *\n * @api private\n * @param {Function} fn\n * @param {string} message\n * @param {Element} img\n * @return {Function}\n */\n\nfunction error(fn, message, img) {\n  return function(e) {\n    e = e || window.event;\n    var err = new Error(message);\n    err.event = e;\n    err.source = img;\n    fn(err);\n  };\n}\n\n/**\n * Render template + locals into an `attrs` object.\n *\n * @api private\n * @param {Object} template\n * @param {Object} locals\n * @return {Object}\n */\n\nfunction render(template, locals) {\n  return foldl(function(attrs, val, key) {\n    attrs[key] = val.replace(/\\{\\{\\ *(\\w+)\\ *\\}\\}/g, function(_, $1) {\n      return locals[$1];\n    });\n    return attrs;\n  }, {}, template.attrs);\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar domify = require('domify');\nvar each = require('@ndhoule/each');\nvar includes = require('@ndhoule/includes');\n\n/**\n * Mix in emitter.\n */\n\n/* eslint-disable new-cap */\nEmitter(exports);\n/* eslint-enable new-cap */\n\n/**\n * Add a new option to the integration by `key` with default `value`.\n *\n * @api public\n * @param {string} key\n * @param {*} value\n * @return {Integration}\n */\n\nexports.option = function(key, value) {\n  this.prototype.defaults[key] = value;\n  return this;\n};\n\n/**\n * Add a new mapping option.\n *\n * This will create a method `name` that will return a mapping for you to use.\n *\n * @api public\n * @param {string} name\n * @return {Integration}\n * @example\n * Integration('My Integration')\n *   .mapping('events');\n *\n * new MyIntegration().track('My Event');\n *\n * .track = function(track){\n *   var events = this.events(track.event());\n *   each(send, events);\n *  };\n */\n\nexports.mapping = function(name) {\n  this.option(name, []);\n  this.prototype[name] = function(key) {\n    return this.map(this.options[name], key);\n  };\n  return this;\n};\n\n/**\n * Register a new global variable `key` owned by the integration, which will be\n * used to test whether the integration is already on the page.\n *\n * @api public\n * @param {string} key\n * @return {Integration}\n */\n\nexports.global = function(key) {\n  this.prototype.globals.push(key);\n  return this;\n};\n\n/**\n * Mark the integration as assuming an initial pageview, so to defer the first page call, keep track of\n * whether we already nooped the first page call.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.assumesPageview = function() {\n  this.prototype._assumesPageview = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `load` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnLoad = function() {\n  this.prototype._readyOnLoad = true;\n  return this;\n};\n\n/**\n * Mark the integration as being \"ready\" once `initialize` is called.\n *\n * @api public\n * @return {Integration}\n */\n\nexports.readyOnInitialize = function() {\n  this.prototype._readyOnInitialize = true;\n  return this;\n};\n\n/**\n * Define a tag to be loaded.\n *\n * @api public\n * @param {string} [name='library'] A nicename for the tag, commonly used in\n * #load. Helpful when the integration has multiple tags and you need a way to\n * specify which of the tags you want to load at a given time.\n * @param {String} str DOM tag as string or URL.\n * @return {Integration}\n */\n\nexports.tag = function(name, tag) {\n  if (tag == null) {\n    tag = name;\n    name = 'library';\n  }\n  this.prototype.templates[name] = objectify(tag);\n  return this;\n};\n\n/**\n * Given a string, give back DOM attributes.\n *\n * Do it in a way where the browser doesn't load images or iframes. It turns\n * out domify will load images/iframes because whenever you construct those\n * DOM elements, the browser immediately loads them.\n *\n * @api private\n * @param {string} str\n * @return {Object}\n */\n\nfunction objectify(str) {\n  // replace `src` with `data-src` to prevent image loading\n  str = str.replace(' src=\"', ' data-src=\"');\n\n  var el = domify(str);\n  var attrs = {};\n\n  each(function(attr) {\n    // then replace it back\n    var name = attr.name === 'data-src' ? 'src' : attr.name;\n    if (!includes(attr.name + '=', str)) return;\n    attrs[name] = attr.value;\n  }, el.attributes);\n\n  return {\n    type: el.tagName.toLowerCase(),\n    attrs: attrs\n  };\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar bind = require('component-bind');\nvar debug = require('debug');\nvar defaults = require('@ndhoule/defaults');\nvar extend = require('extend');\nvar slug = require('slug-component');\nvar protos = require('./protos');\nvar statics = require('./statics');\n\n/**\n * Create a new `Integration` constructor.\n *\n * @constructs Integration\n * @param {string} name\n * @return {Function} Integration\n */\n\nfunction createIntegration(name) {\n  /**\n   * Initialize a new `Integration`.\n   *\n   * @class\n   * @param {Object} options\n   */\n\n  function Integration(options) {\n    if (options && options.addIntegration) {\n      // plugin\n      return options.addIntegration(Integration);\n    }\n    this.debug = debug('analytics:integration:' + slug(name));\n    var clonedOpts = {};\n    extend(true, clonedOpts, options); // deep clone options\n    this.options = defaults(clonedOpts || {}, this.defaults);\n    this._queue = [];\n    this.once('ready', bind(this, this.flush));\n\n    Integration.emit('construct', this);\n    this.ready = bind(this, this.ready);\n    this._wrapInitialize();\n    this._wrapPage();\n    this._wrapTrack();\n  }\n\n  Integration.prototype.defaults = {};\n  Integration.prototype.globals = [];\n  Integration.prototype.templates = {};\n  Integration.prototype.name = name;\n  extend(Integration, statics);\n  extend(Integration.prototype, protos);\n\n  return Integration;\n}\n\n/**\n * Exports.\n */\n\nmodule.exports = createIntegration;\n", "\n/**\n * Module dependencies.\n */\n\nvar type = require('type-component');\n\n/**\n * Expose `reject`\n */\n\nmodule.exports = reject;\n\n/**\n * Reject `obj`, `fn`.\n *\n * If `fn` is omitted a default function\n * that removes nulls (undefined/null) will\n * be supplied.\n *\n * @param {Object} obj\n * @param {Function} fn\n * @return {Object}\n * @api public\n */\n\nfunction reject(obj, fn){\n  fn = fn || compact;\n  return 'array' == type(obj)\n    ? reject.array(obj, fn)\n    : reject.object(obj, fn);\n}\n\n/**\n * Reject `arr`, `fn`.\n *\n * @param {Array|String} arr\n * @param {Function} fn\n * @return {Object}\n * @api public\n */\n\nreject.array = function(arr, fn){\n  var ret = [];\n\n  for (var i = 0; i < arr.length; ++i) {\n    if (!fn(arr[i], i)) ret[ret.length] = arr[i];\n  }\n\n  return ret;\n};\n\n/**\n * Reject `obj`, `fn`.\n *\n * @param {Object} obj\n * @param {Function} fn\n * @return {Object}\n * @api public\n */\n\nreject.object = function(obj, fn){\n  var ret = {};\n\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k) && !fn(obj[k], k)) {\n      ret[k] = obj[k]\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Reject `type(s)` of `obj/arr`.\n *\n * @param {Object|Array} obj\n * @param {Array|String} type(s)\n * @return {Object|Array}\n * @api public\n */\n\nreject.types =\nreject.type = function(obj, types){\n  if (!Array.isArray(types)) types = [types];\n  return reject(obj, function(value){\n    return -1 != types.indexOf(type(value));\n  });\n};\n\n/**\n * Reject `value` if it's `null` or `undefined`.\n *\n * @param {Mixed} value\n * @return {Mixed}\n * @api private\n */\n\nfunction compact(value){\n  return null == value;\n}\n", "'use strict';\n\n/**\n * Module dependencies.\n */\nvar integration = require('@segment/analytics.js-integration');\nvar reject = require('reject');\n\n/**\n * GA4\n */\nvar GA4 = (module.exports = integration('Google Analytics 4')\n  .global('gtag')\n  .global('ga4DataLayer')\n  .option('measurementIds', [])\n  .option('cookieDomainName', 'auto')\n  .option('cookiePrefix', '_ga')\n  .option('cookieExpiration', 63072000)\n  .option('cookieUpdate', true)\n  .option('cookieFlags', '')\n  .option('sendAutomaticPageViewEvent', false)\n  .option('allowAllAdvertisingFeatures', false)\n  .option('allowAdvertisingPersonalization', false)\n  .option('disableGoogleAnalytics', false)\n  .option('googleReportingIdentity', 'device')\n  .option('userProperties', {})\n  /**\n   * Custom Events and Parameters setting. This setting is used by the track\n   * handler to map Segment events and fields to Google analytics events and parameters.\n   *\n   * Example:\n   * [\n   *   {\n   *     \"googleEvent\": \"new_episode\",\n   *     \"parameters\": [\n   *       {\n   *         \"key\": \"properties.title\",\n   *         \"value\": \"title\"\n   *       },\n   *       {\n   *         \"key\": \"properties.genre\",\n   *         \"value\": \"genre\"\n   *       }\n   *     ],\n   *     \"segmentEvent\": \"Started Episode\"\n   *   }\n   * ]\n   */\n  .option('customEventsAndParameters', [])\n  .tag(\n    '<script src=\"//www.googletagmanager.com/gtag/js?id={{ measurementId }}&l=ga4DataLayer\">'\n  ));\n\n/**\n * Initialize.\n *\n * https://developers.google.com/analytics/devguides/collection/ga4\n *\n * @api public\n */\nGA4.prototype.initialize = function() {\n  window.ga4DataLayer = window.ga4DataLayer || [];\n  window.gtag = function() {\n    window.ga4DataLayer.push(arguments);\n  };\n\n  /**\n   * This line is in all of the gtag examples but is not well documented. Research\n   * says that it is is related to deduplication.\n   * https://stackoverflow.com/questions/59256532/what-is-the-js-gtags-js-command\n   */\n  window.gtag('js', new Date());\n\n  var opts = this.options;\n  var measurementIds = opts.measurementIds;\n\n  /**\n   * Avoid loading and configuring gtag.js if any are true:\n   *  - Disable Google Analytics setting is enabled\n   *  - No measurement IDs are configured\n   */\n  if (!measurementIds.length || opts.disableGoogleAnalytics) {\n    return;\n  }\n\n  var config = {\n    /**\n     * Disable Google's Automatic Page View Measurement\n     * https://developers.google.com/analytics/devguides/collection/ga4/disable-page-view\n     */\n    send_page_view: opts.sendAutomaticPageViewEvent,\n\n    /**\n     * Cookie Update\n     * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#cookie_update_parameter\n     */\n    cookie_update: opts.cookieUpdate,\n\n    /**\n     * Cookie Domain Name\n     * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#cookie_domain_configuration\n     */\n    cookie_domain: opts.cookieDomainName,\n\n    /**\n     * Cookie Prefix\n     * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#cookie_prefix\n     */\n    cookie_prefix: opts.cookiePrefix,\n\n    /**\n     * Cookie Expiration\n     * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#cookie_expiration\n     */\n    cookie_expires: opts.cookieExpiration,\n  };\n\n  var sets = [\n    /**\n     * Cookie Flags\n     * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#cookie_flags\n     */\n    [{ cookie_flags: opts.cookieFlags }],\n\n    /**\n     * Disable All Advertising\n     * https://developers.google.com/analytics/devguides/collection/ga4/display-features#disable_all_advertising_features\n     */\n    ['allow_google_signals', opts.allowAllAdvertisingFeatures],\n\n    /**\n     * Disable Advertising Personalization\n     * https://developers.google.com/analytics/devguides/collection/ga4/display-features#disable_advertising_personalization\n     */\n    ['allow_ad_personalization_signals', opts.allowAdvertisingPersonalization]\n  ];\n\n  // Load gtag.js using the first measurement ID, then configure using the `config` commands built above.\n  var self = this;\n  this.load({ measurementId: measurementIds[0] }, function() {\n    /**\n     * Measurement IDs.\n     * The same configuration information is shared across all measurement IDs.\n     * https://developers.google.com/analytics/devguides/collection/ga4#add_an_additional_google_analytics_property_to_an_existing_tag\n     */\n    for (var i = 0; i < measurementIds.length; i++) {\n      window.gtag('config', measurementIds[i], config)\n\n    }\n\n    /**\n     * Set persistent values shared across all gtag.js usage.\n     * https://developers.google.com/gtagjs/reference/api#set\n     */\n    for (var i = 0; i < sets.length; i++) {\n      // Copy the set args and append the command before calling gtag.js.\n      var args = sets[i].slice(0)\n      args.unshift('set')\n      window.gtag.apply(null, args);\n    }\n\n    self.ready();\n  });\n};\n\n/**\n * Loaded?\n *\n * @api private\n * @return {boolean}\n */\nGA4.prototype.loaded = function() {\n  return !!(\n    window.ga4DataLayer && Array.prototype.push !== window.ga4DataLayer.push\n  );\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Facade.Identify} event\n */\nGA4.prototype.identify = function(identify) {\n  var opts = this.options;\n  var userPropertyMappings = opts.userProperties;\n\n  var userProperties = {};\n\n  // Map all customer-defined user property mappings.\n  for (var eventField in userPropertyMappings) {\n    if (!userPropertyMappings.hasOwnProperty(eventField)) {\n      continue;\n    }\n\n    var userProp = userPropertyMappings[eventField];\n    var value = identify.proxy(eventField);\n\n    userProperties[userProp] = value;\n  }\n\n  /**\n   * Map the user_id property if the Google Reporting Identity is set one of:\n   *   - By User ID, Google signals, then device (userIdSignalsAndDevice)\n   *   - By User ID and Devicea (userIdAndDevice)\n   * \n   * Google's Reporting Identity: https://support.google.com/analytics/answer/9213390?hl=en\n   * \n   * Note that the user ID can be appended as part of the user_properties\n   * object instead of being configured by an explicit command.\n   * https://developers.google.com/analytics/devguides/collection/ga4/cookies-user-id#set_user_id\n   */\n  var userId = identify.userId();\n  var validReportingIdentity = opts.googleReportingIdentity === 'userIdSignalsAndDevice' || opts.googleReportingIdentity === 'userIdAndDevice'\n  if (userId && validReportingIdentity) {\n    userProperties.user_id = userId;\n  }\n\n  if (Object.keys(userProperties).length) {\n    window.gtag('set', 'user_properties', userProperties);\n  }\n};\n\n/**\n * Group\n *\n * @api public\n * @param {Facade.Group} group\n */\nGA4.prototype.group = function(group) {\n  window.gtag('event', 'join_group', {\n    group_id: group.groupId()\n  });\n};\n\n/**\n * Page\n *\n * @api public\n * @param {Facade.Page} page\n */\nGA4.prototype.page = function(page) {\n  // If the Send Google's Automatic Page View Measurement setting is set to true then\n  // don't handle page calls to avoid duplicate page_view events.\n  if (this.options.sendAutomaticPageViewEvent) {\n    return;\n  }\n\n  var props = page.properties();\n  var name = page.fullName();\n\n  var pageLocation = props.url;\n  var pageReferrer = page.referrer();\n  var pageTitle = name || props.title;\n\n  window.gtag('event', 'page_view', {\n    page_location: pageLocation,\n    page_referrer: pageReferrer,\n    page_title: pageTitle\n  });\n};\n\n/**\n * Track\n *\n * @api public\n * @param {Track} track\n */\n\nGA4.prototype.track = function(track) {\n\n  var mappings = this.options.customEventsAndParameters;\n\n  for (var i = 0; i < mappings.length; i++) {\n    var mapping = mappings[i];\n    if (typeof mapping !== 'object') {\n      continue;\n    }\n\n    var segmentEvent = mapping.segmentEvent;\n    var googleEvent = mapping.googleEvent;\n  \n    if (!segmentEvent || !googleEvent || segmentEvent !== track.event()) {\n      continue;\n    }\n\n    var parameterMappings = mapping.parameters || [];\n    var parameters = {};\n\n    if (!(parameterMappings instanceof Array)) {\n      continue;\n    }\n\n    // Map Segment event fields to Google Event Parameters.\n    // Text map settings that are nested in a mixed settings take on a different shape\n    // than a top-level text map setting.\n    // eg; [{ key: 'properties.genre', value: 'primary_genre }]\n    //\n    for (var j = 0; j < parameterMappings.length; j++) {\n      var map = parameterMappings[j] || {};\n      if (typeof map !== 'object' || !map.key || !map.value) {\n        continue;\n      }\n\n      var param = map.value;\n      var value = track.proxy(map.key);\n      parameters[param] = value;\n    }\n\n    window.gtag('event', googleEvent, parameters);\n  }\n};\n", "\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n", "/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object Error]': return 'error';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val !== val) return 'nan';\n  if (val && val.nodeType === 1) return 'element';\n\n  val = val.valueOf\n    ? val.valueOf()\n    : Object.prototype.valueOf.apply(val)\n\n  return typeof val;\n};\n", "\n/**\n * Module dependencies.\n */\n\nvar encode = encodeURIComponent;\nvar decode = decodeURIComponent;\nvar trim = require('trim');\nvar type = require('type');\n\nvar pattern = /(\\w+)\\[(\\d+)\\]/\n\n/**\n * Parse the given query `str`.\n *\n * @param {String} str\n * @return {Object}\n * @api public\n */\n\nexports.parse = function(str){\n  if ('string' != typeof str) return {};\n\n  str = trim(str);\n  if ('' == str) return {};\n  if ('?' == str.charAt(0)) str = str.slice(1);\n\n  var obj = {};\n  var pairs = str.split('&');\n  for (var i = 0; i < pairs.length; i++) {\n    var parts = pairs[i].split('=');\n    var key = decode(parts[0]);\n    var m;\n\n    if (m = pattern.exec(key)) {\n      obj[m[1]] = obj[m[1]] || [];\n      obj[m[1]][m[2]] = decode(parts[1]);\n      continue;\n    }\n\n    obj[parts[0]] = null == parts[1]\n      ? ''\n      : decode(parts[1]);\n  }\n\n  return obj;\n};\n\n/**\n * Stringify the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api public\n */\n\nexports.stringify = function(obj){\n  if (!obj) return '';\n  var pairs = [];\n\n  for (var key in obj) {\n    var value = obj[key];\n\n    if ('array' == type(value)) {\n      for (var i = 0; i < value.length; ++i) {\n        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n      }\n      continue;\n    }\n\n    pairs.push(encode(key) + '=' + encode(obj[key]));\n  }\n\n  return pairs.join('&');\n};\n", "\n/**\n * Protocol.\n */\n\nmodule.exports = function (url) {\n  switch (arguments.length) {\n    case 0: return check();\n    case 1: return transform(url);\n  }\n};\n\n\n/**\n * Transform a protocol-relative `url` to the use the proper protocol.\n *\n * @param {String} url\n * @return {String}\n */\n\nfunction transform (url) {\n  return check() ? 'https:' + url : 'http:' + url;\n}\n\n\n/**\n * Check whether `https:` be used for loading scripts.\n *\n * @return {Boolean}\n */\n\nfunction check () {\n  return (\n    location.protocol == 'https:' ||\n    location.protocol == 'chrome-extension:'\n  );\n}", "'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar cookie = require('component-cookie');\nvar each = require('@ndhoule/each');\nvar integration = require('@segment/analytics.js-integration');\nvar load = require('@segment/load-script');\nvar querystring = require('component-querystring');\nvar useHttps = require('use-https');\n\n/**\n * hasOwnProperty reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Expose `Pardot` integration.\n */\n\nvar Pardot = (module.exports = integration('Pardot')\n  .assumesPageview()\n  .global('pi')\n  .global('piAId')\n  .global('piCId')\n  .global('piTracker')\n  .option('projectId', '')\n  .option('piAId', '')\n  .option('piCId', '')\n  .tag('http', '<script src=\"http://cdn.pardot.com/pd.js\">')\n  .tag('https', '<script src=\"https://pi.pardot.com/pd.js\">'));\n\n/**\n * Initialize.\n *\n * http://developer.pardot.com/\n *\n * @api public\n */\n\nPardot.prototype.initialize = function() {\n  window.piAId = this.options.piAId;\n  window.piCId = this.options.piCId;\n  var name = useHttps() ? 'https' : 'http';\n  this.load(name, this.ready);\n};\n\n/**\n * Loaded?\n *\n * @api public\n * @return {boolean}\n */\n\nPardot.prototype.loaded = function() {\n  return !!window.piTracker;\n};\n\n/**\n * Identify.\n *\n * @api public\n * @param {Identify} identify\n */\n\nPardot.prototype.identify = function(identify) {\n  var traits = identify.traits();\n  var email = identify.email();\n  if (email) traits.email = email;\n  // follow EU rules\n  if (doNotTrack()) return;\n  // must have an email\n  if (!traits.email) return;\n\n  var variables = this.getRequestVariables();\n  variables.pi_email = traits.email;\n  load('//pi.pardot.com/analytics?' + querystring.stringify(variables));\n};\n\n/**\n * Get request variables.\n *\n * @api private\n * @return {Object}\n */\n\nPardot.prototype.getRequestVariables = function() {\n  // Note; we specifically want to emit URL, referrer, title\n  // so that the visitor is associated but not counted\n  // as an extra page view\n  var variables = {\n    account_id: window.piAId,\n    campaign_id: window.piCId,\n    pi_opt_in: cookie('pi_opt_in' + (this.options.piAId - 1e3)),\n    ver: 3,\n    visitor_id: cookie('visitor_id' + (this.options.piAId - 1e3))\n  };\n\n  // get all the query parameters\n  var queryParams = query();\n  // here are the query parameters we are looking for, but only the ones that\n  // won't cause an extra page view to pop up in Omniture\n  var queryKeys = ['pi_email'];\n\n  // add all the query params to our variables list\n  each(function(key) {\n    if (key in queryParams) variables[key] = queryParams[key];\n  }, queryKeys);\n\n  // now check global variables\n  if (window.piIncludeInActivities !== undefined) {\n    variables.pi_include_in_activies = window.piIncludeInActivities;\n  }\n  if (window.piProfileId !== undefined) {\n    variables.pi_profile_id = window.piProfileId;\n  }\n\n  // override with pi.tracker variables, if they've been updated\n  // we don't want to take app pi.tracker properties cause then\n  // we'll grab the page view properties and count as an extra page view\n  if (window.pi && window.pi.tracker) {\n    for (var property in variables) {\n      if (has.call(variables, property)) {\n        var val = window.pi.tracker[property];\n        // don't override the account_id if it's not set yet\n        if (val) variables[property] = val;\n      }\n    }\n  }\n\n  return variables;\n};\n\n/**\n * Determine whether the we should identify the user, following EU rules.\n *\n * TODO: what is going on here haha\n *\n * @api private\n * @return {boolean}\n */\n\nfunction doNotTrack() {\n  var p = window.pi;\n  if (!p) return false;\n  if (!p.tracker) return false;\n  // XXX: I don't think it's necessary to explicitly cast to a string here,\n  // but I converted this from == to ===, so just to be safe... (why isn't it\n  // just a boolean?)\n  if (String(p.tracker.pi_opt_in) === 'false') return false;\n  if (!p.tracker.title) return false;\n  if (!p.tracker.notify_pi) return false;\n  return true;\n}\n\n/**\n * Get the query params from the URL.\n *\n * @api private\n * @return {Object}\n */\n\nfunction query() {\n  return querystring.parse(location.search.slice(1));\n}\n", "import analytics from \"@segment/analytics.js-core\";\n\nconst integrations = [\n  require(\"@segment/analytics.js-integration-customerio\"),\n  require(\"@segment/analytics.js-integration-mixpanel\"),\n  require(\"@segment/analytics.js-integration-optimizely\"),\n  require(\"@segment/analytics.js-integration-google-analytics-4\"),\n  require(\"@segment/analytics.js-integration-pardot\"),\n];\n\nintegrations.forEach(analytics.use.bind(analytics));\n\nwindow.analytics = analytics;\n"],
  "mappings": "i0BAAA,mBAQA,GAAO,QAAU,GAAS,EAAI,EAC9B,GAAO,QAAQ,KAAO,GAAO,QAO7B,GAAO,QAAQ,QAAU,SAAU,EAAK,EAAK,EAAK,EAAS,CACzD,UAAS,EAAO,EAAE,KAAK,KAAM,EAAK,EAAK,EAAK,CAAO,EAC5C,CACT,EAOA,GAAO,QAAQ,IAAM,SAAU,EAAK,EAAK,EAAS,CAChD,UAAS,EAAG,EAAE,KAAK,KAAM,EAAK,EAAK,KAAM,CAAO,EACzC,CACT,EAOA,YAAmB,EAAI,CACrB,MAAO,UAAU,EAAK,EAAM,EAAK,EAAS,CACxC,GAAI,GAAY,GAAW,GAAW,EAAQ,UAAU,EAAI,EAAQ,WAAa,GACjF,EAAO,EAAU,CAAI,EAKrB,OAHI,GACA,EAAW,GAER,CAAC,GAAU,EAAK,EAEvB,YAAgB,CACd,IAAK,IAAO,GAAK,CACf,GAAI,GAAgB,EAAU,CAAG,EACjC,GAAI,AAAM,EAAK,QAAQ,CAAa,IAAhC,EAAmC,CACrC,GAAI,GAAO,EAAK,OAAO,EAAc,MAAM,EAC3C,GAAI,EAAK,OAAO,CAAC,IAAM,KAAO,EAAK,SAAW,EAAG,CAC/C,EAAO,EAAK,OAAO,CAAC,EACpB,GAAI,GAAQ,EAAI,GAGhB,GAAI,AAAQ,GAAR,KAAe,CACjB,EAAW,GACX,MACF,CAGA,GAAI,CAAC,EAAK,OAAQ,CAChB,EAAW,GACX,MACF,CAGA,EAAM,EAGN,MACF,CACF,CACF,CAEA,EAAM,OAGN,EAAW,EACb,CAEA,GAAI,EAAC,EACL,MAAI,AAAQ,IAAR,KAAoB,EAOjB,EAAG,EAAK,EAAK,CAAG,CACzB,CACF,CASA,YAAe,EAAK,EAAK,CACvB,GAAI,EAAI,eAAe,CAAG,EAAG,MAAO,GAAI,EAC1C,CASA,YAAc,EAAK,EAAK,CACtB,MAAI,GAAI,eAAe,CAAG,GAAG,MAAO,GAAI,GACjC,CACT,CASA,YAAkB,EAAK,EAAK,EAAK,CAC/B,MAAI,GAAI,eAAe,CAAG,GAAG,GAAI,GAAO,GACjC,CACT,CAWA,YAA0B,EAAM,CAC9B,MAAO,GAAK,QAAQ,mBAAoB,EAAE,EAAE,YAAY,CAC1D,CASA,YAAoB,EAAK,CACvB,MAAO,OAAO,IAAQ,UACxB,ICvJA,gCAEA,GAAI,IAAM,KAQV,GAAO,QAAU,SAAS,EAAO,CAC/B,EAAM,IAAM,EAAM,aAAc,KAAK,EACrC,EAAM,QAAU,EAAM,SAAS,EAC/B,EAAM,OAAS,EAAM,QAAQ,EAC7B,EAAM,MAAQ,EAAM,OAAO,EAC3B,EAAM,KAAO,EAAM,MAAM,EACzB,EAAM,OAAS,EAAM,QAAQ,EAE7B,WAAe,EAAG,EAAG,CACnB,MAAO,WAAW,CAChB,GAAI,GAAS,KAAK,OAAO,EACrB,EAAQ,KAAK,WAAa,KAAK,WAAW,EAAI,CAAC,EAEnD,MAAO,IAAI,EAAQ,WAAa,CAAC,GAC5B,GAAI,EAAQ,CAAC,GACZ,GAAI,GAAI,EAAQ,WAAa,CAAC,EAAI,OAClC,GAAI,GAAI,EAAQ,CAAC,EAAI,OACtB,GAAI,EAAO,WAAa,CAAC,GACzB,GAAI,EAAO,CAAC,GACX,GAAI,GAAI,EAAO,WAAa,CAAC,EAAI,OACjC,GAAI,GAAI,EAAO,CAAC,EAAI,KAC5B,CACF,CACF,ICjCA,mBAAI,MAAO,QAAO,QAAW,WAE3B,GAAO,QAAU,SAAkB,EAAM,EAAW,CAClD,AAAI,GACF,GAAK,OAAS,EACd,EAAK,UAAY,OAAO,OAAO,EAAU,UAAW,CAClD,YAAa,CACX,MAAO,EACP,WAAY,GACZ,SAAU,GACV,aAAc,EAChB,CACF,CAAC,EAEL,EAGA,GAAO,QAAU,SAAkB,EAAM,EAAW,CAClD,GAAI,EAAW,CACb,EAAK,OAAS,EACd,GAAI,GAAW,UAAY,CAAC,EAC5B,EAAS,UAAY,EAAU,UAC/B,EAAK,UAAY,GAAI,GACrB,EAAK,UAAU,YAAc,CAC/B,CACF,ICzBF,mBAIA,GAAI,IAAW,OAAO,UAAU,SAUhC,GAAO,QAAU,SAAS,EAAI,CAC5B,OAAQ,GAAS,KAAK,CAAG,OAClB,gBAAiB,MAAO,WACxB,kBAAmB,MAAO,aAC1B,qBAAsB,MAAO,gBAC7B,iBAAkB,MAAO,YACzB,iBAAkB,MAAO,QAGhC,MAAI,KAAQ,KAAa,OACrB,IAAQ,OAAkB,YAC1B,IAAQ,EAAY,MACpB,GAAO,EAAI,WAAa,EAAU,UAElC,GAAS,CAAG,EAAU,SAE1B,GAAM,EAAI,QACN,EAAI,QAAQ,EACZ,OAAO,UAAU,QAAQ,MAAM,CAAG,EAE/B,MAAO,GAChB,EAGA,YAAkB,EAAK,CACrB,MAAO,CAAC,CAAE,IAAO,MACd,GAAI,WACF,EAAI,aACL,MAAO,GAAI,YAAY,UAAa,YACpC,EAAI,YAAY,SAAS,CAAG,GAElC,IC7CA,gCAMA,GAAI,IAAO,KAQP,GAAQ,WAAe,EAAK,CAC9B,GAAI,GAAI,GAAK,CAAG,EAEhB,GAAI,IAAM,SAAU,CAClB,GAAI,GAAO,CAAC,EACZ,OAAS,KAAO,GACd,AAAI,EAAI,eAAe,CAAG,GACxB,GAAK,GAAO,EAAM,EAAI,EAAI,GAG9B,MAAO,EACT,CAEA,GAAI,IAAM,QAAS,CAEjB,OADI,GAAO,GAAI,OAAM,EAAI,MAAM,EACtB,EAAI,EAAG,EAAI,EAAI,OAAQ,EAAI,EAAG,IACrC,EAAK,GAAK,EAAM,EAAI,EAAE,EAExB,MAAO,EACT,CAEA,GAAI,IAAM,SAAU,CAElB,GAAI,GAAQ,GACZ,UAAS,EAAI,UAAY,IAAM,GAC/B,GAAS,EAAI,OAAS,IAAM,GAC5B,GAAS,EAAI,WAAa,IAAM,GACzB,GAAI,QAAO,EAAI,OAAQ,CAAK,CACrC,CAEA,MAAI,KAAM,OACD,GAAI,MAAK,EAAI,QAAQ,CAAC,EAIxB,CACT,EAMA,GAAO,QAAU,KCxDjB,mBAKA,GAAI,IAAW,OAAO,UAAU,SAUhC,GAAO,QAAU,SAAS,EAAI,CAC5B,OAAQ,GAAS,KAAK,CAAG,OAClB,oBAAqB,MAAO,eAC5B,gBAAiB,MAAO,WACxB,kBAAmB,MAAO,aAC1B,qBAAsB,MAAO,gBAC7B,iBAAkB,MAAO,QAGhC,MAAI,KAAQ,KAAa,OACrB,IAAQ,OAAkB,YAC1B,IAAQ,OAAO,CAAG,EAAU,SAEzB,MAAO,EAChB,IC7BA,2BAEA,GAAQ,QAAU,KAClB,GAAQ,MAAQ,KAChB,GAAQ,KAAO,OCJf,gCAIA,GAAI,IAAW,CACb,WAAY,EACd,EASA,GAAO,QAAU,SAAS,EAAa,CACrC,MAAO,CAAC,GAAS,EACnB,ICjBA,2BAQA,GAAI,IAAU,wIAWd,GAAQ,MAAQ,SAAS,EAAK,CAC5B,GAAI,GAAc,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAE,EACjC,EAAM,GAAQ,KAAK,CAAG,EACtB,EAAS,EAGb,GAAI,CAAC,EACH,MAAO,IAAI,MAAK,CAAG,EAKrB,OAAS,GAAI,EAAG,EAAK,EAAM,EAAY,GAAI,IACzC,EAAI,GAAO,SAAS,EAAI,GAAM,EAAE,GAAK,EAKvC,EAAI,GAAK,SAAS,EAAI,GAAI,EAAE,GAAK,EACjC,EAAI,GAAK,SAAS,EAAI,GAAI,EAAE,GAAK,EAGjC,EAAI,KAGJ,EAAI,GAAK,EAAI,GAAM,GAAI,GAAK,MAAM,UAAU,EAAG,CAAC,EAAI,EAGpD,AAAI,EAAI,KAAO,IACb,EAAS,GAAI,MAAK,EAAE,kBAAkB,EAC7B,EAAI,KAAO,KAAO,EAAI,KAC/B,GAAS,EAAI,IAAM,GAAK,EAAI,IACxB,EAAI,MAAQ,KACd,GAAS,EAAI,IAIjB,GAAI,GAAS,KAAK,IAAI,EAAI,GAAI,EAAI,GAAI,EAAI,GAAI,EAAI,GAAI,EAAI,GAAK,EAAQ,EAAI,GAAI,EAAI,EAAE,EACrF,MAAO,IAAI,MAAK,CAAM,CACxB,EAYA,GAAQ,GAAK,SAAS,EAAQ,EAAQ,CAIpC,MAHI,OAAO,IAAW,UAGlB,GAAW,qBAAsB,KAAK,CAAM,IAAM,GAC7C,GAEF,GAAQ,KAAK,CAAM,CAC5B,IC9EA,2BAMA,GAAI,IAAU,SAQd,GAAQ,GAAK,SAAU,EAAQ,CAC7B,MAAO,IAAQ,KAAK,CAAM,CAC5B,EAQA,GAAQ,MAAQ,SAAU,EAAQ,CAChC,SAAS,SAAS,EAAQ,EAAE,EACrB,GAAI,MAAK,CAAM,CACxB,IC3BA,2BAMA,GAAI,IAAU,SAQd,GAAQ,GAAK,SAAU,EAAQ,CAC7B,MAAO,IAAQ,KAAK,CAAM,CAC5B,EAQA,GAAQ,MAAQ,SAAU,EAAS,CACjC,GAAI,GAAS,SAAS,EAAS,EAAE,EAAI,IACrC,MAAO,IAAI,MAAK,CAAM,CACxB,IC3BA,gCAEA,GAAI,IAAU,KACV,GAAe,KACf,GAAU,KAEV,GAAW,OAAO,UAClB,GAAQ,GAAS,SAErB,YAAgB,EAAO,CACrB,MAAO,IAAM,KAAK,CAAK,IAAM,eAC/B,CAEA,YAAkB,EAAO,CACvB,MAAO,IAAM,KAAK,CAAK,IAAM,iBAC/B,CAQA,GAAO,QAAU,SAAiB,EAAK,CACrC,MAAI,IAAO,CAAG,EAAU,EACpB,GAAS,CAAG,EAAU,GAAI,MAAK,GAAK,CAAG,CAAC,EAGxC,GAAQ,GAAG,CAAG,EACT,GAAQ,MAAM,CAAG,EAEtB,GAAa,GAAG,CAAG,EACd,GAAa,MAAM,CAAG,EAE3B,GAAQ,GAAG,CAAG,EACT,GAAQ,MAAM,CAAG,EAInB,GAAI,MAAK,CAAG,CACrB,EAQA,YAAc,EAAK,CACjB,MAAI,GAAM,SAAoB,EAAM,IAC7B,CACT,ICnDA,gCAEA,GAAI,IAAU,KAKd,GAAO,QAAU,GAUjB,YAAkB,EAAO,EAAQ,CAE/B,MADI,KAAW,QAAW,GAAS,IAC/B,GAAS,MAAO,IAAU,SACrB,GAAe,EAAO,CAAM,EAC1B,MAAM,QAAQ,CAAK,EACrB,GAAc,EAAO,CAAM,EACzB,GAAQ,GAAG,EAAO,CAAM,EAC1B,GAAQ,MAAM,CAAK,EAErB,CACT,CASA,YAAwB,EAAK,EAAQ,CACnC,cAAO,KAAK,CAAG,EAAE,QAAQ,SAAS,EAAK,CACrC,EAAI,GAAO,GAAS,EAAI,GAAM,CAAM,CACtC,CAAC,EACM,CACT,CASA,YAAuB,EAAK,EAAQ,CAClC,SAAI,QAAQ,SAAS,EAAO,EAAO,CACjC,EAAI,GAAS,GAAS,EAAO,CAAM,CACrC,CAAC,EACM,CACT,ICvDA,gCAEA,GAAI,IAAU,KACV,GAAQ,KAAmB,MAC3B,GAAY,KACZ,GAAU,KACV,GAAU,KACV,GAAW,KACX,GAAO,KAAmB,KA4B9B,WAAgB,EAAK,EAAM,CACzB,EAAO,GAAQ,CAAC,EACV,SAAW,IAAO,GAAK,MAAQ,IACjC,EAAK,OAAO,GAAM,GAAM,CAAG,GACzB,YAAc,IAAO,GAAK,SAAW,IAC3C,AAAM,aAAe,GAChB,EAAI,UAAY,GAAQ,EAAI,SAAS,EADf,EAAI,UAAY,GAAI,MAE3C,EAAK,UAAU,GAAS,CAAG,EAC/B,KAAK,KAAO,EACZ,KAAK,IAAM,CACb,CAwBA,EAAO,UAAU,MAAQ,SAAS,EAAO,CACvC,GAAI,GAAS,EAAM,MAAM,GAAG,EAC5B,EAAQ,EAAO,MAAM,EAGrB,GAAI,GAAM,KAAK,IAAU,KAAK,MAAM,CAAK,EACzC,MAAK,IACD,OAAO,IAAQ,YAAY,GAAM,EAAI,KAAK,IAAI,GAAK,CAAC,GACpD,EAAO,SAAW,EAAU,KAAK,KAAK,MAAQ,GAAU,CAAG,EAAI,EAEnE,GAAM,GAAQ,EAAK,EAAO,KAAK,GAAG,CAAC,EAC5B,KAAK,KAAK,MAAQ,GAAU,CAAG,EAAI,GAC5C,EAUA,EAAO,UAAU,MAAQ,SAAS,EAAO,CACvC,GAAI,GAAM,KAAK,IAAI,GACnB,MAAO,MAAK,KAAK,MAAQ,GAAU,CAAG,EAAI,CAC5C,EAYA,EAAO,MAAQ,SAAS,EAAO,CAC7B,MAAO,WAAW,CAChB,MAAO,MAAK,MAAM,CAAK,CACzB,CACF,EASA,EAAO,MAAQ,SAAS,EAAO,CAC7B,MAAO,WAAW,CAChB,MAAO,MAAK,MAAM,CAAK,CACzB,CACF,EAgBA,EAAO,MAAQ,SAAS,EAAM,CAC5B,MAAO,WAAW,CAChB,GAAI,GAAQ,KAAK,MAAM,EAAO,GAAG,EACjC,GAAI,GAAK,CAAK,IAAM,QAAS,MAAO,GACpC,GAAI,GAAM,KAAK,MAAM,CAAI,EACzB,MAAI,IAAK,GAAM,CAAC,KAAK,KAAK,MAAQ,GAAM,CAAG,EAAI,CAAG,GAC3C,GAAO,CAAC,CACjB,CACF,EAiBA,EAAO,IAAM,SAAS,EAAM,CAC1B,MAAO,WAAW,CAChB,GAAI,GAAM,KAAK,MAAM,CAAI,EACzB,GAAI,EAAK,MAAO,GAChB,GAAI,GAAQ,KAAK,MAAM,EAAO,GAAG,EACjC,GAAI,GAAK,CAAK,IAAM,QAAS,MAAO,GAAM,EAC5C,CACF,EAUA,EAAO,UAAU,KAAO,UAAW,CACjC,GAAI,GAAM,KAAK,KAAK,MAAQ,GAAM,KAAK,GAAG,EAAI,KAAK,IACnD,MAAI,MAAK,MAAM,GAAI,KAAO,KAAK,KAAK,GAC7B,CACT,EAcA,EAAO,UAAU,QAAU,SAAS,EAAa,CAC/C,GAAI,GAAM,KAAK,IAAI,SAAW,KAAK,IAAI,SAAW,CAAC,EAC/C,EAAU,KAAK,KAAK,MAAQ,GAAM,CAAG,EAAI,EAC7C,GAAI,CAAC,EAAa,MAAO,GACzB,GAAI,EAAC,KAAK,QAAQ,CAAW,EAC7B,IAAI,GAAe,KAAK,aAAa,EACjC,EAAQ,EAAa,IAAgB,GAAQ,EAAc,CAAW,EAC1E,MAAI,OAAO,IAAU,UAAU,GAAQ,GAAQ,KAAK,QAAQ,EAAG,CAAW,GACnE,MAAO,IAAU,SAAW,EAAQ,CAAC,EAC9C,EAKA,EAAO,UAAU,QAAU,EAAO,UAAU,QAwB5C,EAAO,UAAU,QAAU,SAAS,EAAa,CAC/C,GAAI,GAAa,KAAK,MAAM,uBAAuB,EACnD,AAAI,MAAO,IAAe,WAAW,GAAa,KAAK,MAAM,aAAa,GACtE,MAAO,IAAe,WAAW,GAAa,KAAK,MAAM,kBAAkB,GAC3E,MAAO,IAAe,WAAW,GAAa,IAElD,GAAI,GAAU,GAAc,GAAU,CAAW,EAC7C,EAAU,KAAK,aAAa,EAUhC,GANI,EAAQ,WAAa,EAAQ,UAAU,eAAe,CAAW,GACnE,GAAU,EAAQ,UAAU,IAK1B,EAAQ,eAAe,CAAW,EAAG,CACvC,GAAI,GAAW,EAAQ,GACvB,AAAI,MAAO,IAAa,UACtB,EAAU,EAEV,EAAU,EAEd,CAEA,MAAO,CAAC,CAAC,CACX,EASA,EAAO,UAAU,aAAe,UAAW,CACzC,MAAO,MAAK,IAAI,cAAgB,KAAK,MAAM,mBAAmB,GAAK,KAAK,QAAQ,CAClF,EAOA,EAAO,UAAU,OAAS,UAAW,CACnC,GAAI,GAAS,KAAK,MAAM,gBAAgB,EACxC,MAAI,IAAW,MAA8B,GAAS,IAC/C,CACT,EAOA,EAAO,UAAU,YAAc,UAAW,CACxC,MAAO,MAAK,MAAM,aAAa,GAAK,KAAK,MAAM,WAAW,CAC5D,EAQA,EAAO,UAAU,UAAY,EAAO,UAAU,YAQ9C,EAAO,UAAU,QAAU,EAAO,MAAM,iBAAiB,EA0BzD,EAAO,UAAU,OAAS,SAAS,EAAS,CAC1C,GAAI,GAAM,KAAK,MAAM,gBAAgB,GAAK,CAAC,EACvC,EAAK,KAAK,OAAO,EACrB,EAAU,GAAW,CAAC,EAElB,GAAI,GAAI,GAAK,GAEjB,OAAS,KAAS,GAAS,CACzB,GAAI,GAAQ,KAAK,IAAU,KAAO,KAAK,MAAM,kBAAoB,CAAK,EAAI,KAAK,GAAO,EACtF,AAAI,GAAS,MACb,GAAI,EAAQ,IAAU,EACtB,MAAO,GAAI,GACb,CAEA,MAAO,EACT,EAUA,EAAO,UAAU,QAAU,UAAW,CACpC,GAAI,GAAU,KAAK,MAAM,iBAAiB,EAC1C,MAAK,GACD,MAAO,IAAY,SAAiB,CAAE,KAAM,EAAS,QAAS,IAAK,EAChE,EAFc,CAAE,KAAM,UAAW,QAAS,IAAK,CAGxD,EAUA,EAAO,UAAU,OAAS,UAAW,CACnC,GAAI,GAAS,KAAK,MAAM,gBAAgB,EACxC,AAAI,GAAK,CAAM,IAAM,UAAU,GAAS,CAAC,GACzC,GAAI,GAAU,KAAK,QAAQ,EAAE,KAC7B,MAAI,GAAO,MAEP,GAAQ,QAAQ,KAAK,EAAI,IAAI,GAAO,KAAO,OAC3C,EAAQ,QAAQ,SAAS,EAAI,IAAI,GAAO,KAAO,YAC5C,CACT,EAWA,EAAO,UAAU,UAAY,EAAO,MAAM,mBAAmB,EAW7D,EAAO,UAAU,SAAW,EAAO,MAAM,kBAAkB,EAQ3D,EAAO,UAAU,UAAY,EAAO,MAAM,WAAW,EAWrD,EAAO,UAAU,QAAU,EAAO,MAAM,SAAS,EAWjD,EAAO,UAAU,GAAK,EAAO,MAAM,YAAY,EAW/C,EAAO,UAAU,OAAS,EAAO,MAAM,QAAQ,EAgF/C,GAAQ,EAAO,SAAS,EASxB,YAAmB,EAAK,CACtB,MAAO,IAAM,CAAG,CAClB,CAEA,GAAO,QAAU,IC/hBjB,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAS,KAYb,YAAe,EAAY,EAAM,CAC/B,GAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,GAAO,EAAM,EAOrB,GAAM,UAAU,OAAS,UAAW,CAClC,MAAO,OACT,EAQA,GAAM,UAAU,KAAO,GAAM,UAAU,OAUvC,GAAM,UAAU,WAAa,UAAW,CACtC,MAAO,MAAK,MAAM,YAAY,GAAK,KAAK,MAAM,MAAM,CACtD,EAQA,GAAM,UAAU,KAAO,GAAM,UAAU,WAUvC,GAAM,UAAU,OAAS,UAAW,CAClC,MAAO,MAAK,MAAM,QAAQ,GAAK,KAAK,MAAM,IAAI,CAChD,EAQA,GAAM,UAAU,GAAK,GAAM,UAAU,OAErC,GAAO,QAAU,KC9EjB,mBACA,GAAO,QAAU,SAAkB,EAAQ,CACvC,MAAQ,aAAc,KAAK,CAAM,CACrC,ICHA,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAU,KACV,GAAU,KACV,GAAS,KAab,YAAe,EAAY,EAAM,CAC/B,GAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,GAAO,EAAM,EAOrB,GAAM,UAAU,OAAS,UAAW,CAClC,MAAO,OACT,EAQA,GAAM,UAAU,KAAO,GAAM,UAAU,OAUvC,GAAM,UAAU,QAAU,GAAO,MAAM,SAAS,EAQhD,GAAM,UAAU,QAAU,UAAW,CACnC,GAAI,GAAU,KAAK,MAAM,kBAAkB,GACtC,KAAK,MAAM,gBAAgB,GAC3B,KAAK,MAAM,sBAAsB,GACjC,KAAK,MAAM,oBAAoB,EAEpC,GAAI,EAAS,MAAO,IAAQ,CAAO,CACrC,EAQA,GAAM,UAAU,MAAQ,UAAW,CACjC,GAAI,GAAQ,KAAK,MAAM,cAAc,EACrC,GAAI,EAAO,MAAO,GAClB,GAAI,GAAU,KAAK,QAAQ,EAC3B,GAAI,GAAQ,CAAO,EAAG,MAAO,EAC/B,EA0BA,GAAM,UAAU,OAAS,SAAS,EAAS,CACzC,GAAI,GAAM,KAAK,WAAW,EACtB,EAAK,KAAK,QAAQ,EACtB,EAAU,GAAW,CAAC,EAElB,GAAI,GAAI,GAAK,GAEjB,OAAS,KAAS,GAAS,CACzB,GAAI,GAAQ,KAAK,IAAU,KAAO,KAAK,MAAM,UAAY,CAAK,EAAI,KAAK,GAAO,EAC9E,AAAI,GAAS,MACb,GAAI,EAAQ,IAAU,EACtB,MAAO,GAAI,GACb,CAEA,MAAO,EACT,EAWA,GAAM,UAAU,KAAO,GAAO,MAAM,aAAa,EAWjD,GAAM,UAAU,SAAW,GAAO,MAAM,iBAAiB,EAWzD,GAAM,UAAU,UAAY,GAAO,MAAM,kBAAkB,EAQ3D,GAAM,UAAU,WAAa,UAAW,CAEtC,MAAO,MAAK,MAAM,QAAQ,GAAK,KAAK,MAAM,YAAY,GAAK,CAAC,CAC9D,EAEA,GAAO,QAAU,KCpKjB,sBAAU,GAAO,QAAU,GAE3B,YAAc,EAAI,CAChB,MAAI,GAAI,KAAa,EAAI,KAAK,EACvB,GAAQ,MAAM,GAAQ,KAAK,CAAG,CAAC,CACxC,CAEA,GAAQ,KAAO,SAAS,EAAI,CAC1B,MAAI,GAAI,SAAiB,EAAI,SAAS,EAE/B,EAAI,QAAQ,SAAU,EAAE,CACjC,EAEA,GAAQ,MAAQ,SAAS,EAAI,CAC3B,GAAI,EAAI,UAAW,MAAO,GAAI,UAAU,EAIxC,OAFI,GAAqB,KACrB,EAAI,EAAI,OACL,EAAmB,KAAK,EAAI,OAAO,EAAE,CAAC,CAAC,GAAE,CAEhD,MAAO,GAAI,MAAM,EAAG,EAAI,CAAC,CAC3B,ICrBA,gCAEA,GAAI,IAAS,KACT,GAAM,KACN,GAAU,KAAmB,QAC7B,GAAU,KACV,GAAU,KACV,GAAO,KACP,GAAO,KAAmB,KAa9B,WAAkB,EAAY,EAAM,CAClC,GAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,EAAU,EAAM,EAOxB,EAAS,UAAU,OAAS,UAAW,CACrC,MAAO,UACT,EAQA,EAAS,UAAU,KAAO,EAAS,UAAU,OA0B7C,EAAS,UAAU,OAAS,SAAS,EAAS,CAC5C,GAAI,GAAM,KAAK,MAAM,QAAQ,GAAK,CAAC,EAC/B,EAAK,KAAK,OAAO,EACrB,EAAU,GAAW,CAAC,EAElB,GAAI,GAAI,GAAK,GAEjB,OAAS,KAAS,GAAS,CACzB,GAAI,GAAQ,KAAK,IAAU,KAAO,KAAK,MAAM,UAAY,CAAK,EAAI,KAAK,GAAO,EAC9E,AAAI,GAAS,MACb,GAAI,EAAQ,IAAU,EAClB,IAAU,EAAQ,IAAQ,MAAO,GAAI,GAC3C,CAEA,MAAO,EACT,EAWA,EAAS,UAAU,MAAQ,UAAW,CACpC,GAAI,GAAQ,KAAK,MAAM,cAAc,EACrC,GAAI,EAAO,MAAO,GAElB,GAAI,GAAS,KAAK,OAAO,EACzB,GAAI,GAAQ,CAAM,EAAG,MAAO,EAC9B,EAQA,EAAS,UAAU,QAAU,UAAW,CACtC,GAAI,GAAU,KAAK,MAAM,gBAAgB,GAAK,KAAK,MAAM,kBAAkB,EAC3E,GAAI,EAAS,MAAO,IAAQ,CAAO,CACrC,EAQA,EAAS,UAAU,eAAiB,UAAW,CAC7C,GAAI,GAAU,KAAK,MAAM,wBAAwB,GAAK,KAAK,MAAM,0BAA0B,EAE3F,GAAI,EACF,MAAO,IAAQ,CAAO,CAE1B,EAUA,EAAS,UAAU,YAAc,UAAW,CAC1C,MAAO,MAAK,MAAM,qBAAqB,CACzC,EAWA,EAAS,UAAU,KAAO,UAAW,CACnC,GAAI,GAAO,KAAK,MAAM,aAAa,EACnC,GAAI,MAAO,IAAS,SAClB,MAAO,IAAK,CAAI,EAGlB,GAAI,GAAY,KAAK,UAAU,EAC3B,EAAW,KAAK,SAAS,EAC7B,GAAI,GAAa,EACf,MAAO,IAAK,EAAY,IAAM,CAAQ,CAE1C,EAcA,EAAS,UAAU,UAAY,UAAW,CACxC,GAAI,GAAY,KAAK,MAAM,kBAAkB,EAC7C,GAAI,MAAO,IAAc,SACvB,MAAO,IAAK,CAAS,EAGvB,GAAI,GAAO,KAAK,MAAM,aAAa,EACnC,GAAI,MAAO,IAAS,SAClB,MAAO,IAAK,CAAI,EAAE,MAAM,GAAG,EAAE,EAEjC,EAcA,EAAS,UAAU,SAAW,UAAW,CACvC,GAAI,GAAW,KAAK,MAAM,iBAAiB,EAC3C,GAAI,MAAO,IAAa,SACtB,MAAO,IAAK,CAAQ,EAGtB,GAAI,GAAO,KAAK,MAAM,aAAa,EACnC,GAAI,MAAO,IAAS,SAIpB,IAAI,GAAQ,GAAK,CAAI,EAAE,QAAQ,GAAG,EAClC,GAAI,IAAU,GAId,MAAO,IAAK,EAAK,OAAO,EAAQ,CAAC,CAAC,EACpC,EAWA,EAAS,UAAU,IAAM,UAAW,CAClC,MAAO,MAAK,OAAO,GAAK,KAAK,SAAS,GAAK,KAAK,MAAM,CACxD,EAUA,EAAS,UAAU,YAAc,UAAW,CAC1C,MAAO,MAAK,MAAM,oBAAoB,GAAK,KAAK,MAAM,mBAAmB,CAC3E,EAQA,EAAS,UAAU,IAAM,UAAW,CAClC,GAAI,GAAO,KAAK,SAAS,EACrB,EAAM,GAAI,KAAK,OAAO,EAAG,KAAK,EAClC,GAAI,GAAO,KAAM,MAAO,GACxB,GAAI,GAAK,CAAI,IAAM,OACnB,IAAI,GAAM,GAAI,MACd,MAAO,GAAI,YAAY,EAAI,EAAK,YAAY,EAC9C,EAWA,EAAS,UAAU,OAAS,UAAW,CACrC,GAAI,GAAS,KAAK,OAAO,EACzB,MAAO,IAAI,EAAQ,QAAQ,GAAK,GAAI,EAAQ,UAAU,GAAK,GAAI,EAAQ,WAAW,CACpF,EAUA,EAAS,UAAU,SAAW,UAAW,CACvC,GAAI,GAAS,KAAK,OAAO,EACzB,MAAO,IAAI,EAAQ,UAAU,GAAK,GAAI,EAAQ,UAAU,CAC1D,EAWA,EAAS,UAAU,SAAW,GAAO,MAAM,iBAAiB,EAY5D,EAAS,UAAU,QAAU,GAAO,IAAI,gBAAgB,EAYxD,EAAS,UAAU,SAAW,GAAO,MAAM,gBAAgB,EAY3D,EAAS,UAAU,MAAQ,GAAO,IAAI,cAAc,EAYpD,EAAS,UAAU,OAAS,GAAO,MAAM,cAAc,EAWvD,EAAS,UAAU,QAAU,GAAO,MAAM,gBAAgB,EAW1D,EAAS,UAAU,OAAS,GAAO,MAAM,eAAe,EAaxD,EAAS,UAAU,SAAW,GAAO,MAAM,iBAAiB,EAE5D,GAAO,QAAU,ICzXjB,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAO,KAAmB,KAC1B,EAAS,KACT,GAAW,KACX,GAAU,KACV,GAAM,KAcV,WAAe,EAAY,EAAM,CAC/B,EAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,EAAO,CAAM,EAOrB,EAAM,UAAU,OAAS,UAAW,CAClC,MAAO,OACT,EAQA,EAAM,UAAU,KAAO,EAAM,UAAU,OAWvC,EAAM,UAAU,MAAQ,EAAO,MAAM,OAAO,EAW5C,EAAM,UAAU,MAAQ,EAAO,MAAM,kBAAkB,EAWvD,EAAM,UAAU,SAAW,EAAO,MAAM,qBAAqB,EAW7D,EAAM,UAAU,GAAK,EAAO,MAAM,eAAe,EAUjD,EAAM,UAAU,UAAY,UAAW,CACrC,MAAO,MAAK,MAAM,uBAAuB,GAAK,KAAK,MAAM,sBAAsB,CACjF,EAUA,EAAM,UAAU,YAAc,UAAW,CACvC,MAAO,MAAK,MAAM,yBAAyB,GAAK,KAAK,MAAM,wBAAwB,CACrF,EAUA,EAAM,UAAU,OAAS,UAAW,CAClC,MAAO,MAAK,MAAM,oBAAoB,GAAK,KAAK,MAAM,mBAAmB,CAC3E,EAUA,EAAM,UAAU,WAAa,UAAW,CACtC,MAAO,MAAK,MAAM,wBAAwB,GAAK,KAAK,MAAM,uBAAuB,CACnF,EAUA,EAAM,UAAU,UAAY,UAAW,CACrC,MAAO,MAAK,MAAM,uBAAuB,GAAK,KAAK,MAAM,sBAAsB,CACjF,EAUA,EAAM,UAAU,SAAW,UAAW,CACpC,MAAO,MAAK,MAAM,sBAAsB,GAAK,KAAK,MAAM,qBAAqB,CAC/E,EAUA,EAAM,UAAU,WAAa,UAAW,CACtC,MAAO,MAAK,MAAM,wBAAwB,GAAK,KAAK,MAAM,uBAAuB,CACnF,EAUA,EAAM,UAAU,SAAW,UAAW,CACpC,MAAO,MAAK,MAAM,sBAAsB,GAAK,KAAK,MAAM,qBAAqB,CAC/E,EAUA,EAAM,UAAU,QAAU,UAAW,CAEnC,MAAO,MAAK,MAAM,eAAe,GAC5B,KAAK,MAAM,qBAAqB,GAChC,KAAK,MAAM,oBAAoB,CACtC,EAWA,EAAM,UAAU,IAAM,EAAO,MAAM,gBAAgB,EAWnD,EAAM,UAAU,IAAM,EAAO,MAAM,gBAAgB,EAWnD,EAAM,UAAU,KAAO,EAAO,MAAM,iBAAiB,EAWrD,EAAM,UAAU,MAAQ,EAAO,MAAM,kBAAkB,EAWvD,EAAM,UAAU,MAAQ,EAAO,MAAM,kBAAkB,EAWvD,EAAM,UAAU,OAAS,EAAO,MAAM,mBAAmB,EAWzD,EAAM,UAAU,OAAS,EAAO,MAAM,mBAAmB,EAWzD,EAAM,UAAU,SAAW,EAAO,MAAM,qBAAqB,EAW7D,EAAM,UAAU,SAAW,EAAO,MAAM,qBAAqB,EAU7D,EAAM,UAAU,eAAiB,UAAW,CAC1C,MAAO,MAAK,MAAM,4BAA4B,GAAK,KAAK,MAAM,2BAA2B,CAC3F,EAUA,EAAM,UAAU,cAAgB,UAAW,CACzC,MAAO,MAAK,MAAM,2BAA2B,GAAK,KAAK,MAAM,0BAA0B,CACzF,EAWA,EAAM,UAAU,YAAc,EAAO,MAAM,wBAAwB,EAYnE,EAAM,UAAU,KAAO,EAAO,MAAM,iBAAiB,EAarD,EAAM,UAAU,SAAW,UAAW,CACpC,GAAI,GAAW,GAAI,KAAK,WAAW,EAAG,UAAU,EAC5C,EAAQ,KAAK,MAAM,GAAK,KAAK,QAAQ,EAEzC,GAAI,EAAU,MAAO,GACrB,GAAI,CAAC,EAAO,MAAO,GAEnB,GAAI,KAAK,MAAM,EAAG,CAChB,GAAI,GAAI,KAAK,IAAI,EACjB,AAAI,GAAG,IAAS,GAChB,EAAI,KAAK,SAAS,EACd,GAAG,IAAS,GAChB,EAAI,KAAK,SAAS,EACd,GAAG,IAAS,EAClB,CAEA,MAAO,EACT,EAQA,EAAM,UAAU,SAAW,UAAW,CACpC,GAAI,GAAQ,KAAK,WAAW,EACxB,EAAW,GAAI,EAAO,UAAU,EACpC,MAAO,IAAK,CAAQ,IAAM,QAAU,EAAW,CAAC,CAClD,EAQA,EAAM,UAAU,SAAW,UAAW,CACpC,GAAI,GAAQ,KAAK,IAAI,YAAc,CAAC,EACpC,MAAO,GAAM,UAAY,CAC3B,EAQA,EAAM,UAAU,SAAW,UAAW,CACpC,GAAI,GAAQ,KAAK,IAAI,YAAc,CAAC,EACpC,MAAO,GAAM,UAAY,KAC3B,EAWA,EAAM,UAAU,SAAW,UAAW,CAEpC,MAAO,MAAK,MAAM,sBAAsB,GACnC,KAAK,MAAM,uBAAuB,GAClC,KAAK,MAAM,qBAAqB,CACvC,EAWA,EAAM,UAAU,MAAQ,EAAO,MAAM,eAAe,EAyBpD,EAAM,UAAU,WAAa,SAAS,EAAS,CAC7C,GAAI,GAAM,KAAK,MAAM,YAAY,GAAK,CAAC,EACvC,EAAU,GAAW,CAAC,EAEtB,OAAS,KAAS,GAAS,CACzB,GAAI,GAAQ,KAAK,IAAU,KAAO,KAAK,MAAM,cAAgB,CAAK,EAAI,KAAK,GAAO,EAClF,AAAI,GAAS,MACb,GAAI,EAAQ,IAAU,EACtB,MAAO,GAAI,GACb,CAEA,MAAO,EACT,EAWA,EAAM,UAAU,SAAW,UAAW,CACpC,MAAO,MAAK,MAAM,iBAAiB,GAC9B,KAAK,MAAM,qBAAqB,GAChC,KAAK,OAAO,GACZ,KAAK,UAAU,CACtB,EAYA,EAAM,UAAU,MAAQ,UAAW,CACjC,GAAI,GAAQ,KAAK,MAAM,cAAc,GAChC,KAAK,MAAM,kBAAkB,GAC7B,KAAK,MAAM,sBAAsB,EACtC,GAAI,EAAO,MAAO,GAElB,GAAI,GAAS,KAAK,OAAO,EACzB,GAAI,GAAQ,CAAM,EAAG,MAAO,EAC9B,EAcA,EAAM,UAAU,QAAU,UAAW,CACnC,GAAI,GAAU,KAAK,MAAM,oBAAoB,EACzC,EAAQ,KAAK,MAAM,EACnB,EAAuB,kEAG3B,MAAI,CAAC,GAAW,GAAS,EAAM,MAAM,CAAoB,GACvD,GAAU,KAAK,MAAM,kBAAkB,GAGlC,GAAS,CAAO,CACzB,EASA,EAAM,UAAU,MAAQ,UAAW,CACjC,GAAI,GAAU,KAAK,QAAQ,EAC3B,MAAO,OAAO,IAAY,SAAW,KAAK,MAAM,GAAK,EAAI,EAAU,GACrE,EAWA,EAAM,UAAU,SAAW,UAAW,CAEpC,GAAI,GAAO,KAAK,KAAK,EACrB,SAAK,OAAS,KAAK,OAAO,EACnB,GAAI,IAAS,EAAM,KAAK,IAAI,CACrC,EASA,YAAkB,EAAK,CACrB,GAAI,EAAC,EACL,IAAI,MAAO,IAAQ,SACjB,MAAO,GAET,GAAI,MAAO,IAAQ,UAInB,GAAM,EAAI,QAAQ,MAAO,EAAE,EAC3B,EAAM,WAAW,CAAG,EAEhB,CAAC,MAAM,CAAG,GACZ,MAAO,GAEX,CAEA,GAAO,QAAU,IC1kBjB,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAS,KACT,GAAQ,KACR,GAAU,KAad,YAAc,EAAY,EAAM,CAC9B,GAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,GAAM,EAAM,EAOpB,GAAK,UAAU,OAAS,UAAW,CACjC,MAAO,MACT,EAQA,GAAK,UAAU,KAAO,GAAK,UAAU,OAUrC,GAAK,UAAU,SAAW,GAAO,MAAM,UAAU,EAUjD,GAAK,UAAU,KAAO,GAAO,MAAM,MAAM,EAUzC,GAAK,UAAU,MAAQ,GAAO,MAAM,kBAAkB,EAUtD,GAAK,UAAU,KAAO,GAAO,MAAM,iBAAiB,EAUpD,GAAK,UAAU,IAAM,GAAO,MAAM,gBAAgB,EAWlD,GAAK,UAAU,SAAW,UAAW,CACnC,MAAO,MAAK,MAAM,sBAAsB,GACnC,KAAK,MAAM,uBAAuB,GAClC,KAAK,MAAM,qBAAqB,CACvC,EA0BA,GAAK,UAAU,WAAa,SAAS,EAAS,CAC5C,GAAI,GAAQ,KAAK,MAAM,YAAY,GAAK,CAAC,EACrC,EAAW,KAAK,SAAS,EACzB,EAAO,KAAK,KAAK,EACrB,EAAU,GAAW,CAAC,EAElB,GAAU,GAAM,SAAW,GAC3B,GAAM,GAAM,KAAO,GAEvB,OAAS,KAAS,GAAS,CACzB,GAAI,GAAQ,KAAK,IAAU,KACvB,KAAK,MAAM,cAAgB,CAAK,EAChC,KAAK,GAAO,EAChB,AAAI,GAAS,MACb,GAAM,EAAQ,IAAU,EACpB,IAAU,EAAQ,IAAQ,MAAO,GAAM,GAC7C,CAEA,MAAO,EACT,EAWA,GAAK,UAAU,MAAQ,UAAW,CAChC,GAAI,GAAQ,KAAK,MAAM,sBAAsB,GAAK,KAAK,MAAM,kBAAkB,EAC/E,GAAI,EAAO,MAAO,GAElB,GAAI,GAAS,KAAK,OAAO,EACzB,GAAI,GAAQ,CAAM,EAAG,MAAO,EAC9B,EAWA,GAAK,UAAU,SAAW,UAAW,CACnC,GAAI,GAAW,KAAK,SAAS,EACzB,EAAO,KAAK,KAAK,EACrB,MAAO,IAAQ,EACX,EAAW,IAAM,EACjB,CACN,EASA,GAAK,UAAU,MAAQ,SAAS,EAAM,CACpC,MAAO,GACH,UAAY,EAAO,QACnB,eACN,EASA,GAAK,UAAU,MAAQ,SAAS,EAAM,CACpC,GAAI,GAAO,KAAK,KAAK,EACrB,SAAK,MAAQ,KAAK,MAAM,CAAI,EAC5B,EAAK,UAAY,KAAK,UAAU,EAChC,EAAK,WAAa,KAAK,WAAW,EAC3B,GAAI,IAAM,EAAM,KAAK,IAAI,CAClC,EAEA,GAAO,QAAU,KCrNjB,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAO,KACP,GAAQ,KAgBZ,YAAgB,EAAY,EAAM,CAChC,GAAK,KAAK,KAAM,EAAY,CAAI,CAClC,CAEA,GAAQ,GAAQ,EAAI,EAOpB,GAAO,UAAU,OAAS,UAAW,CACnC,MAAO,QACT,EAQA,GAAO,UAAU,KAAO,GAAO,UAAU,OASzC,GAAO,UAAU,MAAQ,SAAS,EAAM,CACtC,MAAO,GAAO,UAAY,EAAO,UAAY,iBAC/C,EASA,GAAO,UAAU,MAAQ,SAAS,EAAM,CACtC,GAAI,GAAO,KAAK,KAAK,EACrB,SAAK,MAAQ,KAAK,MAAM,CAAI,EAC5B,EAAK,UAAY,KAAK,UAAU,EAChC,EAAK,WAAa,KAAK,WAAW,EAC3B,GAAI,IAAM,EAAM,KAAK,IAAI,CAClC,EAEA,GAAO,QAAU,KCrEjB,gCAEA,GAAI,IAAU,KAAmB,QAC7B,GAAS,KAab,YAAgB,EAAY,EAAM,CAChC,GAAO,KAAK,KAAM,EAAY,CAAI,CACpC,CAEA,GAAQ,GAAQ,EAAM,EAOtB,GAAO,UAAU,KAAO,UAAW,CACjC,MAAO,QACT,EAEA,GAAO,QAAU,KC/BjB,gCAEA,GAAI,IAAS,KAEb,GAAO,MAAQ,KACf,GAAO,MAAQ,KACf,GAAO,SAAW,KAClB,GAAO,MAAQ,KACf,GAAO,KAAO,KACd,GAAO,OAAS,KAChB,GAAO,OAAS,KAEhB,GAAO,QAAU,KCZjB,mBAKA,AAAI,MAAO,IAAW,KACpB,IAAO,QAAU,IASnB,YAAiB,EAAK,CACpB,GAAI,EAAK,MAAO,IAAM,CAAG,CAC3B,CAUA,YAAe,EAAK,CAClB,OAAS,KAAO,IAAQ,UACtB,EAAI,GAAO,GAAQ,UAAU,GAE/B,MAAO,EACT,CAWA,GAAQ,UAAU,GAClB,GAAQ,UAAU,iBAAmB,SAAS,EAAO,EAAG,CACtD,YAAK,WAAa,KAAK,YAAc,CAAC,EACrC,MAAK,WAAW,IAAM,GAAS,KAAK,WAAW,IAAM,IAAU,CAAC,GAC9D,KAAK,CAAE,EACH,IACT,EAYA,GAAQ,UAAU,KAAO,SAAS,EAAO,EAAG,CAC1C,YAAc,CACZ,KAAK,IAAI,EAAO,CAAE,EAClB,EAAG,MAAM,KAAM,SAAS,CAC1B,CAEA,SAAG,GAAK,EACR,KAAK,GAAG,EAAO,CAAE,EACV,IACT,EAYA,GAAQ,UAAU,IAClB,GAAQ,UAAU,eAClB,GAAQ,UAAU,mBAClB,GAAQ,UAAU,oBAAsB,SAAS,EAAO,EAAG,CAIzD,GAHA,KAAK,WAAa,KAAK,YAAc,CAAC,EAGlC,AAAK,UAAU,QAAf,EACF,YAAK,WAAa,CAAC,EACZ,KAIT,GAAI,GAAY,KAAK,WAAW,IAAM,GACtC,GAAI,CAAC,EAAW,MAAO,MAGvB,GAAI,AAAK,UAAU,QAAf,EACF,aAAO,MAAK,WAAW,IAAM,GACtB,KAKT,OADI,GACK,EAAI,EAAG,EAAI,EAAU,OAAQ,IAEpC,GADA,EAAK,EAAU,GACX,IAAO,GAAM,EAAG,KAAO,EAAI,CAC7B,EAAU,OAAO,EAAG,CAAC,EACrB,KACF,CAKF,MAAI,GAAU,SAAW,GACvB,MAAO,MAAK,WAAW,IAAM,GAGxB,IACT,EAUA,GAAQ,UAAU,KAAO,SAAS,EAAM,CACtC,KAAK,WAAa,KAAK,YAAc,CAAC,EAKtC,OAHI,GAAO,GAAI,OAAM,UAAU,OAAS,CAAC,EACrC,EAAY,KAAK,WAAW,IAAM,GAE7B,EAAI,EAAG,EAAI,UAAU,OAAQ,IACpC,EAAK,EAAI,GAAK,UAAU,GAG1B,GAAI,EAAW,CACb,EAAY,EAAU,MAAM,CAAC,EAC7B,OAAS,GAAI,EAAG,EAAM,EAAU,OAAQ,EAAI,EAAK,EAAE,EACjD,EAAU,GAAG,MAAM,KAAM,CAAI,CAEjC,CAEA,MAAO,KACT,EAUA,GAAQ,UAAU,UAAY,SAAS,EAAM,CAC3C,YAAK,WAAa,KAAK,YAAc,CAAC,EAC/B,KAAK,WAAW,IAAM,IAAU,CAAC,CAC1C,EAUA,GAAQ,UAAU,aAAe,SAAS,EAAM,CAC9C,MAAO,CAAC,CAAE,KAAK,UAAU,CAAK,EAAE,MAClC,IC9KA,gCACA,GAAI,IAAS,KACb,GAAO,QAAQ,sBAAwB,UAAiC,CACpE,GAAI,GAAQ,GAAgB,IAAI,EAChC,KAAK,iBAAmB,SAAU,EAAQ,EAAc,EAAU,CAC9D,MAAO,GAAM,SAAU,EAAI,EAAS,EAAM,CACtC,EAAG,CACC,aAAc,EACd,KAAM,EACN,QAAS,CACb,CAAC,CACL,EAAG,EAAQ,CAAQ,CACvB,CACJ,EACA,GAAO,QAAQ,2BAA6B,UAAsC,CAC9E,GAAI,GAAQ,GAAgB,IAAI,EAChC,KAAK,iBAAmB,SAAU,EAAQ,EAAa,EAAU,CAC7D,MAAO,GAAM,SAAU,EAAI,EAAS,EAAM,CACtC,EAAG,EAAS,EAAa,CAAI,CACjC,EAAG,EAAQ,CAAQ,CACvB,CACJ,EACA,GAAO,QAAQ,2BAA6B,UAAsC,CAC9E,GAAI,GAAQ,GAAgB,IAAI,EAChC,KAAK,iBAAmB,SAAU,EAAQ,EAAa,EAAU,CAC7D,MAAO,GAAM,SAAU,EAAI,EAAS,EAAM,CACtC,EAAG,CAAE,QAAS,EAAS,YAAa,EAAa,KAAM,CAAK,CAAC,CACjE,EAAG,EAAQ,CAAQ,CACvB,CACJ,EAEA,YAAyB,EAAM,CAC3B,GAAI,GAAc,CAAC,EAEnB,SAAK,eAAiB,UAAY,CAC9B,MAAO,GAAY,MAAM,CAC7B,EACA,EAAK,IAAM,SAAU,EAAY,CAC7B,GAAI,MAAO,IAAe,WACtB,KAAM,IAAI,OAAM,0CAA0C,EAE9D,GAAI,EAAY,QAAQ,CAAU,IAAM,GACpC,KAAM,IAAI,OAAM,kCAAkC,EACtD,EAAY,KAAK,CAAU,CAC/B,EAEO,SAA0B,EAAK,EAAQ,EAAU,CACpD,GAAI,MAAO,IAAW,SAClB,KAAM,IAAI,OAAM,4CAA4C,EAChE,GAAI,MAAO,IAAa,WACpB,KAAM,IAAI,OAAM,+CAA+C,EAEnE,GAAI,GAAqB,EAAY,MAAM,EAC3C,EAAmB,KAAK,CAAQ,EAChC,GAAa,EAAK,EAAQ,EAAoB,CAAC,CACnD,CACJ,CAEA,YAAsB,EAAK,EAAS,EAAa,EAAO,CAEpD,GAAI,IAAY,KAAM,CAClB,EAAY,EAAY,OAAS,GAAG,IAAI,EACxC,MACJ,CAEA,AAAM,YAAmB,KACrB,GAAU,GAAI,IAAO,CAAO,GAEhC,GAAI,GAAK,EAAY,GACrB,AAAI,GAEA,CAAI,EAAY,EAAQ,GACpB,EAAI,EAAI,EAAS,SAAU,EAAQ,CAC/B,GAAa,EAAK,EAAQ,EAAa,EAAE,CAAK,CAClD,CAAC,EAGD,EAAG,CAAO,EAGtB,CACA,GAAO,QAAQ,gBAAkB,KCjFjC,mBAIA,GAAI,IAAQ,CAAC,EAAE,MAWf,GAAO,QAAU,SAAS,EAAK,EAAG,CAEhC,GADI,AAAY,MAAO,IAAnB,UAAuB,GAAK,EAAI,IAChC,AAAc,MAAO,IAArB,WAAyB,KAAM,IAAI,OAAM,4BAA4B,EACzE,GAAI,GAAO,GAAM,KAAK,UAAW,CAAC,EAClC,MAAO,WAAU,CACf,MAAO,GAAG,MAAM,EAAK,EAAK,OAAO,GAAM,KAAK,SAAS,CAAC,CAAC,CACzD,CACF,ICtBA,gCAEA,GAAI,IAAO,KAEX,YAAiB,EAAK,CAEpB,OAAS,KAAO,GAAK,CACnB,GAAI,GAAM,EAAI,GACd,AAAI,MAAO,IAAQ,YACjB,GAAI,GAAO,GAAK,EAAK,EAAI,EAAI,EAEjC,CACA,MAAO,EACT,CAEA,GAAO,QAAU,KCfjB,gCACA,GAAI,IAAO,KA0BP,GAAQ,WAAe,EAAK,CAC5B,GAAI,GAAI,GAAK,CAAG,EACZ,EACJ,GAAI,IAAM,SAAU,CAChB,EAAO,CAAC,EACR,OAAS,KAAO,GACZ,AAAI,EAAI,eAAe,CAAG,GACtB,GAAK,GAAO,EAAM,EAAI,EAAI,GAGlC,MAAO,EACX,CACA,GAAI,IAAM,QAAS,CACf,EAAO,GAAI,OAAM,EAAI,MAAM,EAC3B,OAAS,GAAI,EAAG,EAAI,EAAI,OAAQ,EAAI,EAAG,IACnC,EAAK,GAAK,EAAM,EAAI,EAAE,EAE1B,MAAO,EACX,CACA,GAAI,IAAM,SAAU,CAEhB,GAAI,GAAQ,GACZ,UAAS,EAAI,UAAY,IAAM,GAC/B,GAAS,EAAI,OAAS,IAAM,GAC5B,GAAS,EAAI,WAAa,IAAM,GACzB,GAAI,QAAO,EAAI,OAAQ,CAAK,CACvC,CACA,MAAI,KAAM,OACC,GAAI,MAAK,EAAI,QAAQ,CAAC,EAG1B,CACX,EACA,GAAO,QAAU,KC5DjB,gCAEA,GAAI,IAAS,OAAO,UAAU,eAC1B,GAAQ,OAAO,UAAU,SACzB,GAAiB,OAAO,eACxB,GAAO,OAAO,yBAEd,GAAU,SAAiB,EAAK,CACnC,MAAI,OAAO,OAAM,SAAY,WACrB,MAAM,QAAQ,CAAG,EAGlB,GAAM,KAAK,CAAG,IAAM,gBAC5B,EAEI,GAAgB,SAAuB,EAAK,CAC/C,GAAI,CAAC,GAAO,GAAM,KAAK,CAAG,IAAM,kBAC/B,MAAO,GAGR,GAAI,GAAoB,GAAO,KAAK,EAAK,aAAa,EAClD,EAAmB,EAAI,aAAe,EAAI,YAAY,WAAa,GAAO,KAAK,EAAI,YAAY,UAAW,eAAe,EAE7H,GAAI,EAAI,aAAe,CAAC,GAAqB,CAAC,EAC7C,MAAO,GAKR,GAAI,GACJ,IAAK,IAAO,GAAK,CAEjB,MAAO,OAAO,GAAQ,KAAe,GAAO,KAAK,EAAK,CAAG,CAC1D,EAGI,GAAc,SAAqB,EAAQ,EAAS,CACvD,AAAI,IAAkB,EAAQ,OAAS,YACtC,GAAe,EAAQ,EAAQ,KAAM,CACpC,WAAY,GACZ,aAAc,GACd,MAAO,EAAQ,SACf,SAAU,EACX,CAAC,EAED,EAAO,EAAQ,MAAQ,EAAQ,QAEjC,EAGI,GAAc,SAAqB,EAAK,EAAM,CACjD,GAAI,IAAS,YACZ,GAAK,GAAO,KAAK,EAAK,CAAI,GAEnB,GAAI,GAGV,MAAO,IAAK,EAAK,CAAI,EAAE,UAJvB,QAQF,MAAO,GAAI,EACZ,EAEA,GAAO,QAAU,YAAkB,CAClC,GAAI,GAAS,EAAM,EAAK,EAAM,EAAa,EACvC,EAAS,UAAU,GACnB,EAAI,EACJ,EAAS,UAAU,OACnB,EAAO,GAaX,IAVI,MAAO,IAAW,WACrB,GAAO,EACP,EAAS,UAAU,IAAM,CAAC,EAE1B,EAAI,GAED,IAAU,MAAS,MAAO,IAAW,UAAY,MAAO,IAAW,aACtE,GAAS,CAAC,GAGJ,EAAI,EAAQ,EAAE,EAGpB,GAFA,EAAU,UAAU,GAEhB,GAAW,KAEd,IAAK,IAAQ,GACZ,EAAM,GAAY,EAAQ,CAAI,EAC9B,EAAO,GAAY,EAAS,CAAI,EAG5B,IAAW,GAEd,CAAI,GAAQ,GAAS,IAAc,CAAI,GAAM,GAAc,GAAQ,CAAI,IACtE,CAAI,EACH,GAAc,GACd,EAAQ,GAAO,GAAQ,CAAG,EAAI,EAAM,CAAC,GAErC,EAAQ,GAAO,GAAc,CAAG,EAAI,EAAM,CAAC,EAI5C,GAAY,EAAQ,CAAE,KAAM,EAAM,SAAU,EAAO,EAAM,EAAO,CAAI,CAAE,CAAC,GAG7D,MAAO,GAAS,KAC1B,GAAY,EAAQ,CAAE,KAAM,EAAM,SAAU,CAAK,CAAC,GAQvD,MAAO,EACR,ICpHA,mBAIA,GAAI,IAAI,IACJ,GAAI,GAAI,GACR,GAAI,GAAI,GACR,GAAI,GAAI,GACR,GAAI,GAAI,OAgBZ,GAAO,QAAU,SAAS,EAAK,EAAS,CACtC,EAAU,GAAW,CAAC,EACtB,GAAI,GAAO,MAAO,GAClB,GAAI,IAAS,UAAY,EAAI,OAAS,EACpC,MAAO,IAAM,CAAG,EACX,GAAI,IAAS,UAAY,MAAM,CAAG,IAAM,GAC7C,MAAO,GAAQ,KAAO,GAAQ,CAAG,EAAI,GAAS,CAAG,EAEnD,KAAM,IAAI,OACR,wDACE,KAAK,UAAU,CAAG,CACtB,CACF,EAUA,YAAe,EAAK,CAElB,GADA,EAAM,OAAO,CAAG,EACZ,IAAI,OAAS,KAGjB,IAAI,GAAQ,wHAAwH,KAClI,CACF,EACA,GAAI,EAAC,EAGL,IAAI,GAAI,WAAW,EAAM,EAAE,EACvB,EAAQ,GAAM,IAAM,MAAM,YAAY,EAC1C,OAAQ,OACD,YACA,WACA,UACA,SACA,IACH,MAAO,GAAI,OACR,WACA,UACA,IACH,MAAO,GAAI,OACR,YACA,WACA,UACA,SACA,IACH,MAAO,GAAI,OACR,cACA,aACA,WACA,UACA,IACH,MAAO,GAAI,OACR,cACA,aACA,WACA,UACA,IACH,MAAO,GAAI,OACR,mBACA,kBACA,YACA,WACA,KACH,MAAO,WAEP,SAEN,CAUA,YAAkB,EAAI,CACpB,MAAI,IAAM,GACD,KAAK,MAAM,EAAK,EAAC,EAAI,IAE1B,GAAM,GACD,KAAK,MAAM,EAAK,EAAC,EAAI,IAE1B,GAAM,GACD,KAAK,MAAM,EAAK,EAAC,EAAI,IAE1B,GAAM,GACD,KAAK,MAAM,EAAK,EAAC,EAAI,IAEvB,EAAK,IACd,CAUA,YAAiB,EAAI,CACnB,MAAO,IAAO,EAAI,GAAG,KAAK,GACxB,GAAO,EAAI,GAAG,MAAM,GACpB,GAAO,EAAI,GAAG,QAAQ,GACtB,GAAO,EAAI,GAAG,QAAQ,GACtB,EAAK,KACT,CAMA,YAAgB,EAAI,EAAG,EAAM,CAC3B,GAAI,IAAK,GAGT,MAAI,GAAK,EAAI,IACJ,KAAK,MAAM,EAAK,CAAC,EAAI,IAAM,EAE7B,KAAK,KAAK,EAAK,CAAC,EAAI,IAAM,EAAO,GAC1C,ICvJA,kBAQA,EAAU,GAAO,QAAU,GAAY,MAAQ,GAAY,QAAa,GACxE,EAAQ,OAAS,GACjB,EAAQ,QAAU,GAClB,EAAQ,OAAS,GACjB,EAAQ,QAAU,GAClB,EAAQ,SAAW,KAMnB,EAAQ,MAAQ,CAAC,EACjB,EAAQ,MAAQ,CAAC,EAQjB,EAAQ,WAAa,CAAC,EAMtB,GAAI,IASJ,YAAqB,EAAW,CAC9B,GAAI,GAAO,EAAG,EAEd,IAAK,IAAK,GACR,EAAU,IAAQ,GAAK,EAAQ,EAAU,WAAW,CAAC,EACrD,GAAQ,EAGV,MAAO,GAAQ,OAAO,KAAK,IAAI,CAAI,EAAI,EAAQ,OAAO,OACxD,CAUA,YAAqB,EAAW,CAE9B,YAAiB,CAEf,GAAI,EAAC,EAAM,QAEX,IAAI,GAAO,EAGP,EAAO,CAAC,GAAI,MACZ,EAAK,EAAQ,KAAY,GAC7B,EAAK,KAAO,EACZ,EAAK,KAAO,GACZ,EAAK,KAAO,EACZ,GAAW,EAIX,OADI,GAAO,GAAI,OAAM,UAAU,MAAM,EAC5B,EAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,EAAK,GAAK,UAAU,GAGtB,EAAK,GAAK,EAAQ,OAAO,EAAK,EAAE,EAE5B,AAAa,MAAO,GAAK,IAAzB,UAEF,EAAK,QAAQ,IAAI,EAInB,GAAI,GAAQ,EACZ,EAAK,GAAK,EAAK,GAAG,QAAQ,gBAAiB,SAAS,EAAO,EAAQ,CAEjE,GAAI,IAAU,KAAM,MAAO,GAC3B,IACA,GAAI,GAAY,EAAQ,WAAW,GACnC,GAAI,AAAe,MAAO,IAAtB,WAAiC,CACnC,GAAI,GAAM,EAAK,GACf,EAAQ,EAAU,KAAK,EAAM,CAAG,EAGhC,EAAK,OAAO,EAAO,CAAC,EACpB,GACF,CACA,MAAO,EACT,CAAC,EAGD,EAAQ,WAAW,KAAK,EAAM,CAAI,EAElC,GAAI,GAAQ,EAAM,KAAO,EAAQ,KAAO,QAAQ,IAAI,KAAK,OAAO,EAChE,EAAM,MAAM,EAAM,CAAI,EACxB,CAEA,SAAM,UAAY,EAClB,EAAM,QAAU,EAAQ,QAAQ,CAAS,EACzC,EAAM,UAAY,EAAQ,UAAU,EACpC,EAAM,MAAQ,GAAY,CAAS,EAG/B,AAAe,MAAO,GAAQ,MAA9B,YACF,EAAQ,KAAK,CAAK,EAGb,CACT,CAUA,YAAgB,EAAY,CAC1B,EAAQ,KAAK,CAAU,EAEvB,EAAQ,MAAQ,CAAC,EACjB,EAAQ,MAAQ,CAAC,EAKjB,OAHI,GAAS,OAAO,IAAe,SAAW,EAAa,IAAI,MAAM,QAAQ,EACzE,EAAM,EAAM,OAEP,EAAI,EAAG,EAAI,EAAK,IACvB,AAAI,CAAC,EAAM,IACX,GAAa,EAAM,GAAG,QAAQ,MAAO,KAAK,EAC1C,AAAI,EAAW,KAAO,IACpB,EAAQ,MAAM,KAAK,GAAI,QAAO,IAAM,EAAW,OAAO,CAAC,EAAI,GAAG,CAAC,EAE/D,EAAQ,MAAM,KAAK,GAAI,QAAO,IAAM,EAAa,GAAG,CAAC,EAG3D,CAQA,aAAmB,CACjB,EAAQ,OAAO,EAAE,CACnB,CAUA,YAAiB,EAAM,CACrB,GAAI,GAAG,EACP,IAAK,EAAI,EAAG,EAAM,EAAQ,MAAM,OAAQ,EAAI,EAAK,IAC/C,GAAI,EAAQ,MAAM,GAAG,KAAK,CAAI,EAC5B,MAAO,GAGX,IAAK,EAAI,EAAG,EAAM,EAAQ,MAAM,OAAQ,EAAI,EAAK,IAC/C,GAAI,EAAQ,MAAM,GAAG,KAAK,CAAI,EAC5B,MAAO,GAGX,MAAO,EACT,CAUA,YAAgB,EAAK,CACnB,MAAI,aAAe,OAAc,EAAI,OAAS,EAAI,QAC3C,CACT,ICzMA,mBAMA,GAAU,GAAO,QAAU,KAC3B,GAAQ,IAAM,GACd,GAAQ,WAAa,GACrB,GAAQ,KAAO,GACf,GAAQ,KAAO,GACf,GAAQ,UAAY,GACpB,GAAQ,QAAU,AAAe,MAAO,QAAtB,KACA,AAAe,MAAO,QAAO,QAA7B,IACE,OAAO,QAAQ,MACf,GAAa,EAMjC,GAAQ,OAAS,CACf,gBACA,cACA,YACA,aACA,aACA,SACF,EAUA,aAAqB,CAInB,MAAI,OAAO,QAAW,KAAe,OAAO,SAAW,OAAO,QAAQ,OAAS,WACtE,GAKD,MAAO,UAAa,KAAe,SAAS,iBAAmB,SAAS,gBAAgB,OAAS,SAAS,gBAAgB,MAAM,kBAErI,MAAO,QAAW,KAAe,OAAO,SAAY,QAAO,QAAQ,SAAY,OAAO,QAAQ,WAAa,OAAO,QAAQ,QAG1H,MAAO,WAAc,KAAe,UAAU,WAAa,UAAU,UAAU,YAAY,EAAE,MAAM,gBAAgB,GAAK,SAAS,OAAO,GAAI,EAAE,GAAK,IAEnJ,MAAO,WAAc,KAAe,UAAU,WAAa,UAAU,UAAU,YAAY,EAAE,MAAM,oBAAoB,CAC5H,CAMA,GAAQ,WAAW,EAAI,SAAS,EAAG,CACjC,GAAI,CACF,MAAO,MAAK,UAAU,CAAC,CACzB,OAAS,EAAP,CACA,MAAO,+BAAiC,EAAI,OAC9C,CACF,EASA,YAAoB,EAAM,CACxB,GAAI,GAAY,KAAK,UASrB,GAPA,EAAK,GAAM,GAAY,KAAO,IAC1B,KAAK,UACJ,GAAY,MAAQ,KACrB,EAAK,GACJ,GAAY,MAAQ,KACrB,IAAM,GAAQ,SAAS,KAAK,IAAI,EAEhC,EAAC,EAEL,IAAI,GAAI,UAAY,KAAK,MACzB,EAAK,OAAO,EAAG,EAAG,EAAG,gBAAgB,EAKrC,GAAI,GAAQ,EACR,EAAQ,EACZ,EAAK,GAAG,QAAQ,cAAe,SAAS,EAAO,CAC7C,AAAI,AAAS,IAAT,MACJ,KACI,AAAS,IAAT,MAGF,GAAQ,GAEZ,CAAC,EAED,EAAK,OAAO,EAAO,EAAG,CAAC,EACzB,CASA,aAAe,CAGb,MAAO,AAAa,OAAO,UAApB,UACF,QAAQ,KACR,SAAS,UAAU,MAAM,KAAK,QAAQ,IAAK,QAAS,SAAS,CACpE,CASA,YAAc,EAAY,CACxB,GAAI,CACF,AAAI,AAAQ,GAAR,KACF,GAAQ,QAAQ,WAAW,OAAO,EAElC,GAAQ,QAAQ,MAAQ,CAE5B,MAAE,CAAU,CACd,CASA,aAAgB,CACd,GAAI,GACJ,GAAI,CACF,EAAI,GAAQ,QAAQ,KACtB,MAAE,CAAU,CAGZ,MAAI,CAAC,GAAK,MAAO,SAAY,KAAe,OAAS,UACnD,GAAI,QAAQ,IAAI,OAGX,CACT,CAMA,GAAQ,OAAO,GAAK,CAAC,EAarB,aAAwB,CACtB,GAAI,CACF,MAAO,QAAO,YAChB,MAAE,CAAW,CACf,ICxLA,gCAMA,GAAI,IAAQ,KAAiB,QAAQ,EAYrC,GAAO,QAAU,SAAS,EAAM,EAAO,EAAS,CAC9C,OAAQ,UAAU,YACX,OACA,GACH,MAAO,IAAI,EAAM,EAAO,CAAO,MAC5B,GACH,MAAO,IAAI,CAAI,UAEf,MAAO,IAAI,EAEjB,EAWA,YAAa,EAAM,EAAO,EAAS,CACjC,EAAU,GAAW,CAAC,EACtB,GAAI,GAAM,GAAO,CAAI,EAAI,IAAM,GAAO,CAAK,EAE3C,AAAI,GAAS,MAAM,GAAQ,OAAS,IAEhC,EAAQ,QACV,GAAQ,QAAU,GAAI,MAAK,CAAC,GAAI,MAAS,EAAQ,MAAM,GAGrD,EAAQ,MAAM,IAAO,UAAY,EAAQ,MACzC,EAAQ,QAAQ,IAAO,YAAc,EAAQ,QAC7C,EAAQ,SAAS,IAAO,aAAe,EAAQ,QAAQ,YAAY,GACnE,EAAQ,UAAU,IAAO,cAAgB,EAAQ,UACjD,EAAQ,QAAQ,IAAO,YAE3B,SAAS,OAAS,CACpB,CASA,aAAe,CACb,GAAI,GACJ,GAAI,CACF,EAAM,SAAS,MACjB,OAAS,EAAP,CACA,MAAI,OAAO,SAAY,KAAe,MAAO,SAAQ,OAAU,YAC7D,QAAQ,MAAM,EAAI,OAAS,CAAG,EAEzB,CAAC,CACV,CACA,MAAO,IAAM,CAAG,CAClB,CAUA,YAAa,EAAM,CACjB,MAAO,IAAI,EAAE,EACf,CAUA,YAAe,EAAK,CAClB,GAAI,GAAM,CAAC,EACP,EAAQ,EAAI,MAAM,OAAO,EACzB,EACJ,GAAI,EAAM,IAAM,GAAI,MAAO,GAC3B,OAAS,GAAI,EAAG,EAAI,EAAM,OAAQ,EAAE,EAClC,EAAO,EAAM,GAAG,MAAM,GAAG,EACzB,EAAI,GAAO,EAAK,EAAE,GAAK,GAAO,EAAK,EAAE,EAEvC,MAAO,EACT,CAMA,YAAgB,EAAO,CACrB,GAAI,CACF,MAAO,oBAAmB,CAAK,CACjC,OAAS,EAAP,CACA,GAAM,0BAA2B,EAAO,CAAC,CAC3C,CACF,CAMA,YAAgB,EAAO,CACrB,GAAI,CACF,MAAO,oBAAmB,CAAK,CACjC,OAAS,EAAP,CACA,GAAM,0BAA2B,EAAO,CAAC,CAC3C,CACF,ICpIA,gCAEA,GAAI,IAAM,KAAK,IAiBX,GAAO,SAAc,EAAO,EAAY,CAC1C,GAAI,GAAS,EAAa,EAAW,OAAS,EAE9C,GAAI,CAAC,EACH,MAAO,CAAC,EAUV,OAJI,GAAS,GAAI,OAAO,CAAK,GAAK,EAAG,CAAC,EAClC,EAAgB,GAAI,EAAS,EAAQ,CAAC,EACtC,EAAU,GAAI,OAAM,CAAa,EAE5B,EAAI,EAAG,EAAI,EAAe,GAAK,EACtC,EAAQ,GAAK,EAAW,EAAI,GAG9B,MAAO,EACT,EAMA,GAAO,QAAU,KC5CjB,gCAEA,GAAI,IAAM,KAAK,IAcX,GAAO,SAAc,EAAY,CACnC,GAAI,GAAc,MAAQ,CAAC,EAAW,OACpC,MAAO,CAAC,EAQV,OAFI,GAAU,GAAI,OAAM,GAAI,EAAW,OAAS,EAAG,CAAC,CAAC,EAE5C,EAAI,EAAG,EAAI,EAAW,OAAQ,GAAK,EAC1C,EAAQ,EAAI,GAAK,EAAW,GAG9B,MAAO,EACT,EAMA,GAAO,QAAU,KCrCjB,gCAMA,GAAI,IAAO,KACP,GAAO,KAEP,GAAM,OAAO,UAAU,eACvB,GAAc,OAAO,UAAU,SAW/B,GAAW,SAAkB,EAAO,CACtC,MAAO,SAAQ,CAAK,GAAK,MAAO,IAAU,QAC5C,EAWI,GAAgB,SAAuB,EAAO,CAChD,MAAO,SAAQ,CAAK,GAAK,GAAY,KAAK,CAAK,IAAM,iBACvD,EAaI,GAAkB,SAAyB,EAAQ,EAAQ,EAAO,EAAK,CACzE,MAAI,IAAI,KAAK,EAAQ,CAAG,GAAK,EAAO,KAAS,QAC3C,GAAO,GAAO,GAET,CACT,EAcI,GAAe,SAAS,EAAQ,EAAQ,EAAO,EAAK,CACtD,MAAI,IAAI,KAAK,EAAQ,CAAG,GACtB,CAAI,GAAc,EAAO,EAAI,GAAK,GAAc,CAAK,EACjD,EAAO,GAAO,GAAa,EAAO,GAAM,CAAK,EACtC,EAAO,KAAS,QACvB,GAAO,GAAO,IAIb,CACT,EAYI,GAAe,SAAS,EAAU,EAA0B,CAC9D,GAAI,CAAC,GAAS,CAAM,EAClB,MAAO,GAGT,EAAW,GAAY,GAGvB,OAFI,GAAU,GAAK,EAAG,SAAS,EAEtB,EAAI,EAAG,EAAI,EAAQ,OAAQ,GAAK,EACvC,OAAS,KAAO,GAAQ,GACtB,EAAS,EAAQ,EAAQ,GAAI,EAAQ,GAAG,GAAM,CAAG,EAIrD,MAAO,EACT,EAaI,GAAe,SAAsB,EAAuB,CAE9D,MAAO,IAAa,MAAM,KAAM,CAAC,GAAc,CAAM,EAAE,OAAO,GAAK,SAAS,CAAC,CAAC,CAChF,EAkBI,GAAW,SAAS,EAA0B,CAEhD,MAAO,IAAa,MAAM,KAAM,CAAC,KAAM,CAAM,EAAE,OAAO,GAAK,SAAS,CAAC,CAAC,CACxE,EAMA,GAAO,QAAU,GACjB,GAAO,QAAQ,KAAO,KCrJtB,cASA,GAAQ,MAAQ,SAAS,EAAI,CAC3B,GAAI,GAAI,SAAS,cAAc,GAAG,EAClC,SAAE,KAAO,EACF,CACL,KAAM,EAAE,KACR,KAAM,EAAE,MAAQ,SAAS,KACzB,KAAO,AAAQ,EAAE,OAAV,KAAkB,AAAO,EAAE,OAAT,GAAiB,GAAK,EAAE,QAAQ,EAAI,EAAE,KAC/D,KAAM,EAAE,KACR,SAAU,EAAE,UAAY,SAAS,SACjC,SAAU,EAAE,SAAS,OAAO,CAAC,GAAK,IAAM,IAAM,EAAE,SAAW,EAAE,SAC7D,SAAU,CAAC,EAAE,UAAY,AAAO,EAAE,UAAT,IAAoB,SAAS,SAAW,EAAE,SACnE,OAAQ,EAAE,OACV,MAAO,EAAE,OAAO,MAAM,CAAC,CACzB,CACF,EAUA,GAAQ,WAAa,SAAS,EAAI,CAChC,MAAO,AAAK,GAAI,QAAQ,IAAI,GAArB,GAA0B,CAAC,CAAC,CAAC,EAAI,QAAQ,KAAK,CACvD,EAUA,GAAQ,WAAa,SAAS,EAAI,CAChC,MAAO,CAAC,GAAQ,WAAW,CAAG,CAChC,EAUA,GAAQ,cAAgB,SAAS,EAAI,CACnC,EAAM,GAAQ,MAAM,CAAG,EACvB,GAAI,GAAW,GAAQ,MAAM,OAAO,SAAS,IAAI,EACjD,MAAO,GAAI,WAAa,EAAS,UAC5B,EAAI,OAAS,EAAS,MACtB,EAAI,WAAa,EAAS,QACjC,EASA,YAAe,EAAS,CACtB,OAAQ,OACD,QACH,MAAO,QACJ,SACH,MAAO,aAEP,MAAO,UAAS,KAEtB,ICjFA,mBAKA,GAAI,IAAQ,KAAiB,QAAQ,EAYrC,GAAO,QAAU,SAAS,EAAM,EAAO,EAAQ,CAC7C,OAAQ,UAAU,YACX,OACA,GACH,MAAO,IAAI,EAAM,EAAO,CAAO,MAC5B,GACH,MAAO,IAAI,CAAI,UAEf,MAAO,IAAI,EAEjB,EAWA,YAAa,EAAM,EAAO,EAAS,CACjC,EAAU,GAAW,CAAC,EACtB,GAAI,GAAM,GAAO,CAAI,EAAI,IAAM,GAAO,CAAK,EAE3C,AAAI,AAAQ,GAAR,MAAe,GAAQ,OAAS,IAEhC,EAAQ,QACV,GAAQ,QAAU,GAAI,MAAK,CAAC,GAAI,MAAO,EAAQ,MAAM,GAGnD,EAAQ,MAAM,IAAO,UAAY,EAAQ,MACzC,EAAQ,QAAQ,IAAO,YAAc,EAAQ,QAC7C,EAAQ,SAAS,IAAO,aAAe,EAAQ,QAAQ,YAAY,GACnE,EAAQ,QAAQ,IAAO,YAE3B,SAAS,OAAS,CACpB,CASA,aAAe,CACb,GAAI,GACJ,GAAI,CACF,EAAM,SAAS,MACjB,OAAS,EAAP,CACA,MAAI,OAAO,SAAY,KAAe,MAAO,SAAQ,OAAU,YAC7D,QAAQ,MAAM,EAAI,OAAS,CAAG,EAEzB,CAAC,CACV,CACA,MAAO,IAAM,CAAG,CAClB,CAUA,YAAa,EAAM,CACjB,MAAO,IAAI,EAAE,EACf,CAUA,YAAe,EAAK,CAClB,GAAI,GAAM,CAAC,EACP,EAAQ,EAAI,MAAM,OAAO,EACzB,EACJ,GAAI,AAAM,EAAM,IAAZ,GAAgB,MAAO,GAC3B,OAAS,GAAI,EAAG,EAAI,EAAM,OAAQ,EAAE,EAClC,EAAO,EAAM,GAAG,MAAM,GAAG,EACzB,EAAI,GAAO,EAAK,EAAE,GAAK,GAAO,EAAK,EAAE,EAEvC,MAAO,EACT,CAMA,YAAgB,EAAM,CACpB,GAAI,CACF,MAAO,oBAAmB,CAAK,CACjC,OAAS,EAAP,CACA,GAAM,0BAA2B,EAAO,CAAC,CAC3C,CACF,CAMA,YAAgB,EAAO,CACrB,GAAI,CACF,MAAO,oBAAmB,CAAK,CACjC,OAAS,EAAP,CACA,GAAM,0BAA2B,EAAO,CAAC,CAC3C,CACF,IClIA,gCAMA,GAAI,IAAQ,KAAyB,MACjC,GAAS,KA8Bb,YAAgB,EAAK,CAKnB,OAJI,GAAS,GAAQ,OACjB,EAAS,GAAQ,OAAO,CAAG,EAGtB,EAAI,EAAG,EAAI,EAAO,OAAQ,EAAE,EAAG,CACtC,GAAI,GAAQ,UACR,EAAS,EAAO,GAChB,EAAO,CAAE,OAAQ,IAAM,CAAO,EAGlC,GADA,EAAO,EAAO,EAAG,CAAI,EACjB,EAAO,CAAK,EACd,SAAO,EAAO,KAAM,CAAI,EACjB,CAEX,CAEA,MAAO,EACT,CASA,GAAO,OAAS,SAAS,EAAK,CAC5B,GAAI,GAAO,GAAM,CAAG,EAAE,SAClB,EAAQ,EAAK,MAAM,GAAG,EACtB,EAAO,EAAM,EAAM,OAAS,GAC5B,EAAS,CAAC,EAQd,GALI,EAAM,SAAW,GAAK,IAAS,SAAS,EAAM,EAAE,GAKhD,EAAM,QAAU,EAClB,MAAO,GAIT,OAAS,GAAI,EAAM,OAAS,EAAG,GAAK,EAAG,EAAE,EACvC,EAAO,KAAK,EAAM,MAAM,CAAC,EAAE,KAAK,GAAG,CAAC,EAGtC,MAAO,EACT,EAKA,GAAO,OAAS,GAMhB,GAAU,GAAO,QAAU,KCjG3B,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAI5D,GAAI,IAAU,KACV,GAAQ,KACR,GAAS,KACT,GAAQ,KAAiB,qBAAqB,EAC9C,GAAW,KACX,GAAY,KAMhB,YAAgB,EAAS,CACrB,KAAK,QAAQ,CAAO,CACxB,CAIA,GAAO,UAAU,QAAU,SAAU,EAAS,CAC1C,GAAI,UAAU,SAAW,EACrB,MAAO,MAAK,SAChB,EAAU,GAAW,CAAC,EACtB,GAAI,GAAS,IAAM,GAAU,OAAO,SAAS,IAAI,EACjD,AAAI,IAAW,KACX,GAAS,MACb,KAAK,SAAW,GAAS,EAAS,CAE9B,OAAQ,QACR,KAAM,IACN,OAAQ,EACR,SAAU,KACd,CAAC,EAQD,KAAK,IAAI,WAAY,EAAI,EACpB,KAAK,IAAI,UAAU,GACpB,IAAM,yBAAyB,EAC/B,KAAK,SAAS,OAAS,MAE3B,KAAK,OAAO,UAAU,CAC1B,EAIA,GAAO,UAAU,IAAM,SAAU,EAAK,EAAO,CACzC,GAAI,CACA,SAAQ,OAAO,KAAK,UAAU,CAAK,EACnC,GAAO,EAAK,IAAU,OAAS,KAAO,EAAO,GAAM,KAAK,QAAQ,CAAC,EAC1D,EACX,MACA,CACI,MAAO,EACX,CACJ,EAIA,GAAO,UAAU,IAAM,SAAU,EAAK,CAClC,GAAI,CACA,GAAI,GAAQ,GAAO,CAAG,EACtB,SAAQ,EAAQ,OAAO,KAAK,MAAM,CAAK,EAAI,KACpC,CACX,MACA,CACI,MAAO,KACX,CACJ,EAIA,GAAO,UAAU,OAAS,SAAU,EAAK,CACrC,GAAI,CACA,UAAO,EAAK,KAAM,GAAM,KAAK,QAAQ,CAAC,EAC/B,EACX,MACA,CACI,MAAO,EACX,CACJ,EAIA,GAAO,QAAU,GAAQ,GAAI,GAAQ,EAIrC,GAAO,QAAQ,OAAS,KC/FxB,mBACC,AAAC,WAAY,CAGZ,GAAI,GAAW,MAAO,SAAW,YAAc,OAAO,IAGlD,EAAc,CAChB,SAAY,GACZ,OAAU,EACZ,EAGI,EAAc,EAAY,MAAO,MAAY,IAAW,CAAC,GAAQ,UAAY,GAM7E,EAAO,EAAY,MAAO,UAAW,QAAU,KAC/C,EAAa,GAAe,EAAY,MAAO,MAAW,IAAU,CAAC,GAAO,UAAY,MAAO,SAAU,UAAY,OAEzH,AAAI,GAAe,GAAW,SAAW,GAAc,EAAW,SAAW,GAAc,EAAW,OAAS,IAC7G,GAAO,GAKT,WAAsB,EAAS,EAAS,CACtC,GAAY,GAAU,EAAK,OAAO,GAClC,GAAY,GAAU,EAAK,OAAO,GAGlC,GAAI,GAAS,EAAQ,QAAU,EAAK,OAChC,EAAS,EAAQ,QAAU,EAAK,OAChC,EAAS,EAAQ,QAAU,EAAK,OAChC,EAAO,EAAQ,MAAQ,EAAK,KAC5B,EAAc,EAAQ,aAAe,EAAK,YAC1C,EAAY,EAAQ,WAAa,EAAK,UACtC,GAAO,EAAQ,MAAQ,EAAK,KAC5B,GAAa,EAAQ,MAAQ,EAAK,KAGtC,AAAI,MAAO,KAAc,UAAY,IACnC,GAAQ,UAAY,GAAW,UAC/B,EAAQ,MAAQ,GAAW,OAI7B,GAAI,GAAc,EAAO,UACrB,EAAW,EAAY,SACvB,EAAa,EAAY,eACzB,EAIJ,WAAiB,EAAM,EAAW,CAChC,GAAI,CACF,EAAK,CACP,MAAE,CACA,AAAI,GACF,EAAU,CAEd,CACF,CAGA,GAAI,GAAa,GAAI,GAAK,gBAAiB,EAC3C,EAAQ,UAAY,CAGlB,EAAa,EAAW,eAAe,GAAK,SAAW,EAAW,YAAY,IAAM,GAAK,EAAW,WAAW,IAAM,GACnH,EAAW,YAAY,GAAK,IAAM,EAAW,cAAc,GAAK,IAAM,EAAW,cAAc,GAAK,GAAK,EAAW,mBAAmB,GAAK,GAChJ,CAAC,EAID,WAAa,EAAM,CACjB,GAAI,EAAI,IAAS,KAEf,MAAO,GAAI,GAEb,GAAI,GACJ,GAAI,GAAQ,wBAGV,EAAc,IAAI,IAAM,YACf,GAAQ,OAGjB,EAAc,EAAI,gBAAgB,GAAK,EAAI,oBAAoB,GAAK,EAAI,YAAY,UAC3E,GAAQ,sBAGjB,GADA,EAAc,EAAI,gBAAgB,GAAK,EACnC,EAAa,CACf,GAAI,GAAY,EAAQ,UACxB,EAAQ,UAAY,CAClB,EAGE,EAAU,GAAI,GAAK,OAAQ,CAAC,GAAK,iCAEjC,EAAU,GAAI,GAAK,MAAO,CAAC,GAAK,iCAGhC,EAAU,GAAI,GAAK,YAAY,CAAC,GAAK,iCAGrC,EAAU,GAAI,GAAK,EAAE,CAAC,GAAK,4BAC/B,CAAC,CACH,MACK,CACL,GAAI,GAAO,EAAa,qDAExB,GAAI,GAAQ,iBAAkB,CAC5B,GAAI,GAAY,EAAQ,UAAW,EAAqB,MAAO,IAAa,WAC5E,AAAI,GAED,IAAQ,UAAY,CACnB,MAAO,EACT,GAAG,OAAS,EACZ,EAAQ,UAAY,CAClB,EAGE,EAAU,CAAC,IAAM,KAGjB,EAAU,GAAI,EAAQ,IAAM,KAC5B,EAAU,GAAI,EAAQ,GAAK,MAK3B,EAAU,CAAQ,IAAM,GAGxB,EAAU,CAAS,IAAM,GAGzB,EAAU,IAAM,GAMhB,EAAU,CAAK,IAAM,KACrB,EAAU,CAAC,CAAK,CAAC,GAAK,OAGtB,EAAU,CAAC,CAAS,CAAC,GAAK,UAE1B,EAAU,IAAI,GAAK,QAKnB,EAAU,CAAC,EAAW,EAAU,IAAI,CAAC,GAAK,oBAG1C,EAAU,CAAE,EAAK,CAAC,EAAO,GAAM,GAAO,KAAM;AAAA,MAAgB,CAAE,CAAC,GAAK,GAEpE,EAAU,KAAM,CAAK,IAAM,KAC3B,EAAU,CAAC,EAAG,CAAC,EAAG,KAAM,CAAC,GAAK;AAAA;AAAA;AAAA,EAClC,EAAG,UAAY,CACb,EAAqB,EACvB,CAAC,GAEH,EAAc,CAChB,CAEA,GAAI,GAAQ,aAAc,CACxB,GAAI,GAAQ,EAAQ,MAAO,EAC3B,AAAI,MAAO,IAAS,YAClB,EAAQ,UAAY,CAIlB,AAAI,EAAM,GAAG,IAAM,GAAK,CAAC,EAAM,EAAK,GAElC,GAAQ,EAAM,CAAU,EACxB,EAAiB,EAAM,EAAK,QAAU,GAAK,EAAM,EAAK,KAAO,EACzD,GACF,GAAQ,UAAY,CAElB,EAAiB,CAAC,EAAM,KAAM,CAChC,CAAC,EACG,GACF,EAAQ,UAAY,CAIlB,EAAiB,EAAM,IAAI,IAAM,CACnC,CAAC,EAEC,GACF,EAAQ,UAAY,CAIlB,EAAiB,EAAM,IAAI,IAAM,CACnC,CAAC,GAIT,EAAG,UAAY,CACb,EAAiB,EACnB,CAAC,EAEH,EAAc,CAChB,CACF,CACA,MAAO,GAAI,GAAQ,CAAC,CAAC,CACvB,CAGA,GAFA,EAAI,yBAA2B,EAAI,sBAAwB,EAAI,KAAU,EAAI,kBAAoB,EAAI,cAAgB,KAEjH,CAAC,EAAI,MAAM,EAAG,CAEhB,GAAI,GAAgB,oBAChB,GAAY,gBACZ,GAAc,kBACd,GAAc,kBACd,GAAa,iBACb,GAAe,mBAGf,GAAiB,EAAI,uBAAuB,EAI5C,GAAS,SAAU,EAAQ,EAAU,CACvC,GAAI,GAAO,EAAG,EAAY,EAAW,EAKrC,AAAC,GAAa,UAAY,CACxB,KAAK,QAAU,CACjB,GAAG,UAAU,QAAU,EAGvB,EAAY,GAAI,GAChB,IAAK,IAAY,GAEf,AAAI,EAAW,KAAK,EAAW,CAAQ,GACrC,IAGJ,SAAa,EAAY,KAGzB,AAAK,EAwBH,GAAS,SAAU,EAAQ,EAAU,CACnC,GAAI,IAAa,EAAS,KAAK,CAAM,GAAK,EAAe,EAAU,EACnE,IAAK,IAAY,GACf,AAAI,CAAE,KAAc,GAAY,cAAgB,EAAW,KAAK,EAAQ,CAAQ,GAAK,CAAE,GAAgB,IAAa,gBAClH,EAAS,CAAQ,EAKrB,AAAI,IAAiB,EAAW,KAAK,EAAS,EAAW,aAAc,IACrE,EAAS,CAAQ,CAErB,EAlCA,GAAY,CAAC,UAAW,WAAY,iBAAkB,uBAAwB,gBAAiB,iBAAkB,aAAa,EAG9H,GAAS,SAAU,EAAQ,EAAU,CACnC,GAAI,IAAa,EAAS,KAAK,CAAM,GAAK,EAAe,EAAU,EAC/D,GAAc,CAAC,IAAc,MAAO,GAAO,aAAe,YAAc,EAAY,MAAO,GAAO,iBAAmB,EAAO,gBAAkB,EAClJ,IAAK,IAAY,GAGf,AAAI,CAAE,KAAc,GAAY,cAAgB,GAAY,KAAK,EAAQ,CAAQ,GAC/E,EAAS,CAAQ,EAIrB,IAAK,EAAS,EAAU,OAAQ,EAAW,EAAU,EAAE,IACrD,AAAI,GAAY,KAAK,EAAQ,CAAQ,GACnC,EAAS,CAAQ,CAGvB,GAiBK,GAAO,EAAQ,CAAQ,CAChC,EAQA,GAAI,CAAC,EAAI,gBAAgB,GAAK,CAAC,EAAI,oBAAoB,EAAG,CAExD,GAAI,IAAU,CACZ,GAAI,OACJ,GAAI,MACJ,EAAG,MACH,GAAI,MACJ,GAAI,MACJ,GAAI,MACJ,EAAG,KACL,EAII,GAAgB,SAChB,GAAiB,SAAU,EAAO,EAAO,CAG3C,MAAQ,IAAiB,IAAS,IAAI,MAAM,CAAC,CAAK,CACpD,EAGI,GAAgB,SAAU,EAAO,CACnC,GAAI,GAAS,EAAM,EAAO,EAAM,EAAM,EAAO,EAAS,GAAS,EAE/D,GAAK,EA+BH,EAAU,SAAU,EAAO,CACzB,EAAO,EAAM,eAAe,EAC5B,EAAQ,EAAM,YAAY,EAC1B,EAAO,EAAM,WAAW,EACxB,EAAQ,EAAM,YAAY,EAC1B,EAAU,EAAM,cAAc,EAC9B,GAAU,EAAM,cAAc,EAC9B,EAAe,EAAM,mBAAmB,CAC1C,MAvCe,CACf,GAAI,GAAQ,GAAK,MAGb,GAAS,CAAC,EAAG,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EAG/D,GAAS,SAAU,EAAM,GAAO,CAClC,MAAO,IAAO,IAAS,IAAO,GAAO,MAAQ,EAAO,GAAO,KAAQ,IAAQ,CAAE,IAAQ,KAAO,CAAC,EAAI,EAAO,GAAO,KAAO,IAAS,GAAG,EAAI,EAAO,GAAO,KAAO,IAAS,GAAG,CACzK,EACA,EAAU,SAAU,EAAO,CAKzB,IADA,EAAO,EAAM,EAAQ,KAAK,EACrB,EAAO,EAAM,EAAO,QAAQ,EAAI,KAAO,EAAG,GAAO,EAAO,EAAG,CAAC,GAAK,EAAM,IAAO,CACnF,IAAK,EAAQ,EAAO,GAAO,GAAO,EAAM,CAAC,GAAK,KAAK,EAAG,GAAO,EAAM,EAAQ,CAAC,GAAK,EAAM,IAAQ,CAC/F,EAAO,EAAI,EAAO,GAAO,EAAM,CAAK,EAKpC,EAAQ,GAAQ,MAAQ,OAAS,MAGjC,EAAQ,EAAM,EAAO,IAAI,EAAI,GAC7B,EAAU,EAAM,EAAO,GAAG,EAAI,GAC9B,GAAU,EAAM,EAAO,GAAG,EAAI,GAC9B,EAAe,EAAO,GACxB,CACF,CAWA,UAAgB,SAAU,EAAO,CAC/B,MAAI,GAAQ,GAAK,GAAK,EAAQ,EAAI,EAIhC,GAAQ,CAAK,EAEb,EAAS,IAAQ,GAAK,GAAQ,IAAO,GAAO,EAAI,IAAM,KAAO,GAAe,EAAG,EAAO,EAAI,CAAC,EAAO,CAAI,EAAI,GAAe,EAAG,CAAI,GAChI,IAAM,GAAe,EAAG,EAAQ,CAAC,EAAI,IAAM,GAAe,EAAG,CAAI,EAGjE,IAAM,GAAe,EAAG,CAAK,EAAI,IAAM,GAAe,EAAG,CAAO,EAAI,IAAM,GAAe,EAAG,EAAO,EAEnG,IAAM,GAAe,EAAG,CAAY,EAAI,IACxC,EAAO,EAAQ,EAAO,EAAQ,EAAU,GAAU,EAAe,MAEjE,EAAQ,KAEH,CACT,EACO,GAAc,CAAK,CAC5B,EAKA,GAAI,EAAI,gBAAgB,GAAK,CAAC,EAAI,oBAAoB,EAAG,CAEvD,GAAS,GAAT,SAAqB,EAAK,CACxB,MAAO,IAAc,IAAI,CAC3B,EAFS,SAKL,GAAkB,EAAQ,UAC9B,EAAQ,UAAY,SAAU,EAAQ,EAAQ,EAAO,CACnD,GAAI,GAAe,EAAK,UAAU,OAClC,EAAK,UAAU,OAAS,EACxB,GAAI,GAAS,GAAgB,EAAQ,EAAQ,CAAK,EAClD,SAAK,UAAU,OAAS,EACjB,CACT,CACF,KAAO,CAKL,GAAI,IAAgB,QAChB,GAAa,SAAU,EAAW,CACpC,GAAI,GAAW,EAAU,WAAW,CAAC,EAAG,EAAU,GAAQ,GAC1D,MAAI,IAGG,GAAgB,GAAe,EAAG,EAAS,SAAS,EAAE,CAAC,CAChE,EACI,GAAW,uBACX,GAAQ,SAAU,EAAO,CAC3B,UAAS,UAAY,EACd,IAEH,IAAS,KAAK,CAAK,EACf,EAAM,QAAQ,GAAU,EAAU,EAClC,GAEN,GACJ,EAII,GAAY,SAAU,EAAU,EAAQ,EAAU,EAAY,EAAY,EAAa,EAAO,CAChG,GAAI,GAAO,GAAM,EAAW,EAAS,GAAS,GAAO,EAAQ,GAAQ,GAkBrE,GAjBA,EAAQ,UAAY,CAElB,EAAQ,EAAO,EACjB,CAAC,EACG,MAAO,IAAS,UAAY,GAC9B,CAAI,EAAM,gBAAkB,EAAS,KAAK,CAAK,GAAK,IAAa,EAAM,SAAW,EAAK,UAAU,OAC/F,EAAQ,GAAc,CAAK,EAClB,MAAO,GAAM,QAAU,YAChC,GAAQ,EAAM,OAAO,CAAQ,IAG7B,GAGF,GAAQ,EAAS,KAAK,EAAQ,EAAU,CAAK,GAG3C,GAAS,EACX,MAAO,KAAU,EAAY,EAAQ,OAOvC,OALA,GAAO,MAAO,GAEV,IAAQ,UACV,GAAY,EAAS,KAAK,CAAK,GAEzB,GAAa,QACd,cACA,IAEH,MAAO,GAAK,MACT,aACA,IAGH,MAAO,GAAQ,MAAU,EAAQ,IAAQ,GAAK,EAAQ,WACnD,aACA,IAEH,MAAO,IAAM,GAAK,CAAK,EAG3B,GAAI,MAAO,IAAS,SAAU,CAG5B,IAAK,EAAS,EAAM,OAAQ,KAC1B,GAAI,EAAM,KAAY,EAEpB,KAAM,GAAU,EASpB,GALA,EAAM,KAAK,CAAK,EAChB,EAAU,CAAC,EAEX,GAAS,EACT,GAAe,EACX,GAAa,GAAY,CAE3B,IAAK,GAAQ,EAAG,EAAS,EAAM,OAAQ,GAAQ,EAAQ,KACrD,GAAU,GAAU,GAAO,EAAO,EAAU,EAAY,EAAY,EAAa,CAAK,EACtF,EAAQ,KAAK,KAAY,EAAY,OAAS,EAAO,EAEvD,GAAS,EAAQ,OAAU,EAAa;AAAA,EAAQ,EAAc,EAAQ,KAAK;AAAA,EAAQ,CAAW,EAAI;AAAA,EAAO,GAAS,IAAO,IAAM,EAAQ,KAAK,GAAG,EAAI,IAAQ,IAC7J,KAIE,IAAO,GAAc,EAAO,SAAU,GAAU,CAC9C,GAAI,IAAU,GAAU,GAAU,EAAO,EAAU,EAAY,EAAY,EAAa,CAAK,EAC7F,AAAI,KAAY,GAOd,EAAQ,KAAK,GAAM,EAAQ,EAAI,IAAO,GAAa,IAAM,IAAM,EAAO,CAE1E,CAAC,EACD,GAAS,EAAQ,OAAU,EAAa;AAAA,EAAQ,EAAc,EAAQ,KAAK;AAAA,EAAQ,CAAW,EAAI;AAAA,EAAO,GAAS,IAAO,IAAM,EAAQ,KAAK,GAAG,EAAI,IAAQ,KAG7J,SAAM,IAAI,EACH,EACT,CACF,EAGA,EAAQ,UAAY,SAAU,EAAQ,EAAQ,EAAO,CACnD,GAAI,GAAY,EAAU,EAAY,EACtC,GAAI,EAAY,MAAO,KAAW,GAEhC,GADA,EAAY,EAAS,KAAK,CAAM,EAC5B,GAAa,EACf,EAAW,UACF,GAAa,GAAY,CAElC,EAAa,CAAC,EACd,OAAS,GAAQ,EAAG,GAAS,EAAO,OAAQ,EAAO,EAAQ,IACzD,EAAQ,EAAO,KACf,EAAY,EAAS,KAAK,CAAK,EAC3B,IAAa,mBAAqB,GAAa,oBACjD,GAAW,GAAS,EAG1B,EAEF,GAAI,EAEF,GADA,EAAY,EAAS,KAAK,CAAK,EAC3B,GAAa,IAGf,GAAK,IAAS,EAAQ,GAAK,EAIzB,IAHI,EAAQ,IACV,GAAQ,IAEL,EAAa,GAAI,EAAW,OAAS,GACxC,GAAc,QAGb,AAAI,IAAa,IACtB,GAAa,EAAM,QAAU,GAAK,EAAQ,EAAM,MAAM,EAAG,EAAE,GAM/D,MAAO,IAAU,GAAK,GAAQ,CAAC,EAAG,EAAM,IAAM,EAAQ,GAAQ,EAAU,EAAY,EAAY,GAAI,CAAC,CAAC,CACxG,CACF,CACF,CAGA,GAAI,CAAC,EAAI,YAAY,EAAG,CACtB,GAAI,IAAe,EAAO,aAItB,GAAY,CACd,GAAI,KACJ,GAAI,IACJ,GAAI,IACJ,GAAI,KACJ,IAAK,IACL,IAAK;AAAA,EACL,IAAK,KACL,IAAK,IACP,EAGI,EAAO,GAGP,EAAQ,UAAY,CACtB,QAAQ,GAAS,KACX,EAAY,CACpB,EAKI,GAAM,UAAY,CAEpB,OADI,GAAS,GAAQ,EAAS,EAAO,OAAQ,EAAO,EAAO,EAAU,EAAU,EACxE,EAAQ,GAEb,OADA,EAAW,EAAO,WAAW,CAAK,EAC1B,OACD,OAAQ,QAAS,QAAS,IAG7B,IACA,UACG,SAAU,SAAU,QAAS,QAAS,QAAS,IAGlD,SAAQ,GAAiB,EAAO,OAAO,CAAK,EAAI,EAAO,GACvD,IACO,MACJ,IAKH,IAAK,EAAQ,IAAK,IAAS,EAAQ,GAEjC,GADA,EAAW,EAAO,WAAW,CAAK,EAC9B,EAAW,GAGb,EAAM,UACG,GAAY,GAKrB,OADA,EAAW,EAAO,WAAW,EAAE,CAAK,EAC5B,OACD,QAAS,QAAS,QAAS,QAAS,SAAU,SAAU,SAAU,KAErE,GAAS,GAAU,GACnB,IACA,UACG,KAKH,IADA,EAAQ,EAAE,EACL,EAAW,EAAQ,EAAG,EAAQ,EAAU,IAC3C,EAAW,EAAO,WAAW,CAAK,EAG5B,GAAY,IAAM,GAAY,IAAM,GAAY,IAAM,GAAY,KAAO,GAAY,IAAM,GAAY,IAE3G,EAAM,EAIV,GAAS,GAAa,KAAO,EAAO,MAAM,EAAO,CAAK,CAAC,EACvD,cAGA,EAAM,MAEL,CACL,GAAI,GAAY,GAGd,MAKF,IAHA,EAAW,EAAO,WAAW,CAAK,EAClC,EAAQ,EAED,GAAY,IAAM,GAAY,IAAM,GAAY,IACrD,EAAW,EAAO,WAAW,EAAE,CAAK,EAGtC,GAAS,EAAO,MAAM,EAAO,CAAK,CACpC,CAEF,GAAI,EAAO,WAAW,CAAK,GAAK,GAE9B,WACO,EAGT,EAAM,UAUN,GAPA,EAAQ,EAEJ,GAAY,IACd,GAAW,GACX,EAAW,EAAO,WAAW,EAAE,CAAK,GAGlC,GAAY,IAAM,GAAY,GAAI,CAQpC,IANI,GAAY,IAAQ,GAAW,EAAO,WAAW,EAAQ,CAAC,EAAI,GAAY,IAAM,GAAY,KAE9F,EAAM,EAER,EAAW,GAEJ,EAAQ,GAAY,GAAW,EAAO,WAAW,CAAK,EAAI,GAAY,IAAM,GAAY,IAAK,IAAQ,CAG5G,GAAI,EAAO,WAAW,CAAK,GAAK,GAAI,CAGlC,IAFA,EAAW,EAAE,EAEN,EAAW,GAChB,GAAW,EAAO,WAAW,CAAQ,EACjC,IAAW,IAAM,EAAW,KAFR,IAExB,CAIF,AAAI,GAAY,GAEd,EAAM,EAER,EAAQ,CACV,CAIA,GADA,EAAW,EAAO,WAAW,CAAK,EAC9B,GAAY,KAAO,GAAY,GAAI,CAQrC,IAPA,EAAW,EAAO,WAAW,EAAE,CAAK,EAGhC,IAAY,IAAM,GAAY,KAChC,IAGG,EAAW,EAAO,EAAW,GAChC,GAAW,EAAO,WAAW,CAAQ,EACjC,IAAW,IAAM,EAAW,KAFQ,IAExC,CAIF,AAAI,GAAY,GAEd,EAAM,EAER,EAAQ,CACV,CAEA,MAAO,CAAC,EAAO,MAAM,EAAO,CAAK,CACnC,CAEA,AAAI,GACF,EAAM,EAGR,GAAI,GAAO,EAAO,MAAM,EAAO,EAAQ,CAAC,EACxC,GAAI,GAAQ,OACV,UAAS,EACF,GACF,GAAI,GAAQ,QAAU,EAAO,WAAW,EAAQ,CAAE,GAAK,IAC5D,UAAS,EACF,GACF,GAAI,GAAQ,OACjB,UAAS,EACF,KAGT,EAAM,EAKZ,MAAO,GACT,EAGI,GAAM,SAAU,EAAO,CACzB,GAAI,GAAS,EAKb,GAJI,GAAS,KAEX,EAAM,EAEJ,MAAO,IAAS,SAAU,CAC5B,GAAK,IAAiB,EAAM,OAAO,CAAC,EAAI,EAAM,KAAO,IAEnD,MAAO,GAAM,MAAM,CAAC,EAGtB,GAAI,GAAS,IAAK,CAGhB,IADA,EAAU,CAAC,EAET,EAAQ,GAAI,EAER,GAAS,KAMb,AAAI,EACF,AAAI,GAAS,IACX,GAAQ,GAAI,EACR,GAAS,KAEX,EAAM,GAIR,EAAM,EAGR,EAAa,GAGX,GAAS,KACX,EAAM,EAER,EAAQ,KAAK,GAAI,CAAK,CAAC,EAEzB,MAAO,EACT,SAAW,GAAS,IAAK,CAGvB,IADA,EAAU,CAAC,EAET,EAAQ,GAAI,EAER,GAAS,KAKb,AAAI,EACF,AAAI,GAAS,IACX,GAAQ,GAAI,EACR,GAAS,KAEX,EAAM,GAIR,EAAM,EAGR,EAAa,GAKX,IAAS,KAAO,MAAO,IAAS,UAAa,IAAiB,EAAM,OAAO,CAAC,EAAI,EAAM,KAAO,KAAO,GAAI,GAAK,MAC/G,EAAM,EAER,EAAQ,EAAM,MAAM,CAAC,GAAK,GAAI,GAAI,CAAC,EAErC,MAAO,EACT,CAEA,EAAM,CACR,CACA,MAAO,EACT,EAGI,GAAS,SAAU,EAAQ,EAAU,EAAU,CACjD,GAAI,GAAU,GAAK,EAAQ,EAAU,CAAQ,EAC7C,AAAI,IAAY,EACd,MAAO,GAAO,GAEd,EAAO,GAAY,CAEvB,EAKI,GAAO,SAAU,EAAQ,EAAU,EAAU,CAC/C,GAAI,GAAQ,EAAO,GAAW,EAC9B,GAAI,MAAO,IAAS,UAAY,EAI9B,GAAI,EAAS,KAAK,CAAK,GAAK,GAC1B,IAAK,EAAS,EAAM,OAAQ,KAC1B,GAAO,EAAU,GAAQ,EAAO,EAAQ,CAAQ,MAGlD,IAAO,EAAO,SAAU,EAAU,CAChC,GAAO,EAAO,EAAU,CAAQ,CAClC,CAAC,EAGL,MAAO,GAAS,KAAK,EAAQ,EAAU,CAAK,CAC9C,EAGA,EAAQ,MAAQ,SAAU,EAAQ,EAAU,CAC1C,GAAI,GAAQ,EACZ,SAAQ,EACR,GAAS,GAAK,EACd,EAAS,GAAI,GAAI,CAAC,EAEd,GAAI,GAAK,KACX,EAAM,EAGR,EAAQ,GAAS,KACV,GAAY,EAAS,KAAK,CAAQ,GAAK,EAAgB,GAAM,GAAQ,CAAC,EAAG,EAAM,IAAM,EAAQ,GAAQ,GAAI,CAAQ,EAAI,CAC9H,CACF,CACF,CAEA,SAAQ,aAAe,EAChB,CACT,CAEA,GAAI,GAAe,CAAC,EAElB,EAAa,EAAM,CAAW,MACzB,CAEL,GAAI,GAAa,EAAK,KAClB,EAAe,EAAK,MACpB,EAAa,GAEb,EAAQ,EAAa,EAAO,EAAK,MAAQ,CAG3C,WAAc,UAAY,CACxB,MAAK,IACH,GAAa,GACb,EAAK,KAAO,EACZ,EAAK,MAAQ,EACb,EAAa,EAAe,MAEvB,CACT,CACF,CAAE,EAEF,EAAK,KAAO,CACV,MAAS,EAAM,MACf,UAAa,EAAM,SACrB,CACF,CAGA,AAAI,GACF,OAAO,UAAY,CACjB,MAAO,EACT,CAAC,CAEL,GAAG,KAAK,EAAI,ICz6BZ,sBAAO,QAAU,GAEjB,YAAgB,EAAQ,CACpB,EAAS,EAAO,QAAQ,QAAS;AAAA,CAAI,EAGrC,OAFI,GAAU,GAEL,EAAI,EAAG,EAAI,EAAO,OAAQ,IAAK,CAEpC,GAAI,GAAI,EAAO,WAAW,CAAC,EAE3B,AAAI,EAAI,IACJ,GAAW,OAAO,aAAa,CAAC,EAE/B,AAAK,EAAI,KAAS,EAAI,KACvB,IAAW,OAAO,aAAc,GAAK,EAAK,GAAG,EAC7C,GAAW,OAAO,aAAc,EAAI,GAAM,GAAG,GAG7C,IAAW,OAAO,aAAc,GAAK,GAAM,GAAG,EAC9C,GAAW,OAAO,aAAe,GAAK,EAAK,GAAM,GAAG,EACpD,GAAW,OAAO,aAAc,EAAI,GAAM,GAAG,EAGrD,CAEA,MAAO,EACX,IC1BA,sBAAI,IAAa,KACb,GAAS,oEAEb,GAAO,QAAU,GACjB,YAAgB,EAAO,CACnB,GAAI,GAAS,GACT,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EACpC,EAAI,EAIR,IAFA,EAAQ,GAAW,CAAK,EAEjB,EAAI,EAAM,QAEb,EAAO,EAAM,WAAW,GAAG,EAC3B,EAAO,EAAM,WAAW,GAAG,EAC3B,EAAO,EAAM,WAAW,GAAG,EAE3B,EAAO,GAAQ,EACf,EAAS,GAAO,IAAM,EAAM,GAAQ,EACpC,EAAS,GAAO,KAAO,EAAM,GAAQ,EACrC,EAAO,EAAO,GAEd,AAAI,MAAM,CAAI,EACV,EAAO,EAAO,GACP,MAAM,CAAI,GACjB,GAAO,IAGX,EAAS,EACL,GAAO,OAAO,CAAI,EAAI,GAAO,OAAO,CAAI,EACxC,GAAO,OAAO,CAAI,EAAI,GAAO,OAAO,CAAI,EAIhD,MAAO,EACX,ICnCA,mBASA,GAAI,CACF,GAAO,QAAU,MAAO,gBAAmB,KACzC,mBAAqB,IAAI,eAC7B,MAAE,CAGA,GAAO,QAAU,EACnB,IChBA,mBAIA,GAAI,IAAQ,KAAiB,OAAO,EAMpC,GAAO,QAAU,GAMjB,GAAI,IAAQ,EAMZ,aAAe,CAAC,CAgBhB,YAAe,EAAK,EAAM,EAAG,CAC3B,AAAI,AAAc,MAAO,IAArB,YACF,GAAK,EACL,EAAO,CAAC,GAEL,GAAM,GAAO,CAAC,GAEnB,GAAI,GAAS,EAAK,QAAU,OAIxB,EAAK,EAAK,MAAS,EAAU,KAE7B,EAAQ,EAAK,OAAS,WACtB,EAAU,AAAQ,EAAK,SAAb,KAAuB,EAAK,QAAU,IAChD,EAAM,mBACN,EAAS,SAAS,qBAAqB,QAAQ,EAAE,IAAM,SAAS,KAChE,EACA,EAGJ,AAAI,GACF,GAAQ,WAAW,UAAU,CAC3B,EAAQ,EACJ,GAAI,EAAG,GAAI,OAAM,SAAS,CAAC,CACjC,EAAG,CAAO,GAGZ,YAAkB,CAChB,AAAI,EAAO,YAAY,EAAO,WAAW,YAAY,CAAM,EAC3D,OAAO,GAAM,GACT,GAAO,aAAa,CAAK,CAC/B,CAEA,YAAiB,CACf,AAAI,OAAO,IACT,EAAQ,CAEZ,CAEA,cAAO,GAAM,SAAS,EAAK,CACzB,GAAM,YAAa,CAAI,EACvB,EAAQ,EACJ,GAAI,EAAG,KAAM,CAAI,CACvB,EAGA,GAAQ,EAAC,EAAI,QAAQ,GAAG,EAAI,IAAM,KAAO,EAAQ,IAAM,EAAI,CAAE,EAC7D,EAAM,EAAI,QAAQ,KAAM,GAAG,EAE3B,GAAM,iBAAkB,CAAG,EAG3B,EAAS,SAAS,cAAc,QAAQ,EACxC,EAAO,IAAM,EACb,EAAO,WAAW,aAAa,EAAQ,CAAM,EAEtC,CACT,IChGA,gCAMA,GAAI,IAAO,KACP,GAAe,KACf,GAAO,KACP,GAAQ,KAMZ,GAAU,GAAO,QAAU,GAAO,GAAO,GAMzC,GAAQ,SAAW,WAMnB,GAAQ,OAAS,OAMjB,GAAQ,KAAO,GAMf,GAAQ,OAAS,GAMjB,GAAQ,KAAO,GAAO,MAAQ,QAY9B,YAAc,EAAK,EAAK,EAAS,EAAI,CACnC,AAAI,UAAU,SAAW,GAAG,GAAK,EAAS,EAAU,CAAC,GAErD,GAAI,GAAM,GAAI,gBACd,EAAI,QAAU,EACd,EAAI,mBAAqB,EACzB,EAAI,KAAK,OAAQ,EAAK,EAAI,EAI1B,OAAS,KAAK,GACZ,EAAI,iBAAiB,EAAG,EAAQ,EAAE,EAEpC,EAAI,KAAK,GAAK,UAAU,CAAG,CAAC,EAE5B,YAAgB,CACd,GAAI,EAAI,aAAe,EACrB,MAAO,GAAG,KAAM,CAAG,CAEvB,CACF,CAWA,YAAgB,EAAK,EAAK,EAAG,EAAI,CAC/B,AAAI,UAAU,SAAW,GAAG,GAAK,GAEjC,GAAI,GAAS,GAAQ,OACjB,EAAO,GAAO,CAAG,EACrB,GAAO,IAAM,EAAS,IAAM,EAC5B,GAAM,EAAK,CAAE,MAAO,GAAQ,QAAS,EAAG,SAAS,EAAK,EAAK,CACzD,GAAI,EAAK,MAAO,GAAG,CAAG,EACtB,EAAG,KAAM,CACP,IAAK,EACL,KAAM,CACR,CAAC,CACH,CAAC,CACH,CAQA,YAAgB,EAAK,CACnB,GAAI,GAAM,GACV,SAAM,GAAK,UAAU,CAAG,EACxB,EAAM,GAAa,CAAG,EACtB,EAAM,EAAI,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,EACzC,mBAAmB,CAAG,CAC/B,ICnHA,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAC5D,GAAI,IAAU,KACV,GAAO,KACP,GAAQ,KAAiB,sBAAsB,EACnD,YAAiB,EAAS,CACtB,KAAK,QAAQ,CAAO,CACxB,CAIA,GAAQ,UAAU,QAAU,SAAU,EAAS,CAO3C,GANA,EAAU,GAAW,CAAC,EACtB,KAAK,KAAO,EAAQ,MAAQ,oBAC5B,KAAK,WAAa,EAAQ,YAAc,EACxC,KAAK,WAAa,EAAQ,YAAc,GAAK,IAC7C,KAAK,aAAe,EAAQ,cAAgB,GAC5C,KAAK,MAAQ,CAAC,EACV,KAAK,WAAa,EAAG,CACrB,GAAI,GAAO,KACX,YAAY,UAAY,CACpB,EAAK,OAAO,CAChB,EAAG,KAAK,UAAU,CACtB,CACJ,EAIA,GAAQ,UAAU,UAAY,SAAU,EAAQ,EAAM,CAClD,AAAI,KAAK,OAAO,EAAI,KAAK,YAGrB,KAAK,MAAM,QAAU,KAAK,cAG9B,MAAK,MAAM,KAAK,CAAE,KAAM,UAAW,OAAQ,EAAQ,MAAO,EAAG,KAAM,CAAK,CAAC,EAErE,EAAO,QAAQ,OAAO,EAAI,GAC1B,KAAK,OAAO,EAEpB,EAIA,GAAQ,UAAU,OAAS,UAAY,CACnC,GAAI,GAAO,KACX,GAAI,IAAK,MAAM,QAAU,GAGzB,IAAI,GAAU,CAAE,OAAQ,KAAK,KAAM,EAC/B,EAAU,CAAE,eAAgB,YAAa,EAI7C,AAHA,EAAK,MAAQ,CAAC,EAGV,GAAK,OAAS,OAElB,GAAK,WAAa,KAAK,KAAO,KAAM,EAAS,EAAS,SAAU,EAAK,EAAK,CACtE,GAAM,uBAAwB,EAAS,CAAC,EAAK,CAAG,CAAC,CACrD,CAAC,EACL,EAIA,GAAO,QAAU,GAAQ,GAAI,GAAS,EAItC,GAAO,QAAQ,QAAU,KCnEzB,gCAEA,GAAI,IAAM,OAAO,UAAU,eACvB,GAAY,OAAO,UAAU,OAC7B,GAAQ,OAAO,UAAU,SAUzB,GAAS,SAAS,EAAK,EAAO,CAChC,MAAO,IAAU,KAAK,EAAK,CAAK,CAClC,EAaI,GAAM,SAAa,EAAS,EAAM,CACpC,MAAO,IAAI,KAAK,EAAS,CAAI,CAC/B,EAYI,GAAW,SAAkB,EAAK,CACpC,MAAO,IAAM,KAAK,CAAG,IAAM,iBAC7B,EAaI,GAAc,SAAqB,EAAK,CAC1C,MAAO,IAAO,MAAS,MAAO,IAAQ,YAAc,MAAO,GAAI,QAAW,QAC5E,EAYI,GAAY,SAAmB,EAAQ,EAAM,CAC/C,EAAO,GAAQ,GAIf,OAFI,GAAU,CAAC,EAEN,EAAI,EAAG,EAAM,EAAO,OAAQ,EAAI,EAAK,GAAK,EACjD,AAAI,EAAK,EAAQ,CAAC,GAChB,EAAQ,KAAK,OAAO,CAAC,CAAC,EAI1B,MAAO,EACT,EAYI,GAAa,SAAoB,EAAQ,EAAM,CACjD,EAAO,GAAQ,GAEf,GAAI,GAAU,CAAC,EAEf,OAAS,KAAO,GACd,AAAI,EAAK,EAAQ,CAAG,GAClB,EAAQ,KAAK,OAAO,CAAG,CAAC,EAI5B,MAAO,EACT,EAkCI,GAAO,SAAc,EAAQ,CAC/B,MAAI,IAAU,KACL,CAAC,EAIN,GAAS,CAAM,EACV,GAAU,EAAQ,EAAM,EAI7B,GAAY,CAAM,EACb,GAAU,EAAQ,EAAG,EAGvB,GAAW,CAAM,CAC1B,EAMA,GAAO,QAAU,KCpKjB,gCAwBA,GAAI,IAAO,KACP,GAAc,OAAO,UAAU,SAS/B,GAAW,SAAkB,EAAK,CAClC,GAAI,GAAO,MAAO,GAClB,MAAQ,KAAS,UACZ,IAAS,UAAY,GAAY,KAAK,CAAG,IAAM,iBACxD,EASI,GAAU,MAAO,OAAM,SAAY,WACjC,MAAM,QACN,SAAiB,EAAK,CACpB,MAAO,IAAY,KAAK,CAAG,IAAM,gBACrC,EAUA,GAAc,SAAqB,EAAK,CACxC,MAAQ,IAAO,MACV,IAAQ,CAAG,GAAM,IAAQ,YAAc,GAAS,EAAI,MAAM,EACnE,EAUI,GAAY,SAAmB,EAAU,EAAO,CAChD,OAAS,GAAI,EAAG,EAAI,EAAM,QAElB,EAAS,EAAM,GAAI,EAAG,CAAK,IAAM,GAFP,GAAK,EAEnC,CAIR,EAUI,GAAW,SAAkB,EAAU,EAAQ,CAE/C,OADI,GAAK,GAAK,CAAM,EACX,EAAI,EAAG,EAAI,EAAG,QAEf,EAAS,EAAO,EAAG,IAAK,EAAG,GAAI,CAAM,IAAM,GAFpB,GAAK,EAEhC,CAIR,EAgCI,GAAO,SAAc,EAAU,EAAY,CAC3C,MAAQ,IAAY,CAAU,EAAI,GAAY,IAAU,KAAK,KAAM,EAAU,CAAU,CAC3F,EAIA,GAAO,QAAU,KCzIjB,gCAEA,GAAI,IAAM,OAAO,UAAU,eAsBvB,GAAS,SAAgB,EAAqB,CAGhD,OAFI,GAAU,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAE5C,EAAI,EAAG,EAAI,EAAQ,OAAQ,GAAK,EACvC,OAAS,KAAO,GAAQ,GACtB,AAAI,GAAI,KAAK,EAAQ,GAAI,CAAG,GAC1B,GAAK,GAAO,EAAQ,GAAG,IAK7B,MAAO,EACT,EAMA,GAAO,QAAU,KC1CjB,gCAIA,GAAI,IAAU,KACV,GAAQ,KAIR,GAAM,OAAO,UAAU,eAI3B,GAAO,QAAU,GAAQ,GAAI,GAAQ,EAIrC,aAAkB,CACd,KAAK,MAAQ,CAAC,CAClB,CAIA,GAAO,UAAU,IAAM,SAAU,EAAK,EAAO,CACzC,YAAK,MAAM,GAAO,GAAM,CAAK,EACtB,EACX,EAIA,GAAO,UAAU,IAAM,SAAU,EAAK,CAClC,GAAI,EAAC,GAAI,KAAK,KAAK,MAAO,CAAG,EAE7B,MAAO,IAAM,KAAK,MAAM,EAAI,CAChC,EAIA,GAAO,UAAU,OAAS,SAAU,EAAK,CACrC,aAAO,MAAK,MAAM,GACX,EACX,ICzCA,gCAEA,GAAI,IAAO,KAEX,GAAO,QAAW,UAAW,CAE5B,GAAI,GAAQ,CAAC,EACZ,EAAO,MAAO,QAAU,IAAc,OAAS,OAC/C,EAAM,EAAI,SACV,EAAmB,eACnB,EAAY,SACZ,EAED,EAAM,SAAW,GACjB,EAAM,QAAU,SAChB,EAAM,IAAM,SAAS,EAAK,EAAO,CAAC,EAClC,EAAM,IAAM,SAAS,EAAK,EAAY,CAAC,EACvC,EAAM,IAAM,SAAS,EAAK,CAAE,MAAO,GAAM,IAAI,CAAG,IAAM,MAAU,EAChE,EAAM,OAAS,SAAS,EAAK,CAAC,EAC9B,EAAM,MAAQ,UAAW,CAAC,EAC1B,EAAM,SAAW,SAAS,EAAK,EAAY,EAAe,CACzD,AAAI,GAAiB,MACpB,GAAgB,EAChB,EAAa,MAEV,GAAc,MACjB,GAAa,CAAC,GAEf,GAAI,GAAM,EAAM,IAAI,EAAK,CAAU,EACnC,EAAc,CAAG,EACjB,EAAM,IAAI,EAAK,CAAG,CACnB,EACA,EAAM,OAAS,UAAW,CACzB,GAAI,GAAM,CAAC,EACX,SAAM,QAAQ,SAAS,EAAK,EAAK,CAChC,EAAI,GAAO,CACZ,CAAC,EACM,CACR,EACA,EAAM,QAAU,UAAW,CAAC,EAC5B,EAAM,UAAY,SAAS,EAAO,CACjC,MAAO,IAAK,UAAU,CAAK,CAC5B,EACA,EAAM,YAAc,SAAS,EAAO,CACnC,GAAI,MAAO,IAAS,SACpB,GAAI,CAAE,MAAO,IAAK,MAAM,CAAK,CAAE,MAC/B,CAAW,MAAO,IAAS,MAAU,CACtC,EAKA,YAAuC,CACtC,GAAI,CAAE,MAAQ,KAAoB,IAAO,EAAI,EAAmB,MAChE,CAAa,MAAO,EAAM,CAC3B,CAEA,GAAI,EAA4B,EAC/B,EAAU,EAAI,GACd,EAAM,IAAM,SAAS,EAAK,EAAK,CAC9B,MAAI,KAAQ,OAAoB,EAAM,OAAO,CAAG,EAChD,GAAQ,QAAQ,EAAK,EAAM,UAAU,CAAG,CAAC,EAClC,EACR,EACA,EAAM,IAAM,SAAS,EAAK,EAAY,CACrC,GAAI,GAAM,EAAM,YAAY,EAAQ,QAAQ,CAAG,CAAC,EAChD,MAAQ,KAAQ,OAAY,EAAa,CAC1C,EACA,EAAM,OAAS,SAAS,EAAK,CAAE,EAAQ,WAAW,CAAG,CAAE,EACvD,EAAM,MAAQ,UAAW,CAAE,EAAQ,MAAM,CAAE,EAC3C,EAAM,QAAU,SAAS,EAAU,CAClC,OAAS,GAAE,EAAG,EAAE,EAAQ,OAAQ,IAAK,CACpC,GAAI,GAAM,EAAQ,IAAI,CAAC,EACvB,EAAS,EAAK,EAAM,IAAI,CAAG,CAAC,CAC7B,CACD,UACU,GAAO,EAAI,gBAAgB,YAAa,CAClD,GAAI,GACH,EAWD,GAAI,CACH,EAAmB,GAAI,eAAc,UAAU,EAC/C,EAAiB,KAAK,EACtB,EAAiB,MAAM,IAAI,EAAU,uBAAuB,EAAU,uCAAuC,EAC7G,EAAiB,MAAM,EACvB,EAAe,EAAiB,EAAE,OAAO,GAAG,SAC5C,EAAU,EAAa,cAAc,KAAK,CAC3C,MAAE,CAGD,EAAU,EAAI,cAAc,KAAK,EACjC,EAAe,EAAI,IACpB,CACA,GAAI,GAAgB,SAAS,EAAe,CAC3C,MAAO,WAAW,CACjB,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAClD,EAAK,QAAQ,CAAO,EAGpB,EAAa,YAAY,CAAO,EAChC,EAAQ,YAAY,mBAAmB,EACvC,EAAQ,KAAK,CAAgB,EAC7B,GAAI,GAAS,EAAc,MAAM,EAAO,CAAI,EAC5C,SAAa,YAAY,CAAO,EACzB,CACR,CACD,EAKI,EAAsB,GAAI,QAAO,wCAAyC,GAAG,EAC7E,EAAW,SAAS,EAAK,CAC5B,MAAO,GAAI,QAAQ,KAAM,OAAO,EAAE,QAAQ,EAAqB,KAAK,CACrE,EACA,EAAM,IAAM,EAAc,SAAS,EAAS,EAAK,EAAK,CAErD,MADA,GAAM,EAAS,CAAG,EACd,IAAQ,OAAoB,EAAM,OAAO,CAAG,EAChD,GAAQ,aAAa,EAAK,EAAM,UAAU,CAAG,CAAC,EAC9C,EAAQ,KAAK,CAAgB,EACtB,EACR,CAAC,EACD,EAAM,IAAM,EAAc,SAAS,EAAS,EAAK,EAAY,CAC5D,EAAM,EAAS,CAAG,EAClB,GAAI,GAAM,EAAM,YAAY,EAAQ,aAAa,CAAG,CAAC,EACrD,MAAQ,KAAQ,OAAY,EAAa,CAC1C,CAAC,EACD,EAAM,OAAS,EAAc,SAAS,EAAS,EAAK,CACnD,EAAM,EAAS,CAAG,EAClB,EAAQ,gBAAgB,CAAG,EAC3B,EAAQ,KAAK,CAAgB,CAC9B,CAAC,EACD,EAAM,MAAQ,EAAc,SAAS,EAAS,CAC7C,GAAI,GAAa,EAAQ,YAAY,gBAAgB,WACrD,EAAQ,KAAK,CAAgB,EAC7B,OAAS,GAAE,EAAW,OAAO,EAAG,GAAG,EAAG,IACrC,EAAQ,gBAAgB,EAAW,GAAG,IAAI,EAE3C,EAAQ,KAAK,CAAgB,CAC9B,CAAC,EACD,EAAM,QAAU,EAAc,SAAS,EAAS,EAAU,CAEzD,OADI,GAAa,EAAQ,YAAY,gBAAgB,WAC5C,EAAE,EAAG,EAAM,EAAK,EAAW,GAAI,EAAE,EACzC,EAAS,EAAK,KAAM,EAAM,YAAY,EAAQ,aAAa,EAAK,IAAI,CAAC,CAAC,CAExE,CAAC,CACF,CAEA,GAAI,CACH,GAAI,GAAU,cACd,EAAM,IAAI,EAAS,CAAO,EACtB,EAAM,IAAI,CAAO,GAAK,GAAW,GAAM,SAAW,IACtD,EAAM,OAAO,CAAO,CACrB,MAAE,CACD,EAAM,SAAW,EAClB,CACA,SAAM,QAAU,CAAC,EAAM,SAEhB,CACR,EAAE,ICxKF,gCAIA,GAAI,IAAU,KACV,GAAW,KACX,GAAQ,KAMZ,YAAe,EAAS,CACpB,KAAK,QAAQ,CAAO,CACxB,CAIA,GAAM,UAAU,QAAU,SAAU,EAAS,CACzC,GAAI,UAAU,SAAW,EACrB,MAAO,MAAK,SAChB,EAAU,GAAW,CAAC,EACtB,GAAS,EAAS,CAAE,QAAS,EAAK,CAAC,EACnC,KAAK,QAAU,EAAQ,SAAW,GAAM,QACxC,KAAK,SAAW,CACpB,EAIA,GAAM,UAAU,IAAM,SAAU,EAAK,EAAO,CACxC,MAAK,MAAK,QAEH,GAAM,IAAI,EAAK,CAAK,EADhB,EAEf,EAIA,GAAM,UAAU,IAAM,SAAU,EAAK,CACjC,MAAK,MAAK,QAEH,GAAM,IAAI,CAAG,EADT,IAEf,EAIA,GAAM,UAAU,OAAS,SAAU,EAAK,CACpC,MAAK,MAAK,QAEH,GAAM,OAAO,CAAG,EADZ,EAEf,EAIA,GAAO,QAAU,GAAQ,GAAI,GAAO,EAIpC,GAAO,QAAQ,MAAQ,KCzDvB,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAI5D,GAAI,IAAQ,KACR,GAAS,KACT,GAAQ,KAAiB,kBAAkB,EAC3C,GAAW,KACX,GAAS,KACT,GAAS,KACT,GAAQ,KACR,GAAkB,KAItB,GAAO,QAAU,EAIjB,WAAgB,EAAS,CACrB,KAAK,QAAQ,CAAO,EACpB,KAAK,WAAW,CACpB,CAOA,EAAO,UAAU,WAAa,UAAY,CAGtC,GAFA,GAAO,IAAI,cAAe,EAAI,EAE1B,GAAO,IAAI,aAAa,EAAG,CAC3B,GAAO,OAAO,aAAa,EAC3B,KAAK,SAAW,GAChB,MACJ,CAEA,GAAI,GAAM,QAAS,CACf,KAAK,SAAW,GAChB,MACJ,CAEA,GAAM,uEAAuE,EAC7E,KAAK,SAAW,EACpB,EAIA,EAAO,UAAU,QAAU,UAAY,CACnC,MAAO,MAAK,QAChB,EAIA,EAAO,UAAU,QAAU,SAAU,EAAS,CAC1C,GAAI,UAAU,SAAW,EACrB,MAAO,MAAK,SAChB,KAAK,SAAW,GAAS,GAAW,CAAC,EAAG,KAAK,UAAY,CAAC,CAAC,CAC/D,EAIA,EAAO,UAAU,GAAK,SAAU,EAAI,CAChC,OAAQ,UAAU,YACT,GACD,MAAO,MAAK,OAAO,MAClB,GACD,MAAO,MAAK,OAAO,CAAE,WAIjC,EAIA,EAAO,UAAU,OAAS,UAAY,CAClC,GAAI,CAAC,KAAK,SAAS,QACf,MAAO,MAAK,MAAQ,OAAY,KAAO,KAAK,IAGhD,GAAI,GAAW,KAAK,iBAAiB,EACrC,GAAI,EACA,MAAO,GAGX,GAAI,GAAO,KAAK,uBAAuB,EACvC,MAAI,GAEA,MAAK,gBAAgB,CAAI,EAClB,GAEJ,IACX,EAMA,EAAO,UAAU,iBAAmB,UAAY,CAC5C,MAAO,MAAK,QAAQ,EAAE,IAAI,KAAK,SAAS,OAAO,GAAG,CACtD,EAIA,EAAO,UAAU,uBAAyB,UAAY,CAClD,MAAK,MAAK,SAAS,6BAGZ,KAFI,GAAM,IAAI,KAAK,SAAS,OAAO,GAAG,CAGjD,EAIA,EAAO,UAAU,OAAS,SAAU,EAAI,CACpC,AAAI,KAAK,SAAS,QACd,MAAK,gBAAgB,CAAE,EACvB,KAAK,qBAAqB,CAAE,GAG5B,KAAK,IAAM,CAEnB,EAIA,EAAO,UAAU,gBAAkB,SAAU,EAAI,CAC7C,KAAK,QAAQ,EAAE,IAAI,KAAK,SAAS,OAAO,IAAK,CAAE,CACnD,EAIA,EAAO,UAAU,qBAAuB,SAAU,EAAI,CAClD,AAAK,KAAK,SAAS,8BACf,GAAM,IAAI,KAAK,SAAS,OAAO,IAAK,CAAE,CAE9C,EAMA,EAAO,UAAU,WAAa,EAAO,UAAU,OAAS,SAAU,EAAQ,CACtE,OAAQ,UAAU,YACT,GACD,MAAO,MAAK,WAAW,MACtB,GACD,MAAO,MAAK,WAAW,CAAM,WAIzC,EAKA,EAAO,UAAU,WAAa,UAAY,CACtC,GAAI,GAAM,KAAK,SAAS,QAClB,GAAM,IAAI,KAAK,SAAS,aAAa,GAAG,EACxC,KAAK,QACX,MAAO,GAAM,GAAgB,GAAM,CAAG,CAAC,EAAI,CAAC,CAChD,EAIA,EAAO,UAAU,WAAa,SAAU,EAAQ,CAC5C,EAAS,GAAU,CAAC,EACpB,AAAI,KAAK,SAAS,QACd,GAAM,IAAI,KAAK,SAAS,aAAa,IAAK,CAAM,EAGhD,KAAK,QAAU,CAEvB,EAKA,EAAO,UAAU,SAAW,SAAU,EAAI,EAAQ,CAC9C,EAAS,GAAU,CAAC,EACpB,GAAI,GAAU,KAAK,GAAG,EACtB,AAAI,KAAY,MAAQ,IAAY,IAChC,GAAS,GAAO,KAAK,OAAO,EAAG,CAAM,GACrC,GACA,KAAK,GAAG,CAAE,EACd,KAAK,MAAM,kBAAmB,EAAI,CAAM,EACxC,KAAK,OAAO,CAAM,EAClB,KAAK,KAAK,CACd,EAIA,EAAO,UAAU,KAAO,UAAY,CAChC,MAAK,MAAK,SAAS,QAEnB,MAAK,OAAO,KAAK,GAAG,CAAC,EACrB,KAAK,WAAW,KAAK,OAAO,CAAC,EACtB,IAHI,EAIf,EAIA,EAAO,UAAU,OAAS,UAAY,CAClC,KAAK,GAAG,IAAI,EACZ,KAAK,OAAO,CAAC,CAAC,EACd,KAAK,QAAQ,EAAE,OAAO,KAAK,SAAS,OAAO,GAAG,EAC9C,GAAM,OAAO,KAAK,SAAS,OAAO,GAAG,EACrC,GAAM,OAAO,KAAK,SAAS,aAAa,GAAG,CAC/C,EAIA,EAAO,UAAU,MAAQ,UAAY,CACjC,KAAK,OAAO,EACZ,KAAK,QAAQ,CAAC,CAAC,CACnB,EAIA,EAAO,UAAU,KAAO,UAAY,CAChC,KAAK,GAAG,KAAK,GAAG,CAAC,EACjB,KAAK,OAAO,KAAK,OAAO,CAAC,CAC7B,IC/NA,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAI5D,GAAI,IAAS,KACT,GAAU,KACV,GAAQ,KAAiB,iBAAiB,EAC1C,GAAU,KAId,GAAM,SAAW,CACb,QAAS,GACT,OAAQ,CACJ,IAAK,cACT,EACA,aAAc,CACV,IAAK,sBACT,CACJ,EAIA,YAAe,EAAS,CACpB,KAAK,SAAW,GAAM,SACtB,KAAK,MAAQ,GACb,GAAO,KAAK,KAAM,CAAO,CAC7B,CAIA,GAAQ,GAAO,EAAM,EAIrB,GAAO,QAAU,GAAQ,GAAI,GAAO,EAIpC,GAAO,QAAQ,MAAQ,KCxCvB,gCAIA,AAQA,GAAI,IAAW,OAAO,UAClB,GAAO,GAAS,eAChB,GAAQ,GAAS,SACjB,GACJ,AAAI,MAAO,SAAW,YACpB,IAAgB,OAAO,UAAU,SAEnC,GAAI,IACJ,AAAI,MAAO,SAAW,YACpB,IAAgB,OAAO,UAAU,SAEnC,GAAI,GAAc,SAAU,EAAO,CACjC,MAAO,KAAU,CACnB,EACI,GAAiB,CACnB,QAAW,EACX,OAAQ,EACR,OAAQ,EACR,UAAW,CACb,EAEI,GAAc,+EACd,GAAW,iBAMX,EAAK,CAAC,EAgBV,EAAG,EAAI,EAAG,KAAO,SAAU,EAAO,EAAM,CACtC,MAAO,OAAO,KAAU,CAC1B,EAWA,EAAG,QAAU,SAAU,EAAO,CAC5B,MAAO,OAAO,GAAU,GAC1B,EAWA,EAAG,MAAQ,SAAU,EAAO,CAC1B,GAAI,GAAO,GAAM,KAAK,CAAK,EACvB,EAEJ,GAAI,IAAS,kBAAoB,IAAS,sBAAwB,IAAS,kBACzE,MAAO,GAAM,SAAW,EAG1B,GAAI,IAAS,kBAAmB,CAC9B,IAAK,IAAO,GACV,GAAI,GAAK,KAAK,EAAO,CAAG,EACtB,MAAO,GAGX,MAAO,EACT,CAEA,MAAO,CAAC,CACV,EAWA,EAAG,MAAQ,SAAe,EAAO,EAAO,CACtC,GAAI,IAAU,EACZ,MAAO,GAGT,GAAI,GAAO,GAAM,KAAK,CAAK,EACvB,EAEJ,GAAI,IAAS,GAAM,KAAK,CAAK,EAC3B,MAAO,GAGT,GAAI,IAAS,kBAAmB,CAC9B,IAAK,IAAO,GACV,GAAI,CAAC,EAAG,MAAM,EAAM,GAAM,EAAM,EAAI,GAAK,CAAE,KAAO,IAChD,MAAO,GAGX,IAAK,IAAO,GACV,GAAI,CAAC,EAAG,MAAM,EAAM,GAAM,EAAM,EAAI,GAAK,CAAE,KAAO,IAChD,MAAO,GAGX,MAAO,EACT,CAEA,GAAI,IAAS,iBAAkB,CAE7B,GADA,EAAM,EAAM,OACR,IAAQ,EAAM,OAChB,MAAO,GAET,KAAO,KACL,GAAI,CAAC,EAAG,MAAM,EAAM,GAAM,EAAM,EAAI,EAClC,MAAO,GAGX,MAAO,EACT,CAEA,MAAI,KAAS,oBACJ,EAAM,YAAc,EAAM,UAG/B,IAAS,gBACJ,EAAM,QAAQ,IAAM,EAAM,QAAQ,EAGpC,EACT,EAYA,EAAG,OAAS,SAAU,EAAO,EAAM,CACjC,GAAI,GAAO,MAAO,GAAK,GACvB,MAAO,KAAS,SAAW,CAAC,CAAC,EAAK,GAAS,CAAC,GAAe,EAC7D,EAWA,EAAG,SAAW,EAAG,WAAgB,SAAU,EAAO,EAAa,CAC7D,MAAO,aAAiB,EAC1B,EAWA,EAAG,IAAM,EAAG,KAAU,SAAU,EAAO,CACrC,MAAO,KAAU,IACnB,EAWA,EAAG,MAAQ,EAAG,UAAY,SAAU,EAAO,CACzC,MAAO,OAAO,GAAU,GAC1B,EAeA,EAAG,KAAO,EAAG,UAAY,SAAU,EAAO,CACxC,GAAI,GAAsB,GAAM,KAAK,CAAK,IAAM,qBAC5C,EAAiB,CAAC,EAAG,MAAM,CAAK,GAAK,EAAG,UAAU,CAAK,GAAK,EAAG,OAAO,CAAK,GAAK,EAAG,GAAG,EAAM,MAAM,EACtG,MAAO,IAAuB,CAChC,EAeA,EAAG,MAAQ,MAAM,SAAW,SAAU,EAAO,CAC3C,MAAO,IAAM,KAAK,CAAK,IAAM,gBAC/B,EAUA,EAAG,KAAK,MAAQ,SAAU,EAAO,CAC/B,MAAO,GAAG,KAAK,CAAK,GAAK,EAAM,SAAW,CAC5C,EAUA,EAAG,MAAM,MAAQ,SAAU,EAAO,CAChC,MAAO,GAAG,MAAM,CAAK,GAAK,EAAM,SAAW,CAC7C,EAWA,EAAG,UAAY,SAAU,EAAO,CAC9B,MAAO,CAAC,CAAC,GAAS,CAAC,EAAG,KAAK,CAAK,GAC3B,GAAK,KAAK,EAAO,QAAQ,GACzB,SAAS,EAAM,MAAM,GACrB,EAAG,OAAO,EAAM,MAAM,GACtB,EAAM,QAAU,CACvB,EAeA,EAAG,KAAO,EAAG,QAAa,SAAU,EAAO,CACzC,MAAO,IAAM,KAAK,CAAK,IAAM,kBAC/B,EAWA,EAAG,MAAW,SAAU,EAAO,CAC7B,MAAO,GAAG,KAAK,CAAK,GAAK,QAAQ,OAAO,CAAK,CAAC,IAAM,EACtD,EAWA,EAAG,KAAU,SAAU,EAAO,CAC5B,MAAO,GAAG,KAAK,CAAK,GAAK,QAAQ,OAAO,CAAK,CAAC,IAAM,EACtD,EAeA,EAAG,KAAO,SAAU,EAAO,CACzB,MAAO,IAAM,KAAK,CAAK,IAAM,eAC/B,EASA,EAAG,KAAK,MAAQ,SAAU,EAAO,CAC/B,MAAO,GAAG,KAAK,CAAK,GAAK,CAAC,MAAM,OAAO,CAAK,CAAC,CAC/C,EAeA,EAAG,QAAU,SAAU,EAAO,CAC5B,MAAO,KAAU,QACZ,MAAO,aAAgB,KACvB,YAAiB,cACjB,EAAM,WAAa,CAC1B,EAeA,EAAG,MAAQ,SAAU,EAAO,CAC1B,MAAO,IAAM,KAAK,CAAK,IAAM,gBAC/B,EAeA,EAAG,GAAK,EAAG,SAAc,SAAU,EAAO,CACxC,GAAI,GAAU,MAAO,QAAW,KAAe,IAAU,OAAO,MAChE,GAAI,EACF,MAAO,GAET,GAAI,GAAM,GAAM,KAAK,CAAK,EAC1B,MAAO,KAAQ,qBAAuB,IAAQ,8BAAgC,IAAQ,wBACxF,EAeA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,IAAM,KAAK,CAAK,IAAM,iBAC/B,EAUA,EAAG,SAAW,SAAU,EAAO,CAC7B,MAAO,KAAU,KAAY,IAAU,IACzC,EAWA,EAAG,QAAU,SAAU,EAAO,CAC5B,MAAO,GAAG,OAAO,CAAK,GAAK,CAAC,EAAY,CAAK,GAAK,CAAC,EAAG,SAAS,CAAK,GAAK,EAAQ,IAAM,CACzF,EAYA,EAAG,YAAc,SAAU,EAAO,EAAG,CACnC,GAAI,GAAqB,EAAG,SAAS,CAAK,EACtC,EAAoB,EAAG,SAAS,CAAC,EACjC,EAAkB,EAAG,OAAO,CAAK,GAAK,CAAC,EAAY,CAAK,GAAK,EAAG,OAAO,CAAC,GAAK,CAAC,EAAY,CAAC,GAAK,IAAM,EAC1G,MAAO,IAAsB,GAAsB,GAAmB,EAAQ,IAAM,CACtF,EAWA,EAAG,QAAU,EAAG,IAAS,SAAU,EAAO,CACxC,MAAO,GAAG,OAAO,CAAK,GAAK,CAAC,EAAY,CAAK,GAAK,EAAQ,IAAM,CAClE,EAYA,EAAG,QAAU,SAAU,EAAO,EAAQ,CACpC,GAAI,EAAY,CAAK,EACnB,KAAM,IAAI,WAAU,0BAA0B,EACzC,GAAI,CAAC,EAAG,UAAU,CAAM,EAC7B,KAAM,IAAI,WAAU,oCAAoC,EAI1D,OAFI,GAAM,EAAO,OAEV,EAAE,GAAO,GACd,GAAI,EAAQ,EAAO,GACjB,MAAO,GAIX,MAAO,EACT,EAYA,EAAG,QAAU,SAAU,EAAO,EAAQ,CACpC,GAAI,EAAY,CAAK,EACnB,KAAM,IAAI,WAAU,0BAA0B,EACzC,GAAI,CAAC,EAAG,UAAU,CAAM,EAC7B,KAAM,IAAI,WAAU,oCAAoC,EAI1D,OAFI,GAAM,EAAO,OAEV,EAAE,GAAO,GACd,GAAI,EAAQ,EAAO,GACjB,MAAO,GAIX,MAAO,EACT,EAWA,EAAG,IAAM,SAAU,EAAO,CACxB,MAAO,CAAC,EAAG,OAAO,CAAK,GAAK,IAAU,CACxC,EAWA,EAAG,KAAO,SAAU,EAAO,CACzB,MAAO,GAAG,SAAS,CAAK,GAAM,EAAG,OAAO,CAAK,GAAK,IAAU,GAAS,EAAQ,IAAM,CACrF,EAWA,EAAG,IAAM,SAAU,EAAO,CACxB,MAAO,GAAG,SAAS,CAAK,GAAM,EAAG,OAAO,CAAK,GAAK,IAAU,GAAS,EAAQ,IAAM,CACrF,EAYA,EAAG,GAAK,SAAU,EAAO,EAAO,CAC9B,GAAI,EAAY,CAAK,GAAK,EAAY,CAAK,EACzC,KAAM,IAAI,WAAU,0BAA0B,EAEhD,MAAO,CAAC,EAAG,SAAS,CAAK,GAAK,CAAC,EAAG,SAAS,CAAK,GAAK,GAAS,CAChE,EAYA,EAAG,GAAK,SAAU,EAAO,EAAO,CAC9B,GAAI,EAAY,CAAK,GAAK,EAAY,CAAK,EACzC,KAAM,IAAI,WAAU,0BAA0B,EAEhD,MAAO,CAAC,EAAG,SAAS,CAAK,GAAK,CAAC,EAAG,SAAS,CAAK,GAAK,EAAQ,CAC/D,EAYA,EAAG,GAAK,SAAU,EAAO,EAAO,CAC9B,GAAI,EAAY,CAAK,GAAK,EAAY,CAAK,EACzC,KAAM,IAAI,WAAU,0BAA0B,EAEhD,MAAO,CAAC,EAAG,SAAS,CAAK,GAAK,CAAC,EAAG,SAAS,CAAK,GAAK,GAAS,CAChE,EAYA,EAAG,GAAK,SAAU,EAAO,EAAO,CAC9B,GAAI,EAAY,CAAK,GAAK,EAAY,CAAK,EACzC,KAAM,IAAI,WAAU,0BAA0B,EAEhD,MAAO,CAAC,EAAG,SAAS,CAAK,GAAK,CAAC,EAAG,SAAS,CAAK,GAAK,EAAQ,CAC/D,EAYA,EAAG,OAAS,SAAU,EAAO,EAAO,EAAQ,CAC1C,GAAI,EAAY,CAAK,GAAK,EAAY,CAAK,GAAK,EAAY,CAAM,EAChE,KAAM,IAAI,WAAU,0BAA0B,EACzC,GAAI,CAAC,EAAG,OAAO,CAAK,GAAK,CAAC,EAAG,OAAO,CAAK,GAAK,CAAC,EAAG,OAAO,CAAM,EACpE,KAAM,IAAI,WAAU,+BAA+B,EAErD,GAAI,GAAgB,EAAG,SAAS,CAAK,GAAK,EAAG,SAAS,CAAK,GAAK,EAAG,SAAS,CAAM,EAClF,MAAO,IAAkB,GAAS,GAAS,GAAS,CACtD,EAcA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,IAAM,KAAK,CAAK,IAAM,iBAC/B,EAUA,EAAG,UAAY,SAAqB,EAAO,CACzC,MAAK,GAGD,QAAO,IAAU,UAAY,EAAG,OAAO,CAAK,GAAK,EAAG,GAAG,CAAK,GAAK,EAAG,MAAM,CAAK,GAF1E,EAMX,EAWA,EAAG,KAAO,SAAU,EAAO,CACzB,MAAO,GAAG,OAAO,CAAK,GAAK,EAAM,cAAgB,QAAU,CAAC,EAAM,UAAY,CAAC,EAAM,WACvF,EAeA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,IAAM,KAAK,CAAK,IAAM,iBAC/B,EAeA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,IAAM,KAAK,CAAK,IAAM,iBAC/B,EAeA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,GAAG,OAAO,CAAK,GAAM,EAAC,EAAM,QAAU,GAAY,KAAK,CAAK,EACrE,EAeA,EAAG,IAAM,SAAU,EAAO,CACxB,MAAO,GAAG,OAAO,CAAK,GAAM,EAAC,EAAM,QAAU,GAAS,KAAK,CAAK,EAClE,EAWA,EAAG,OAAS,SAAU,EAAO,CAC3B,MAAO,OAAO,SAAW,YAAc,GAAM,KAAK,CAAK,IAAM,mBAAqB,MAAO,IAAc,KAAK,CAAK,GAAM,QACzH,EAWA,EAAG,OAAS,SAAU,EAAO,CAE3B,MAAO,OAAO,SAAW,YAAc,GAAM,KAAK,CAAK,IAAM,mBAAqB,MAAO,IAAc,KAAK,CAAK,GAAM,QACzH,EAEA,GAAO,QAAU,ICjzBjB,gCAEA,YAAgB,EAAG,CACjB,GAAI,EAAE,SAAW,EAAE,QAAU,EAAE,SAAW,EAAE,SAC1C,MAAO,GAKT,GAAI,GAAQ,EAAE,MACV,EAAS,EAAE,OACf,MAAI,CAAC,GAAS,IAAW,OAEf,CAAC,EAAS,GAAO,CAAC,EAAS,GAAO,EAAS,EAC1C,IAAU,CAKvB,CAMA,GAAO,QAAU,KCzBjB,gCAEA,GAAI,IAAU,GAEd,GAAW,SAAU,EAAI,CACxB,GAAI,MAAO,IAAO,WAAY,KAAM,IAAI,WAAU,EAAK,oBAAoB,EAC3E,MAAO,EACR,EAEA,GAAa,SAAU,EAAU,CAChC,GAAI,GAAO,SAAS,eAAe,EAAE,EAAG,EAAO,EAAI,EACnD,UAAI,GAAS,UAAY,CACxB,GAAI,GACJ,GAAI,EAAC,EAGL,IAFA,EAAO,EACP,EAAQ,KACJ,MAAO,IAAS,WAAY,CAC/B,EAAK,EACL,MACD,CACA,EAAK,QAAQ,SAAU,EAAI,CAAE,EAAG,CAAG,CAAC,EACrC,CAAC,EAAE,QAAQ,EAAM,CAAE,cAAe,EAAK,CAAC,EACjC,SAAU,EAAI,CAEpB,GADA,GAAS,CAAE,EACP,EAAO,CACV,AAAI,MAAO,IAAU,WAAY,EAAQ,CAAC,EAAO,CAAE,EAC9C,EAAM,KAAK,CAAE,EAClB,MACD,CACA,EAAQ,EACR,EAAK,KAAQ,EAAI,EAAE,EAAI,CACxB,CACD,EAEA,GAAO,QAAW,UAAY,CAE7B,GAAK,MAAO,SAAY,KAAgB,SACrC,MAAO,SAAQ,UAAa,WAC9B,MAAO,SAAQ,SAIhB,GAAK,MAAO,WAAa,UAAa,SAAU,CAC/C,GAAI,MAAO,mBAAqB,WAC/B,MAAO,IAAW,gBAAgB,EAEnC,GAAI,MAAO,yBAA2B,WACrC,MAAO,IAAW,sBAAsB,CAE1C,CAIA,MAAI,OAAO,eAAiB,WACpB,SAAU,EAAI,CAAE,aAAa,GAAS,CAAE,CAAC,CAAG,EAIhD,MAAO,aAAe,WAClB,SAAU,EAAI,CAAE,WAAW,GAAS,CAAE,EAAG,CAAC,CAAG,EAG9C,IACR,EAAE,IC/DF,gCAMA,GAAI,IAAO,KAEP,GAAc,OAAO,UAAU,SAW/B,GAAW,SAAkB,EAAK,CACpC,GAAI,GAAO,MAAO,GAClB,MAAO,KAAS,UAAa,IAAS,UAAY,GAAY,KAAK,CAAG,IAAM,iBAC9E,EAWI,GAAU,MAAO,OAAM,SAAY,WAAa,MAAM,QAAU,SAAiB,EAAK,CACxF,MAAO,IAAY,KAAK,CAAG,IAAM,gBACnC,EAYI,GAAc,SAAqB,EAAK,CAC1C,MAAO,IAAO,MAAS,IAAQ,CAAG,GAAM,IAAQ,YAAc,GAAS,EAAI,MAAM,EACnF,EAWI,GAAY,SAAmB,EAAU,EAAO,CAClD,OAAS,GAAI,EAAG,EAAI,EAAM,QAEpB,EAAS,EAAM,GAAI,EAAG,CAAK,IAAM,GAFL,GAAK,EAErC,CAIJ,EAWI,GAAW,SAAkB,EAAU,EAAQ,CAGjD,OAFI,GAAK,GAAK,CAAM,EAEX,EAAI,EAAG,EAAI,EAAG,QAEjB,EAAS,EAAO,EAAG,IAAK,EAAG,GAAI,CAAM,IAAM,GAFlB,GAAK,EAElC,CAIJ,EAiCI,GAAO,SAAc,EAAU,EAAY,CAC7C,MAAQ,IAAY,CAAU,EAAI,GAAY,IAAU,KAAK,KAAM,EAAU,CAAU,CACzF,EAMA,GAAO,QAAU,KChIjB,gCAMA,GAAI,IAAO,KAEP,GAAa,OAAO,UAAU,QAW9B,GAAgB,SAAuB,EAAQ,EAAQ,CAEzD,MAAI,KAAW,EACN,IAAW,GAAK,EAAI,IAAW,EAAI,EAGrC,IAAW,GAAU,IAAW,CACzC,EA+BI,GAAW,SAAkB,EAAe,EAAY,CAC1D,GAAI,GAAQ,GAGZ,MAAI,OAAO,IAAe,SACjB,GAAW,KAAK,EAAY,CAAa,IAAM,GAIxD,IAAK,SAAS,EAAO,CACnB,GAAI,GAAc,EAAO,CAAa,EACpC,SAAQ,GAED,EAEX,EAAG,CAAU,EAEN,EACT,EAMA,GAAO,QAAU,KCjFjB,gCAwBA,GAAI,IAAO,KAiBP,GAAM,SAAa,EAAU,EAAY,CACzC,GAAI,MAAO,IAAa,WACpB,KAAM,IAAI,WAAU,sCAAwC,MAAO,EAAQ,EAE/E,GAAI,GAAS,CAAC,EACd,UAAK,SAAU,EAAK,EAAG,EAAY,CAC/B,EAAO,KAAK,EAAS,EAAK,EAAG,CAAU,CAAC,CAC5C,EAAG,CAAU,EACN,CACX,EAIA,GAAO,QAAU,KCtDjB,mBAOA,GAAI,IAAmB,MAAO,QAAW,KAAe,OAAO,iBAAmB,OAAO,gBAAgB,KAAK,MAAM,GAC7F,MAAO,UAAa,KAAe,MAAO,QAAO,SAAS,iBAAmB,YAAc,SAAS,gBAAgB,KAAK,QAAQ,EAExJ,AAAI,GAEE,IAAQ,GAAI,YAAW,EAAE,EAE7B,GAAO,QAAU,UAAqB,CACpC,UAAgB,EAAK,EACd,EACT,GAMI,IAAO,GAAI,OAAM,EAAE,EAEvB,GAAO,QAAU,UAAmB,CAClC,OAAS,GAAI,EAAG,EAAG,EAAI,GAAI,IACzB,AAAK,GAAI,KAAU,GAAG,GAAI,KAAK,OAAO,EAAI,YAC1C,GAAK,GAAK,IAAQ,IAAI,IAAS,GAAK,IAGtC,MAAO,GACT,GApBI,OAWA,KCvBN,mBAIA,GAAI,IAAY,CAAC,EACjB,IAAS,GAAI,EAAG,GAAI,IAAK,EAAE,GACzB,GAAU,IAAM,IAAI,KAAO,SAAS,EAAE,EAAE,OAAO,CAAC,EADzC,OAIT,YAAqB,EAAK,EAAQ,CAChC,GAAI,GAAI,GAAU,EACd,EAAM,GAEV,MAAQ,CACN,EAAI,EAAI,MAAO,EAAI,EAAI,MACvB,EAAI,EAAI,MAAO,EAAI,EAAI,MAAO,IAC9B,EAAI,EAAI,MAAO,EAAI,EAAI,MAAO,IAC9B,EAAI,EAAI,MAAO,EAAI,EAAI,MAAO,IAC9B,EAAI,EAAI,MAAO,EAAI,EAAI,MAAO,IAC9B,EAAI,EAAI,MAAO,EAAI,EAAI,MACvB,EAAI,EAAI,MAAO,EAAI,EAAI,MACvB,EAAI,EAAI,MAAO,EAAI,EAAI,KACzB,EAAG,KAAK,EAAE,CACZ,CAEA,GAAO,QAAU,KCzBjB,sBAAI,IAAM,KACN,GAAc,KAElB,YAAY,EAAS,EAAK,EAAQ,CAChC,GAAI,GAAI,GAAO,GAAU,EAEzB,AAAI,MAAO,IAAY,UACrB,GAAM,IAAY,SAAW,GAAI,OAAM,EAAE,EAAI,KAC7C,EAAU,MAEZ,EAAU,GAAW,CAAC,EAEtB,GAAI,GAAO,EAAQ,QAAW,GAAQ,KAAO,IAAK,EAOlD,GAJA,EAAK,GAAM,EAAK,GAAK,GAAQ,GAC7B,EAAK,GAAM,EAAK,GAAK,GAAQ,IAGzB,EACF,OAAS,GAAK,EAAG,EAAK,GAAI,EAAE,EAC1B,EAAI,EAAI,GAAM,EAAK,GAIvB,MAAO,IAAO,GAAY,CAAI,CAChC,CAEA,GAAO,QAAU,KC5BjB,mBAAC,UAAU,EAAS,CAChB,GAAI,MAAO,KAAY,SAEnB,GAAO,QAAU,EAAQ,UAClB,MAAO,SAAW,YAAc,OAAO,IAE9C,OAAO,CAAO,MACX,CAEH,GAAI,GAEJ,GAAI,CACA,EAAO,MACX,MAAE,CACE,EAAO,IACX,CAEA,EAAK,SAAW,EAAQ,CAC5B,CACJ,GAAE,SAAU,EAAW,CAEnB,aAeA,GAAI,GAAQ,SAAU,EAAG,EAAG,CACxB,MAAQ,GAAI,EAAK,UACrB,EACI,EAAU,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EAG7F,WAAa,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAC3B,SAAI,EAAM,EAAM,EAAG,CAAC,EAAG,EAAM,EAAG,CAAC,CAAC,EAC3B,EAAO,GAAK,EAAM,IAAO,GAAK,EAAK,CAAC,CAC/C,CAEA,WAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAC7B,MAAO,GAAK,EAAI,EAAO,CAAC,EAAK,EAAI,EAAG,EAAG,EAAG,EAAG,CAAC,CAClD,CAEA,WAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAC7B,MAAO,GAAK,EAAI,EAAM,EAAK,CAAC,EAAK,EAAG,EAAG,EAAG,EAAG,CAAC,CAClD,CAEA,WAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAC7B,MAAO,GAAI,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,CACvC,CAEA,WAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAC7B,MAAO,GAAI,EAAK,GAAK,CAAC,GAAK,EAAG,EAAG,EAAG,EAAG,CAAC,CAC5C,CAEA,WAAkB,EAAG,EAAG,CACpB,GAAI,GAAI,EAAE,GACN,EAAI,EAAE,GACN,EAAI,EAAE,GACN,EAAI,EAAE,GAEV,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,SAAS,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,SAAS,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,MAAM,EACpC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EACzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,SAAS,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EACzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,UAAU,EAExC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,WAAW,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,SAAS,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,QAAQ,EACrC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,UAAU,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,SAAS,EACrC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,SAAS,EACrC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EAEzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,OAAO,EACnC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,UAAU,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,SAAS,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,WAAW,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EACzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,SAAS,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,QAAQ,EACrC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,UAAU,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,SAAS,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EAEvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EACzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,SAAS,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,EAAG,UAAU,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,QAAQ,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,SAAS,EACvC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,WAAW,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,UAAU,EACxC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,EAAG,UAAU,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,IAAK,GAAI,WAAW,EACzC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,SAAS,EACtC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAI,GAAI,UAAU,EAEvC,EAAE,GAAK,EAAM,EAAG,EAAE,EAAE,EACpB,EAAE,GAAK,EAAM,EAAG,EAAE,EAAE,EACpB,EAAE,GAAK,EAAM,EAAG,EAAE,EAAE,EACpB,EAAE,GAAK,EAAM,EAAG,EAAE,EAAE,CACxB,CAEA,WAAgB,EAAG,CACf,GAAI,GAAU,CAAC,EACX,EAEJ,IAAK,EAAI,EAAG,EAAI,GAAI,GAAK,EACrB,EAAQ,GAAK,GAAK,EAAE,WAAW,CAAC,EAAK,GAAE,WAAW,EAAI,CAAC,GAAK,GAAM,GAAE,WAAW,EAAI,CAAC,GAAK,IAAO,GAAE,WAAW,EAAI,CAAC,GAAK,IAE3H,MAAO,EACX,CAEA,WAAsB,EAAG,CACrB,GAAI,GAAU,CAAC,EACX,EAEJ,IAAK,EAAI,EAAG,EAAI,GAAI,GAAK,EACrB,EAAQ,GAAK,GAAK,EAAE,GAAM,GAAE,EAAI,IAAM,GAAM,GAAE,EAAI,IAAM,IAAO,GAAE,EAAI,IAAM,IAE/E,MAAO,EACX,CAEA,WAAc,EAAG,CACb,GAAI,GAAI,EAAE,OACN,EAAQ,CAAC,WAAY,WAAY,YAAa,SAAS,EACvD,EACA,EACA,EACA,EACA,GACA,GAEJ,IAAK,EAAI,GAAI,GAAK,EAAG,GAAK,GACtB,EAAS,EAAO,EAAO,EAAE,UAAU,EAAI,GAAI,CAAC,CAAC,CAAC,EAKlD,IAHA,EAAI,EAAE,UAAU,EAAI,EAAE,EACtB,EAAS,EAAE,OACX,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACjD,EAAI,EAAG,EAAI,EAAQ,GAAK,EACzB,EAAK,GAAK,IAAM,EAAE,WAAW,CAAC,GAAO,GAAI,GAAM,GAGnD,GADA,EAAK,GAAK,IAAM,KAAU,GAAI,GAAM,GAChC,EAAI,GAEJ,IADA,EAAS,EAAO,CAAI,EACf,EAAI,EAAG,EAAI,GAAI,GAAK,EACrB,EAAK,GAAK,EAKlB,SAAM,EAAI,EACV,EAAM,EAAI,SAAS,EAAE,EAAE,MAAM,gBAAgB,EAC7C,GAAK,SAAS,EAAI,GAAI,EAAE,EACxB,GAAK,SAAS,EAAI,GAAI,EAAE,GAAK,EAE7B,EAAK,IAAM,GACX,EAAK,IAAM,GAEX,EAAS,EAAO,CAAI,EACb,CACX,CAEA,WAAoB,EAAG,CACnB,GAAI,GAAI,EAAE,OACN,EAAQ,CAAC,WAAY,WAAY,YAAa,SAAS,EACvD,EACA,EACA,EACA,EACA,GACA,GAEJ,IAAK,EAAI,GAAI,GAAK,EAAG,GAAK,GACtB,EAAS,EAAO,EAAa,EAAE,SAAS,EAAI,GAAI,CAAC,CAAC,CAAC,EAWvD,IAJA,EAAK,EAAI,GAAM,EAAI,EAAE,SAAS,EAAI,EAAE,EAAI,GAAI,YAAW,CAAC,EAExD,EAAS,EAAE,OACX,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACjD,EAAI,EAAG,EAAI,EAAQ,GAAK,EACzB,EAAK,GAAK,IAAM,EAAE,IAAQ,GAAI,GAAM,GAIxC,GADA,EAAK,GAAK,IAAM,KAAU,GAAI,GAAM,GAChC,EAAI,GAEJ,IADA,EAAS,EAAO,CAAI,EACf,EAAI,EAAG,EAAI,GAAI,GAAK,EACrB,EAAK,GAAK,EAKlB,SAAM,EAAI,EACV,EAAM,EAAI,SAAS,EAAE,EAAE,MAAM,gBAAgB,EAC7C,GAAK,SAAS,EAAI,GAAI,EAAE,EACxB,GAAK,SAAS,EAAI,GAAI,EAAE,GAAK,EAE7B,EAAK,IAAM,GACX,EAAK,IAAM,GAEX,EAAS,EAAO,CAAI,EAEb,CACX,CAEA,WAAc,EAAG,CACb,GAAI,GAAI,GACJ,EACJ,IAAK,EAAI,EAAG,EAAI,EAAG,GAAK,EACpB,GAAK,EAAS,GAAM,EAAI,EAAI,EAAM,IAAQ,EAAS,GAAM,EAAI,EAAM,IAEvE,MAAO,EACX,CAEA,WAAa,EAAG,CACZ,GAAI,GACJ,IAAK,EAAI,EAAG,EAAI,EAAE,OAAQ,GAAK,EAC3B,EAAE,GAAK,EAAK,EAAE,EAAE,EAEpB,MAAO,GAAE,KAAK,EAAE,CACpB,CAGA,AAAI,EAAI,EAAK,OAAO,CAAC,IAAM,oCACvB,GAAQ,SAAU,EAAG,EAAG,CACpB,GAAI,GAAO,GAAI,OAAW,GAAI,OAC1B,EAAO,IAAK,IAAO,IAAK,IAAO,IAAO,IAC1C,MAAQ,IAAO,GAAO,EAAM,KAChC,GAWA,MAAO,aAAgB,KAAe,CAAC,YAAY,UAAU,OAC5D,UAAY,CACT,WAAe,EAAK,EAAQ,CAGxB,MAFA,GAAO,EAAM,GAAM,EAEf,EAAM,EACC,KAAK,IAAI,EAAM,EAAQ,CAAC,EAG5B,KAAK,IAAI,EAAK,CAAM,CAC/B,CAEA,YAAY,UAAU,MAAQ,SAAU,EAAM,EAAI,CAC9C,GAAI,GAAS,KAAK,WACd,EAAQ,EAAM,EAAM,CAAM,EAC1B,EAAM,EACN,EACA,GACA,GACA,GAMJ,MAJI,KAAO,GACP,GAAM,EAAM,EAAI,CAAM,GAGtB,EAAQ,EACD,GAAI,aAAY,CAAC,EAG5B,GAAM,EAAM,EACZ,GAAS,GAAI,aAAY,CAAG,EAC5B,GAAc,GAAI,YAAW,EAAM,EAEnC,GAAc,GAAI,YAAW,KAAM,EAAO,CAAG,EAC7C,GAAY,IAAI,EAAW,EAEpB,GACX,CACJ,EAAG,EASP,WAAgB,EAAK,CACjB,MAAI,kBAAkB,KAAK,CAAG,GAC1B,GAAM,SAAS,mBAAmB,CAAG,CAAC,GAGnC,CACX,CAEA,WAA6B,EAAK,EAAkB,CAChD,GAAI,GAAS,EAAI,OACd,EAAO,GAAI,aAAY,CAAM,EAC7B,EAAM,GAAI,YAAW,CAAI,EACzB,EAEH,IAAK,EAAI,EAAG,EAAI,EAAQ,GAAK,EACzB,EAAI,GAAK,EAAI,WAAW,CAAC,EAG7B,MAAO,GAAmB,EAAM,CACpC,CAEA,WAA6B,EAAM,CAC/B,MAAO,QAAO,aAAa,MAAM,KAAM,GAAI,YAAW,CAAI,CAAC,CAC/D,CAEA,YAAiC,EAAO,EAAQ,EAAkB,CAC9D,GAAI,GAAS,GAAI,YAAW,EAAM,WAAa,EAAO,UAAU,EAEhE,SAAO,IAAI,GAAI,YAAW,CAAK,CAAC,EAChC,EAAO,IAAI,GAAI,YAAW,CAAM,EAAG,EAAM,UAAU,EAE5C,EAAmB,EAAS,EAAO,MAC9C,CAEA,YAA2B,EAAK,CAC5B,GAAI,GAAQ,CAAC,EACT,EAAS,EAAI,OACb,EAEJ,IAAK,EAAI,EAAG,EAAI,EAAS,EAAG,GAAK,EAC7B,EAAM,KAAK,SAAS,EAAI,OAAO,EAAG,CAAC,EAAG,EAAE,CAAC,EAG7C,MAAO,QAAO,aAAa,MAAM,OAAQ,CAAK,CAClD,CAWA,YAAoB,CAEhB,KAAK,MAAM,CACf,CAUA,SAAS,UAAU,OAAS,SAAU,EAAK,CAGvC,YAAK,aAAa,EAAO,CAAG,CAAC,EAEtB,IACX,EASA,EAAS,UAAU,aAAe,SAAU,EAAU,CAClD,KAAK,OAAS,EACd,KAAK,SAAW,EAAS,OAEzB,GAAI,GAAS,KAAK,MAAM,OACpB,EAEJ,IAAK,EAAI,GAAI,GAAK,EAAQ,GAAK,GAC3B,EAAS,KAAK,MAAO,EAAO,KAAK,MAAM,UAAU,EAAI,GAAI,CAAC,CAAC,CAAC,EAGhE,YAAK,MAAQ,KAAK,MAAM,UAAU,EAAI,EAAE,EAEjC,IACX,EAUA,EAAS,UAAU,IAAM,SAAU,EAAK,CACpC,GAAI,GAAO,KAAK,MACZ,EAAS,EAAK,OACd,EACA,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACtD,EAEJ,IAAK,EAAI,EAAG,EAAI,EAAQ,GAAK,EACzB,EAAK,GAAK,IAAM,EAAK,WAAW,CAAC,GAAO,GAAI,GAAM,GAGtD,YAAK,QAAQ,EAAM,CAAM,EACzB,EAAM,EAAI,KAAK,KAAK,EAEhB,GACA,GAAM,GAAkB,CAAG,GAG/B,KAAK,MAAM,EAEJ,CACX,EAOA,EAAS,UAAU,MAAQ,UAAY,CACnC,YAAK,MAAQ,GACb,KAAK,QAAU,EACf,KAAK,MAAQ,CAAC,WAAY,WAAY,YAAa,SAAS,EAErD,IACX,EAOA,EAAS,UAAU,SAAW,UAAY,CACtC,MAAO,CACH,KAAM,KAAK,MACX,OAAQ,KAAK,QACb,KAAM,KAAK,KACf,CACJ,EASA,EAAS,UAAU,SAAW,SAAU,EAAO,CAC3C,YAAK,MAAQ,EAAM,KACnB,KAAK,QAAU,EAAM,OACrB,KAAK,MAAQ,EAAM,KAEZ,IACX,EAMA,EAAS,UAAU,QAAU,UAAY,CACrC,MAAO,MAAK,MACZ,MAAO,MAAK,MACZ,MAAO,MAAK,OAChB,EAQA,EAAS,UAAU,QAAU,SAAU,EAAM,EAAQ,CACjD,GAAI,GAAI,EACJ,EACA,EACA,EAGJ,GADA,EAAK,GAAK,IAAM,KAAU,GAAI,GAAM,GAChC,EAAI,GAEJ,IADA,EAAS,KAAK,MAAO,CAAI,EACpB,EAAI,EAAG,EAAI,GAAI,GAAK,EACrB,EAAK,GAAK,EAMlB,EAAM,KAAK,QAAU,EACrB,EAAM,EAAI,SAAS,EAAE,EAAE,MAAM,gBAAgB,EAC7C,EAAK,SAAS,EAAI,GAAI,EAAE,EACxB,EAAK,SAAS,EAAI,GAAI,EAAE,GAAK,EAE7B,EAAK,IAAM,EACX,EAAK,IAAM,EACX,EAAS,KAAK,MAAO,CAAI,CAC7B,EAWA,EAAS,KAAO,SAAU,EAAK,EAAK,CAGhC,MAAO,GAAS,WAAW,EAAO,CAAG,EAAG,CAAG,CAC/C,EAUA,EAAS,WAAa,SAAU,EAAS,EAAK,CAC1C,GAAI,GAAO,EAAK,CAAO,EACnB,EAAM,EAAI,CAAI,EAElB,MAAO,GAAM,GAAkB,CAAG,EAAI,CAC1C,EASA,EAAS,YAAc,UAAY,CAE/B,KAAK,MAAM,CACf,EASA,EAAS,YAAY,UAAU,OAAS,SAAU,EAAK,CACnD,GAAI,GAAO,GAAwB,KAAK,MAAM,OAAQ,EAAK,EAAI,EAC3D,EAAS,EAAK,OACd,EAIJ,IAFA,KAAK,SAAW,EAAI,WAEf,EAAI,GAAI,GAAK,EAAQ,GAAK,GAC3B,EAAS,KAAK,MAAO,EAAa,EAAK,SAAS,EAAI,GAAI,CAAC,CAAC,CAAC,EAG/D,YAAK,MAAS,EAAI,GAAM,EAAS,GAAI,YAAW,EAAK,OAAO,MAAM,EAAI,EAAE,CAAC,EAAI,GAAI,YAAW,CAAC,EAEtF,IACX,EAUA,EAAS,YAAY,UAAU,IAAM,SAAU,EAAK,CAChD,GAAI,GAAO,KAAK,MACZ,EAAS,EAAK,OACd,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACtD,EACA,EAEJ,IAAK,EAAI,EAAG,EAAI,EAAQ,GAAK,EACzB,EAAK,GAAK,IAAM,EAAK,IAAQ,GAAI,GAAM,GAG3C,YAAK,QAAQ,EAAM,CAAM,EACzB,EAAM,EAAI,KAAK,KAAK,EAEhB,GACA,GAAM,GAAkB,CAAG,GAG/B,KAAK,MAAM,EAEJ,CACX,EAOA,EAAS,YAAY,UAAU,MAAQ,UAAY,CAC/C,YAAK,MAAQ,GAAI,YAAW,CAAC,EAC7B,KAAK,QAAU,EACf,KAAK,MAAQ,CAAC,WAAY,WAAY,YAAa,SAAS,EAErD,IACX,EAOA,EAAS,YAAY,UAAU,SAAW,UAAY,CAClD,GAAI,GAAQ,EAAS,UAAU,SAAS,KAAK,IAAI,EAGjD,SAAM,KAAO,EAAoB,EAAM,IAAI,EAEpC,CACX,EASA,EAAS,YAAY,UAAU,SAAW,SAAU,EAAO,CAEvD,SAAM,KAAO,EAAoB,EAAM,KAAM,EAAI,EAE1C,EAAS,UAAU,SAAS,KAAK,KAAM,CAAK,CACvD,EAEA,EAAS,YAAY,UAAU,QAAU,EAAS,UAAU,QAE5D,EAAS,YAAY,UAAU,QAAU,EAAS,UAAU,QAU5D,EAAS,YAAY,KAAO,SAAU,EAAK,EAAK,CAC5C,GAAI,GAAO,EAAW,GAAI,YAAW,CAAG,CAAC,EACrC,EAAM,EAAI,CAAI,EAElB,MAAO,GAAM,GAAkB,CAAG,EAAI,CAC1C,EAEO,CACX,CAAC,IC9rBD,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAI5D,GAAI,IAAQ,KAAiB,wBAAwB,EACjD,GAAW,KACX,GAAO,KACP,GAAW,KACX,GAAM,KACN,GAAO,KACP,GAAO,KACP,GAAM,KAAqB,KAI3B,GAAM,OAAO,UAAU,eAI3B,GAAO,QAAU,GAIjB,GAAI,IAAW,CAAC,eAAgB,cAAe,YAAa,SAAS,EACrE,YAAmB,EAAK,EAAM,CAC1B,GAAI,GAAQ,GAAI,SAAU,EAAG,CACzB,MAAO,GAAE,YAAY,CACzB,EAAG,CAAI,EACH,EAAO,EAAI,SAAW,CAAC,EACvB,EAAe,EAAK,cAAgB,CAAC,EACrC,EAAY,EAAK,WAAa,CAAC,EAC/B,EAAU,EAAK,SAAW,CAAC,EAC3B,EAAM,CAAC,EACX,UAAM,KAAM,CAAG,EAEf,GAAK,SAAU,EAAO,EAAK,CACvB,AAAI,CAAC,EAAY,CAAG,GAEf,IAAI,KAAK,EAAc,CAAG,GAC3B,GAAa,GAAO,GACxB,MAAO,GAAK,GAChB,EAAG,CAAI,EAEP,MAAO,GAAK,UACZ,GAAK,SAAU,EAAO,EAAK,CACvB,AAAI,CAAC,EAAY,CAAG,GAEhB,GAAK,EAAa,EAAI,IAAM,UAE5B,IAAI,KAAK,EAAc,CAAG,GAAK,MAAO,GAAU,IAAS,WAE7D,GAAa,GAAO,GACxB,EAAG,CAAS,EAGZ,GAAK,SAAU,EAAQ,EAAK,CACxB,AAAI,GAAS,EAAK,EAAQ,EACtB,EAAI,GAAO,EAAK,GAGhB,EAAQ,GAAO,EAAK,EAE5B,EAAG,CAAI,EAEP,EAAI,UAAY,OAAS,GAAI,OAAO,KAAK,UAAU,CAAG,EAAI,GAAK,CAAC,EAEhE,MAAO,GAAI,QACX,EAAI,aAAe,EACnB,EAAI,QAAU,EACd,EAAM,GAAS,EAAK,CAAG,EACvB,GAAM,KAAM,CAAG,EACR,EACP,WAAqB,EAAM,CACvB,MAAO,CAAC,CAAE,IAAS,EAAM,CAAI,GACzB,EAAK,YAAY,IAAM,OACvB,GAAS,EAAK,YAAY,EAAG,CAAK,EAC1C,CACJ,IC9EA,iBAAI,IAAO,OAAO,iBAAmB,mBAAqB,cACtD,GAAS,OAAO,oBAAsB,sBAAwB,cAC9D,GAAS,KAAS,mBAAqB,KAAO,GAalD,GAAQ,KAAO,SAAS,EAAI,EAAM,EAAI,EAAQ,CAC5C,SAAG,IAAM,GAAS,EAAM,EAAI,GAAW,EAAK,EACrC,CACT,EAaA,GAAQ,OAAS,SAAS,EAAI,EAAM,EAAI,EAAQ,CAC9C,SAAG,IAAQ,GAAS,EAAM,EAAI,GAAW,EAAK,EACvC,CACT,IClCA,gCAOA,aAAqB,CAGnB,OAFI,GAAO,SAAS,qBAAqB,MAAM,EAEtC,EAAI,EAAG,EAAK,EAAM,EAAK,GAAI,IAClC,GAAI,EAAI,aAAa,KAAK,IAAM,YAC9B,MAAO,GAAI,aAAa,MAAM,CAGpC,CAMA,GAAO,QAAU,KCrBjB,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAI5D,GAAI,IAAY,KACZ,GAAW,KACX,GAAM,KAMV,aAAwB,CACpB,MAAO,CACH,KAAM,GAAc,EACpB,SAAU,SAAS,SACnB,OAAQ,SAAS,OACjB,MAAO,SAAS,MAChB,IAAK,GAAa,SAAS,MAAM,CACrC,CACJ,CAIA,aAAyB,CACrB,GAAI,GAAQ,GAAU,EACtB,GAAI,CAAC,EACD,MAAO,QAAO,SAAS,SAC3B,GAAI,GAAS,GAAI,MAAM,CAAK,EAC5B,MAAO,GAAO,QAClB,CAKA,YAAsB,EAAQ,CAC1B,GAAI,GAAQ,GAAU,EACtB,GAAI,EACA,MAAO,IAAS,IAAK,CAAK,EAAI,EAAQ,EAAQ,EAClD,GAAI,GAAM,OAAO,SAAS,KACtB,EAAI,EAAI,QAAQ,GAAG,EACvB,MAAO,KAAM,GAAK,EAAM,EAAI,MAAM,EAAG,CAAC,CAC1C,CAIA,GAAO,QAAU,KC/CjB,gCAEA,GAAI,IAAc,OAAO,UAAU,SAG/B,GAAS,SAAS,EAAK,CACzB,MAAO,IAAO,IAChB,EAGI,GAAU,SAAS,EAAK,CAC1B,MAAO,IAAY,KAAK,CAAG,IAAM,gBACnC,EAGI,GAAW,SAAS,EAAK,CAC1B,MAAO,OAAO,IAAQ,UAAY,GAAY,KAAK,CAAG,IAAM,iBAC/D,EAGI,GAAW,SAAS,EAAK,CAC3B,MAAO,IAAO,MAAQ,MAAO,IAAQ,QACvC,EAmBI,GAAO,SAAc,EAAO,EAAQ,CACtC,GAAI,CAAC,GAAO,CAAM,GAAK,CAAC,GAAS,CAAM,EACrC,MAAO,CAAC,EAGV,AAAI,GAAS,CAAK,GAChB,GAAQ,CAAC,CAAK,GAGX,GAAQ,CAAK,GAChB,GAAQ,CAAC,GAKX,OAFI,GAAS,CAAC,EAEL,EAAI,EAAG,EAAI,EAAM,OAAQ,GAAK,EACrC,AAAI,GAAS,EAAM,EAAE,GAAK,EAAM,IAAM,IACpC,GAAO,EAAM,IAAM,EAAO,EAAM,KAIpC,MAAO,EACT,EAMA,GAAO,QAAU,KCrEjB,gCAaA,YAAwB,EAAG,CACzB,SAAI,GAAK,OAAO,MACT,EAAE,eAAiB,EAAE,eAAe,EAAI,EAAE,YAAc,EACjE,CAMA,GAAO,QAAU,KCtBjB,sBAAI,IAAM,KACN,GAAc,KAOd,GACA,GAGA,GAAa,EACb,GAAa,EAGjB,YAAY,EAAS,EAAK,EAAQ,CAChC,GAAI,GAAI,GAAO,GAAU,EACrB,EAAI,GAAO,CAAC,EAEhB,EAAU,GAAW,CAAC,EACtB,GAAI,GAAO,EAAQ,MAAQ,GACvB,EAAW,EAAQ,WAAa,OAAY,EAAQ,SAAW,GAKnE,GAAI,GAAQ,MAAQ,GAAY,KAAM,CACpC,GAAI,GAAY,GAAI,EACpB,AAAI,GAAQ,MAEV,GAAO,GAAU,CACf,EAAU,GAAK,EACf,EAAU,GAAI,EAAU,GAAI,EAAU,GAAI,EAAU,GAAI,EAAU,EACpE,GAEE,GAAY,MAEd,GAAW,GAAa,GAAU,IAAM,EAAI,EAAU,IAAM,MAEhE,CAMA,GAAI,GAAQ,EAAQ,QAAU,OAAY,EAAQ,MAAQ,GAAI,MAAK,EAAE,QAAQ,EAIzE,EAAQ,EAAQ,QAAU,OAAY,EAAQ,MAAQ,GAAa,EAGnE,EAAM,EAAQ,GAAe,GAAQ,IAAY,IAcrD,GAXI,EAAK,GAAK,EAAQ,WAAa,QACjC,GAAW,EAAW,EAAI,OAKvB,GAAK,GAAK,EAAQ,KAAe,EAAQ,QAAU,QACtD,GAAQ,GAIN,GAAS,IACX,KAAM,IAAI,OAAM,iDAAkD,EAGpE,GAAa,EACb,GAAa,EACb,GAAY,EAGZ,GAAS,YAGT,GAAI,GAAO,IAAQ,WAAa,IAAQ,GAAS,WACjD,EAAE,KAAO,IAAO,GAAK,IACrB,EAAE,KAAO,IAAO,GAAK,IACrB,EAAE,KAAO,IAAO,EAAI,IACpB,EAAE,KAAO,EAAK,IAGd,GAAI,GAAO,EAAQ,WAAc,IAAS,UAC1C,EAAE,KAAO,IAAQ,EAAI,IACrB,EAAE,KAAO,EAAM,IAGf,EAAE,KAAO,IAAQ,GAAK,GAAM,GAC5B,EAAE,KAAO,IAAQ,GAAK,IAGtB,EAAE,KAAO,IAAa,EAAI,IAG1B,EAAE,KAAO,EAAW,IAGpB,OAAS,GAAI,EAAG,EAAI,EAAG,EAAE,EACvB,EAAE,EAAI,GAAK,EAAK,GAGlB,MAAO,IAAY,GAAY,CAAC,CAClC,CAEA,GAAO,QAAU,KC5GjB,sBAAI,IAAK,KACL,GAAK,KAEL,GAAO,GACX,GAAK,GAAK,GACV,GAAK,GAAK,GAEV,GAAO,QAAU,KCPjB,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAC5D,GAAI,IAAS,KACT,GAAU,KACV,GAAS,KACT,GAAQ,KAAiB,gBAAgB,EACzC,GAAU,KACV,GAAY,KACZ,GAAO,KACP,GAAe,KACnB,GAAK,SAAW,CACZ,QAAS,GACT,OAAQ,CACJ,IAAK,cACL,OAAQ,UACZ,EACA,aAAc,CACV,IAAK,iBACT,CACJ,EAIA,YAAc,EAAS,CACnB,KAAK,SAAW,GAAK,SACrB,KAAK,MAAQ,GACb,GAAO,KAAK,KAAM,CAAO,CAC7B,CAIA,GAAQ,GAAM,EAAM,EAyBpB,GAAK,UAAU,GAAK,SAAU,EAAI,CAC9B,GAAI,GAAO,KAAK,OAAO,EACnB,EAAM,GAAO,UAAU,GAAG,MAAM,KAAM,SAAS,EACnD,MAAI,IAAQ,MAMR,GAAQ,GAAM,GACd,KAAK,YAAY,IAAI,EAElB,CACX,EAOA,GAAK,UAAU,YAAc,SAAU,EAAa,CAChD,GAAI,GAAQ,KAAK,QAAQ,EAEzB,MAAI,WAAU,OACV,GAAM,IAAI,mBAAoB,CAAW,EACzC,KAAK,8BAA8B,CAAW,EACvC,MAGX,GAAc,EAAM,IAAI,kBAAkB,EACtC,EAEA,MAAK,8BAA8B,CAAW,EAE9C,EAAM,IAAI,mBAAoB,CAAW,EAClC,GAEP,CAAC,KAAK,SAAS,8BAEf,GAAc,GAAa,IAAI,kBAAkB,EAC7C,GAEA,GAAM,IAAI,mBAAoB,CAAW,EAClC,GAIf,GAAc,GAAU,MAAM,EAC1B,EACA,GAAc,EAAY,MAAM,MAAM,EAAE,GACxC,EAAM,IAAI,mBAAoB,CAAW,EACzC,KAAK,8BAA8B,CAAW,EAC9C,EAAM,OAAO,MAAM,EACZ,GAGX,GAAc,GAAK,GAAG,EACtB,EAAM,IAAI,mBAAoB,CAAW,EACzC,KAAK,8BAA8B,CAAW,EACvC,EAAM,IAAI,kBAAkB,IACvC,EAIA,GAAK,UAAU,8BAAgC,SAAU,EAAI,CACzD,AAAK,KAAK,SAAS,8BACf,GAAa,IAAI,mBAAoB,CAAE,CAE/C,EAIA,GAAK,UAAU,OAAS,UAAY,CAChC,GAAO,UAAU,OAAO,KAAK,IAAI,EACjC,KAAK,YAAY,IAAI,CACzB,EAIA,GAAK,UAAU,KAAO,UAAY,CAC9B,AAAI,KAAK,eAAe,GAExB,GAAO,UAAU,KAAK,KAAK,IAAI,CACnC,EAMA,GAAK,UAAU,eAAiB,UAAY,CACxC,GAAI,GAAO,GAAO,IAAI,KAAK,SAAS,OAAO,MAAM,EACjD,MAAK,GAEL,MAAK,GAAG,EAAK,EAAE,EACf,KAAK,OAAO,EAAK,MAAM,EACvB,GAAO,OAAO,KAAK,SAAS,OAAO,MAAM,EAClC,IAJI,EAKf,EAIA,GAAO,QAAU,GAAQ,GAAI,GAAM,EAInC,GAAO,QAAQ,KAAO,KCjKtB,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAC5D,GAAI,IAAa,OAAO,UAIpB,GAAQ,KAA4B,MACpC,GAAU,KACV,GAAS,KACT,GAAQ,KAA4B,MACpC,GAAW,KAA4B,SACvC,GAAwB,KAAwB,sBAChD,GAA6B,KAC5B,2BACD,GAA6B,KAC5B,2BACD,GAAO,KAA4B,KACnC,GAAQ,KAA4B,MACpC,GAAU,KACV,GAAQ,KACR,GAAS,KACT,GAAS,KACT,GAAU,KACV,GAAQ,KACR,GAAW,KACX,GAAO,KACP,GAAQ,KACR,EAAK,KACL,GAAS,KACT,GAAO,KACP,GAAS,KACT,GAAW,KACX,GAAY,KACZ,GAAK,KAA2B,KAChC,GAAe,KACf,GAAO,KACP,GAAU,KACV,GAAM,KACN,GAAQ,KACR,GAAO,KACP,GAAO,KAIX,YAAqB,CACjB,KAAK,SAAS,CAAC,CAAC,EAChB,KAAK,aAAe,CAAC,EACrB,KAAK,mBAAqB,GAAI,IAC9B,KAAK,wBAA0B,GAAI,IACnC,KAAK,wBAA0B,CAAC,EAChC,KAAK,cAAgB,CAAC,EACtB,KAAK,SAAW,GAChB,KAAK,SAAW,IAEhB,KAAK,MAAQ,GACb,KAAK,IAAM,GAAM,cAAc,EAC/B,GAAQ,IAAI,EACZ,GAAI,GAAO,KACX,KAAK,GAAG,aAAc,SAAU,EAAU,EAAS,CAC/C,AAAI,EAAQ,iBACR,EAAK,KAAK,EACd,EAAK,YAAY,OAAO,SAAS,MAAM,CAC3C,CAAC,CACL,CAIA,GAAQ,EAAU,SAAS,EAI3B,EAAU,UAAU,IAAM,SAAU,EAAQ,CACxC,SAAO,IAAI,EACJ,IACX,EAIA,EAAU,UAAU,eAAiB,SAAU,EAAa,CACxD,GAAI,GAAO,EAAY,UAAU,KACjC,GAAI,CAAC,EACD,KAAM,IAAI,WAAU,yCAAyC,EACjE,YAAK,aAAa,GAAQ,EACnB,IACX,EAIA,EAAU,UAAU,oBAAsB,SAAU,EAAY,CAC5D,YAAK,mBAAmB,IAAI,CAAU,EAC/B,IACX,EAKA,EAAU,UAAU,yBAA2B,SAAU,EAAY,CACjE,YAAK,wBAAwB,IAAI,CAAU,EACpC,IACX,EAKA,EAAU,UAAU,yBAA2B,SAAU,EAAiB,EAAa,CACnF,GAAI,GAAO,KACX,SAAY,QAAQ,SAAU,EAAY,CACtC,AAAK,EAAK,wBAAwB,IAC9B,GAAK,wBAAwB,GAAmB,GAAI,KAExD,EAAK,wBAAwB,GAAiB,IAAI,CAAU,CAChE,CAAC,EACM,CACX,EAMA,EAAU,UAAU,KAAO,EAAU,UAAU,WAAa,SAAU,EAAU,EAAS,CACrF,EAAW,GAAY,CAAC,EACxB,EAAU,GAAW,CAAC,EACtB,KAAK,SAAS,CAAO,EACrB,KAAK,SAAW,GAEhB,GAAI,GAAO,KACX,GAAK,SAAU,EAAO,EAAM,CACxB,GAAI,GAAc,EAAK,aAAa,GACpC,AAAK,GACD,MAAO,GAAS,EACxB,EAAG,CAAQ,EAEX,GAAK,SAAU,EAAM,EAAM,CAEvB,GAAI,IAAQ,cACJ,GAAQ,aAAa,KAAU,IAC9B,EAAQ,aAAa,MAAQ,IAAS,CAAC,EAAQ,aAAa,KAIrE,IAAI,GAAc,EAAK,aAAa,GAChC,EAAa,CAAC,EAClB,GAAO,GAAM,EAAY,CAAI,EAC7B,GAAI,GAAc,GAAI,GAAY,CAAU,EAC5C,EAAK,IAAI,qBAAsB,EAAM,CAAI,EACzC,EAAK,IAAI,CAAW,EACxB,EAAG,CAAQ,EACX,GAAI,GAAe,KAAK,cAExB,GAAK,KAAK,EACV,GAAM,KAAK,EAEX,GAAI,GAAiB,EACjB,EAAmB,GAAK,CAAY,EAAE,OACtC,EAAQ,UAAY,CACpB,IACI,GAAkB,GAClB,GAAK,SAAW,GAChB,EAAK,KAAK,OAAO,EAEzB,EAEA,AAAI,GAAoB,GACpB,EAAM,EAIV,KAAK,sBAAwB,CAAC,EAC9B,GAAI,GAAqB,GACzB,UAAK,SAAU,EAAa,CACxB,GAAI,EAAQ,iBACR,EAAY,QAAQ,kBAAoB,GAAO,CAE/C,GAAI,GAAO,EAAY,KACvB,EAAY,KAAO,UAAY,CAC3B,GAAI,EACA,MAAO,GAAK,MAAM,KAAM,SAAS,EAErC,EAAqB,EAEzB,CACJ,CACA,EAAY,UAAY,EACxB,EAAY,KAAK,QAAS,CAAK,EAC/B,GAAI,CACA,GAAQ,UAAU,kCAAmC,CACjD,OAAQ,aACR,iBAAkB,EAAY,IAClC,CAAC,EACD,EAAY,WAAW,CAC3B,OACO,EAAP,CACI,GAAI,GAAkB,EAAY,KAClC,GAAQ,UAAU,wCAAyC,CACvD,OAAQ,aACR,iBAAkB,EAAY,IAClC,CAAC,EACD,EAAK,sBAAsB,KAAK,CAAe,EAC/C,EAAK,IAAI,wCAAyC,EAAiB,CAAC,EAEpE,EAAY,MAAM,CACtB,CACJ,EAAG,CAAY,EAEf,KAAK,YAAc,GACnB,KAAK,KAAK,aAAc,EAAU,CAAO,EAClC,IACX,EAIA,EAAU,UAAU,eAAiB,SAAU,EAAI,CAC/C,YAAK,KAAK,EAAE,YAAY,CAAE,EACnB,IACX,EAIA,EAAU,UAAU,IAAM,SAAU,EAAa,CAC7C,YAAK,cAAc,EAAY,MAAQ,EAChC,IACX,EAUA,EAAU,UAAU,SAAW,SAAU,EAAI,EAAQ,EAAS,EAAI,CAG9D,AAAI,EAAG,GAAG,CAAO,GACZ,GAAK,EAAW,EAAU,MAC3B,EAAG,GAAG,CAAM,GACX,GAAK,EAAU,EAAU,KAAQ,EAAS,MAC3C,EAAG,OAAO,CAAE,GACX,GAAU,EAAU,EAAS,EAAM,EAAK,GAAK,GAAG,GAIrD,GAAK,SAAS,EAAI,CAAM,EACxB,GAAI,GAAM,KAAK,UAAU,CACrB,QAAS,EACT,OAAQ,GAAK,OAAO,EACpB,OAAQ,GAAK,GAAG,CACpB,CAAC,EAED,MAAI,MAAK,QAAQ,cACb,GAAS,EAAI,aAAc,KAAK,QAAQ,YAAY,EAExD,KAAK,QAAQ,WAAY,GAAI,IAAS,CAAG,CAAC,EAE1C,KAAK,KAAK,WAAY,EAAI,EAAQ,CAAO,EACzC,KAAK,UAAU,CAAE,EACV,IACX,EAMA,EAAU,UAAU,KAAO,UAAY,CACnC,MAAO,GACX,EAWA,EAAU,UAAU,MAAQ,SAAU,EAAI,EAAQ,EAAS,EAAI,CAE3D,GAAI,CAAC,UAAU,OACX,MAAO,IACX,AAAI,EAAG,GAAG,CAAO,GACZ,GAAK,EAAW,EAAU,MAC3B,EAAG,GAAG,CAAM,GACX,GAAK,EAAU,EAAU,KAAQ,EAAS,MAC3C,EAAG,OAAO,CAAE,GACX,GAAU,EAAU,EAAS,EAAM,EAAK,GAAM,GAAG,GAGtD,GAAM,SAAS,EAAI,CAAM,EACzB,GAAI,GAAM,KAAK,UAAU,CACrB,QAAS,EACT,OAAQ,GAAM,OAAO,EACrB,QAAS,GAAM,GAAG,CACtB,CAAC,EAED,MAAI,MAAK,QAAQ,cACb,GAAS,EAAI,aAAc,KAAK,QAAQ,YAAY,EAExD,KAAK,QAAQ,QAAS,GAAI,IAAM,CAAG,CAAC,EACpC,KAAK,KAAK,QAAS,EAAI,EAAQ,CAAO,EACtC,KAAK,UAAU,CAAE,EACV,IACX,EAUA,EAAU,UAAU,MAAQ,SAAU,EAAO,EAAY,EAAS,EAAI,CAGlE,AAAI,EAAG,GAAG,CAAO,GACZ,GAAK,EAAW,EAAU,MAC3B,EAAG,GAAG,CAAU,GACf,GAAK,EAAc,EAAU,KAAQ,EAAa,MAGvD,GAAI,GAAO,KAAK,QAAQ,MAAQ,CAAC,EAC7B,EAAS,EAAK,OAAS,CAAC,EACxB,EAAyB,CAAC,EAE1B,EAAM,KAAK,UAAU,CACrB,WAAY,EACZ,QAAS,EACT,MAAO,CACX,CAAC,EAGD,GADA,EAAO,EAAO,GACV,EACA,KAAK,IAAI,eAAgB,EAAO,CAAI,EACpC,AAAI,EAAK,UAAY,GAEjB,EAAyB,CAAE,IAAK,GAAO,aAAc,EAAK,EAG1D,EAAyB,EAAK,cAAgB,CAAC,MAGlD,CACD,GAAI,GAAc,EAAO,WAAa,CAAE,QAAS,EAAK,EACtD,AAAK,EAAY,SAEb,GAAyB,CAAE,IAAK,GAAO,aAAc,EAAK,EAElE,CAEA,UAAS,EAAI,aAAc,KAAK,oCAAoC,CAAsB,CAAC,EAC3F,KAAK,QAAQ,QAAS,GAAI,IAAM,CAAG,CAAC,EACpC,KAAK,KAAK,QAAS,EAAO,EAAY,CAAO,EAC7C,KAAK,UAAU,CAAE,EACV,IACX,EAYA,EAAU,UAAU,WAAa,EAAU,UAAU,UAAY,SAAU,EAAO,EAAO,EAAY,CACjG,GAAI,CAAC,EACD,MAAO,MAEX,AAAI,GAAK,CAAK,IAAM,WAChB,GAAQ,CAAC,CAAK,GAClB,GAAI,GAAO,KACX,UAAK,SAAU,EAAI,CACf,GAAI,GAAK,CAAE,IAAM,UACb,KAAM,IAAI,WAAU,iDAAiD,EAEzE,GAAG,EAAI,QAAS,SAAU,EAAG,CACzB,GAAI,GAAK,EAAG,GAAG,CAAK,EAAI,EAAM,CAAE,EAAI,EAChC,EAAQ,EAAG,GAAG,CAAU,EAAI,EAAW,CAAE,EAAI,EAC7C,EAAO,EAAG,aAAa,MAAM,GAC7B,EAAG,eAAe,+BAAgC,MAAM,GACxD,EAAG,aAAa,YAAY,EAChC,EAAK,MAAM,EAAI,CAAK,EAChB,GAAQ,EAAG,SAAW,UAAY,CAAC,GAAO,CAAC,GAC3C,IAAQ,CAAC,EACT,EAAK,UAAU,UAAY,CACvB,OAAO,SAAS,KAAO,CAC3B,CAAC,EAET,CAAC,CACL,EAAG,CAAK,EACD,IACX,EAYA,EAAU,UAAU,YAAc,EAAU,UAAU,UAAY,SAAU,EAAO,EAAO,EAAY,CAClG,GAAI,CAAC,EACD,MAAO,MAEX,AAAI,GAAK,CAAK,IAAM,WAChB,GAAQ,CAAC,CAAK,GAClB,GAAI,GAAO,KACX,UAAK,SAAU,EAAI,CACf,GAAI,GAAK,CAAE,IAAM,UACb,KAAM,IAAI,WAAU,iDAAiD,EACzE,WAAiB,EAAG,CAChB,GAAQ,CAAC,EACT,GAAI,GAAK,EAAG,GAAG,CAAK,EAAI,EAAM,CAAE,EAAI,EAChC,EAAQ,EAAG,GAAG,CAAU,EAAI,EAAW,CAAE,EAAI,EACjD,EAAK,MAAM,EAAI,CAAK,EACpB,EAAK,UAAU,UAAY,CACvB,EAAG,OAAO,CACd,CAAC,CACL,CAGA,GAAI,GAAI,OAAO,QAAU,OAAO,MAChC,AAAI,EACA,EAAE,CAAE,EAAE,OAAO,CAAO,EAGpB,GAAG,EAAI,SAAU,CAAO,CAEhC,EAAG,CAAK,EACD,IACX,EAYA,EAAU,UAAU,KAAO,SAAU,EAAU,EAAM,EAAY,EAAS,EAAI,CAG1E,AAAI,EAAG,GAAG,CAAO,GACZ,GAAK,EAAW,EAAU,MAC3B,EAAG,GAAG,CAAU,GACf,GAAK,EAAc,EAAU,EAAa,MAC3C,EAAG,GAAG,CAAI,GACT,GAAK,EAAQ,EAAU,EAAa,EAAO,MAC5C,GAAK,CAAQ,IAAM,UAClB,GAAU,EAAQ,EAAa,EAAY,EAAO,EAAW,MAC9D,GAAK,CAAI,IAAM,UACd,GAAU,EAAc,EAAa,EAAQ,EAAO,MACrD,GAAK,CAAQ,IAAM,UAAY,GAAK,CAAI,IAAM,UAC7C,GAAO,EAAY,EAAW,MAEnC,EAAa,GAAM,CAAU,GAAK,CAAC,EAC/B,GACA,GAAW,KAAO,GAClB,GACA,GAAW,SAAW,GAG1B,GAAI,GAAO,GAAa,EACxB,GAAS,EAAY,CAAI,EAIzB,GAAI,GAAY,GAAK,GAAK,CAAI,EAAG,CAAU,EAC3C,AAAK,EAAG,MAAM,CAAS,GACnB,GAAU,GAAW,CAAC,EACtB,EAAQ,QAAU,EAAQ,SAAW,CAAC,EACtC,EAAQ,QAAQ,KAAO,GAE3B,GAAI,GAAM,KAAK,UAAU,CACrB,WAAY,EACZ,SAAU,EACV,QAAS,EACT,KAAM,CACV,CAAC,EAED,MAAI,MAAK,QAAQ,cACb,GAAS,EAAI,aAAc,KAAK,QAAQ,YAAY,EAExD,KAAK,QAAQ,OAAQ,GAAI,IAAK,CAAG,CAAC,EAClC,KAAK,KAAK,OAAQ,EAAU,EAAM,EAAY,CAAO,EACrD,KAAK,UAAU,CAAE,EACV,IACX,EAKA,EAAU,UAAU,SAAW,SAAU,EAAK,CAC1C,GAAI,GAAa,CAAC,EAClB,MAAI,IACA,GAAW,KAAO,GACtB,KAAK,KAAK,CAAU,EACb,IACX,EAUA,EAAU,UAAU,MAAQ,SAAU,EAAI,EAAM,EAAS,EAAI,CAGzD,AAAI,EAAG,GAAG,CAAO,GACZ,GAAK,EAAW,EAAU,MAC3B,EAAG,GAAG,CAAI,GACT,GAAK,EAAQ,EAAU,KAAQ,EAAO,MACvC,EAAG,OAAO,CAAI,GACb,GAAU,EAAQ,EAAO,MAE9B,GAAI,GAAM,KAAK,UAAU,CACrB,QAAS,EACT,WAAY,EACZ,OAAQ,CACZ,CAAC,EAED,MAAI,MAAK,QAAQ,cACb,GAAS,EAAI,aAAc,KAAK,QAAQ,YAAY,EAExD,KAAK,QAAQ,QAAS,GAAI,IAAM,CAAG,CAAC,EACpC,KAAK,KAAK,QAAS,EAAI,EAAM,CAAO,EACpC,KAAK,UAAU,CAAE,EACV,IACX,EAIA,EAAU,UAAU,MAAQ,SAAU,EAAI,CACtC,MAAI,GAAG,GAAG,CAAE,GACR,CAAI,KAAK,SACL,GAAS,CAAE,EAGX,KAAK,KAAK,QAAS,CAAE,GAGtB,IACX,EAIA,EAAU,UAAU,QAAU,SAAU,EAAS,CAC7C,KAAK,SAAW,CACpB,EAIA,EAAU,UAAU,MAAQ,SAAU,EAAK,CACvC,AAAI,CAAC,UAAU,QAAU,EACrB,GAAM,OAAO,aAAgB,IAAO,IAAI,EAGxC,GAAM,QAAQ,CAEtB,EAKA,EAAU,UAAU,SAAW,SAAU,EAAS,CAC9C,SAAU,GAAW,CAAC,EACtB,KAAK,QAAU,EACf,GAAO,QAAQ,EAAQ,MAAM,EAC7B,GAAQ,QAAQ,EAAQ,OAAO,EAC/B,GAAM,QAAQ,EAAQ,YAAY,EAClC,GAAK,QAAQ,EAAQ,IAAI,EACzB,GAAM,QAAQ,EAAQ,KAAK,EACpB,IACX,EAKA,EAAU,UAAU,UAAY,SAAU,EAAI,CAC1C,MAAI,GAAG,GAAG,CAAE,GACR,MAAK,SAAW,WAAW,EAAI,KAAK,QAAQ,EAAI,GAAS,CAAE,GAExD,IACX,EASA,EAAU,UAAU,QAAU,SAAU,EAAQ,EAAQ,CACpD,GAAI,GAAO,KACX,GAAI,CACA,KAAK,mBAAmB,iBAAiB,GAAO,GAAM,GAAI,IAAO,CAAC,CAAC,EAAG,CAAM,EAAG,KAAK,cAAe,SAAU,EAAQ,CAEjH,GAAI,IAAW,KAAM,CACjB,EAAK,IAAI,wEAAyE,CAAM,EACxF,MACJ,CAEA,AAAM,YAAkB,KACpB,GAAS,GAAI,IAAO,CAAM,GAE9B,EAAK,KAAK,SAAU,CAAM,EAC1B,GAAQ,UAAU,sBAAuB,CACrC,OAAQ,CACZ,CAAC,EACD,EAA4B,CAAM,CACtC,CAAC,CACL,OACO,EAAP,CACI,GAAQ,UAAU,4BAA6B,CAC3C,OAAQ,CACZ,CAAC,EACD,EAAK,IAAI,kDAAmD,EAAQ,KAAM,CAAC,CAC/E,CACA,MAAO,MACP,WAAqC,EAAQ,CACzC,GAAI,GAAwB,EAAK,uBAAyB,CAAC,EAC3D,GAAK,SAAU,EAAa,EAAM,CAC9B,GAAI,GAAa,GAAO,GAAM,GAAI,IAAO,CAAC,CAAC,EAAG,CAAM,EACpD,GAAI,EAAC,EAAW,QAAQ,CAAI,EAI5B,GAAI,EAAsB,QAAQ,CAAI,GAAK,EACvC,EAAK,IAAI,kGAAmG,EAAQ,CAAI,MAGxH,IAAI,CAEA,EAAK,wBAAwB,iBAAiB,EAAY,EAAY,KAAM,SAAU,EAAQ,CAE1F,GAAI,IAAW,KAAM,CACjB,EAAK,IAAI,oEAAqE,CAAI,EAClF,MACJ,CAEA,AAAM,YAAkB,KACpB,GAAS,GAAI,IAAO,CAAM,GAI9B,AAAI,EAAK,wBAAwB,EAAY,MACzC,EAAK,wBAAwB,EAAY,MAAM,iBAAiB,EAAY,EAAY,KAAM,SAAU,EAAQ,CAE5G,GAAI,IAAW,KAAM,CACjB,EAAK,IAAI,oEAAqE,CAAI,EAClF,MACJ,CAEA,AAAM,YAAkB,KACpB,GAAS,GAAI,IAAO,CAAM,GAE9B,GAAQ,UAAU,kCAAmC,CACjD,OAAQ,EACR,iBAAkB,EAAY,IAClC,CAAC,EACD,EAAY,OAAO,KAAK,EAAa,EAAQ,CAAM,CACvD,CAAC,EAGD,IAAQ,UAAU,kCAAmC,CACjD,OAAQ,EACR,iBAAkB,EAAY,IAClC,CAAC,EACD,EAAY,OAAO,KAAK,EAAa,EAAQ,CAAM,EAE3D,CAAC,CACL,OACO,EAAP,CACI,GAAQ,UAAU,wCAAyC,CACvD,OAAQ,EACR,iBAAkB,EAAY,IAClC,CAAC,EACD,EAAK,IAAI,kDAAmD,EAAQ,EAAM,CAAC,CAC/E,CAER,EAAG,EAAK,aAAa,CACzB,CACJ,EAOA,EAAU,UAAU,KAAO,SAAU,EAAM,CACvC,GAAI,GAAS,EAAK,MAAM,EACxB,AAAI,CAAC,KAAK,IAEV,KAAK,GAAQ,MAAM,KAAM,CAAI,CACjC,EAMA,EAAU,UAAU,MAAQ,UAAY,CACpC,KAAK,KAAK,EAAE,OAAO,EACnB,KAAK,MAAM,EAAE,OAAO,CACxB,EAMA,EAAU,UAAU,YAAc,SAAU,EAAO,CAE/C,GAAI,GAAS,GAAI,MAAM,CAAK,EACxB,EAAI,EAAO,MAAM,MAAM,GAAG,EAAE,OAAO,SAAU,EAAK,EAAK,CACvD,GAAI,GAAK,EAAI,MAAM,GAAG,EAAG,EAAI,EAAG,GAAI,EAAI,EAAG,GAC3C,SAAI,GAAK,UAAU,CAAC,EAAE,QAAQ,IAAK,GAAG,EAC/B,CACX,EAAG,CAAC,CAAC,EAED,EAAS,EAAW,aAAc,CAAC,EACnC,EAAQ,EAAW,YAAa,CAAC,EAErC,MAAI,GAAE,SACF,KAAK,SAAS,EAAE,QAAS,CAAM,EAC/B,EAAE,WACF,KAAK,MAAM,EAAE,UAAW,CAAK,EAC7B,EAAE,SACF,GAAK,YAAY,EAAE,OAAO,EACvB,KAQP,WAAoB,EAAQ,EAAQ,CAChC,GAAI,GAAS,EAAO,OAChB,EACJ,MAAO,QAAO,KAAK,CAAM,EAAE,OAAO,SAAU,EAAK,EAAK,CAClD,MAAI,GAAI,OAAO,EAAG,CAAM,IAAM,GAC1B,GAAM,EAAI,OAAO,CAAM,EACvB,EAAI,GAAO,EAAO,IAEf,CACX,EAAG,CAAC,CAAC,CACT,CACJ,EAIA,EAAU,UAAU,UAAY,SAAU,EAAK,CAC3C,SAAM,GAAU,EAAK,GAAK,KAAK,aAAa,CAAC,EACzC,EAAI,aACJ,GAAK,YAAY,EAAI,WAAW,EACpC,EAAI,YAAc,GAAK,YAAY,EAEnC,EAAI,QAAQ,KAAO,GAAS,EAAI,QAAQ,MAAQ,CAAC,EAAG,GAAa,CAAC,EAC3D,CACX,EAOA,EAAU,UAAU,oCAAsC,SAAU,EAAkB,CAElF,GAAI,CAAC,KAAK,QAAQ,aACd,MAAO,GAGX,GAAI,GAAe,GAAO,CAAC,EAAG,KAAK,QAAQ,YAAY,EACnD,EAGJ,AAAI,EAAiB,MAAQ,IACzB,GAAe,CAAE,IAAK,EAAM,GAEhC,IAAK,IAAmB,GACpB,AAAI,EAAiB,eAAe,CAAe,GAE3C,KAAK,QAAQ,aAAa,KAAqB,IAC/C,GAAa,GAAmB,EAAiB,IAI7D,MAAO,EACX,EAIA,EAAU,UAAU,WAAa,UAAY,CACzC,cAAO,UAAY,GACZ,IACX,EAIA,GAAO,QAAU,EACjB,GAAO,QAAQ,OAAS,GACxB,GAAO,QAAQ,OAAS,GACxB,GAAO,QAAQ,MAAQ,GACvB,GAAO,QAAQ,QAAU,ipGC/yBzB,gCACA,OAAO,eAAe,GAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAM5D,GAAI,IAAY,KAEZ,GAAY,GAAI,IAGpB,GAAU,QAAU,GAEpB,GAAU,QAAU,KAA2B,QAI/C,GAAO,QAAU,KClBjB,mBAIA,GAAI,IACJ,GAAI,CACF,GAAO,IACT,MAAE,CACA,GAAO,IACT,CAMA,GAAO,QAAU,GASjB,YAAe,EAAI,CACjB,OAAQ,GAAK,CAAG,OACT,SACH,GAAI,GAAO,CAAC,EACZ,OAAS,KAAO,GACd,AAAI,OAAO,UAAU,eAAe,KAAK,EAAK,CAAG,GAC/C,GAAK,GAAO,GAAM,EAAI,EAAI,GAG9B,MAAO,OAEJ,QAEH,OADI,GAAO,GAAI,OAAM,EAAI,MAAM,EACtB,EAAI,EAAG,EAAI,EAAI,OAAQ,EAAI,EAAG,IACrC,EAAK,GAAK,GAAM,EAAI,EAAE,EAExB,MAAO,OAEJ,SAEH,GAAI,GAAQ,GACZ,UAAS,EAAI,UAAY,IAAM,GAC/B,GAAS,EAAI,OAAS,IAAM,GAC5B,GAAS,EAAI,WAAa,IAAM,GACzB,GAAI,QAAO,EAAI,OAAQ,CAAK,MAEhC,OACH,MAAO,IAAI,MAAK,EAAI,QAAQ,CAAC,UAG7B,MAAO,GAEb,ICxDA,mBACA,GAAI,IAAO,KACP,GAAQ,KAOZ,GAAO,QAAU,GAUjB,YAAgB,EAAK,EAAQ,CAC3B,OAAQ,GAAK,CAAM,OACZ,SAAU,MAAO,IAAkB,GAAM,CAAG,EAAG,CAAM,MACrD,WAAY,MAAO,IAAgB,GAAM,CAAG,EAAG,CAAM,EAE9D,CAUA,YAA4B,EAAK,EAAS,CACxC,OAAS,KAAO,GACd,AAAI,AAAc,EAAI,KAAlB,QACJ,GAAI,EAAQ,IAAQ,EAAI,GACxB,MAAO,GAAI,IAEb,MAAO,EACT,CAUA,YAA0B,EAAK,EAAS,CAEtC,GAAI,GAAS,CAAC,EACd,OAAS,KAAO,GAAK,EAAO,EAAQ,CAAG,GAAK,EAAI,GAChD,MAAO,EACT,ICxDA,gCAMA,GAAI,IAAQ,KACR,GAAO,KACP,GAAO,KASX,YAAsB,EAAK,EAAS,CAClC,SAAM,GAAM,CAAG,EACf,GAAK,SAAS,EAAK,EAAK,CACtB,AAAI,GAAK,CAAG,IAAM,QAChB,GAAI,GAAO,EAAQ,CAAG,GAEpB,IAAK,CAAG,IAAM,UAAY,GAAK,CAAG,IAAM,UAC1C,GAAI,GAAO,GAAa,EAAK,CAAO,EAExC,EAAG,CAAG,EACC,CACT,CAMA,GAAO,QAAU,KClCjB,mBAgBA,GAAO,QAAU,SAAU,EAAK,EAAS,CACvC,UAAY,GAAU,CAAC,GAChB,EAAI,YAAY,EACpB,QAAQ,EAAQ,SAAW,aAAc,GAAG,EAC5C,QAAQ,WAAY,EAAE,EACtB,QAAQ,MAAO,EAAQ,WAAa,GAAG,CAC5C,ICtBA,gCAEA,GAAI,IAAc,OAAO,UAAU,SAS/B,GAAa,SAAS,EAAK,CAC7B,MAAO,OAAO,IAAQ,UACxB,EASI,GAAW,SAAS,EAAK,CAC3B,GAAI,GAAO,MAAO,GAClB,MAAO,KAAS,UAAa,IAAS,UAAY,GAAY,KAAK,CAAG,IAAM,iBAC9E,EAaI,GAAe,SAAsB,EAAG,CAG1C,OAFI,GAAO,CAAC,EAEH,EAAI,EAAG,GAAK,EAAG,GAAK,EAC3B,EAAK,KAAK,MAAQ,CAAC,EAGrB,MAAO,EACT,EAaI,GAAqB,SAA4B,EAAG,CACtD,GAAI,GAAa,GAAa,CAAC,EAAE,KAAK,IAAI,EACtC,EAAc,GAAG,OACnB,qBAAsB,EAAY;AAAA,EAClC;AAAA,EACA,MACF,EAGA,MAAO,IAAI,UAAS,OAAQ,CAAW,CAEzC,EAGI,GAAoB,CAEtB,SAAS,EAAI,CACX,MAAO,WAAW,CAChB,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,EAEA,SAAS,EAAI,CACX,MAAO,UAAS,EAAM,CACpB,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,EAEA,SAAS,EAAI,CACX,MAAO,UAAS,EAAM,EAAM,CAC1B,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,EAEA,SAAS,EAAI,CACX,MAAO,UAAS,EAAM,EAAM,EAAM,CAChC,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,EAEA,SAAS,EAAI,CACX,MAAO,UAAS,EAAM,EAAM,EAAM,EAAM,CACtC,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,EAEA,SAAS,EAAI,CACX,MAAO,UAAS,EAAM,EAAM,EAAM,EAAM,EAAM,CAC5C,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CACF,CAEF,EA0BI,GAAQ,SAAe,EAAG,EAAM,CAClC,GAAI,CAAC,GAAW,CAAI,EAClB,KAAM,IAAI,WAAU,+BAAiC,MAAO,EAAI,EAGlE,SAAI,KAAK,IAAI,GAAS,CAAC,EAAI,EAAI,EAAG,CAAC,EAE9B,GAAkB,IACrB,IAAkB,GAAK,GAAmB,CAAC,GAGtC,GAAkB,GAAG,CAAI,CAClC,EAMA,GAAO,QAAU,KC3JjB,gCAMA,GAAI,IAAQ,KAER,GAAc,OAAO,UAAU,SAS/B,GAAa,SAAS,EAAK,CAC7B,MAAO,OAAO,IAAQ,UACxB,EASI,GAAW,SAAS,EAAK,CAC3B,GAAI,GAAO,MAAO,GAClB,MAAO,KAAS,UAAa,IAAS,UAAY,GAAY,KAAK,CAAG,IAAM,iBAC9E,EAeI,GAAQ,SAAe,EAAG,EAAI,CAChC,GAAI,CAAC,GAAS,CAAC,EACb,KAAM,IAAI,WAAU,kCAAoC,MAAO,EAAC,EAGlE,GAAI,CAAC,GAAW,CAAE,EAChB,KAAM,IAAI,WAAU,oCAAsC,MAAO,EAAE,EAGrE,GAAI,GAAY,EAEhB,MAAO,IAAM,EAAG,OAAQ,UAAW,CAGjC,GAFA,GAAa,EAET,IAAY,GAIhB,MAAO,GAAG,MAAM,KAAM,SAAS,CACjC,CAAC,CACH,EAMA,GAAO,QAAU,KCxEjB,mBACA,GAAO,QAAU,CAEf,gBAAiB,qCACjB,gBAAiB,qCACjB,iBAAkB,sCAClB,iBAAkB,sCAElB,iBAAkB,qCAClB,kBAAmB,2CACnB,oBAAqB,6CACrB,sBAAuB,+CACvB,qBAAsB,+CAEtB,eAAgB,mCAChB,eAAgB,mCAChB,cAAe,kCACf,cAAe,kCACf,aAAc,iCACd,aAAc,iCACd,eAAgB,mCAChB,eAAgB,mCAChB,WAAY,+BACZ,aAAc,iCACd,aAAc,iCACd,aAAc,iCACd,aAAc,iCACd,eAAgB,mCAChB,eAAgB,mCAChB,cAAe,kCACf,cAAe,kCACf,eAAgB,mCAChB,iBAAkB,0CAClB,gBAAiB,oCACjB,mBAAoB,4CACpB,mBAAoB,4CACpB,sBAAuB,+CACvB,sBAAuB,+CAEvB,cAAe,kCACf,cAAe,kCACf,aAAc,iCACd,cAAe,kCAEf,uBAAwB,qDACxB,uBAAwB,gDACxB,2BAA4B,8DAE5B,cAAe,kCACf,WAAY,+BAEZ,eAAgB,mCAEhB,qBAAsB,yCACtB,mBAAoB,uCACpB,kBAAmB,sCACnB,wBAAyB,4CACzB,uBAAwB,2CAExB,kBAAmB,sCACnB,eAAgB,wCAChB,yBAA0B,kDAC1B,uBAAwB,kDACxB,wBAAyB,gDAC3B,IChEA,gCAMA,GAAI,IAAO,KAkBP,GAAQ,SAAe,EAAW,EAAY,CAChD,GAAI,MAAO,IAAc,WACvB,KAAM,IAAI,WAAU,4CAA8C,MAAO,EAAS,EAGpF,GAAI,GAAS,GAEb,UAAK,SAAS,EAAK,EAAK,EAAY,CAIlC,GAHA,EAAS,CAAC,CAAC,EAAU,EAAK,EAAK,CAAU,EAGrC,CAAC,EACH,MAAO,EAEX,EAAG,CAAU,EAEN,CACT,EAMA,GAAO,QAAU,KC/CjB,gCAGA,GAAI,IAAW,OAAO,MAAQ,MAAO,MAAK,WAAc,WAAa,KAAK,UAAY,OAStF,YAAa,EAAK,CAChB,GAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAC9C,EAAI,EAER,MAAO,GAAI,QAAQ,aAAc,SAAS,EAAO,EAAG,CAClD,MAAO,IAAI,GAAK,GAAI,GAAG,EAAK,IAAI,EAAI,EAAQ,CAC9C,CAAC,CACH,CAGA,GAAI,EAAI,GACR,GAAI,EAAI,OACR,GAAI,EAAI,SAMR,GAAO,QAAU,KC9BjB,gCAMA,GAAI,IAAO,KA+BP,GAAQ,SAAe,EAAU,EAAa,EAAY,CAC5D,GAAI,MAAO,IAAa,WACtB,KAAM,IAAI,WAAU,sCAAwC,MAAO,EAAQ,EAG7E,UAAK,SAAS,EAAK,EAAG,EAAY,CAChC,EAAc,EAAS,EAAa,EAAK,EAAG,CAAU,CACxD,EAAG,CAAU,EAEN,CACT,EAMA,GAAO,QAAU,KCrDjB,mBAWA,GAAO,QAAU,SAAS,EAAI,EAAG,CAC/B,MAAO,GAAG,iBACN,GAAI,EAAI,CAAE,EACV,GAAO,EAAI,CAAE,CACnB,EAUA,YAAa,EAAI,EAAG,CAClB,EAAG,iBAAiB,OAAQ,SAAS,EAAG,EAAE,CAAE,EAAG,KAAM,CAAC,CAAG,EAAG,EAAK,EACjE,EAAG,iBAAiB,QAAS,SAAS,EAAE,CACtC,GAAI,GAAM,GAAI,OAAM,iBAAmB,EAAG,IAAM,GAAG,EACnD,EAAI,MAAQ,EACZ,EAAG,CAAG,CACR,EAAG,EAAK,CACV,CAUA,YAAgB,EAAI,EAAG,CACrB,EAAG,YAAY,qBAAsB,SAAS,EAAE,CAC9C,AAAI,CAAC,kBAAkB,KAAK,EAAG,UAAU,GACzC,EAAG,KAAM,CAAC,CACZ,CAAC,EACD,EAAG,YAAY,UAAW,SAAS,EAAE,CACnC,GAAI,GAAM,GAAI,OAAM,8BAAgC,EAAG,IAAM,GAAG,EAChE,EAAI,MAAQ,GAAK,OAAO,MACxB,EAAG,CAAG,CACR,CAAC,CACH,ICpDA,mBAIA,GAAI,IAAK,KACL,GAAS,KACT,GAAO,KAUX,GAAO,QAAU,SAAoB,EAAS,EAAG,CAC/C,GAAI,CAAC,EAAS,KAAM,IAAI,OAAM,sBAAsB,EAGpD,AAAI,GAAG,OAAO,CAAO,GAAG,GAAU,CAAE,IAAM,CAAQ,GAElD,GAAI,GAAQ,SAAS,SAAS,WAAa,UAC/B,SAAS,SAAS,WAAa,oBAI3C,AAAI,EAAQ,KAAO,EAAQ,IAAI,QAAQ,IAAI,IAAM,GAC/C,GAAQ,IAAM,EAAQ,SAAW,EAAQ,IAAM,QAAU,EAAQ,KAInE,AAAI,GAAS,EAAQ,MAAO,EAAQ,IAAM,EAAQ,MACzC,CAAC,GAAS,EAAQ,MAAM,GAAQ,IAAM,EAAQ,MAIvD,GAAI,GAAS,SAAS,cAAc,QAAQ,EAC5C,SAAO,IAAM,EAAQ,IACrB,EAAO,MAAQ,EAAQ,OAAS,EAChC,EAAO,OAAS,EAAQ,QAAU,EAClC,EAAO,MAAM,QAAU,OAKnB,GAAG,GAAG,CAAE,GACV,GAAO,EAAQ,CAAE,EAGnB,GAAK,UAAU,CAEb,GAAI,GAAc,SAAS,qBAAqB,QAAQ,EAAE,GAC1D,EAAY,WAAW,aAAa,EAAQ,CAAW,CACzD,CAAC,EAIM,CACT,IC3DA,gCAMA,GAAI,IAAS,KACT,GAAO,KACP,GAAO,KAQX,YAAoB,EAAS,EAAI,CAC/B,GAAI,CAAC,EACH,KAAM,IAAI,OAAM,uBAAwB,EAI1C,AAAI,GAAK,CAAO,IAAM,UACpB,GAAU,CAAE,IAAM,CAAQ,GAG5B,GAAI,GAAQ,SAAS,SAAS,WAAa,UAAY,SAAS,SAAS,WAAa,oBAItF,AAAI,EAAQ,KAAO,EAAQ,IAAI,QAAQ,IAAI,IAAM,GAC/C,GAAQ,IAAO,GAAQ,SAAW,SAAW,EAAQ,KAIvD,AAAI,GAAS,EAAQ,MACnB,EAAQ,IAAM,EAAQ,MACb,CAAC,GAAS,EAAQ,MAC3B,GAAQ,IAAM,EAAQ,MAKxB,GAAI,GAAS,SAAS,cAAc,QAAQ,EAC5C,SAAO,KAAO,kBACd,EAAO,MAAQ,GACf,EAAO,IAAM,EAAQ,IAIjB,GAAK,CAAE,IAAM,YACf,GAAO,EAAQ,CAAE,EAGnB,GAAK,UAAW,CAEd,GAAI,GAAc,SAAS,qBAAqB,QAAQ,EAAE,GAC1D,EAAY,WAAW,aAAa,EAAQ,CAAW,CACzD,CAAC,EAIM,CACT,CAMA,GAAO,QAAU,KCrEjB,mBAKA,GAAO,QAAU,GAOjB,GAAI,IAAW,KACX,GAAe,QAWnB,YAAmB,EAAQ,CACzB,MAAI,IAAS,KAAK,CAAM,EAAU,EAAO,YAAY,EACjD,GAAa,KAAK,CAAM,EAAW,IAAW,CAAM,GAAK,GAAQ,YAAY,EAC1E,GAAW,CAAM,EAAE,YAAY,CACxC,CAOA,GAAI,IAAoB,eAUxB,YAAqB,EAAQ,CAC3B,MAAO,GAAO,QAAQ,GAAmB,SAAU,EAAG,EAAM,CAC1D,MAAO,GAAO,IAAM,EAAO,EAC7B,CAAC,CACH,CAOA,GAAI,IAAgB,eAUpB,YAAqB,EAAQ,CAC3B,MAAO,GAAO,QAAQ,GAAe,SAAU,EAAG,EAAU,EAAQ,CAClE,MAAO,GAAW,IAAM,EAAO,YAAY,EAAE,MAAM,EAAE,EAAE,KAAK,GAAG,CACjE,CAAC,CACH,ICtEA,0BAMA,GAAI,IAAU,KACV,GAAQ,KACR,GAAO,KACP,GAAS,KACT,GAAQ,KACR,GAAM,KACN,GAAQ,KACR,GAAK,KACL,GAAa,KACb,GAAa,KACb,GAAW,KACX,GAAY,KAMZ,GAAM,OAAO,UAAU,eAMvB,GAAO,UAAgB,CAAC,EAMxB,GAAU,OAAO,QACjB,GAAS,KAOb,GAAQ,CAAO,EAOf,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAQ,KAAK,MACjB,GAAS,CAAK,CAChB,EASA,EAAQ,OAAS,UAAW,CAC1B,MAAO,EACT,EAUA,EAAQ,KAAO,SAAS,EAAM,CAAC,EAW/B,EAAQ,MAAQ,SAAS,EAAO,CAAC,EA0CjC,EAAQ,IAAM,SAAS,EAAS,EAAK,CACnC,GAAI,GAAuB,GAAU,CAAG,EACpC,EAAc,GAAe,CAAO,EAExC,MAAI,KAAgB,UACX,CAAC,EAGH,GAAM,SAAS,EAAgB,EAAK,EAAK,CAC9C,GAAI,GACA,EAEJ,MAAI,KAAgB,OAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EAAI,IACd,EAAS,EAAI,OAGX,GAAU,CAAO,IAAM,GACzB,EAAe,KAAK,CAAM,EAGrB,CACT,EAAG,CAAC,EAAG,CAAO,CAChB,EAYA,EAAQ,OAAS,SAAS,EAAQ,CAChC,GAAI,EAAC,KAAK,GACV,IAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAClD,MAAK,MAAK,OAEV,MAAK,MAAM,aAAc,EAAQ,CAAI,EAC9B,KAAK,GAAQ,MAAM,KAAM,CAAI,GAHX,KAAK,MAAM,EAAQ,CAAI,EAIlD,EAWA,EAAQ,MAAQ,SAAS,EAAQ,EAAM,CACrC,GAAI,IAAW,QAAU,KAAK,kBAAoB,CAAC,KAAK,aACtD,MAAO,MAAK,KAAK,MAAM,KAAM,CAAI,EAGnC,KAAK,OAAO,KAAK,CAAE,OAAQ,EAAQ,KAAM,CAAK,CAAC,CACjD,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,OAAS,GACd,GAAI,GAAO,KAEX,GAAK,SAAS,EAAM,CAClB,EAAK,EAAK,QAAQ,MAAM,EAAM,EAAK,IAAI,CACzC,EAAG,KAAK,MAAM,EAGd,KAAK,OAAO,OAAS,CACvB,EAQA,EAAQ,MAAQ,UAAW,CACzB,OAAS,GAAI,EAAG,EAAI,KAAK,QAAQ,OAAQ,IACvC,OAAO,KAAK,QAAQ,IAAM,OAG5B,OAAO,QAAU,GACjB,OAAO,OAAS,EAClB,EAYA,EAAQ,KAAO,SAAS,EAAM,EAAQ,EAAU,CAE9C,AAAI,MAAO,IAAS,YAAc,GAAW,EAAM,EAAS,KAAM,EAAO,MACrE,GAAQ,MAAO,IAAS,UAAY,GAAW,EAAQ,EAAS,EAAM,EAAO,MAC7E,MAAO,IAAW,YAAc,GAAW,EAAQ,EAAS,MAGhE,EAAO,GAAQ,UACf,EAAS,GAAU,CAAC,EAEpB,EAAS,KAAK,OAAO,CAAM,EAC3B,GAAI,GAAW,KAAK,UAAU,GAC9B,GAAI,CAAC,EAAU,KAAM,IAAI,OAAM,GAAI,6BAA8B,CAAI,CAAC,EACtE,GAAI,GAAQ,GAAO,EAAU,CAAM,EACnC,EAAW,GAAY,GACvB,GAAI,GAAO,KACP,EAEJ,OAAQ,EAAS,UACZ,MACH,EAAM,MAAQ,EACd,EAAM,OAAS,EACf,EAAK,GAAU,EAAO,CAAQ,EAC9B,UACG,SACH,EAAK,GAAW,EAAO,SAAS,EAAK,CACnC,GAAI,CAAC,EAAK,MAAO,GAAS,EAC1B,EAAK,MAAM,gCAAiC,EAAK,KAAM,CAAG,CAC5D,CAAC,EAED,MAAO,GAAM,IACb,GAAK,SAAS,EAAK,EAAK,CACtB,EAAG,aAAa,EAAK,CAAG,CAC1B,EAAG,CAAK,EACR,UACG,SACH,EAAK,GAAW,EAAO,CAAQ,EAC/B,eAKF,MAAO,EACT,EAWA,EAAQ,OAAS,SAAS,EAAQ,CAChC,EAAS,GAAU,CAAC,EACpB,GAAI,GAAQ,KAAK,MAAM,GAAI,MAAK,EAAE,QAAQ,EAAI,IAAO,EACrD,MAAK,GAAO,eAAe,OAAO,GAAG,GAAO,MAAQ,GACpD,GAAK,SAAS,EAAK,EAAK,CACtB,AAAK,EAAO,eAAe,CAAG,GAAG,GAAO,GAAO,EACjD,EAAG,KAAK,OAAO,EACR,CACT,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,KAAK,OAAO,CACnB,EASA,EAAQ,gBAAkB,UAAW,CACnC,GAAI,GAAa,KAAK,WACtB,KAAK,WAAa,UAAW,CAC3B,KAAK,MAAM,YAAY,EACvB,KAAK,aAAe,GACpB,GAAI,GAAM,EAAW,MAAM,KAAM,SAAS,EAC1C,YAAK,KAAK,YAAY,EACf,CACT,EAEI,KAAK,kBAAkB,MAAK,WAAa,GAAM,EAAG,KAAK,UAAU,EACvE,EASA,EAAQ,UAAY,UAAW,CAC7B,GAAI,GAAO,KAAK,KAChB,KAAK,KAAO,UAAW,CACrB,MAAI,MAAK,kBAAoB,CAAC,KAAK,aAC1B,KAAK,WAAW,MAAM,KAAM,SAAS,EAGvC,EAAK,MAAM,KAAM,SAAS,CACnC,CACF,EASA,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAI,KAAK,MACb,KAAK,MAAQ,SAAS,EAAO,CAC3B,GAAI,GAAQ,EAAM,MAAM,EACpB,EACA,EAEJ,OAAS,KAAU,IACjB,GAAI,GAAI,KAAK,GAAQ,CAAM,EAAG,CAC5B,GAAI,GAAS,GAAO,GAEpB,GADI,CAAC,KAAK,IACN,CAAC,EAAO,KAAK,CAAK,EAAG,SACzB,EAAM,KAAK,GAAQ,MAAM,KAAM,SAAS,EACxC,EAAS,GACT,KACF,CAGF,MAAK,IAAQ,GAAM,EAAE,MAAM,KAAM,SAAS,GACnC,CACT,CACF,EAUA,YAAwB,EAAS,CAC/B,MAAI,IAAG,MAAM,CAAO,EACX,GAAM,GAAS,CAAO,EAAI,QAAU,QAEzC,GAAG,OAAO,CAAO,EAAU,MACxB,SACT,CAaA,YAAiB,EAAM,CAGrB,MAFI,GAAC,GAAG,OAAO,CAAI,GACf,CAAC,GAAG,OAAO,EAAK,GAAG,GACnB,CAAC,GAAI,KAAK,EAAM,OAAO,EAE7B,CAWA,YAAmB,EAAO,EAAI,CAC5B,EAAK,GAAM,UAAW,CAAC,EACvB,GAAI,GAAM,GAAI,OACd,SAAI,QAAU,GAAM,EAAI,uBAAwB,CAAG,EACnD,EAAI,OAAS,UAAW,CAAE,EAAG,CAAG,EAChC,EAAI,IAAM,EAAM,IAChB,EAAI,MAAQ,EACZ,EAAI,OAAS,EACN,CACT,CAYA,YAAe,EAAI,EAAS,EAAK,CAC/B,MAAO,UAAS,EAAG,CACjB,EAAI,GAAK,OAAO,MAChB,GAAI,GAAM,GAAI,OAAM,CAAO,EAC3B,EAAI,MAAQ,EACZ,EAAI,OAAS,EACb,EAAG,CAAG,CACR,CACF,CAWA,YAAgB,EAAU,EAAQ,CAChC,MAAO,IAAM,SAAS,EAAO,EAAK,EAAK,CACrC,SAAM,GAAO,EAAI,QAAQ,uBAAwB,SAAS,EAAG,EAAI,CAC/D,MAAO,GAAO,EAChB,CAAC,EACM,CACT,EAAG,CAAC,EAAG,EAAS,KAAK,CACvB,ICzdA,mBAKA,GAAO,QAAU,GAMjB,GAAI,IAAe,GACf,GACJ,AAAI,MAAO,UAAa,KACtB,IAAa,SAAS,cAAc,KAAK,EAEzC,GAAW,UAAY,qEAGvB,GAAe,CAAC,GAAW,qBAAqB,MAAM,EAAE,OACxD,GAAa,QAOf,GAAI,GAAM,CACR,OAAQ,CAAC,EAAG,aAAc,aAAa,EACvC,GAAI,CAAC,EAAG,iBAAkB,kBAAkB,EAC5C,IAAK,CAAC,EAAG,mCAAoC,qBAAqB,EAGlE,SAAU,GAAe,CAAC,EAAG,SAAU,QAAQ,EAAI,CAAC,EAAG,GAAI,EAAE,CAC/D,EAEA,EAAI,GACJ,EAAI,GAAK,CAAC,EAAG,qBAAsB,uBAAuB,EAE1D,EAAI,OACJ,EAAI,SAAW,CAAC,EAAG,+BAAgC,WAAW,EAE9D,EAAI,MACJ,EAAI,MACJ,EAAI,SACJ,EAAI,QACJ,EAAI,MAAQ,CAAC,EAAG,UAAW,UAAU,EAErC,EAAI,SACJ,EAAI,QACJ,EAAI,QACJ,EAAI,OACJ,EAAI,KACJ,EAAI,KACJ,EAAI,KACJ,EAAI,KACJ,EAAI,EAAI,CAAC,EAAG,yDAAyD,QAAQ,EAa7E,YAAe,EAAM,EAAK,CACxB,GAAI,AAAY,MAAO,IAAnB,SAAyB,KAAM,IAAI,WAAU,iBAAiB,EAGlE,AAAK,GAAK,GAAM,UAGhB,GAAI,GAAI,YAAY,KAAK,CAAI,EAC7B,GAAI,CAAC,EAAG,MAAO,GAAI,eAAe,CAAI,EAEtC,EAAO,EAAK,QAAQ,aAAc,EAAE,EAEpC,GAAI,GAAM,EAAE,GAGZ,GAAI,GAAO,OAAQ,CACjB,GAAI,GAAK,EAAI,cAAc,MAAM,EACjC,SAAG,UAAY,EACR,EAAG,YAAY,EAAG,SAAS,CACpC,CAGA,GAAI,GAAO,OAAO,UAAU,eAAe,KAAK,EAAK,CAAG,EAAI,EAAI,GAAO,EAAI,SACvE,EAAQ,EAAK,GACb,EAAS,EAAK,GACd,EAAS,EAAK,GACd,EAAK,EAAI,cAAc,KAAK,EAEhC,IADA,EAAG,UAAY,EAAS,EAAO,EACxB,KAAS,EAAK,EAAG,UAGxB,GAAI,EAAG,YAAc,EAAG,UACtB,MAAO,GAAG,YAAY,EAAG,UAAU,EAKrC,OADI,GAAW,EAAI,uBAAuB,EACnC,EAAG,YACR,EAAS,YAAY,EAAG,YAAY,EAAG,UAAU,CAAC,EAGpD,MAAO,EACT,IC/GA,2BAMA,GAAI,IAAU,KACV,GAAS,KACT,GAAO,KACP,GAAW,KAOf,GAAQ,EAAO,EAYf,GAAQ,OAAS,SAAS,EAAK,EAAO,CACpC,YAAK,UAAU,SAAS,GAAO,EACxB,IACT,EAsBA,GAAQ,QAAU,SAAS,EAAM,CAC/B,YAAK,OAAO,EAAM,CAAC,CAAC,EACpB,KAAK,UAAU,GAAQ,SAAS,EAAK,CACnC,MAAO,MAAK,IAAI,KAAK,QAAQ,GAAO,CAAG,CACzC,EACO,IACT,EAWA,GAAQ,OAAS,SAAS,EAAK,CAC7B,YAAK,UAAU,QAAQ,KAAK,CAAG,EACxB,IACT,EAUA,GAAQ,gBAAkB,UAAW,CACnC,YAAK,UAAU,iBAAmB,GAC3B,IACT,EASA,GAAQ,YAAc,UAAW,CAC/B,YAAK,UAAU,aAAe,GACvB,IACT,EASA,GAAQ,kBAAoB,UAAW,CACrC,YAAK,UAAU,mBAAqB,GAC7B,IACT,EAaA,GAAQ,IAAM,SAAS,EAAM,EAAK,CAChC,MAAI,IAAO,MACT,GAAM,EACN,EAAO,WAET,KAAK,UAAU,UAAU,GAAQ,GAAU,CAAG,EACvC,IACT,EAcA,YAAmB,EAAK,CAEtB,EAAM,EAAI,QAAQ,SAAU,aAAa,EAEzC,GAAI,GAAK,GAAO,CAAG,EACf,EAAQ,CAAC,EAEb,UAAK,SAAS,EAAM,CAElB,GAAI,GAAO,EAAK,OAAS,WAAa,MAAQ,EAAK,KACnD,AAAI,CAAC,GAAS,EAAK,KAAO,IAAK,CAAG,GAClC,GAAM,GAAQ,EAAK,MACrB,EAAG,EAAG,UAAU,EAET,CACL,KAAM,EAAG,QAAQ,YAAY,EAC7B,MAAO,CACT,CACF,IClKA,gCAMA,GAAI,IAAO,KACP,GAAQ,KACR,GAAQ,KACR,GAAW,KACX,GAAS,KACT,GAAO,KACP,GAAS,KACT,GAAU,KAUd,YAA2B,EAAM,CAQ/B,WAAqB,EAAS,CAC5B,GAAI,GAAW,EAAQ,eAErB,MAAO,GAAQ,eAAe,CAAW,EAE3C,KAAK,MAAQ,GAAM,yBAA2B,GAAK,CAAI,CAAC,EACxD,KAAK,QAAU,GAAS,GAAM,CAAO,GAAK,CAAC,EAAG,KAAK,QAAQ,EAC3D,KAAK,OAAS,CAAC,EACf,KAAK,KAAK,QAAS,GAAK,KAAM,KAAK,KAAK,CAAC,EAEzC,EAAY,KAAK,YAAa,IAAI,EAClC,KAAK,MAAQ,GAAK,KAAM,KAAK,KAAK,EAClC,KAAK,gBAAgB,EACrB,KAAK,UAAU,EACf,KAAK,WAAW,CAClB,CAEA,SAAY,UAAU,SAAW,CAAC,EAClC,EAAY,UAAU,QAAU,CAAC,EACjC,EAAY,UAAU,UAAY,CAAC,EACnC,EAAY,UAAU,KAAO,EAC7B,GAAO,EAAa,EAAO,EAC3B,GAAO,EAAY,UAAW,EAAM,EAE7B,CACT,CAMA,GAAO,QAAU,KC9DjB,gCAMA,GAAI,IAAW,KAA4B,SACvC,GAAQ,KACR,GAAe,KACf,GAAc,KAEd,GAA6B,KAK7B,GAAc,GAAO,QAAU,GAAY,aAAa,EACzD,OAAO,MAAM,EACb,OAAO,SAAU,EAAE,EACnB,OAAO,aAAc,EAAE,EACvB,IACC,SACA,2GACF,EACC,IACC,aACA,wGACF,EAUF,GAAW,UAAU,WAAa,UAAW,CAC3C,OAAO,KAAO,OAAO,MAAQ,CAAC,EAE7B,UAAU,CAAC,GAAI,GAAE,EAAE,EAA6I,IAA1I,EAAI,SAAS,EAAE,CAAC,MAAO,WAAU,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM,UAAU,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC,CAAG,CAAG,EAAG,EAAI,CAAC,WAAY,OAAO,EAAQ,EAAI,EAAG,EAAI,EAAE,OAAQ,IAAM,OAAO,KAAK,EAAE,IAAM,EAAE,EAAE,EAAE,CAAK,EAAG,EAGnO,AAAI,KAAK,QAAQ,aAAe,MAAQ,KAAK,UAAU,UACrD,KAAK,KAAK,SAAU,KAAK,KAAK,EAE9B,KAAK,KAAK,aAAc,KAAK,KAAK,CAEtC,EASA,GAAW,UAAU,OAAS,UAAW,CACvC,MAAO,CAAC,CAAE,QAAO,MAAQ,OAAO,KAAK,OAAS,MAAM,UAAU,KAChE,EAWA,GAAW,UAAU,KAAO,SAAS,EAAM,CACzC,GAAI,GAAO,EAAK,KAAK,GAAK,EAAK,IAAI,EACnC,OAAO,KAAK,KAAK,EAAM,EAAK,WAAW,CAAC,CAC1C,EAWA,GAAW,UAAU,SAAW,SAAS,EAAU,CACjD,GAAI,CAAC,EAAS,OAAO,EAAG,MAAO,MAAK,MAAM,kBAAkB,EAC5D,GAAI,GAAS,EAAS,OAAO,CAAE,UAAW,SAAU,CAAC,EACrD,EAAS,GAAM,EAAQ,CAAE,QAAS,YAAa,CAAC,EAChD,EAAS,GAAa,EAAQ,EAAW,EACzC,OAAO,KAAK,SAAS,CAAM,CAC7B,EASA,GAAW,UAAU,MAAQ,SAAS,EAAO,CAC3C,GAAI,GAAS,EAAM,OAAO,EACtB,EAAO,KAAK,UAAU,KAAK,EAE/B,EAAS,GAAM,EAAQ,SAAS,EAAO,CACrC,MAAO,SAAW,CACpB,CAAC,EAED,KAAK,SACH,GAAI,IAAS,CACX,OAAQ,EAAK,GAAG,EAChB,OAAQ,CACV,CAAC,CACH,CACF,EAWA,GAAW,UAAU,MAAQ,SAAS,EAAO,CAC3C,GAAI,GAAa,EAAM,WAAW,EAClC,EAAa,GAAa,EAAY,EAAW,EACjD,OAAO,KAAK,MAAM,EAAM,MAAM,EAAG,CAAU,CAC7C,EAUA,YAAqB,EAAM,CACzB,MAAI,GAAK,YAAY,EAAI,GAChB,EAAK,YAAY,EAEnB,KAAK,MAAM,EAAK,QAAQ,EAAI,GAAI,CACzC,IC/IA,gCAQA,YAAa,EAAQ,CACnB,GAAI,GAAI,EAAO,SAAS,EACxB,MAAO,GAAE,SAAW,EAAI,IAAM,EAAI,CACpC,CAUA,YAAqB,EAAM,CACzB,MAAO,GAAK,eAAe,EACvB,IAAM,GAAI,EAAK,YAAY,EAAI,CAAC,EAChC,IAAM,GAAI,EAAK,WAAW,CAAC,EAC3B,IAAM,GAAI,EAAK,YAAY,CAAC,EAC5B,IAAM,GAAI,EAAK,cAAc,CAAC,EAC9B,IAAM,GAAI,EAAK,cAAc,CAAC,EAC9B,IAAM,OAAQ,GAAK,mBAAmB,EAAE,KAAM,QAAQ,CAAC,CAAC,EAAE,MAAM,EAAG,CAAC,EACpE,GACN,CAMA,GAAO,QAAU,KCpCjB,sBAAO,QAAU,SAAS,EAAK,EAAI,CACjC,GAAI,EAAI,QAAS,MAAO,GAAI,QAAQ,CAAG,EACvC,OAAS,GAAI,EAAG,EAAI,EAAI,OAAQ,EAAE,EAChC,GAAI,EAAI,KAAO,EAAK,MAAO,GAE7B,MAAO,EACT,ICNA,gCAMA,GAAI,IAAQ,KACR,GAAQ,KACR,GAAM,KAAoB,IAC1B,GAAW,KACX,GAAc,KACd,GAAM,KACN,GAAO,KACP,GAAK,KACL,GAAU,KAMV,GAAY,GAAO,QAAU,GAAY,UAAU,EACpD,OAAO,UAAU,EACjB,OAAO,kBAAmB,CAAC,CAAC,EAC5B,OAAO,iBAAkB,CAAC,CAAC,EAC3B,OAAO,mBAAoB,CAAC,CAAC,EAC7B,OAAO,kBAAmB,CAAC,CAAC,EAC5B,OAAO,aAAc,EAAE,EACvB,OAAO,uBAAwB,EAAK,EACpC,OAAO,eAAgB,EAAK,EAC5B,OAAO,cAAe,QAAQ,EAC9B,OAAO,UAAW,EAAI,EACtB,OAAO,WAAY,EAAK,EACxB,OAAO,SAAU,EAAK,EACtB,OAAO,QAAS,EAAE,EAClB,OAAO,wBAAyB,EAAI,EACpC,OAAO,wBAAyB,EAAI,EACpC,OAAO,gBAAiB,EAAK,EAC7B,OAAO,kBAAmB,EAAK,EAC/B,OAAO,wBAAyB,EAAK,EACrC,OAAO,wBAAyB,CAAC,CAAC,EAClC,OAAO,aAAc,EAAE,EACvB,OAAO,8BAA+B,EAAK,EAC3C,IAAI,8DAA8D,EAMjE,GAAiB,CACnB,WAAY,cACZ,qBAAsB,yBACtB,aAAc,eAChB,EAWA,GAAS,UAAU,WAAa,UAAW,CAEzC,AAAC,UAAS,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,GAAI,GAAE,OAAO,GAAG,CAAC,GAAI,GAAE,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,CAAC,MAAO,GAAE,EAAE,MAAM,OAAO,EAAE,UAAU,CAAC,GAAG,EAAE,GAAG,IAAI,EAAE,GAAG,EAAE,EAAE,OAAO,GAAI,GAAE,KAAK,MAAM,mBAAmB,EAAE,EAAE,OAAO,CAAC,CAAC,EAAE,AAAa,EAAE,SAAf,YAAwB,GAAE,eAAe,QAAQ,YAAY,CAAC,EAAE,QAAQ,aAAa,EAAE,aAAa,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,GAAG,MAAC,CAAS,CAAC,GAAI,GAAE,EAAE,OAAO,SAAS,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,KAAK,SAAS,EAAE,EAAE,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,GAAI,IAAE,EAAE,MAAM,GAAG,EAAE,AAAG,GAAE,QAAL,GAAc,GAAE,EAAE,GAAE,IAAI,EAAE,GAAE,IAAI,EAAE,GAAG,UAAU,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM,UAAU,MAAM,KAAK,UAC3hB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAI,GAAE,EACZ,IADc,AAAc,MAAO,GAArB,IAAuB,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,CAAC,EAAE,EAAE,SAAS,SAAS,EAAE,CAAC,GAAI,GAAE,WAAW,MAAa,KAAb,YAAiB,IAAG,IAAI,GAAG,GAAI,IAAG,WAAkB,CAAC,EAAE,EAAE,OAAO,SAAS,UAAU,CAAC,MAAO,GAAE,SAAS,CAAC,EAAE,gBAAgB,EAAE,EAAE,gRAAgR,MAAM,GAAG,EAC5gB,EAAE,EAAE,EAAE,EAAE,OAAO,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,KAAK,GAAI,CAAC,GAAG,SAAS,OAAO,UAAU,CAAC,CAAC,EAE9F,KAAK,QAAQ,gBAAkB,GAAU,KAAK,QAAQ,eAAe,EACrE,KAAK,QAAQ,eAAiB,GAAU,KAAK,QAAQ,cAAc,EACnE,GAAI,GAAU,GAAM,KAAK,QAAS,EAAc,EAChD,AAAI,KAAK,QAAQ,6BAEf,GAAQ,SAAW,+BAGrB,EAAQ,OAAS,SAAS,EAAU,CAClC,EAAS,SAAS,CAAE,OAAQ,cAAe,CAAC,CAC9C,EACA,OAAO,SAAS,KAAK,EAAQ,MAAO,CAAO,EAC3C,KAAK,KAAK,KAAK,KAAK,CACtB,EASA,GAAS,UAAU,OAAS,UAAW,CACrC,MAAO,CAAC,CAAE,QAAO,UAAY,OAAO,SAAS,OAC/C,EAWA,GAAS,UAAU,KAAO,SAAS,EAAM,CACvC,GAAI,GAAW,EAAK,SAAS,EACzB,EAAO,EAAK,KAAK,EACjB,EAAO,KAAK,QAGhB,GAAI,EAAK,sBAAuB,CAC9B,KAAK,MAAM,EAAK,MAAM,CAAC,EACvB,MACF,CAGA,GAAI,EAAK,cAAe,CACtB,KAAK,MAAM,EAAK,MAAM,CAAC,EACvB,MACF,CAGA,GAAI,EAAK,uBAAyB,EAAU,CAE1C,GAAI,EAAM,CACR,KAAK,MAAM,EAAK,MAAM,EAAK,SAAS,CAAC,CAAC,EACtC,MACF,CACA,KAAK,MAAM,EAAK,MAAM,CAAQ,CAAC,EAC/B,MACF,CAGA,AAAI,GAAQ,EAAK,iBACf,KAAK,MAAM,EAAK,MAAM,CAAI,CAAC,CAE/B,EAMA,GAAI,IAAe,CACjB,QAAS,WACT,MAAO,SACP,UAAW,cACX,SAAU,aACV,SAAU,aACV,KAAM,QACN,SAAU,YACV,MAAO,QACT,EAaA,GAAS,UAAU,SAAW,SAAS,EAAU,CAC/C,GAAI,GAAW,EAAS,SAAS,EAC7B,EAAQ,EAAS,MAAM,EACvB,EAAK,EAAS,OAAO,EACrB,EAAwB,KAAK,QAAQ,sBACrC,EAAS,KAAK,QAAQ,OACtB,EAAmB,GAAa,KAAK,QAAQ,gBAAgB,EAC7D,EAAkB,KAAK,QAAQ,gBAGnC,AAAI,GAAI,OAAO,SAAS,SAAS,CAAE,EAGnC,GAAI,GAAU,GAAS,GAAY,EACnC,AAAI,GAAS,OAAO,SAAS,SAAS,CAAO,EAE7C,GAAI,GAAS,EAAS,OAAO,EAAY,EACzC,AAAI,EAAO,UAAU,GAAI,EAAQ,WAAW,EAC5C,EAAS,GAAM,EAAQ,EAAG,EAG1B,GAAI,GAAgB,CAAC,EACjB,EAAc,CAAC,EACnB,OAAS,KAAO,GACd,GAAI,EAAC,EAAO,eAAe,CAAG,EAE9B,IAAI,GAAQ,EAAO,GACnB,GAAI,MAAM,QAAQ,CAAK,GAAK,EAAM,OAAS,EAAG,CAC5C,EAAc,GAAO,EAGrB,GAAI,GAAgB,OAAO,SAAS,aAAa,CAAG,EACpD,AAAI,GAAiB,MAAM,QAAQ,CAAa,GAC9C,GAAO,GAAO,GAAY,EAAe,CAAK,EAElD,KACE,GAAY,GAAO,EAIvB,GAAI,EACF,OAAO,SAAS,SAAS,CAAM,EAC3B,GACF,QAAO,SAAS,OAAO,IAAI,CAAW,EACtC,OAAO,SAAS,OAAO,MAAM,CAAa,OAEvC,CAEL,GAAI,GAAmB,GAAU,CAAe,EAC5C,EAAa,GAAK,GAAoB,CAAC,EAAG,CAAM,EAEpD,GADK,GAAG,MAAM,CAAU,GAAG,OAAO,SAAS,SAAS,CAAU,EAC1D,EAAQ,CACV,GAAI,GAAoB,GAAU,CAAgB,EAC9C,GAAmB,GAAK,GAAqB,CAAC,EAAG,CAAW,EAC5D,GAAqB,GAAK,GAAqB,CAAC,EAAG,CAAa,EACpE,AAAK,GAAG,MAAM,EAAgB,GAC5B,OAAO,SAAS,OAAO,IAAI,EAAgB,EACxC,GAAG,MAAM,EAAkB,GAC9B,OAAO,SAAS,OAAO,MAAM,EAAkB,CACnD,CACF,CACF,EAYA,GAAS,UAAU,MAAQ,SAAS,EAAO,CACzC,GAAI,GAAkB,KAAK,QAAQ,iBAAmB,KAAK,QAAQ,WAC/D,EAAiB,KAAK,QAAQ,eAC9B,EAAiB,EAAM,MAAM,EAAE,YAAY,EAC3C,EAAS,KAAK,QAAQ,OACtB,EAAQ,EAAM,WAAW,EACzB,EAAU,EAAM,QAAQ,EAExB,EAAa,GAAK,KAAK,QAAQ,gBAAiB,CAAK,EACrD,EAAa,KAAK,QAAQ,WAe9B,GAbI,GAAY,GAAM,oBAAsB,GAG5C,MAAO,GAAM,YACb,MAAO,GAAM,GACb,MAAO,GAAM,YACb,MAAO,GAAM,QACb,MAAO,GAAM,MAEb,EAAQ,GAAM,EAAO,EAAG,EACxB,GAAmB,CAAK,EAGpB,EAAQ,CAEV,AAAI,GAAS,EAAgB,CAAe,GAC1C,QAAO,SAAS,OAAO,UAAU,EAAM,MAAM,CAAC,EAC9C,OAAO,SAAS,OAAO,IAAI,QAAU,EAAM,MAAM,EAAG,GAAI,KAAM,GAGhE,OAAS,KAAO,GACd,GAAI,EAAC,OAAO,UAAU,eAAe,KAAK,EAAO,CAAG,EAGpD,IAAI,GAAO,EAAM,GACjB,AAAI,GAAS,EAAI,YAAY,EAAG,CAAc,GAC5C,OAAO,SAAS,OAAO,UAAU,EAAK,CAAI,EAI9C,AAAI,GACF,OAAO,SAAS,OAAO,aAAa,CAAO,CAE/C,CAGA,GAAI,GACJ,AAAI,EAAM,WACR,GAAQ,EAAM,WACd,MAAO,GAAM,WACb,OAAO,SAAS,YAAY,EAAO,EAAM,MAAM,EAAG,CAAK,GAClD,AAAI,EAAM,WAEf,GAAQ,EAAM,WACd,MAAO,GAAM,WACb,OAAO,SAAS,YAAY,EAAO,EAAM,MAAM,EAAG,CAAK,GAEvD,OAAO,SAAS,MAAM,EAAM,MAAM,EAAG,CAAK,EAIvC,GAAG,MAAM,CAAU,GACtB,OAAO,SAAS,SAAS,CAAU,CAEvC,EAYA,GAAS,UAAU,MAAQ,SAAS,EAAO,CACzC,GAAI,GAAK,OAAO,SACZ,EAAK,EAAM,GAAG,EAClB,AAAI,EAAG,iBAAmB,EAAG,gBAAgB,IAAM,GAE/C,EAAG,cAAgB,EAAG,aAAa,qBAAqB,IAAM,GAElE,EAAG,MAAM,EAAI,EAAM,KAAK,CAAC,CAC3B,EAOA,GAAS,UAAU,MAAQ,SAAS,EAAO,CACzC,GAAI,GAAwB,KAAK,QAAQ,sBACrC,EAAU,EAAM,QAAQ,EACxB,EAAS,KAAK,UAAU,KAAK,EAAE,GAAG,EAClC,EAAS,EAAM,WAAW,EAC9B,GAAI,GAAC,GAAW,CAAC,GAAU,CAAC,EAAsB,QAIlD,IAAI,GAAU,OAAO,KAAK,CAAM,EAAE,OAChC,OAAS,GAAM,EAAG,EAAM,EAAsB,OAAQ,IACpD,OAAO,SACJ,UAAU,EAAsB,GAAM,CAAO,EAC7C,SAAS,CAAM,EAGtB,OAAS,GAAI,EAAG,EAAI,EAAsB,OAAQ,IAChD,OAAO,SAAS,UAAU,EAAsB,GAAI,CAAC,CAAO,CAAC,EAEjE,EAUA,YAAmB,EAAK,CAGtB,OAFI,GAAM,GAAI,OAAM,EAAI,MAAM,EAErB,EAAI,EAAG,EAAI,EAAI,OAAQ,EAAE,EAChC,EAAI,GAAK,OAAO,EAAI,EAAE,EAAE,YAAY,EAGtC,MAAO,EACT,CAWA,YAAmB,EAAK,CAGtB,OAFI,GAAM,GAAI,OAAM,EAAI,MAAM,EAErB,EAAI,EAAG,EAAI,EAAI,OAAQ,EAAE,EAChC,AAAI,GAAa,eAAe,EAAI,EAAE,EACpC,EAAI,KAAK,GAAa,EAAI,GAAG,EAE7B,EAAI,KAAK,EAAI,EAAE,EAInB,MAAO,EACT,CAUA,YAAsB,EAAK,CACzB,GAAI,GAAO,CAAC,EAEZ,OAAS,KAAO,IACd,AAAI,GAAa,eAAe,CAAG,GACjC,EAAK,KAAK,CAAG,EAIjB,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,EAAE,EACjC,AAAI,GAAQ,EAAK,EAAK,EAAE,EAAI,GAC1B,EAAI,KAAK,EAAK,EAAE,EAIpB,MAAO,EACT,CAaA,YAA4B,EAAO,CACjC,GAAI,GAAa,EACjB,OAAS,KAAY,GAAY,CAC/B,GAAI,GAAY,EAAW,GAC3B,GAAI,GAAC,EAAW,eAAe,CAAQ,GAAK,CAAC,MAAM,QAAQ,CAAS,GAIpE,IAAI,GAAiB,GAAkB,EAAU,CAAS,EAC1D,AAAI,OAAO,KAAK,CAAc,EAAE,SAAW,GAEzC,IAAmB,EAAY,CAAc,EAC7C,MAAO,GAAW,IAEtB,CACF,CAKA,YAA2B,EAAU,EAAK,CAIxC,OAHI,GAAiB,CAAC,EAGb,EAAI,EAAG,EAAI,EAAI,OAAQ,IAAK,CACnC,GAAI,GAAO,EAAI,GAGf,GAAI,MAAO,IAAS,SAClB,MAAO,CAAC,EAEV,OAAS,KAAO,GACd,GAAI,EAAC,EAAK,eAAe,CAAG,EAG5B,IAAI,GAAU,EAAW,IAAM,EAAM,IAGrC,AAAI,IAAW,GACb,EAAe,GAAS,KAAK,EAAK,EAAI,EAEtC,EAAe,GAAW,CAAC,EAAK,EAAI,EAG1C,CACA,MAAO,EACT,CAEA,YAA4B,EAAa,EAAQ,CAC/C,GAAI,GAAI,EACR,OAAS,KAAa,GACpB,GAAI,EAAO,eAAe,CAAS,EAAG,CACpC,GAAI,GAAM,EAAO,GACjB,EAAE,GAAa,IAAa,GAAI,EAAE,GAAW,OAAO,CAAG,EAAI,CAC7D,CAEJ,CAYA,YAAqB,EAAG,EAAG,CACzB,GAAI,GAAM,CAAC,EAEP,EACJ,IAAK,EAAI,EAAG,EAAI,EAAE,OAAQ,IACxB,EAAI,EAAE,IAAM,EAAE,GAEhB,IAAK,EAAI,EAAG,EAAI,EAAE,OAAQ,IACxB,EAAI,EAAE,IAAM,EAAE,GAEhB,MAAO,QAAO,KAAK,CAAG,CACxB,IC3fA,gCAMA,GAAI,IAAO,KAcP,GAAS,SAAgB,EAAQ,CAInC,OAHI,GAAK,GAAK,CAAM,EAChB,EAAU,GAAI,OAAM,EAAG,MAAM,EAExB,EAAI,EAAG,EAAI,EAAG,OAAQ,GAAK,EAClC,EAAQ,GAAK,EAAO,EAAG,IAGzB,MAAO,EACT,EAMA,GAAO,QAAU,KCnCjB,gCAMA,GAAI,IAAO,KAkBP,GAAM,SAAa,EAAU,EAAY,CAC3C,GAAI,MAAO,IAAa,WACtB,KAAM,IAAI,WAAU,sCAAwC,MAAO,EAAQ,EAG7E,GAAI,GAAS,CAAC,EAEd,UAAK,SAAS,EAAK,EAAG,EAAY,CAChC,EAAO,KAAK,EAAS,EAAK,EAAG,CAAU,CAAC,CAC1C,EAAG,CAAU,EAEN,CACT,EAMA,GAAO,QAAU,KC1CjB,gCAMA,GAAI,IAAM,KACN,GAAQ,KAER,GAAW,CAEb,qBAAsB,CAAC,CACrB,OAAQ,iBACR,OAAQ,SACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,iBACR,OAAQ,QACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,iBACR,OAAQ,aACV,CAAC,EACD,qBAAsB,CAAC,CACrB,OAAQ,iBACR,OAAQ,SACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,iBACR,OAAQ,WACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,iBACR,OAAQ,QACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,wBACR,OAAQ,SACV,CAAC,EACD,6BAA8B,CAAC,CAC7B,OAAQ,wBACR,OAAQ,WACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,sBACR,OAAQ,SACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,sBACR,OAAQ,WACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,gBACR,OAAQ,SACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,gBACR,OAAQ,SACV,CAAC,EACD,sBAAuB,CAAC,CACtB,OAAQ,gBACR,OAAQ,WACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,WACR,OAAQ,WACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EAGD,gBAAiB,CAAC,CAChB,OAAQ,YACR,OAAQ,QACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,YACR,OAAQ,SACV,CAAC,EAGD,iBAAkB,CAAC,CACjB,OAAQ,WACR,OAAQ,UACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,eACR,OAAQ,QACV,EAAG,CACD,OAAQ,mBACR,OAAQ,QACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,eACR,OAAQ,UACV,CAAC,EAGD,eAAgB,CAAC,CACf,OAAQ,UACR,OAAQ,SACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,UACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,UACR,OAAQ,OACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,UACR,OAAQ,SACV,CAAC,EACD,WAAY,CAAC,CACX,OAAQ,OACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,QACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,QACR,OAAQ,UACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,eACR,OAAQ,SACV,CAAC,EACD,gBAAiB,CAAC,CAChB,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,gBACR,OAAQ,QACV,CAAC,EACD,sBAAuB,CAAC,CACtB,OAAQ,gBACR,OAAQ,WACV,CAAC,EAGD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,SACR,OAAQ,QACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EAGD,uBAAwB,CAAC,CACvB,OAAQ,UACR,OAAQ,mBACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,UACR,OAAQ,uBACV,CAAC,EACD,+BAAgC,CAAC,CAC/B,OAAQ,UACR,OAAQ,6BACV,EAAG,CACD,OAAQ,UACR,OAAQ,6BACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,mBACR,OAAQ,eACV,CAAC,EAGD,cAAe,CAAC,CACd,OAAQ,UACR,OAAQ,QACV,CAAC,EACD,WAAY,CAAC,CACX,OAAQ,OACR,OAAQ,QACV,CAAC,EAGD,gBAAiB,CAAC,CAChB,OAAQ,UACR,OAAQ,UACV,CAAC,EAGD,qBAAsB,CAAC,CACrB,OAAQ,cACR,OAAQ,WACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,cACR,OAAQ,SACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,cACR,OAAQ,QACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,cACR,OAAQ,cACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,cACR,OAAQ,aACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,cACR,OAAQ,SACV,CAAC,EAGD,kBAAmB,CAAC,CAClB,OAAQ,UACR,OAAQ,YACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,YACR,OAAQ,QACV,CAAC,EACD,gBAAiB,CAAC,CAChB,OAAQ,YACR,OAAQ,SACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,oBACR,OAAQ,UACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,oBACR,OAAQ,QACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,oBACR,OAAQ,SACV,CAAC,EAGD,aAAc,CAAC,CACb,OAAQ,QACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,aACR,OAAQ,SACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,QACR,OAAQ,gBACV,CAAC,EACD,YAAa,CAAC,CACZ,OAAQ,QACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,GACR,OAAQ,cACV,CAAC,EAGD,0BAA2B,CAAC,CAC1B,OAAQ,yBACR,OAAQ,OACV,CAAC,EACD,4BAA6B,CAAC,CAC5B,OAAQ,yBACR,OAAQ,SACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,oBACR,OAAQ,UACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,oBACR,OAAQ,MACV,CAAC,CACH,EA2BA,GAAO,QAAU,GAAM,SAAmB,EAAK,EAAO,EAAQ,CAC5D,GAAI,GAAS,GAAI,SAAS,EAAM,CAC9B,MAAO,IAAI,SAAS,EAAa,CAC/B,GAAI,GAAY,CAAC,EAAE,OAAO,MAAM,CAAC,EAAG,GAAI,SAAS,EAAO,CACtD,MAAO,GAAM,MAAM,GAAG,CACxB,EAAG,CAAW,CAAC,EACf,MAAO,SAAW,EAAU,KAAK,OAAO,EAAI,OAC9C,EAAG,CACD,CAAC,EAAK,OAAQ,EAAK,MAAM,EACzB,CAAC,EAAK,OAAQ,EAAK,MAAM,CAC3B,CAAC,EAAE,KAAK,GAAG,CACb,EAAG,CAAK,EACJ,EAAY,EAAO,KAAK,GAAG,EAAI,IACnC,SAAI,GAAU,GAAI,QAAO,EAAW,GAAG,EAChC,CACT,EAAG,CAAC,EAAG,EAAQ,ICrWf,gCAEA,GAAI,IAAU,GAEd,GAAW,SAAU,EAAI,CACxB,GAAI,MAAO,IAAO,WAAY,KAAM,IAAI,WAAU,EAAK,oBAAoB,EAC3E,MAAO,EACR,EAEA,GAAa,SAAU,EAAU,CAChC,GAAI,GAAO,SAAS,eAAe,EAAE,EAAG,EAAO,EAAI,EACnD,UAAI,GAAS,UAAY,CACxB,GAAI,GACJ,GAAI,EAAC,EAGL,IAFA,EAAO,EACP,EAAQ,KACJ,MAAO,IAAS,WAAY,CAC/B,EAAK,EACL,MACD,CACA,EAAK,QAAQ,SAAU,EAAI,CAAE,EAAG,CAAG,CAAC,EACrC,CAAC,EAAE,QAAQ,EAAM,CAAE,cAAe,EAAK,CAAC,EACjC,SAAU,EAAI,CAEpB,GADA,GAAS,CAAE,EACP,EAAO,CACV,AAAI,MAAO,IAAU,WAAY,EAAQ,CAAC,EAAO,CAAE,EAC9C,EAAM,KAAK,CAAE,EAClB,MACD,CACA,EAAQ,EACR,EAAK,KAAQ,EAAI,EAAE,EAAI,CACxB,CACD,EAEA,GAAO,QAAW,UAAY,CAE7B,GAAK,MAAO,SAAY,KAAgB,SACrC,MAAO,SAAQ,UAAa,WAC9B,MAAO,SAAQ,SAIhB,GAAK,MAAO,WAAa,UAAa,SAAU,CAC/C,GAAI,MAAO,mBAAqB,WAC/B,MAAO,IAAW,gBAAgB,EAEnC,GAAI,MAAO,yBAA2B,WACrC,MAAO,IAAW,sBAAsB,CAE1C,CAIA,MAAI,OAAO,eAAiB,WACpB,SAAU,EAAI,CAAE,aAAa,GAAS,CAAE,CAAC,CAAG,EAIhD,MAAO,aAAe,WAClB,SAAU,EAAI,CAAE,WAAW,GAAS,CAAE,EAAG,CAAC,CAAG,EAG9C,IACR,EAAE,IC/DF,0BAMA,GAAI,IAAU,KACV,GAAO,KACP,GAAS,KACT,GAAQ,KACR,GAAM,KACN,GAAQ,KACR,GAAK,KACL,GAAa,KACb,GAAa,KACb,GAAW,KACX,GAAY,KAMZ,GAAM,OAAO,UAAU,eAMvB,GAAO,UAAgB,CAAC,EAMxB,GAAU,OAAO,QACjB,GAAS,KAOb,GAAQ,CAAO,EAOf,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAQ,KAAK,MACjB,GAAS,CAAK,CAChB,EASA,EAAQ,OAAS,UAAW,CAC1B,MAAO,EACT,EAUA,EAAQ,KAAO,SAAS,EAAM,CAAC,EAW/B,EAAQ,MAAQ,SAAS,EAAO,CAAC,EA0CjC,EAAQ,IAAM,SAAS,EAAS,EAAK,CACnC,GAAI,GAAuB,GAAU,CAAG,EACpC,EAAc,GAAe,CAAO,EAExC,MAAI,KAAgB,UACX,CAAC,EAGH,GAAM,SAAS,EAAgB,EAAK,EAAK,CAC9C,GAAI,GACA,EAEJ,MAAI,KAAgB,OAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EAAI,IACd,EAAS,EAAI,OAGX,GAAU,CAAO,IAAM,GACzB,EAAe,KAAK,CAAM,EAGrB,CACT,EAAG,CAAC,EAAG,CAAO,CAChB,EAYA,EAAQ,OAAS,SAAS,EAAQ,CAChC,GAAI,EAAC,KAAK,GACV,IAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAClD,MAAK,MAAK,OAEV,MAAK,MAAM,aAAc,EAAQ,CAAI,EAC9B,KAAK,GAAQ,MAAM,KAAM,CAAI,GAHX,KAAK,MAAM,EAAQ,CAAI,EAIlD,EAUA,EAAQ,MAAQ,SAAS,EAAQ,EAAM,CACrC,KAAK,OAAO,KAAK,CAAE,OAAQ,EAAQ,KAAM,CAAK,CAAC,CACjD,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,OAAS,GACd,GAAI,GAAO,KAEX,GAAK,SAAS,EAAM,CAClB,EAAK,EAAK,QAAQ,MAAM,EAAM,EAAK,IAAI,CACzC,EAAG,KAAK,MAAM,EAGd,KAAK,OAAO,OAAS,CACvB,EAQA,EAAQ,MAAQ,UAAW,CACzB,OAAS,GAAI,EAAG,EAAI,KAAK,QAAQ,OAAQ,IACvC,OAAO,KAAK,QAAQ,IAAM,OAG5B,OAAO,QAAU,GACjB,OAAO,OAAS,EAClB,EAYA,EAAQ,KAAO,SAAS,EAAM,EAAQ,EAAU,CAE9C,AAAI,MAAO,IAAS,YAAc,GAAW,EAAM,EAAS,KAAM,EAAO,MACrE,GAAQ,MAAO,IAAS,UAAY,GAAW,EAAQ,EAAS,EAAM,EAAO,MAC7E,MAAO,IAAW,YAAc,GAAW,EAAQ,EAAS,MAGhE,EAAO,GAAQ,UACf,EAAS,GAAU,CAAC,EAEpB,EAAS,KAAK,OAAO,CAAM,EAC3B,GAAI,GAAW,KAAK,UAAU,GAC9B,GAAI,CAAC,EAAU,KAAM,IAAI,OAAM,GAAI,6BAA8B,CAAI,CAAC,EACtE,GAAI,GAAQ,GAAO,EAAU,CAAM,EACnC,EAAW,GAAY,GACvB,GAAI,GAAO,KACP,EAEJ,OAAQ,EAAS,UACZ,MACH,EAAM,MAAQ,EACd,EAAM,OAAS,EACf,EAAK,GAAU,EAAO,CAAQ,EAC9B,UACG,SACH,EAAK,GAAW,EAAO,SAAS,EAAK,CACnC,GAAI,CAAC,EAAK,MAAO,GAAS,EAC1B,EAAK,MAAM,gCAAiC,EAAK,KAAM,CAAG,CAC5D,CAAC,EAED,MAAO,GAAM,IACb,GAAK,SAAS,EAAK,EAAK,CACtB,EAAG,aAAa,EAAK,CAAG,CAC1B,EAAG,CAAK,EACR,UACG,SACH,EAAK,GAAW,EAAO,CAAQ,EAC/B,eAKF,MAAO,EACT,EAWA,EAAQ,OAAS,SAAS,EAAQ,CAChC,EAAS,GAAU,CAAC,EACpB,GAAI,GAAQ,KAAK,MAAM,GAAI,MAAK,EAAE,QAAQ,EAAI,IAAO,EACrD,MAAK,GAAO,eAAe,OAAO,GAAG,GAAO,MAAQ,GACpD,GAAK,SAAS,EAAK,EAAK,CACtB,AAAK,EAAO,eAAe,CAAG,GAAG,GAAO,GAAO,EACjD,EAAG,KAAK,OAAO,EACR,CACT,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,KAAK,OAAO,CACnB,EASA,EAAQ,gBAAkB,UAAW,CACnC,GAAI,GAAa,KAAK,WACtB,KAAK,WAAa,UAAW,CAC3B,KAAK,MAAM,YAAY,EACvB,KAAK,aAAe,GACpB,GAAI,GAAM,EAAW,MAAM,KAAM,SAAS,EAC1C,YAAK,KAAK,YAAY,EACf,CACT,CACF,EASA,EAAQ,UAAY,UAAW,CAC7B,GAAI,GAAO,KAAK,KACZ,EAAqB,GACzB,KAAK,KAAO,UAAW,CACrB,GAAI,KAAK,kBAAoB,CAAC,EAAoB,CAChD,EAAqB,GACrB,MACF,CACA,MAAO,GAAK,MAAM,KAAM,SAAS,CACnC,CACF,EASA,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAI,KAAK,MACb,KAAK,MAAQ,SAAS,EAAO,CAC3B,GAAI,GAAQ,EAAM,MAAM,EACpB,EACA,EAEJ,OAAS,KAAU,IACjB,GAAI,GAAI,KAAK,GAAQ,CAAM,EAAG,CAC5B,GAAI,GAAS,GAAO,GAEpB,GADI,CAAC,KAAK,IACN,CAAC,EAAO,KAAK,CAAK,EAAG,SACzB,EAAM,KAAK,GAAQ,MAAM,KAAM,SAAS,EACxC,EAAS,GACT,KACF,CAGF,MAAK,IAAQ,GAAM,EAAE,MAAM,KAAM,SAAS,GACnC,CACT,CACF,EAUA,YAAwB,EAAS,CAC/B,MAAI,IAAG,MAAM,CAAO,EACX,GAAM,GAAS,CAAO,EAAI,QAAU,QAEzC,GAAG,OAAO,CAAO,EAAU,MACxB,SACT,CAaA,YAAiB,EAAM,CAGrB,MAFI,GAAC,GAAG,OAAO,CAAI,GACf,CAAC,GAAG,OAAO,EAAK,GAAG,GACnB,CAAC,GAAI,KAAK,EAAM,OAAO,EAE7B,CAWA,YAAmB,EAAO,EAAI,CAC5B,EAAK,GAAM,UAAW,CAAC,EACvB,GAAI,GAAM,GAAI,OACd,SAAI,QAAU,GAAM,EAAI,uBAAwB,CAAG,EACnD,EAAI,OAAS,UAAW,CAAE,EAAG,CAAG,EAChC,EAAI,IAAM,EAAM,IAChB,EAAI,MAAQ,EACZ,EAAI,OAAS,EACN,CACT,CAYA,YAAe,EAAI,EAAS,EAAK,CAC/B,MAAO,UAAS,EAAG,CACjB,EAAI,GAAK,OAAO,MAChB,GAAI,GAAM,GAAI,OAAM,CAAO,EAC3B,EAAI,MAAQ,EACZ,EAAI,OAAS,EACb,EAAG,CAAG,CACR,CACF,CAWA,YAAgB,EAAU,EAAQ,CAChC,MAAO,IAAM,SAAS,EAAO,EAAK,EAAK,CACrC,SAAM,GAAO,EAAI,QAAQ,uBAAwB,SAAS,EAAG,EAAI,CAC/D,MAAO,GAAO,EAChB,CAAC,EACM,CACT,EAAG,CAAC,EAAG,EAAS,KAAK,CACvB,ICldA,2BAMA,GAAI,IAAU,KACV,GAAS,KACT,GAAO,KACP,GAAW,KAOf,GAAQ,EAAO,EAYf,GAAQ,OAAS,SAAS,EAAK,EAAO,CACpC,YAAK,UAAU,SAAS,GAAO,EACxB,IACT,EAsBA,GAAQ,QAAU,SAAS,EAAM,CAC/B,YAAK,OAAO,EAAM,CAAC,CAAC,EACpB,KAAK,UAAU,GAAQ,SAAS,EAAK,CACnC,MAAO,MAAK,IAAI,KAAK,QAAQ,GAAO,CAAG,CACzC,EACO,IACT,EAWA,GAAQ,OAAS,SAAS,EAAK,CAC7B,YAAK,UAAU,QAAQ,KAAK,CAAG,EACxB,IACT,EAUA,GAAQ,gBAAkB,UAAW,CACnC,YAAK,UAAU,iBAAmB,GAC3B,IACT,EASA,GAAQ,YAAc,UAAW,CAC/B,YAAK,UAAU,aAAe,GACvB,IACT,EASA,GAAQ,kBAAoB,UAAW,CACrC,YAAK,UAAU,mBAAqB,GAC7B,IACT,EAaA,GAAQ,IAAM,SAAS,EAAM,EAAK,CAChC,MAAI,IAAO,MACT,GAAM,EACN,EAAO,WAET,KAAK,UAAU,UAAU,GAAQ,GAAU,CAAG,EACvC,IACT,EAcA,YAAmB,EAAK,CAEtB,EAAM,EAAI,QAAQ,SAAU,aAAa,EAEzC,GAAI,GAAK,GAAO,CAAG,EACf,EAAQ,CAAC,EAEb,UAAK,SAAS,EAAM,CAElB,GAAI,GAAO,EAAK,OAAS,WAAa,MAAQ,EAAK,KACnD,AAAI,CAAC,GAAS,EAAK,KAAO,IAAK,CAAG,GAClC,GAAM,GAAQ,EAAK,MACrB,EAAG,EAAG,UAAU,EAET,CACL,KAAM,EAAG,QAAQ,YAAY,EAC7B,MAAO,CACT,CACF,IClKA,gCAMA,GAAI,IAAO,KACP,GAAQ,KACR,GAAW,KACX,GAAS,KACT,GAAO,KACP,GAAS,KACT,GAAU,KAUd,YAA2B,EAAM,CAQ/B,WAAqB,EAAS,CAC5B,GAAI,GAAW,EAAQ,eAErB,MAAO,GAAQ,eAAe,CAAW,EAE3C,KAAK,MAAQ,GAAM,yBAA2B,GAAK,CAAI,CAAC,EACxD,GAAI,GAAa,CAAC,EAClB,GAAO,GAAM,EAAY,CAAO,EAChC,KAAK,QAAU,GAAS,GAAc,CAAC,EAAG,KAAK,QAAQ,EACvD,KAAK,OAAS,CAAC,EACf,KAAK,KAAK,QAAS,GAAK,KAAM,KAAK,KAAK,CAAC,EAEzC,EAAY,KAAK,YAAa,IAAI,EAClC,KAAK,MAAQ,GAAK,KAAM,KAAK,KAAK,EAClC,KAAK,gBAAgB,EACrB,KAAK,UAAU,EACf,KAAK,WAAW,CAClB,CAEA,SAAY,UAAU,SAAW,CAAC,EAClC,EAAY,UAAU,QAAU,CAAC,EACjC,EAAY,UAAU,UAAY,CAAC,EACnC,EAAY,UAAU,KAAO,EAC7B,GAAO,EAAa,EAAO,EAC3B,GAAO,EAAY,UAAW,EAAM,EAE7B,CACT,CAMA,GAAO,QAAU,KC/DjB,mBAKA,GAAI,IAAQ,KAMZ,GAAO,QAAU,GAWjB,YAAmB,EAAM,EAAS,CAChC,GAAI,GAAM,GAAM,gBAAkB,CAAI,EACtC,SAAU,GAAW,CAAC,EAEf,SAAU,EAAM,CACrB,EAAO,CAAC,EAAE,MAAM,KAAK,SAAS,EAC9B,OAAO,IAAU,QAAO,GAAQ,CAAC,GACjC,EAAI,KAAM,CAAI,EACd,EAAQ,OAAS,GACb,OAAO,GAAM,KAAK,MAAM,OAAO,GAAO,CAAI,EAC1C,OAAO,GAAM,KAAK,CAAI,CAC5B,CACF,IClCA,gCAEA,GAAI,IAAiB,SAAU,EAAI,CAClC,GAAI,MAAO,IAAO,WAAY,KAAM,IAAI,WAAU,EAAK,oBAAoB,EAC3E,MAAO,EACR,EAEI,GAAa,SAAU,EAAU,CACpC,GAAI,GAAO,SAAS,eAAe,EAAE,EAAG,EAAO,EAAc,EAAI,EACjE,UAAI,GAAS,UAAY,CACxB,GAAI,GACJ,GAAK,EAGE,AAAI,GACV,GAAQ,EAAa,OAAO,CAAK,OAJtB,CACX,GAAI,CAAC,EAAc,OACnB,EAAQ,CACT,CAKA,GAFA,EAAe,EACf,EAAQ,KACJ,MAAO,IAAiB,WAAY,CACvC,EAAW,EACX,EAAe,KACf,EAAS,EACT,MACD,CAEA,IADA,EAAK,KAAQ,EAAI,EAAE,EAAI,EAChB,GACN,EAAW,EAAa,MAAM,EACzB,EAAa,QAAQ,GAAe,MACzC,EAAS,CAEX,CAAC,EAAE,QAAQ,EAAM,CAAE,cAAe,EAAK,CAAC,EACjC,SAAU,EAAI,CAEpB,GADA,GAAe,CAAE,EACb,EAAO,CACV,AAAI,MAAO,IAAU,WAAY,EAAQ,CAAC,EAAO,CAAE,EAC9C,EAAM,KAAK,CAAE,EAClB,MACD,CACA,EAAQ,EACR,EAAK,KAAQ,EAAI,EAAE,EAAI,CACxB,CACD,EAEA,GAAO,QAAW,UAAY,CAE7B,GAAK,MAAO,UAAY,UAAa,SAAY,MAAO,SAAQ,UAAa,WAC5E,MAAO,SAAQ,SAIhB,GAAI,MAAO,iBAAmB,WAC7B,MAAO,UAAU,EAAI,CAAE,eAAe,GAAe,CAAE,CAAC,CAAG,EAI5D,GAAK,MAAO,WAAa,UAAa,SAAU,CAC/C,GAAI,MAAO,mBAAqB,WAAY,MAAO,IAAW,gBAAgB,EAC9E,GAAI,MAAO,yBAA2B,WAAY,MAAO,IAAW,sBAAsB,CAC3F,CAIA,MAAI,OAAO,eAAiB,WACpB,SAAU,EAAI,CAAE,aAAa,GAAe,CAAE,CAAC,CAAG,EAIrD,MAAO,aAAe,YAAgB,MAAO,aAAe,SACzD,SAAU,EAAI,CAAE,WAAW,GAAe,CAAE,EAAG,CAAC,CAAG,EAGpD,IACR,EAAE,ICzEF,gCAMA,GAAI,IAAO,KACP,GAAS,KACT,GAAQ,KACR,GAAO,KACP,GAAc,KACd,GAAO,KAAwB,aAAc,CAAE,KAAM,EAAM,CAAC,EAC5D,GAAO,KAMP,GAAc,GAAO,QAAU,GAAY,YAAY,EACxD,OAAO,wBAAyB,EAAI,EACpC,OAAO,kBAAmB,EAAI,EAC9B,OAAO,aAAc,EAAK,EAC1B,OAAO,SAAU,EAAI,EACrB,OAAO,iBAAkB,EAAK,EAC9B,OAAO,mCAAoC,EAAI,EAC/C,OAAO,6BAA8B,CAAC,CAAC,EACvC,OAAO,2BAA4B,CAAC,CAAC,EAMpC,GAAoB,CACtB,KAAM,aACN,QAAS,OACX,EAWA,GAAW,UAAU,WAAa,UAAW,CAC3C,GAAI,GAAO,KAEX,GAAK,CACH,KAAM,cACN,cAAe,YACjB,CAAC,EAMD,GAAK,UAAW,CACd,GAAW,0BAA0B,CACnC,iBAAkB,EAAK,qBAAqB,KAAK,CAAI,EACrD,mBAAoB,EAAK,yBAAyB,KAAK,CAAI,EAC3D,iBAAkB,EAAK,qBAAqB,KAAK,CAAI,CACvD,CAAC,CACH,CAAC,EAED,KAAK,MAAM,CACb,EAuBA,GAAW,UAAU,MAAQ,SAAS,EAAO,CAC3C,GAAI,GAAO,KAAK,QACZ,EAAkB,EAAM,WAAW,EAGvC,AAAI,EAAgB,SAAW,EAAK,iCAClC,AAAI,EAAM,MAAM,IAAM,kBACpB,EAAgB,QAAU,KAAK,MAAM,EAAgB,QAAU,GAAG,EACzD,EAAM,MAAM,IAAM,mBAC3B,MAAO,GAAgB,QAKzB,EAAK,mCAAqC,IAC1C,EAAgB,SAEhB,GAAgB,QAAU,KAAK,MAAM,EAAgB,QAAU,GAAG,GAIpE,GAAI,GAAY,EAAM,MAAM,EAAE,QAAQ,KAAM,GAAG,EAC3C,EAAU,CACZ,KAAM,QACN,UAAW,EACX,KAAM,CACR,EAEA,GAAK,CAAO,EAEZ,GAAI,GAA2B,OAAO,yBACtC,GAAI,GAA4B,EAAyB,MAAO,CAC9D,GAAI,GAAoB,EAAM,QAAQ,YAAY,EAC9C,EACF,EAAkB,QAAU,EAAM,OAAO,GAAK,KAAK,UAAU,KAAK,EAAE,GAAG,EACrE,EACF,EAAkB,YAClB,EAAM,OAAO,GACb,KAAK,UAAU,KAAK,EAAE,OAAO,EAC/B,AAAI,GACF,EAAyB,MACvB,EACA,EACA,EACA,EAAQ,IACV,CAEJ,CACF,EAWA,GAAW,UAAU,KAAO,SAAS,EAAM,CACzC,GAAI,GAAW,EAAK,SAAS,EACzB,EAAO,EAAK,SAAS,EACrB,EAAO,KAAK,QAGhB,AAAI,GAAY,EAAK,uBACnB,KAAK,MAAM,EAAK,MAAM,CAAQ,CAAC,EAI7B,GAAQ,EAAK,iBACf,KAAK,MAAM,EAAK,MAAM,CAAI,CAAC,CAE/B,EAwBA,GAAW,UAAU,yBAA2B,SAAS,EAAiB,CACxE,GAAI,GAAa,EAAgB,WAC7B,EAAa,EAAgB,WAC7B,EAAW,EAAgB,SAC3B,EAAU,CAAE,YAAa,EAAkB,EAG3C,EAAgB,GAClB,SAAS,EAAS,EAAW,CAC3B,GAAI,GAAM,EACV,SAAI,EAAU,IAAM,EAAU,KACvB,CACT,EACA,CAAC,EACD,CACF,EAGI,EAAe,GAAK,CAAa,EAAE,KAAK,EACxC,EAAiB,GAAO,CAAa,EAAE,KAAK,EAGhD,GAAI,KAAK,QAAQ,OAAQ,CACvB,GAAI,GAAQ,CACV,aAAc,EAAW,GACzB,eAAgB,EAAW,KAC3B,YAAa,EAAa,KAAK,EAC/B,cAAe,EAAe,KAAK,IAAI,CACzC,EAWA,GANI,EAAW,UACb,GAAM,SAAW,EAAW,SAC5B,EAAQ,KAAO,CAAE,SAAU,EAAW,QAAS,GAI7C,EAAU,CAiBZ,OAZI,GAAiB,CAAC,EAClB,EAA4B,GAC9B,SAAS,EAAS,EAAS,EAAW,CACpC,GAAI,GAAM,EACV,UAAK,SAAS,EAAa,CACzB,EAAI,GAAe,CAAE,GAAI,EAAW,KAAM,EAAQ,IAAK,CACzD,EAAG,EAAQ,aAAa,EACjB,CACT,EACA,CAAC,EACD,CACF,EACS,EAAI,EAAG,EAAI,EAAa,OAAQ,IAAK,CAC5C,GAAI,GAAkB,EAAa,GAC/B,EAAgB,EAA0B,GAC9C,AAAI,GACF,GAAe,EAAc,IAAM,EAAc,KACrD,CAGA,EAAM,UAAY,GAAK,CAAc,EAClC,KAAK,EACL,KAAK,EACR,EAAM,YAAc,GAAO,CAAc,EACtC,KAAK,EACL,KAAK,IAAI,CACd,CAGA,AAAI,KAAK,QAAQ,gBAAgB,GAAM,eAAiB,GAIxD,GAAI,GAA6B,KAAK,QAAQ,2BAC1C,EAAkB,OAAO,KAAK,CAA0B,EACxD,EAAO,OAAO,YAAc,OAAO,WAAW,KAElD,GAAI,GAAQ,EAAgB,OAC1B,OAAS,GAAQ,EAAG,EAAQ,EAAgB,OAAQ,IAAS,CAC3D,GAAI,IAAc,EAAgB,GAC9B,GAAiB,EAA2B,IAChD,AAAI,MAAO,GAAK,IAAoB,KAClC,GAAM,IAAe,EAAK,IAE9B,CAIF,KAAK,UAAU,MAAM,oBAAqB,EAAO,CAAO,CAC1D,CAIA,GAAI,KAAK,QAAQ,WAAY,CAM3B,GAAI,GAAS,CAAC,EACd,EAAO,eAAiB,EAAW,MAAQ,EAAe,KAAK,IAAI,EAGnE,KAAK,UAAU,SAAS,CAAM,CAChC,CACF,EA4BA,GAAW,UAAU,qBAAuB,SAAS,EAAe,CAClE,GAAI,GAAa,EAAc,WAC3B,EAAY,EAAc,UAC1B,EAAU,CAAE,YAAa,EAAkB,EAG3C,EAAe,GACjB,SAAS,EAAS,EAAU,CAC1B,GAAI,GAAM,EACV,SAAI,EAAS,IAAM,EAAS,KACrB,CACT,EACA,CAAC,EACD,EAAc,SAChB,EAGI,EAAc,GAAK,CAAY,EAChC,KAAK,EACL,KAAK,EACJ,EAAgB,GAAO,CAAY,EACpC,KAAK,EACL,KAAK,IAAI,EAGZ,GAAI,KAAK,QAAQ,OAAQ,CACvB,GAAI,GAAQ,CACV,aAAc,EAAc,aAC5B,WAAY,EAAc,GAC1B,aAAc,EAAW,GACzB,eAAgB,EAAW,KAC3B,cAAe,EAAU,KACzB,YAAa,EAAU,GACvB,WAAY,EACZ,aAAc,EACd,qBAAsB,EAAc,oBACtC,EAKA,AAAI,EAAW,UACb,GAAM,SAAW,EAAW,SAC5B,EAAQ,KAAO,CAAE,SAAU,EAAW,QAAS,GAI7C,KAAK,QAAQ,gBAAgB,GAAM,eAAiB,GAIxD,GAAI,GAA2B,KAAK,QAAQ,yBACxC,EAAkB,OAAO,KAAK,CAAwB,EACtD,EAAO,OAAO,YAAc,OAAO,WAAW,YAClD,GAAI,GAAQ,EAAgB,OAC1B,OAAS,GAAQ,EAAG,EAAQ,EAAgB,OAAQ,IAAS,CAC3D,GAAI,GAAc,EAAgB,GAC9B,EAAiB,EAAyB,GAC9C,AAAI,MAAO,GAAK,GAAoB,KAClC,GAAM,GAAe,EAAK,GAE9B,CAIF,KAAK,UAAU,MAAM,oBAAqB,EAAO,CAAO,CAC1D,CAIA,GAAI,KAAK,QAAQ,WAAY,CAM3B,GAAI,GAAS,CAAC,EACd,EAAO,eAAiB,EAAW,MAAQ,EAAU,KAGrD,KAAK,UAAU,SAAS,CAAM,CAChC,CACF,EAcA,GAAW,UAAU,qBAAuB,SAAS,EAAU,CAC7D,GAAI,EACF,cAAO,4BAA8B,EAC9B,CAEX,EAiBA,GAAW,0BAA4B,SAAS,EAAU,CAaxD,GAAI,GAAmC,SACrC,EACA,EACA,CACA,GAAI,GAAO,OAAO,YAAc,OAAO,WAAW,KAC9C,EAAQ,GAAQ,EAAK,MACzB,GAAI,EAAO,CACT,GAAI,GAAoB,EAAM,kBAC9B,GAAI,EAAM,mBAAoB,CAG5B,OAFI,GAAuB,EAAM,mBAAmB,aAChD,EAAQ,GACH,EAAI,EAAG,EAAI,EAAM,kBAAkB,OAAQ,IAClD,GAAI,EAAM,kBAAkB,KAAO,EAAsB,CACvD,EAAQ,EACR,KACF,CAEF,AAAI,IAAU,IACZ,EAAkB,KAAK,CAAoB,EAE7C,EAAiB,EAAM,mBAAmB,QAAQ,CACpD,CAEA,OAAS,GAAI,EAAG,EAAI,EAAkB,OAAQ,IAAK,CACjD,GAAI,GAAsB,EAAkB,GACxC,EAAwB,CAC1B,WAAY,CACV,GAAI,EACJ,KAAM,EAAK,YAAY,GAAqB,IAC9C,EACA,WAAY,CAAC,EAGb,SAAU,EAAK,QAEjB,EAIA,AACE,EAAM,oBACN,IAAwB,EAAM,mBAAmB,cACjD,EAAM,mBAAmB,UAEzB,GAAsB,WAAW,SAC/B,EAAM,mBAAmB,UAM7B,OAFI,GACF,EAAM,gBAAgB,EAAsB,WAAW,IAChD,EAAI,EAAG,EAAI,EAAa,OAAQ,IAAK,CAC5C,GAAI,GAAK,EAAa,GAClB,EAAO,EAAK,WAAW,GAAI,KAC/B,EAAsB,WAAW,KAAK,CACpC,GAAI,EACJ,KAAM,CACR,CAAC,CACH,CACA,EAAmB,CAAqB,CAC1C,CACF,CACF,EAcI,EAA+B,SACjC,EACA,EACA,CACA,GAAI,GAAoB,SAAS,EAAI,EAAU,CAC7C,GAAI,GAAQ,OAAO,WAAW,KAAO,OAAO,WAAW,IAAI,OAAO,EAClE,GAAI,EAAO,CACT,GAAI,GAAkB,EAAM,kBAAkB,CAC5C,SAAU,EACZ,CAAC,EACG,EAAgB,EAAgB,GAEpC,AAAI,GAAU,GAAc,WAAW,SAAW,GAClD,EAAiB,CAAa,CAChC,CACF,EAEI,EAAgB,UAAW,CAC7B,GAAI,GAAQ,OAAO,WAAW,KAAO,OAAO,WAAW,IAAI,OAAO,EAClE,GAAI,EAAO,CACT,GAAI,GACF,EAAM,gBAAgB,GAAK,EAAM,gBAAgB,EAAE,SAErD,GAAI,EACF,SAAiB,CAAQ,EAClB,CAEX,CACF,EAOI,EAAgC,UAAW,CAC7C,OAAO,WAAa,OAAO,YAAc,CAAC,EAC1C,OAAO,WAAW,KAAK,CACrB,KAAM,cACN,OAAQ,CACN,KAAM,YACN,KAAM,iBACR,EACA,QAAS,SAAS,EAAO,CACvB,GAAI,GAAK,EAAM,KAAK,SAAS,GAC7B,EAAkB,CAAE,CACtB,CACF,CAAC,CACH,EAOI,EAAmC,UAAW,CAChD,OAAO,WAAa,OAAO,YAAc,CAAC,EAC1C,GAAI,GAAQ,OAAO,WAAW,KAAO,OAAO,WAAW,IAAI,OAAO,EAClE,GAAI,EAAO,CACT,GAAI,GAAW,EAAc,EACzB,EAAkB,EAAM,kBAAkB,CAC5C,SAAU,EACZ,CAAC,EACD,OAAS,KAAM,GACb,AAAI,EAAC,GAAE,eAAe,KAAK,EAAiB,CAAE,GAE5C,CAAI,EACF,EAAkB,EAAI,CAAQ,EAE9B,EAAkB,CAAE,EAI5B,KACE,QAAO,WAAW,KAAK,CACrB,KAAM,cACN,OAAQ,CACN,KAAM,YACN,KAAM,aACR,EACA,QAAS,UAAW,CAClB,EAAc,CAChB,CACF,CAAC,CAEL,EACA,EAAiC,EACjC,EAA8B,CAChC,EAEA,EACE,EAAS,iBACT,EAAS,kBACX,EACA,EACE,EAAS,iBACT,EAAS,gBACX,CACF,ICrnBA,gCAMA,GAAI,IAAM,KACN,GAAQ,KAER,GAAW,CAEb,qBAAsB,CAAC,CACrB,OAAQ,iBACR,OAAQ,SACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,iBACR,OAAQ,QACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,iBACR,OAAQ,aACV,CAAC,EACD,qBAAsB,CAAC,CACrB,OAAQ,iBACR,OAAQ,SACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,iBACR,OAAQ,WACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,iBACR,OAAQ,QACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,wBACR,OAAQ,SACV,CAAC,EACD,6BAA8B,CAAC,CAC7B,OAAQ,wBACR,OAAQ,WACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,sBACR,OAAQ,SACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,sBACR,OAAQ,WACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,gBACR,OAAQ,SACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,gBACR,OAAQ,SACV,CAAC,EACD,sBAAuB,CAAC,CACtB,OAAQ,gBACR,OAAQ,WACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,WACR,OAAQ,WACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,WACR,OAAQ,SACV,CAAC,EAGD,gBAAiB,CAAC,CAChB,OAAQ,YACR,OAAQ,QACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,YACR,OAAQ,SACV,CAAC,EAGD,iBAAkB,CAAC,CACjB,OAAQ,WACR,OAAQ,UACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,eACR,OAAQ,QACV,EAAG,CACD,OAAQ,mBACR,OAAQ,QACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,eACR,OAAQ,UACV,CAAC,EAGD,eAAgB,CAAC,CACf,OAAQ,UACR,OAAQ,SACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,UACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,UACR,OAAQ,OACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,UACR,OAAQ,SACV,CAAC,EACD,WAAY,CAAC,CACX,OAAQ,OACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,QACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,QACR,OAAQ,UACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,eACR,OAAQ,SACV,CAAC,EACD,gBAAiB,CAAC,CAChB,OAAQ,WACR,OAAQ,SACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,gBACR,OAAQ,QACV,CAAC,EACD,sBAAuB,CAAC,CACtB,OAAQ,gBACR,OAAQ,WACV,CAAC,EAGD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,SACR,OAAQ,QACV,CAAC,EACD,cAAe,CAAC,CACd,OAAQ,SACR,OAAQ,SACV,CAAC,EAGD,uBAAwB,CAAC,CACvB,OAAQ,UACR,OAAQ,mBACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,UACR,OAAQ,uBACV,CAAC,EACD,+BAAgC,CAAC,CAC/B,OAAQ,UACR,OAAQ,6BACV,EAAG,CACD,OAAQ,UACR,OAAQ,6BACV,CAAC,EACD,2BAA4B,CAAC,CAC3B,OAAQ,mBACR,OAAQ,eACV,CAAC,EAGD,cAAe,CAAC,CACd,OAAQ,UACR,OAAQ,QACV,CAAC,EACD,WAAY,CAAC,CACX,OAAQ,OACR,OAAQ,QACV,CAAC,EAGD,gBAAiB,CAAC,CAChB,OAAQ,UACR,OAAQ,UACV,CAAC,EAGD,qBAAsB,CAAC,CACrB,OAAQ,cACR,OAAQ,WACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,cACR,OAAQ,SACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,cACR,OAAQ,QACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,cACR,OAAQ,cACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,cACR,OAAQ,aACV,CAAC,EACD,mBAAoB,CAAC,CACnB,OAAQ,cACR,OAAQ,SACV,CAAC,EAGD,kBAAmB,CAAC,CAClB,OAAQ,UACR,OAAQ,YACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,YACR,OAAQ,QACV,CAAC,EACD,gBAAiB,CAAC,CAChB,OAAQ,YACR,OAAQ,SACV,CAAC,EACD,yBAA0B,CAAC,CACzB,OAAQ,oBACR,OAAQ,UACV,CAAC,EACD,uBAAwB,CAAC,CACvB,OAAQ,oBACR,OAAQ,QACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,oBACR,OAAQ,SACV,CAAC,EAGD,aAAc,CAAC,CACb,OAAQ,QACR,OAAQ,SACV,CAAC,EACD,eAAgB,CAAC,CACf,OAAQ,QACR,OAAQ,WACV,CAAC,EACD,iBAAkB,CAAC,CACjB,OAAQ,aACR,OAAQ,SACV,CAAC,EACD,kBAAmB,CAAC,CAClB,OAAQ,QACR,OAAQ,gBACV,CAAC,EACD,YAAa,CAAC,CACZ,OAAQ,QACR,OAAQ,QACV,CAAC,EACD,aAAc,CAAC,CACb,OAAQ,GACR,OAAQ,cACV,CAAC,EAGD,0BAA2B,CAAC,CAC1B,OAAQ,yBACR,OAAQ,OACV,CAAC,EACD,4BAA6B,CAAC,CAC5B,OAAQ,yBACR,OAAQ,SACV,CAAC,EACD,wBAAyB,CAAC,CACxB,OAAQ,oBACR,OAAQ,UACV,CAAC,EACD,oBAAqB,CAAC,CACpB,OAAQ,oBACR,OAAQ,MACV,CAAC,CACH,EA2BA,GAAO,QAAU,GAAM,SAAmB,EAAK,EAAO,EAAQ,CAC5D,GAAI,GAAS,GAAI,SAAS,EAAM,CAC9B,MAAO,IAAI,SAAS,EAAa,CAC/B,GAAI,GAAY,CAAC,EAAE,OAAO,MAAM,CAAC,EAAG,GAAI,SAAS,EAAO,CACtD,MAAO,GAAM,MAAM,GAAG,CACxB,EAAG,CAAW,CAAC,EACf,MAAO,SAAW,EAAU,KAAK,OAAO,EAAI,OAC9C,EAAG,CACD,CAAC,EAAK,OAAQ,EAAK,MAAM,EACzB,CAAC,EAAK,OAAQ,EAAK,MAAM,CAC3B,CAAC,EAAE,KAAK,GAAG,CACb,EAAG,CAAK,EACJ,EAAY,EAAO,KAAK,GAAG,EAAI,IACnC,SAAI,GAAU,GAAI,QAAO,EAAW,GAAG,EAChC,CACT,EAAG,CAAC,EAAG,EAAQ,ICrWf,0BAMA,GAAI,IAAU,KACV,GAAO,KACP,GAAS,KACT,GAAQ,KACR,GAAM,KACN,GAAQ,KACR,GAAK,KACL,GAAa,KACb,GAAa,KACb,GAAW,KACX,GAAY,KAMZ,GAAM,OAAO,UAAU,eAMvB,GAAO,UAAgB,CAAC,EAMxB,GAAU,OAAO,QACjB,GAAS,KAOb,GAAQ,CAAO,EAOf,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAQ,KAAK,MACjB,GAAS,CAAK,CAChB,EASA,EAAQ,OAAS,UAAW,CAC1B,MAAO,EACT,EAUA,EAAQ,KAAO,SAAS,EAAM,CAAC,EAW/B,EAAQ,MAAQ,SAAS,EAAO,CAAC,EA0CjC,EAAQ,IAAM,SAAS,EAAS,EAAK,CACnC,GAAI,GAAuB,GAAU,CAAG,EACpC,EAAc,GAAe,CAAO,EAExC,MAAI,KAAgB,UACX,CAAC,EAGH,GAAM,SAAS,EAAgB,EAAK,EAAK,CAC9C,GAAI,GACA,EAEJ,MAAI,KAAgB,OAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EACV,EAAS,GAGP,IAAgB,SAClB,GAAU,EAAI,IACd,EAAS,EAAI,OAGX,GAAU,CAAO,IAAM,GACzB,EAAe,KAAK,CAAM,EAGrB,CACT,EAAG,CAAC,EAAG,CAAO,CAChB,EAYA,EAAQ,OAAS,SAAS,EAAQ,CAChC,GAAI,EAAC,KAAK,GACV,IAAI,GAAO,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EAClD,MAAK,MAAK,OAEV,MAAK,MAAM,aAAc,EAAQ,CAAI,EAC9B,KAAK,GAAQ,MAAM,KAAM,CAAI,GAHX,KAAK,MAAM,EAAQ,CAAI,EAIlD,EAUA,EAAQ,MAAQ,SAAS,EAAQ,EAAM,CACrC,KAAK,OAAO,KAAK,CAAE,OAAQ,EAAQ,KAAM,CAAK,CAAC,CACjD,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,OAAS,GACd,GAAI,GAAO,KAEX,GAAK,SAAS,EAAM,CAClB,EAAK,EAAK,QAAQ,MAAM,EAAM,EAAK,IAAI,CACzC,EAAG,KAAK,MAAM,EAGd,KAAK,OAAO,OAAS,CACvB,EAQA,EAAQ,MAAQ,UAAW,CACzB,OAAS,GAAI,EAAG,EAAI,KAAK,QAAQ,OAAQ,IACvC,OAAO,KAAK,QAAQ,IAAM,OAG5B,OAAO,QAAU,GACjB,OAAO,OAAS,EAClB,EAYA,EAAQ,KAAO,SAAS,EAAM,EAAQ,EAAU,CAE9C,AAAI,MAAO,IAAS,YAAc,GAAW,EAAM,EAAS,KAAM,EAAO,MACrE,GAAQ,MAAO,IAAS,UAAY,GAAW,EAAQ,EAAS,EAAM,EAAO,MAC7E,MAAO,IAAW,YAAc,GAAW,EAAQ,EAAS,MAGhE,EAAO,GAAQ,UACf,EAAS,GAAU,CAAC,EAEpB,EAAS,KAAK,OAAO,CAAM,EAC3B,GAAI,GAAW,KAAK,UAAU,GAC9B,GAAI,CAAC,EAAU,KAAM,IAAI,OAAM,GAAI,6BAA8B,CAAI,CAAC,EACtE,GAAI,GAAQ,GAAO,EAAU,CAAM,EACnC,EAAW,GAAY,GACvB,GAAI,GAAO,KACP,EAEJ,OAAQ,EAAS,UACZ,MACH,EAAM,MAAQ,EACd,EAAM,OAAS,EACf,EAAK,GAAU,EAAO,CAAQ,EAC9B,UACG,SACH,EAAK,GAAW,EAAO,SAAS,EAAK,CACnC,GAAI,CAAC,EAAK,MAAO,GAAS,EAC1B,EAAK,MAAM,gCAAiC,EAAK,KAAM,CAAG,CAC5D,CAAC,EAED,MAAO,GAAM,IACb,GAAK,SAAS,EAAK,EAAK,CACtB,EAAG,aAAa,EAAK,CAAG,CAC1B,EAAG,CAAK,EACR,UACG,SACH,EAAK,GAAW,EAAO,CAAQ,EAC/B,eAKF,MAAO,EACT,EAWA,EAAQ,OAAS,SAAS,EAAQ,CAChC,EAAS,GAAU,CAAC,EACpB,GAAI,GAAQ,KAAK,MAAM,GAAI,MAAK,EAAE,QAAQ,EAAI,IAAO,EACrD,MAAK,GAAO,eAAe,OAAO,GAAG,GAAO,MAAQ,GACpD,GAAK,SAAS,EAAK,EAAK,CACtB,AAAK,EAAO,eAAe,CAAG,GAAG,GAAO,GAAO,EACjD,EAAG,KAAK,OAAO,EACR,CACT,EAQA,EAAQ,MAAQ,UAAW,CACzB,KAAK,KAAK,OAAO,CACnB,EASA,EAAQ,gBAAkB,UAAW,CACnC,GAAI,GAAa,KAAK,WACtB,KAAK,WAAa,UAAW,CAC3B,KAAK,MAAM,YAAY,EACvB,KAAK,aAAe,GACpB,GAAI,GAAM,EAAW,MAAM,KAAM,SAAS,EAC1C,YAAK,KAAK,YAAY,EACf,CACT,CACF,EASA,EAAQ,UAAY,UAAW,CAC7B,GAAI,GAAO,KAAK,KACZ,EAAqB,GACzB,KAAK,KAAO,UAAW,CACrB,GAAI,KAAK,kBAAoB,CAAC,EAAoB,CAChD,EAAqB,GACrB,MACF,CACA,MAAO,GAAK,MAAM,KAAM,SAAS,CACnC,CACF,EASA,EAAQ,WAAa,UAAW,CAC9B,GAAI,GAAI,KAAK,MACb,KAAK,MAAQ,SAAS,EAAO,CAC3B,GAAI,GAAQ,EAAM,MAAM,EACpB,EACA,EAEJ,OAAS,KAAU,IACjB,GAAI,GAAI,KAAK,GAAQ,CAAM,EAAG,CAC5B,GAAI,GAAS,GAAO,GAEpB,GADI,CAAC,KAAK,IACN,CAAC,EAAO,KAAK,CAAK,EAAG,SACzB,EAAM,KAAK,GAAQ,MAAM,KAAM,SAAS,EACxC,EAAS,GACT,KACF,CAGF,MAAK,IAAQ,GAAM,EAAE,MAAM,KAAM,SAAS,GACnC,CACT,CACF,EAUA,YAAwB,EAAS,CAC/B,MAAI,IAAG,MAAM,CAAO,EACX,GAAM,GAAS,CAAO,EAAI,QAAU,QAEzC,GAAG,OAAO,CAAO,EAAU,MACxB,SACT,CAaA,YAAiB,EAAM,CAGrB,MAFI,GAAC,GAAG,OAAO,CAAI,GACf,CAAC,GAAG,OAAO,EAAK,GAAG,GACnB,CAAC,GAAI,KAAK,EAAM,OAAO,EAE7B,CAWA,YAAmB,EAAO,EAAI,CAC5B,EAAK,GAAM,UAAW,CAAC,EACvB,GAAI,GAAM,GAAI,OACd,SAAI,QAAU,GAAM,EAAI,uBAAwB,CAAG,EACnD,EAAI,OAAS,UAAW,CAAE,EAAG,CAAG,EAChC,EAAI,IAAM,EAAM,IAChB,EAAI,MAAQ,EACZ,EAAI,OAAS,EACN,CACT,CAYA,YAAe,EAAI,EAAS,EAAK,CAC/B,MAAO,UAAS,EAAG,CACjB,EAAI,GAAK,OAAO,MAChB,GAAI,GAAM,GAAI,OAAM,CAAO,EAC3B,EAAI,MAAQ,EACZ,EAAI,OAAS,EACb,EAAG,CAAG,CACR,CACF,CAWA,YAAgB,EAAU,EAAQ,CAChC,MAAO,IAAM,SAAS,EAAO,EAAK,EAAK,CACrC,SAAM,GAAO,EAAI,QAAQ,uBAAwB,SAAS,EAAG,EAAI,CAC/D,MAAO,GAAO,EAChB,CAAC,EACM,CACT,EAAG,CAAC,EAAG,EAAS,KAAK,CACvB,ICldA,2BAMA,GAAI,IAAU,KACV,GAAS,KACT,GAAO,KACP,GAAW,KAOf,GAAQ,EAAO,EAYf,GAAQ,OAAS,SAAS,EAAK,EAAO,CACpC,YAAK,UAAU,SAAS,GAAO,EACxB,IACT,EAsBA,GAAQ,QAAU,SAAS,EAAM,CAC/B,YAAK,OAAO,EAAM,CAAC,CAAC,EACpB,KAAK,UAAU,GAAQ,SAAS,EAAK,CACnC,MAAO,MAAK,IAAI,KAAK,QAAQ,GAAO,CAAG,CACzC,EACO,IACT,EAWA,GAAQ,OAAS,SAAS,EAAK,CAC7B,YAAK,UAAU,QAAQ,KAAK,CAAG,EACxB,IACT,EAUA,GAAQ,gBAAkB,UAAW,CACnC,YAAK,UAAU,iBAAmB,GAC3B,IACT,EASA,GAAQ,YAAc,UAAW,CAC/B,YAAK,UAAU,aAAe,GACvB,IACT,EASA,GAAQ,kBAAoB,UAAW,CACrC,YAAK,UAAU,mBAAqB,GAC7B,IACT,EAaA,GAAQ,IAAM,SAAS,EAAM,EAAK,CAChC,MAAI,IAAO,MACT,GAAM,EACN,EAAO,WAET,KAAK,UAAU,UAAU,GAAQ,GAAU,CAAG,EACvC,IACT,EAcA,YAAmB,EAAK,CAEtB,EAAM,EAAI,QAAQ,SAAU,aAAa,EAEzC,GAAI,GAAK,GAAO,CAAG,EACf,EAAQ,CAAC,EAEb,UAAK,SAAS,EAAM,CAElB,GAAI,GAAO,EAAK,OAAS,WAAa,MAAQ,EAAK,KACnD,AAAI,CAAC,GAAS,EAAK,KAAO,IAAK,CAAG,GAClC,GAAM,GAAQ,EAAK,MACrB,EAAG,EAAG,UAAU,EAET,CACL,KAAM,EAAG,QAAQ,YAAY,EAC7B,MAAO,CACT,CACF,IClKA,gCAMA,GAAI,IAAO,KACP,GAAQ,KACR,GAAW,KACX,GAAS,KACT,GAAO,KACP,GAAS,KACT,GAAU,KAUd,YAA2B,EAAM,CAQ/B,WAAqB,EAAS,CAC5B,GAAI,GAAW,EAAQ,eAErB,MAAO,GAAQ,eAAe,CAAW,EAE3C,KAAK,MAAQ,GAAM,yBAA2B,GAAK,CAAI,CAAC,EACxD,GAAI,GAAa,CAAC,EAClB,GAAO,GAAM,EAAY,CAAO,EAChC,KAAK,QAAU,GAAS,GAAc,CAAC,EAAG,KAAK,QAAQ,EACvD,KAAK,OAAS,CAAC,EACf,KAAK,KAAK,QAAS,GAAK,KAAM,KAAK,KAAK,CAAC,EAEzC,EAAY,KAAK,YAAa,IAAI,EAClC,KAAK,MAAQ,GAAK,KAAM,KAAK,KAAK,EAClC,KAAK,gBAAgB,EACrB,KAAK,UAAU,EACf,KAAK,WAAW,CAClB,CAEA,SAAY,UAAU,SAAW,CAAC,EAClC,EAAY,UAAU,QAAU,CAAC,EACjC,EAAY,UAAU,UAAY,CAAC,EACnC,EAAY,UAAU,KAAO,EAC7B,GAAO,EAAa,EAAO,EAC3B,GAAO,EAAY,UAAW,EAAM,EAE7B,CACT,CAMA,GAAO,QAAU,KC/DjB,mBAKA,GAAI,IAAO,KAMX,GAAO,QAAU,GAejB,YAAgB,EAAK,EAAG,CACtB,SAAK,GAAM,GACJ,AAAW,GAAK,CAAG,GAAnB,QACH,GAAO,MAAM,EAAK,CAAE,EACpB,GAAO,OAAO,EAAK,CAAE,CAC3B,CAWA,GAAO,MAAQ,SAAS,EAAK,EAAG,CAG9B,OAFI,GAAM,CAAC,EAEF,EAAI,EAAG,EAAI,EAAI,OAAQ,EAAE,EAChC,AAAK,EAAG,EAAI,GAAI,CAAC,GAAG,GAAI,EAAI,QAAU,EAAI,IAG5C,MAAO,EACT,EAWA,GAAO,OAAS,SAAS,EAAK,EAAG,CAC/B,GAAI,GAAM,CAAC,EAEX,OAAS,KAAK,GACZ,AAAI,EAAI,eAAe,CAAC,GAAK,CAAC,EAAG,EAAI,GAAI,CAAC,GACxC,GAAI,GAAK,EAAI,IAIjB,MAAO,EACT,EAWA,GAAO,MACP,GAAO,KAAO,SAAS,EAAK,EAAM,CAChC,MAAK,OAAM,QAAQ,CAAK,GAAG,GAAQ,CAAC,CAAK,GAClC,GAAO,EAAK,SAAS,EAAM,CAChC,MAAO,AAAM,GAAM,QAAQ,GAAK,CAAK,CAAC,GAA/B,EACT,CAAC,CACH,EAUA,YAAiB,EAAM,CACrB,MAAO,AAAQ,IAAR,IACT,ICpGA,gCAKA,GAAI,IAAc,KACd,GAAS,KAKT,GAAO,GAAO,QAAU,GAAY,oBAAoB,EACzD,OAAO,MAAM,EACb,OAAO,cAAc,EACrB,OAAO,iBAAkB,CAAC,CAAC,EAC3B,OAAO,mBAAoB,MAAM,EACjC,OAAO,eAAgB,KAAK,EAC5B,OAAO,mBAAoB,OAAQ,EACnC,OAAO,eAAgB,EAAI,EAC3B,OAAO,cAAe,EAAE,EACxB,OAAO,6BAA8B,EAAK,EAC1C,OAAO,8BAA+B,EAAK,EAC3C,OAAO,kCAAmC,EAAK,EAC/C,OAAO,yBAA0B,EAAK,EACtC,OAAO,0BAA2B,QAAQ,EAC1C,OAAO,iBAAkB,CAAC,CAAC,EAuB3B,OAAO,4BAA6B,CAAC,CAAC,EACtC,IACC,yFACF,EASF,GAAI,UAAU,WAAa,UAAW,CACpC,OAAO,aAAe,OAAO,cAAgB,CAAC,EAC9C,OAAO,KAAO,UAAW,CACvB,OAAO,aAAa,KAAK,SAAS,CACpC,EAOA,OAAO,KAAK,KAAM,GAAI,KAAM,EAE5B,GAAI,GAAO,KAAK,QACZ,EAAiB,EAAK,eAO1B,GAAI,GAAC,EAAe,QAAU,EAAK,wBAInC,IAAI,GAAS,CAKX,eAAgB,EAAK,2BAMrB,cAAe,EAAK,aAMpB,cAAe,EAAK,iBAMpB,cAAe,EAAK,aAMpB,eAAgB,EAAK,gBACvB,EAEI,EAAO,CAKT,CAAC,CAAE,aAAc,EAAK,WAAY,CAAC,EAMnC,CAAC,uBAAwB,EAAK,2BAA2B,EAMzD,CAAC,mCAAoC,EAAK,+BAA+B,CAC3E,EAGI,EAAO,KACX,KAAK,KAAK,CAAE,cAAe,EAAe,EAAG,EAAG,UAAW,CAMzD,OAAS,GAAI,EAAG,EAAI,EAAe,OAAQ,IACzC,OAAO,KAAK,SAAU,EAAe,GAAI,CAAM,EAQjD,OAAS,GAAI,EAAG,EAAI,EAAK,OAAQ,IAAK,CAEpC,GAAI,GAAO,EAAK,GAAG,MAAM,CAAC,EAC1B,EAAK,QAAQ,KAAK,EAClB,OAAO,KAAK,MAAM,KAAM,CAAI,CAC9B,CAEA,EAAK,MAAM,CACb,CAAC,EACH,EAQA,GAAI,UAAU,OAAS,UAAW,CAChC,MAAO,CAAC,CACN,QAAO,cAAgB,MAAM,UAAU,OAAS,OAAO,aAAa,KAExE,EAQA,GAAI,UAAU,SAAW,SAAS,EAAU,CAC1C,GAAI,GAAO,KAAK,QACZ,EAAuB,EAAK,eAE5B,EAAiB,CAAC,EAGtB,OAAS,KAAc,GACrB,GAAI,EAAC,EAAqB,eAAe,CAAU,EAInD,IAAI,GAAW,EAAqB,GAChC,EAAQ,EAAS,MAAM,CAAU,EAErC,EAAe,GAAY,EAc7B,GAAI,GAAS,EAAS,OAAO,EACzB,EAAyB,EAAK,0BAA4B,0BAA4B,EAAK,0BAA4B,kBAC3H,AAAI,GAAU,GACZ,GAAe,QAAU,GAGvB,OAAO,KAAK,CAAc,EAAE,QAC9B,OAAO,KAAK,MAAO,kBAAmB,CAAc,CAExD,EAQA,GAAI,UAAU,MAAQ,SAAS,EAAO,CACpC,OAAO,KAAK,QAAS,aAAc,CACjC,SAAU,EAAM,QAAQ,CAC1B,CAAC,CACH,EAQA,GAAI,UAAU,KAAO,SAAS,EAAM,CAGlC,GAAI,MAAK,QAAQ,2BAIjB,IAAI,GAAQ,EAAK,WAAW,EACxB,EAAO,EAAK,SAAS,EAErB,EAAe,EAAM,IACrB,EAAe,EAAK,SAAS,EAC7B,EAAY,GAAQ,EAAM,MAE9B,OAAO,KAAK,QAAS,YAAa,CAChC,cAAe,EACf,cAAe,EACf,WAAY,CACd,CAAC,EACH,EASA,GAAI,UAAU,MAAQ,SAAS,EAAO,CAIpC,OAFI,GAAW,KAAK,QAAQ,0BAEnB,EAAI,EAAG,EAAI,EAAS,OAAQ,IAAK,CACxC,GAAI,GAAU,EAAS,GACvB,GAAI,MAAO,IAAY,SAIvB,IAAI,GAAe,EAAQ,aACvB,EAAc,EAAQ,YAE1B,GAAI,GAAC,GAAgB,CAAC,GAAe,IAAiB,EAAM,MAAM,GAIlE,IAAI,GAAoB,EAAQ,YAAc,CAAC,EAC3C,EAAa,CAAC,EAElB,GAAM,YAA6B,OASnC,QAAS,GAAI,EAAG,EAAI,EAAkB,OAAQ,IAAK,CACjD,GAAI,GAAM,EAAkB,IAAM,CAAC,EACnC,GAAI,QAAO,IAAQ,UAAY,CAAC,EAAI,KAAO,CAAC,EAAI,OAIhD,IAAI,GAAQ,EAAI,MACZ,EAAQ,EAAM,MAAM,EAAI,GAAG,EAC/B,EAAW,GAAS,EACtB,CAEA,OAAO,KAAK,QAAS,EAAa,CAAU,IAC9C,CACF,ICvTA,mBACA,GAAU,GAAO,QAAU,GAE3B,YAAc,EAAI,CAChB,MAAO,GAAI,QAAQ,aAAc,EAAE,CACrC,CAEA,GAAQ,KAAO,SAAS,EAAI,CAC1B,MAAO,GAAI,QAAQ,OAAQ,EAAE,CAC/B,EAEA,GAAQ,MAAQ,SAAS,EAAI,CAC3B,MAAO,GAAI,QAAQ,OAAQ,EAAE,CAC/B,ICbA,mBAIA,GAAI,IAAW,OAAO,UAAU,SAUhC,GAAO,QAAU,SAAS,EAAI,CAC5B,OAAQ,GAAS,KAAK,CAAG,OAClB,gBAAiB,MAAO,WACxB,kBAAmB,MAAO,aAC1B,qBAAsB,MAAO,gBAC7B,iBAAkB,MAAO,YACzB,iBAAkB,MAAO,QAGhC,MAAI,KAAQ,KAAa,OACrB,IAAQ,OAAkB,YAC1B,IAAQ,EAAY,MACpB,GAAO,EAAI,WAAa,EAAU,UAEtC,GAAM,EAAI,QACN,EAAI,QAAQ,EACZ,OAAO,UAAU,QAAQ,MAAM,CAAG,EAE/B,MAAO,GAChB,ICjCA,cAKA,GAAI,IAAS,mBACT,GAAS,mBACT,GAAO,KACP,GAAO,KAEP,GAAU,iBAUd,GAAQ,MAAQ,SAAS,EAAI,CAC3B,GAAI,AAAY,MAAO,IAAnB,SAAwB,MAAO,CAAC,EAGpC,GADA,EAAM,GAAK,CAAG,EACV,AAAM,GAAN,GAAW,MAAO,CAAC,EACvB,AAAI,AAAO,EAAI,OAAO,CAAC,GAAnB,KAAsB,GAAM,EAAI,MAAM,CAAC,GAI3C,OAFI,GAAM,CAAC,EACP,EAAQ,EAAI,MAAM,GAAG,EAChB,EAAI,EAAG,EAAI,EAAM,OAAQ,IAAK,CACrC,GAAI,GAAQ,EAAM,GAAG,MAAM,GAAG,EAC1B,EAAM,GAAO,EAAM,EAAE,EACrB,EAEJ,GAAI,EAAI,GAAQ,KAAK,CAAG,EAAG,CACzB,EAAI,EAAE,IAAM,EAAI,EAAE,KAAO,CAAC,EAC1B,EAAI,EAAE,IAAI,EAAE,IAAM,GAAO,EAAM,EAAE,EACjC,QACF,CAEA,EAAI,EAAM,IAAM,AAAQ,EAAM,IAAd,KACZ,GACA,GAAO,EAAM,EAAE,CACrB,CAEA,MAAO,EACT,EAUA,GAAQ,UAAY,SAAS,EAAI,CAC/B,GAAI,CAAC,EAAK,MAAO,GACjB,GAAI,GAAQ,CAAC,EAEb,OAAS,KAAO,GAAK,CACnB,GAAI,GAAQ,EAAI,GAEhB,GAAI,AAAW,GAAK,CAAK,GAArB,QAAwB,CAC1B,OAAS,GAAI,EAAG,EAAI,EAAM,OAAQ,EAAE,EAClC,EAAM,KAAK,GAAO,EAAM,IAAM,EAAI,GAAG,EAAI,IAAM,GAAO,EAAM,EAAE,CAAC,EAEjE,QACF,CAEA,EAAM,KAAK,GAAO,CAAG,EAAI,IAAM,GAAO,EAAI,EAAI,CAAC,CACjD,CAEA,MAAO,GAAM,KAAK,GAAG,CACvB,IC1EA,mBAKA,GAAO,QAAU,SAAU,EAAK,CAC9B,OAAQ,UAAU,YACX,GAAG,MAAO,IAAM,MAChB,GAAG,MAAO,IAAU,CAAG,EAEhC,EAUA,YAAoB,EAAK,CACvB,MAAO,IAAM,EAAI,SAAW,EAAM,QAAU,CAC9C,CASA,aAAkB,CAChB,MACE,UAAS,UAAY,UACrB,SAAS,UAAY,mBAEzB,ICpCA,gCAMA,GAAI,IAAS,KACT,GAAO,KACP,GAAc,KACd,GAAO,KACP,GAAc,KACd,GAAW,KAMX,GAAM,OAAO,UAAU,eAMvB,GAAU,GAAO,QAAU,GAAY,QAAQ,EAChD,gBAAgB,EAChB,OAAO,IAAI,EACX,OAAO,OAAO,EACd,OAAO,OAAO,EACd,OAAO,WAAW,EAClB,OAAO,YAAa,EAAE,EACtB,OAAO,QAAS,EAAE,EAClB,OAAO,QAAS,EAAE,EAClB,IAAI,OAAQ,4CAA4C,EACxD,IAAI,QAAS,4CAA4C,EAU5D,GAAO,UAAU,WAAa,UAAW,CACvC,OAAO,MAAQ,KAAK,QAAQ,MAC5B,OAAO,MAAQ,KAAK,QAAQ,MAC5B,GAAI,GAAO,GAAS,EAAI,QAAU,OAClC,KAAK,KAAK,EAAM,KAAK,KAAK,CAC5B,EASA,GAAO,UAAU,OAAS,UAAW,CACnC,MAAO,CAAC,CAAC,OAAO,SAClB,EASA,GAAO,UAAU,SAAW,SAAS,EAAU,CAC7C,GAAI,GAAS,EAAS,OAAO,EACzB,EAAQ,EAAS,MAAM,EAG3B,GAFI,GAAO,GAAO,MAAQ,GAEtB,IAAW,GAEX,EAAC,EAAO,MAEZ,IAAI,GAAY,KAAK,oBAAoB,EACzC,EAAU,SAAW,EAAO,MAC5B,GAAK,6BAA+B,GAAY,UAAU,CAAS,CAAC,EACtE,EASA,GAAO,UAAU,oBAAsB,UAAW,CAIhD,GAAI,GAAY,CACd,WAAY,OAAO,MACnB,YAAa,OAAO,MACpB,UAAW,GAAO,YAAe,MAAK,QAAQ,MAAQ,IAAI,EAC1D,IAAK,EACL,WAAY,GAAO,aAAgB,MAAK,QAAQ,MAAQ,IAAI,CAC9D,EAGI,EAAc,GAAM,EAGpB,EAAY,CAAC,UAAU,EAkB3B,GAfA,GAAK,SAAS,EAAK,CACjB,AAAI,IAAO,IAAa,GAAU,GAAO,EAAY,GACvD,EAAG,CAAS,EAGR,OAAO,wBAA0B,QACnC,GAAU,uBAAyB,OAAO,uBAExC,OAAO,cAAgB,QACzB,GAAU,cAAgB,OAAO,aAM/B,OAAO,IAAM,OAAO,GAAG,SACzB,OAAS,KAAY,GACnB,GAAI,GAAI,KAAK,EAAW,CAAQ,EAAG,CACjC,GAAI,GAAM,OAAO,GAAG,QAAQ,GAE5B,AAAI,GAAK,GAAU,GAAY,EACjC,EAIJ,MAAO,EACT,EAWA,aAAsB,CACpB,GAAI,GAAI,OAAO,GAQf,MAPI,GAAC,GACD,CAAC,EAAE,SAIH,OAAO,EAAE,QAAQ,SAAS,IAAM,SAChC,CAAC,EAAE,QAAQ,OACX,CAAC,EAAE,QAAQ,UAEjB,CASA,aAAiB,CACf,MAAO,IAAY,MAAM,SAAS,OAAO,MAAM,CAAC,CAAC,CACnD,ICvKA,OAAsB,SAEhB,GAAe,CACnB,KACA,KACA,KACA,KACA,IACF,EAEA,GAAa,QAAQ,WAAU,IAAI,KAAK,UAAS,CAAC,EAElD,OAAO,UAAY",
  "names": []
}
